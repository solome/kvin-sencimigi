function _mergeNamespaces(ca,ga){return ga.forEach(function(ya){ya&&typeof ya!="string"&&!Array.isArray(ya)&&Object.keys(ya).forEach(function(_a){if(_a!=="default"&&!(_a in ca)){var _s=Object.getOwnPropertyDescriptor(ya,_a);Object.defineProperty(ca,_a,_s.get?_s:{enumerable:!0,get:function(){return ya[_a]}})}})}),Object.freeze(Object.defineProperty(ca,Symbol.toStringTag,{value:"Module"}))}const p$5=function(){const ga=document.createElement("link").relList;if(ga&&ga.supports&&ga.supports("modulepreload"))return;for(const _s of document.querySelectorAll('link[rel="modulepreload"]'))_a(_s);new MutationObserver(_s=>{for(const Ss of _s)if(Ss.type==="childList")for(const Ms of Ss.addedNodes)Ms.tagName==="LINK"&&Ms.rel==="modulepreload"&&_a(Ms)}).observe(document,{childList:!0,subtree:!0});function ya(_s){const Ss={};return _s.integrity&&(Ss.integrity=_s.integrity),_s.referrerpolicy&&(Ss.referrerPolicy=_s.referrerpolicy),_s.crossorigin==="use-credentials"?Ss.credentials="include":_s.crossorigin==="anonymous"?Ss.credentials="omit":Ss.credentials="same-origin",Ss}function _a(_s){if(_s.ep)return;_s.ep=!0;const Ss=ya(_s);fetch(_s.href,Ss)}};p$5();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(ca){if(ca.__esModule)return ca;var ga=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(ca).forEach(function(ya){var _a=Object.getOwnPropertyDescriptor(ca,ya);Object.defineProperty(ga,ya,_a.get?_a:{enumerable:!0,get:function(){return ca[ya]}})}),ga}var reactDom={exports:{}},reactDom_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(ca){return ca===null||typeof ca!="object"?null:(ca=z$2&&ca[z$2]||ca["@@iterator"],typeof ca=="function"?ca:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$2={};function E$3(ca,ga,ya){this.props=ca,this.context=ga,this.refs=D$2,this.updater=ya||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(ca,ga){if(typeof ca!="object"&&typeof ca!="function"&&ca!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ca,ga,"setState")};E$3.prototype.forceUpdate=function(ca){this.updater.enqueueForceUpdate(this,ca,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$2(ca,ga,ya){this.props=ca,this.context=ga,this.refs=D$2,this.updater=ya||B$2}var H$2=G$2.prototype=new F$2;H$2.constructor=G$2;C$3(H$2,E$3.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ca,ga,ya){var _a,_s={},Ss=null,Ms=null;if(ga!=null)for(_a in ga.ref!==void 0&&(Ms=ga.ref),ga.key!==void 0&&(Ss=""+ga.key),ga)J$1.call(ga,_a)&&!L$3.hasOwnProperty(_a)&&(_s[_a]=ga[_a]);var Es=arguments.length-2;if(Es===1)_s.children=ya;else if(1<Es){for(var Cs=Array(Es),Ts=0;Ts<Es;Ts++)Cs[Ts]=arguments[Ts+2];_s.children=Cs}if(ca&&ca.defaultProps)for(_a in Es=ca.defaultProps,Es)_s[_a]===void 0&&(_s[_a]=Es[_a]);return{$$typeof:l$3,type:ca,key:Ss,ref:Ms,props:_s,_owner:K$2.current}}function N$3(ca,ga){return{$$typeof:l$3,type:ca.type,key:ga,ref:ca.ref,props:ca.props,_owner:ca._owner}}function O$3(ca){return typeof ca=="object"&&ca!==null&&ca.$$typeof===l$3}function escape$1(ca){var ga={"=":"=0",":":"=2"};return"$"+ca.replace(/[=:]/g,function(ya){return ga[ya]})}var P$3=/\/+/g;function Q$2(ca,ga){return typeof ca=="object"&&ca!==null&&ca.key!=null?escape$1(""+ca.key):ga.toString(36)}function R$3(ca,ga,ya,_a,_s){var Ss=typeof ca;(Ss==="undefined"||Ss==="boolean")&&(ca=null);var Ms=!1;if(ca===null)Ms=!0;else switch(Ss){case"string":case"number":Ms=!0;break;case"object":switch(ca.$$typeof){case l$3:case n$3:Ms=!0}}if(Ms)return Ms=ca,_s=_s(Ms),ca=_a===""?"."+Q$2(Ms,0):_a,I$2(_s)?(ya="",ca!=null&&(ya=ca.replace(P$3,"$&/")+"/"),R$3(_s,ga,ya,"",function(Ts){return Ts})):_s!=null&&(O$3(_s)&&(_s=N$3(_s,ya+(!_s.key||Ms&&Ms.key===_s.key?"":(""+_s.key).replace(P$3,"$&/")+"/")+ca)),ga.push(_s)),1;if(Ms=0,_a=_a===""?".":_a+":",I$2(ca))for(var Es=0;Es<ca.length;Es++){Ss=ca[Es];var Cs=_a+Q$2(Ss,Es);Ms+=R$3(Ss,ga,ya,Cs,_s)}else if(Cs=A$3(ca),typeof Cs=="function")for(ca=Cs.call(ca),Es=0;!(Ss=ca.next()).done;)Ss=Ss.value,Cs=_a+Q$2(Ss,Es++),Ms+=R$3(Ss,ga,ya,Cs,_s);else if(Ss==="object")throw ga=String(ca),Error("Objects are not valid as a React child (found: "+(ga==="[object Object]"?"object with keys {"+Object.keys(ca).join(", ")+"}":ga)+"). If you meant to render a collection of children, use an array instead.");return Ms}function S$3(ca,ga,ya){if(ca==null)return ca;var _a=[],_s=0;return R$3(ca,_a,"","",function(Ss){return ga.call(ya,Ss,_s++)}),_a}function T$2(ca){if(ca._status===-1){var ga=ca._result;ga=ga(),ga.then(function(ya){(ca._status===0||ca._status===-1)&&(ca._status=1,ca._result=ya)},function(ya){(ca._status===0||ca._status===-1)&&(ca._status=2,ca._result=ya)}),ca._status===-1&&(ca._status=0,ca._result=ga)}if(ca._status===1)return ca._result.default;throw ca._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$2};react_production_min.Children={map:S$3,forEach:function(ca,ga,ya){S$3(ca,function(){ga.apply(this,arguments)},ya)},count:function(ca){var ga=0;return S$3(ca,function(){ga++}),ga},toArray:function(ca){return S$3(ca,function(ga){return ga})||[]},only:function(ca){if(!O$3(ca))throw Error("React.Children.only expected to receive a single React element child.");return ca}};react_production_min.Component=E$3;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(ca,ga,ya){if(ca==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ca+".");var _a=C$3({},ca.props),_s=ca.key,Ss=ca.ref,Ms=ca._owner;if(ga!=null){if(ga.ref!==void 0&&(Ss=ga.ref,Ms=K$2.current),ga.key!==void 0&&(_s=""+ga.key),ca.type&&ca.type.defaultProps)var Es=ca.type.defaultProps;for(Cs in ga)J$1.call(ga,Cs)&&!L$3.hasOwnProperty(Cs)&&(_a[Cs]=ga[Cs]===void 0&&Es!==void 0?Es[Cs]:ga[Cs])}var Cs=arguments.length-2;if(Cs===1)_a.children=ya;else if(1<Cs){Es=Array(Cs);for(var Ts=0;Ts<Cs;Ts++)Es[Ts]=arguments[Ts+2];_a.children=Es}return{$$typeof:l$3,type:ca.type,key:_s,ref:Ss,props:_a,_owner:Ms}};react_production_min.createContext=function(ca){return ca={$$typeof:u$2,_currentValue:ca,_currentValue2:ca,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ca.Provider={$$typeof:t$3,_context:ca},ca.Consumer=ca};react_production_min.createElement=M$3;react_production_min.createFactory=function(ca){var ga=M$3.bind(null,ca);return ga.type=ca,ga};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ca){return{$$typeof:v$2,render:ca}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(ca){return{$$typeof:y$2,_payload:{_status:-1,_result:ca},_init:T$2}};react_production_min.memo=function(ca,ga){return{$$typeof:x$2,type:ca,compare:ga===void 0?null:ga}};react_production_min.startTransition=function(ca){var ga=V$3.transition;V$3.transition={};try{ca()}finally{V$3.transition=ga}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(ca,ga){return U$3.current.useCallback(ca,ga)};react_production_min.useContext=function(ca){return U$3.current.useContext(ca)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(ca){return U$3.current.useDeferredValue(ca)};react_production_min.useEffect=function(ca,ga){return U$3.current.useEffect(ca,ga)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(ca,ga,ya){return U$3.current.useImperativeHandle(ca,ga,ya)};react_production_min.useInsertionEffect=function(ca,ga){return U$3.current.useInsertionEffect(ca,ga)};react_production_min.useLayoutEffect=function(ca,ga){return U$3.current.useLayoutEffect(ca,ga)};react_production_min.useMemo=function(ca,ga){return U$3.current.useMemo(ca,ga)};react_production_min.useReducer=function(ca,ga,ya){return U$3.current.useReducer(ca,ga,ya)};react_production_min.useRef=function(ca){return U$3.current.useRef(ca)};react_production_min.useState=function(ca){return U$3.current.useState(ca)};react_production_min.useSyncExternalStore=function(ca,ga,ya){return U$3.current.useSyncExternalStore(ca,ga,ya)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.1.0";react$1.exports=react_production_min;var React=react$1.exports,React$1=_mergeNamespaces({__proto__:null,default:React},[react$1.exports]),scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ca){function ga(Xs,ru){var su=Xs.length;Xs.push(ru);e:for(;0<su;){var lu=su-1>>>1,cu=Xs[lu];if(0<_s(cu,ru))Xs[lu]=ru,Xs[su]=cu,su=lu;else break e}}function ya(Xs){return Xs.length===0?null:Xs[0]}function _a(Xs){if(Xs.length===0)return null;var ru=Xs[0],su=Xs.pop();if(su!==ru){Xs[0]=su;e:for(var lu=0,cu=Xs.length,xu=cu>>>1;lu<xu;){var bu=2*(lu+1)-1,yu=Xs[bu],fu=bu+1,gu=Xs[fu];if(0>_s(yu,su))fu<cu&&0>_s(gu,yu)?(Xs[lu]=gu,Xs[fu]=su,lu=fu):(Xs[lu]=yu,Xs[bu]=su,lu=bu);else if(fu<cu&&0>_s(gu,su))Xs[lu]=gu,Xs[fu]=su,lu=fu;else break e}}return ru}function _s(Xs,ru){var su=Xs.sortIndex-ru.sortIndex;return su!==0?su:Xs.id-ru.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Ss=performance;ca.unstable_now=function(){return Ss.now()}}else{var Ms=Date,Es=Ms.now();ca.unstable_now=function(){return Ms.now()-Es}}var Cs=[],Ts=[],Bs=1,Is=null,Ps=3,Rs=!1,ks=!1,$s=!1,Os=typeof setTimeout=="function"?setTimeout:null,Ls=typeof clearTimeout=="function"?clearTimeout:null,Ds=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Fs(Xs){for(var ru=ya(Ts);ru!==null;){if(ru.callback===null)_a(Ts);else if(ru.startTime<=Xs)_a(Ts),ru.sortIndex=ru.expirationTime,ga(Cs,ru);else break;ru=ya(Ts)}}function Ns(Xs){if($s=!1,Fs(Xs),!ks)if(ya(Cs)!==null)ks=!0,eu(Vs);else{var ru=ya(Ts);ru!==null&&Js(Ns,ru.startTime-Xs)}}function Vs(Xs,ru){ks=!1,$s&&($s=!1,Ls(zs),zs=-1),Rs=!0;var su=Ps;try{for(Fs(ru),Is=ya(Cs);Is!==null&&(!(Is.expirationTime>ru)||Xs&&!js());){var lu=Is.callback;if(typeof lu=="function"){Is.callback=null,Ps=Is.priorityLevel;var cu=lu(Is.expirationTime<=ru);ru=ca.unstable_now(),typeof cu=="function"?Is.callback=cu:Is===ya(Cs)&&_a(Cs),Fs(ru)}else _a(Cs);Is=ya(Cs)}if(Is!==null)var xu=!0;else{var bu=ya(Ts);bu!==null&&Js(Ns,bu.startTime-ru),xu=!1}return xu}finally{Is=null,Ps=su,Rs=!1}}var Gs=!1,Us=null,zs=-1,Hs=5,Qs=-1;function js(){return!(ca.unstable_now()-Qs<Hs)}function Zs(){if(Us!==null){var Xs=ca.unstable_now();Qs=Xs;var ru=!0;try{ru=Us(!0,Xs)}finally{ru?Ks():(Gs=!1,Us=null)}}else Gs=!1}var Ks;if(typeof Ds=="function")Ks=function(){Ds(Zs)};else if(typeof MessageChannel!="undefined"){var Ys=new MessageChannel,qs=Ys.port2;Ys.port1.onmessage=Zs,Ks=function(){qs.postMessage(null)}}else Ks=function(){Os(Zs,0)};function eu(Xs){Us=Xs,Gs||(Gs=!0,Ks())}function Js(Xs,ru){zs=Os(function(){Xs(ca.unstable_now())},ru)}ca.unstable_IdlePriority=5,ca.unstable_ImmediatePriority=1,ca.unstable_LowPriority=4,ca.unstable_NormalPriority=3,ca.unstable_Profiling=null,ca.unstable_UserBlockingPriority=2,ca.unstable_cancelCallback=function(Xs){Xs.callback=null},ca.unstable_continueExecution=function(){ks||Rs||(ks=!0,eu(Vs))},ca.unstable_forceFrameRate=function(Xs){0>Xs||125<Xs?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Hs=0<Xs?Math.floor(1e3/Xs):5},ca.unstable_getCurrentPriorityLevel=function(){return Ps},ca.unstable_getFirstCallbackNode=function(){return ya(Cs)},ca.unstable_next=function(Xs){switch(Ps){case 1:case 2:case 3:var ru=3;break;default:ru=Ps}var su=Ps;Ps=ru;try{return Xs()}finally{Ps=su}},ca.unstable_pauseExecution=function(){},ca.unstable_requestPaint=function(){},ca.unstable_runWithPriority=function(Xs,ru){switch(Xs){case 1:case 2:case 3:case 4:case 5:break;default:Xs=3}var su=Ps;Ps=Xs;try{return ru()}finally{Ps=su}},ca.unstable_scheduleCallback=function(Xs,ru,su){var lu=ca.unstable_now();switch(typeof su=="object"&&su!==null?(su=su.delay,su=typeof su=="number"&&0<su?lu+su:lu):su=lu,Xs){case 1:var cu=-1;break;case 2:cu=250;break;case 5:cu=1073741823;break;case 4:cu=1e4;break;default:cu=5e3}return cu=su+cu,Xs={id:Bs++,callback:ru,priorityLevel:Xs,startTime:su,expirationTime:cu,sortIndex:-1},su>lu?(Xs.sortIndex=su,ga(Ts,Xs),ya(Cs)===null&&Xs===ya(Ts)&&($s?(Ls(zs),zs=-1):$s=!0,Js(Ns,su-lu))):(Xs.sortIndex=cu,ga(Cs,Xs),ks||Rs||(ks=!0,eu(Vs))),Xs},ca.unstable_shouldYield=js,ca.unstable_wrapCallback=function(Xs){var ru=Ps;return function(){var su=Ps;Ps=ru;try{return Xs.apply(this,arguments)}finally{Ps=su}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react$1.exports,ba=scheduler.exports;function p$3(ca){for(var ga="https://reactjs.org/docs/error-decoder.html?invariant="+ca,ya=1;ya<arguments.length;ya++)ga+="&args[]="+encodeURIComponent(arguments[ya]);return"Minified React error #"+ca+"; visit "+ga+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(ca,ga){ha(ca,ga),ha(ca+"Capture",ga)}function ha(ca,ga){for(ea[ca]=ga,ca=0;ca<ga.length;ca++)da.add(ga[ca])}var ia=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function na(ca){return ja.call(ma,ca)?!0:ja.call(la,ca)?!1:ka.test(ca)?ma[ca]=!0:(la[ca]=!0,!1)}function oa(ca,ga,ya,_a){if(ya!==null&&ya.type===0)return!1;switch(typeof ga){case"function":case"symbol":return!0;case"boolean":return _a?!1:ya!==null?!ya.acceptsBooleans:(ca=ca.toLowerCase().slice(0,5),ca!=="data-"&&ca!=="aria-");default:return!1}}function pa(ca,ga,ya,_a){if(ga===null||typeof ga=="undefined"||oa(ca,ga,ya,_a))return!0;if(_a)return!1;if(ya!==null)switch(ya.type){case 3:return!ga;case 4:return ga===!1;case 5:return isNaN(ga);case 6:return isNaN(ga)||1>ga}return!1}function t$2(ca,ga,ya,_a,_s,Ss,Ms){this.acceptsBooleans=ga===2||ga===3||ga===4,this.attributeName=_a,this.attributeNamespace=_s,this.mustUseProperty=ya,this.propertyName=ca,this.type=ga,this.sanitizeURL=Ss,this.removeEmptyString=Ms}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ca){z$1[ca]=new t$2(ca,0,!1,ca,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ca){var ga=ca[0];z$1[ga]=new t$2(ga,1,!1,ca[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ca){z$1[ca]=new t$2(ca,2,!1,ca.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ca){z$1[ca]=new t$2(ca,2,!1,ca,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ca){z$1[ca]=new t$2(ca,3,!1,ca.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(ca){z$1[ca]=new t$2(ca,3,!0,ca,null,!1,!1)});["capture","download"].forEach(function(ca){z$1[ca]=new t$2(ca,4,!1,ca,null,!1,!1)});["cols","rows","size","span"].forEach(function(ca){z$1[ca]=new t$2(ca,6,!1,ca,null,!1,!1)});["rowSpan","start"].forEach(function(ca){z$1[ca]=new t$2(ca,5,!1,ca.toLowerCase(),null,!1,!1)});var qa=/[\-:]([a-z])/g;function ra(ca){return ca[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ca){var ga=ca.replace(qa,ra);z$1[ga]=new t$2(ga,1,!1,ca,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ca){var ga=ca.replace(qa,ra);z$1[ga]=new t$2(ga,1,!1,ca,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(ca){var ga=ca.replace(qa,ra);z$1[ga]=new t$2(ga,1,!1,ca,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(ca){z$1[ca]=new t$2(ca,1,!1,ca.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new t$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(ca){z$1[ca]=new t$2(ca,1,!1,ca.toLowerCase(),null,!0,!0)});function sa(ca,ga,ya,_a){var _s=z$1.hasOwnProperty(ga)?z$1[ga]:null;(_s!==null?_s.type!==0:_a||!(2<ga.length)||ga[0]!=="o"&&ga[0]!=="O"||ga[1]!=="n"&&ga[1]!=="N")&&(pa(ga,ya,_s,_a)&&(ya=null),_a||_s===null?na(ga)&&(ya===null?ca.removeAttribute(ga):ca.setAttribute(ga,""+ya)):_s.mustUseProperty?ca[_s.propertyName]=ya===null?_s.type===3?!1:"":ya:(ga=_s.attributeName,_a=_s.attributeNamespace,ya===null?ca.removeAttribute(ga):(_s=_s.type,ya=_s===3||_s===4&&ya===!0?"":""+ya,_a?ca.setAttributeNS(_a,ga,ya):ca.setAttribute(ga,ya))))}var ta=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),va=Symbol.for("react.portal"),wa=Symbol.for("react.fragment"),xa=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),Aa=Symbol.for("react.provider"),Ba=Symbol.for("react.context"),Ca=Symbol.for("react.forward_ref"),Da=Symbol.for("react.suspense"),Ea=Symbol.for("react.suspense_list"),Fa=Symbol.for("react.memo"),Ga=Symbol.for("react.lazy"),Ha=Symbol.for("react.offscreen"),Ia=Symbol.iterator;function Ja(ca){return ca===null||typeof ca!="object"?null:(ca=Ia&&ca[Ia]||ca["@@iterator"],typeof ca=="function"?ca:null)}var A$2=Object.assign,Ka;function La(ca){if(Ka===void 0)try{throw Error()}catch(ya){var ga=ya.stack.trim().match(/\n( *(at )?)/);Ka=ga&&ga[1]||""}return`
`+Ka+ca}var Ma=!1;function Na(ca,ga){if(!ca||Ma)return"";Ma=!0;var ya=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ga)if(ga=function(){throw Error()},Object.defineProperty(ga.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ga,[])}catch(Ts){var _a=Ts}Reflect.construct(ca,[],ga)}else{try{ga.call()}catch(Ts){_a=Ts}ca.call(ga.prototype)}else{try{throw Error()}catch(Ts){_a=Ts}ca()}}catch(Ts){if(Ts&&_a&&typeof Ts.stack=="string"){for(var _s=Ts.stack.split(`
`),Ss=_a.stack.split(`
`),Ms=_s.length-1,Es=Ss.length-1;1<=Ms&&0<=Es&&_s[Ms]!==Ss[Es];)Es--;for(;1<=Ms&&0<=Es;Ms--,Es--)if(_s[Ms]!==Ss[Es]){if(Ms!==1||Es!==1)do if(Ms--,Es--,0>Es||_s[Ms]!==Ss[Es]){var Cs=`
`+_s[Ms].replace(" at new "," at ");return ca.displayName&&Cs.includes("<anonymous>")&&(Cs=Cs.replace("<anonymous>",ca.displayName)),Cs}while(1<=Ms&&0<=Es);break}}}finally{Ma=!1,Error.prepareStackTrace=ya}return(ca=ca?ca.displayName||ca.name:"")?La(ca):""}function Oa(ca){switch(ca.tag){case 5:return La(ca.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return ca=Na(ca.type,!1),ca;case 11:return ca=Na(ca.type.render,!1),ca;case 1:return ca=Na(ca.type,!0),ca;default:return""}}function Pa(ca){if(ca==null)return null;if(typeof ca=="function")return ca.displayName||ca.name||null;if(typeof ca=="string")return ca;switch(ca){case wa:return"Fragment";case va:return"Portal";case za:return"Profiler";case xa:return"StrictMode";case Da:return"Suspense";case Ea:return"SuspenseList"}if(typeof ca=="object")switch(ca.$$typeof){case Ba:return(ca.displayName||"Context")+".Consumer";case Aa:return(ca._context.displayName||"Context")+".Provider";case Ca:var ga=ca.render;return ca=ca.displayName,ca||(ca=ga.displayName||ga.name||"",ca=ca!==""?"ForwardRef("+ca+")":"ForwardRef"),ca;case Fa:return ga=ca.displayName||null,ga!==null?ga:Pa(ca.type)||"Memo";case Ga:ga=ca._payload,ca=ca._init;try{return Pa(ca(ga))}catch{}}return null}function Qa(ca){var ga=ca.type;switch(ca.tag){case 24:return"Cache";case 9:return(ga.displayName||"Context")+".Consumer";case 10:return(ga._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ca=ga.render,ca=ca.displayName||ca.name||"",ga.displayName||(ca!==""?"ForwardRef("+ca+")":"ForwardRef");case 7:return"Fragment";case 5:return ga;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pa(ga);case 8:return ga===xa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof ga=="function")return ga.displayName||ga.name||null;if(typeof ga=="string")return ga}return null}function Ra(ca){switch(typeof ca){case"boolean":case"number":case"string":case"undefined":return ca;case"object":return ca;default:return""}}function Sa(ca){var ga=ca.type;return(ca=ca.nodeName)&&ca.toLowerCase()==="input"&&(ga==="checkbox"||ga==="radio")}function Ta(ca){var ga=Sa(ca)?"checked":"value",ya=Object.getOwnPropertyDescriptor(ca.constructor.prototype,ga),_a=""+ca[ga];if(!ca.hasOwnProperty(ga)&&typeof ya!="undefined"&&typeof ya.get=="function"&&typeof ya.set=="function"){var _s=ya.get,Ss=ya.set;return Object.defineProperty(ca,ga,{configurable:!0,get:function(){return _s.call(this)},set:function(Ms){_a=""+Ms,Ss.call(this,Ms)}}),Object.defineProperty(ca,ga,{enumerable:ya.enumerable}),{getValue:function(){return _a},setValue:function(Ms){_a=""+Ms},stopTracking:function(){ca._valueTracker=null,delete ca[ga]}}}}function Ua(ca){ca._valueTracker||(ca._valueTracker=Ta(ca))}function Va(ca){if(!ca)return!1;var ga=ca._valueTracker;if(!ga)return!0;var ya=ga.getValue(),_a="";return ca&&(_a=Sa(ca)?ca.checked?"true":"false":ca.value),ca=_a,ca!==ya?(ga.setValue(ca),!0):!1}function Wa(ca){if(ca=ca||(typeof document!="undefined"?document:void 0),typeof ca=="undefined")return null;try{return ca.activeElement||ca.body}catch{return ca.body}}function Xa(ca,ga){var ya=ga.checked;return A$2({},ga,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ya!=null?ya:ca._wrapperState.initialChecked})}function Ya(ca,ga){var ya=ga.defaultValue==null?"":ga.defaultValue,_a=ga.checked!=null?ga.checked:ga.defaultChecked;ya=Ra(ga.value!=null?ga.value:ya),ca._wrapperState={initialChecked:_a,initialValue:ya,controlled:ga.type==="checkbox"||ga.type==="radio"?ga.checked!=null:ga.value!=null}}function Za(ca,ga){ga=ga.checked,ga!=null&&sa(ca,"checked",ga,!1)}function $a(ca,ga){Za(ca,ga);var ya=Ra(ga.value),_a=ga.type;if(ya!=null)_a==="number"?(ya===0&&ca.value===""||ca.value!=ya)&&(ca.value=""+ya):ca.value!==""+ya&&(ca.value=""+ya);else if(_a==="submit"||_a==="reset"){ca.removeAttribute("value");return}ga.hasOwnProperty("value")?bb(ca,ga.type,ya):ga.hasOwnProperty("defaultValue")&&bb(ca,ga.type,Ra(ga.defaultValue)),ga.checked==null&&ga.defaultChecked!=null&&(ca.defaultChecked=!!ga.defaultChecked)}function cb(ca,ga,ya){if(ga.hasOwnProperty("value")||ga.hasOwnProperty("defaultValue")){var _a=ga.type;if(!(_a!=="submit"&&_a!=="reset"||ga.value!==void 0&&ga.value!==null))return;ga=""+ca._wrapperState.initialValue,ya||ga===ca.value||(ca.value=ga),ca.defaultValue=ga}ya=ca.name,ya!==""&&(ca.name=""),ca.defaultChecked=!!ca._wrapperState.initialChecked,ya!==""&&(ca.name=ya)}function bb(ca,ga,ya){(ga!=="number"||Wa(ca.ownerDocument)!==ca)&&(ya==null?ca.defaultValue=""+ca._wrapperState.initialValue:ca.defaultValue!==""+ya&&(ca.defaultValue=""+ya))}var db=Array.isArray;function eb(ca,ga,ya,_a){if(ca=ca.options,ga){ga={};for(var _s=0;_s<ya.length;_s++)ga["$"+ya[_s]]=!0;for(ya=0;ya<ca.length;ya++)_s=ga.hasOwnProperty("$"+ca[ya].value),ca[ya].selected!==_s&&(ca[ya].selected=_s),_s&&_a&&(ca[ya].defaultSelected=!0)}else{for(ya=""+Ra(ya),ga=null,_s=0;_s<ca.length;_s++){if(ca[_s].value===ya){ca[_s].selected=!0,_a&&(ca[_s].defaultSelected=!0);return}ga!==null||ca[_s].disabled||(ga=ca[_s])}ga!==null&&(ga.selected=!0)}}function fb(ca,ga){if(ga.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},ga,{value:void 0,defaultValue:void 0,children:""+ca._wrapperState.initialValue})}function gb(ca,ga){var ya=ga.value;if(ya==null){if(ya=ga.children,ga=ga.defaultValue,ya!=null){if(ga!=null)throw Error(p$3(92));if(db(ya)){if(1<ya.length)throw Error(p$3(93));ya=ya[0]}ga=ya}ga==null&&(ga=""),ya=ga}ca._wrapperState={initialValue:Ra(ya)}}function hb(ca,ga){var ya=Ra(ga.value),_a=Ra(ga.defaultValue);ya!=null&&(ya=""+ya,ya!==ca.value&&(ca.value=ya),ga.defaultValue==null&&ca.defaultValue!==ya&&(ca.defaultValue=ya)),_a!=null&&(ca.defaultValue=""+_a)}function ib(ca){var ga=ca.textContent;ga===ca._wrapperState.initialValue&&ga!==""&&ga!==null&&(ca.value=ga)}function jb(ca){switch(ca){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kb(ca,ga){return ca==null||ca==="http://www.w3.org/1999/xhtml"?jb(ga):ca==="http://www.w3.org/2000/svg"&&ga==="foreignObject"?"http://www.w3.org/1999/xhtml":ca}var lb,mb=function(ca){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(ga,ya,_a,_s){MSApp.execUnsafeLocalFunction(function(){return ca(ga,ya,_a,_s)})}:ca}(function(ca,ga){if(ca.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ca)ca.innerHTML=ga;else{for(lb=lb||document.createElement("div"),lb.innerHTML="<svg>"+ga.valueOf().toString()+"</svg>",ga=lb.firstChild;ca.firstChild;)ca.removeChild(ca.firstChild);for(;ga.firstChild;)ca.appendChild(ga.firstChild)}});function nb(ca,ga){if(ga){var ya=ca.firstChild;if(ya&&ya===ca.lastChild&&ya.nodeType===3){ya.nodeValue=ga;return}}ca.textContent=ga}var ob={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pb=["Webkit","ms","Moz","O"];Object.keys(ob).forEach(function(ca){pb.forEach(function(ga){ga=ga+ca.charAt(0).toUpperCase()+ca.substring(1),ob[ga]=ob[ca]})});function qb(ca,ga,ya){return ga==null||typeof ga=="boolean"||ga===""?"":ya||typeof ga!="number"||ga===0||ob.hasOwnProperty(ca)&&ob[ca]?(""+ga).trim():ga+"px"}function rb(ca,ga){ca=ca.style;for(var ya in ga)if(ga.hasOwnProperty(ya)){var _a=ya.indexOf("--")===0,_s=qb(ya,ga[ya],_a);ya==="float"&&(ya="cssFloat"),_a?ca.setProperty(ya,_s):ca[ya]=_s}}var sb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tb(ca,ga){if(ga){if(sb[ca]&&(ga.children!=null||ga.dangerouslySetInnerHTML!=null))throw Error(p$3(137,ca));if(ga.dangerouslySetInnerHTML!=null){if(ga.children!=null)throw Error(p$3(60));if(typeof ga.dangerouslySetInnerHTML!="object"||!("__html"in ga.dangerouslySetInnerHTML))throw Error(p$3(61))}if(ga.style!=null&&typeof ga.style!="object")throw Error(p$3(62))}}function ub(ca,ga){if(ca.indexOf("-")===-1)return typeof ga.is=="string";switch(ca){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vb=null;function wb(ca){return ca=ca.target||ca.srcElement||window,ca.correspondingUseElement&&(ca=ca.correspondingUseElement),ca.nodeType===3?ca.parentNode:ca}var xb=null,yb=null,zb=null;function Ab(ca){if(ca=Bb(ca)){if(typeof xb!="function")throw Error(p$3(280));var ga=ca.stateNode;ga&&(ga=Cb(ga),xb(ca.stateNode,ca.type,ga))}}function Db(ca){yb?zb?zb.push(ca):zb=[ca]:yb=ca}function Eb(){if(yb){var ca=yb,ga=zb;if(zb=yb=null,Ab(ca),ga)for(ca=0;ca<ga.length;ca++)Ab(ga[ca])}}function Fb(ca,ga){return ca(ga)}function Gb(){}var Hb=!1;function Ib(ca,ga,ya){if(Hb)return ca(ga,ya);Hb=!0;try{return Fb(ca,ga,ya)}finally{Hb=!1,(yb!==null||zb!==null)&&(Gb(),Eb())}}function Jb(ca,ga){var ya=ca.stateNode;if(ya===null)return null;var _a=Cb(ya);if(_a===null)return null;ya=_a[ga];e:switch(ga){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_a=!_a.disabled)||(ca=ca.type,_a=!(ca==="button"||ca==="input"||ca==="select"||ca==="textarea")),ca=!_a;break e;default:ca=!1}if(ca)return null;if(ya&&typeof ya!="function")throw Error(p$3(231,ga,typeof ya));return ya}var Kb=!1;if(ia)try{var Lb={};Object.defineProperty(Lb,"passive",{get:function(){Kb=!0}}),window.addEventListener("test",Lb,Lb),window.removeEventListener("test",Lb,Lb)}catch{Kb=!1}function Mb(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){var Ts=Array.prototype.slice.call(arguments,3);try{ga.apply(ya,Ts)}catch(Bs){this.onError(Bs)}}var Nb=!1,Ob=null,Pb=!1,Qb=null,Rb={onError:function(ca){Nb=!0,Ob=ca}};function Sb(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){Nb=!1,Ob=null,Mb.apply(Rb,arguments)}function Tb(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){if(Sb.apply(this,arguments),Nb){if(Nb){var Ts=Ob;Nb=!1,Ob=null}else throw Error(p$3(198));Pb||(Pb=!0,Qb=Ts)}}function Ub(ca){var ga=ca,ya=ca;if(ca.alternate)for(;ga.return;)ga=ga.return;else{ca=ga;do ga=ca,(ga.flags&4098)!==0&&(ya=ga.return),ca=ga.return;while(ca)}return ga.tag===3?ya:null}function Vb(ca){if(ca.tag===13){var ga=ca.memoizedState;if(ga===null&&(ca=ca.alternate,ca!==null&&(ga=ca.memoizedState)),ga!==null)return ga.dehydrated}return null}function Wb(ca){if(Ub(ca)!==ca)throw Error(p$3(188))}function Xb(ca){var ga=ca.alternate;if(!ga){if(ga=Ub(ca),ga===null)throw Error(p$3(188));return ga!==ca?null:ca}for(var ya=ca,_a=ga;;){var _s=ya.return;if(_s===null)break;var Ss=_s.alternate;if(Ss===null){if(_a=_s.return,_a!==null){ya=_a;continue}break}if(_s.child===Ss.child){for(Ss=_s.child;Ss;){if(Ss===ya)return Wb(_s),ca;if(Ss===_a)return Wb(_s),ga;Ss=Ss.sibling}throw Error(p$3(188))}if(ya.return!==_a.return)ya=_s,_a=Ss;else{for(var Ms=!1,Es=_s.child;Es;){if(Es===ya){Ms=!0,ya=_s,_a=Ss;break}if(Es===_a){Ms=!0,_a=_s,ya=Ss;break}Es=Es.sibling}if(!Ms){for(Es=Ss.child;Es;){if(Es===ya){Ms=!0,ya=Ss,_a=_s;break}if(Es===_a){Ms=!0,_a=Ss,ya=_s;break}Es=Es.sibling}if(!Ms)throw Error(p$3(189))}}if(ya.alternate!==_a)throw Error(p$3(190))}if(ya.tag!==3)throw Error(p$3(188));return ya.stateNode.current===ya?ca:ga}function Yb(ca){return ca=Xb(ca),ca!==null?Zb(ca):null}function Zb(ca){if(ca.tag===5||ca.tag===6)return ca;for(ca=ca.child;ca!==null;){var ga=Zb(ca);if(ga!==null)return ga;ca=ca.sibling}return null}var $b=ba.unstable_scheduleCallback,ac=ba.unstable_cancelCallback,bc=ba.unstable_shouldYield,cc=ba.unstable_requestPaint,B$1=ba.unstable_now,dc=ba.unstable_getCurrentPriorityLevel,ec=ba.unstable_ImmediatePriority,fc=ba.unstable_UserBlockingPriority,gc=ba.unstable_NormalPriority,hc=ba.unstable_LowPriority,ic=ba.unstable_IdlePriority,jc=null,kc=null;function lc(ca){if(kc&&typeof kc.onCommitFiberRoot=="function")try{kc.onCommitFiberRoot(jc,ca,void 0,(ca.current.flags&128)===128)}catch{}}var nc=Math.clz32?Math.clz32:mc,oc=Math.log,pc=Math.LN2;function mc(ca){return ca>>>=0,ca===0?32:31-(oc(ca)/pc|0)|0}var qc=64,rc=4194304;function sc(ca){switch(ca&-ca){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ca&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ca&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ca}}function tc(ca,ga){var ya=ca.pendingLanes;if(ya===0)return 0;var _a=0,_s=ca.suspendedLanes,Ss=ca.pingedLanes,Ms=ya&268435455;if(Ms!==0){var Es=Ms&~_s;Es!==0?_a=sc(Es):(Ss&=Ms,Ss!==0&&(_a=sc(Ss)))}else Ms=ya&~_s,Ms!==0?_a=sc(Ms):Ss!==0&&(_a=sc(Ss));if(_a===0)return 0;if(ga!==0&&ga!==_a&&(ga&_s)===0&&(_s=_a&-_a,Ss=ga&-ga,_s>=Ss||_s===16&&(Ss&4194240)!==0))return ga;if((_a&4)!==0&&(_a|=ya&16),ga=ca.entangledLanes,ga!==0)for(ca=ca.entanglements,ga&=_a;0<ga;)ya=31-nc(ga),_s=1<<ya,_a|=ca[ya],ga&=~_s;return _a}function uc(ca,ga){switch(ca){case 1:case 2:case 4:return ga+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ga+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vc(ca,ga){for(var ya=ca.suspendedLanes,_a=ca.pingedLanes,_s=ca.expirationTimes,Ss=ca.pendingLanes;0<Ss;){var Ms=31-nc(Ss),Es=1<<Ms,Cs=_s[Ms];Cs===-1?((Es&ya)===0||(Es&_a)!==0)&&(_s[Ms]=uc(Es,ga)):Cs<=ga&&(ca.expiredLanes|=Es),Ss&=~Es}}function wc(ca){return ca=ca.pendingLanes&-1073741825,ca!==0?ca:ca&1073741824?1073741824:0}function xc(){var ca=qc;return qc<<=1,(qc&4194240)===0&&(qc=64),ca}function yc(ca){for(var ga=[],ya=0;31>ya;ya++)ga.push(ca);return ga}function zc(ca,ga,ya){ca.pendingLanes|=ga,ga!==536870912&&(ca.suspendedLanes=0,ca.pingedLanes=0),ca=ca.eventTimes,ga=31-nc(ga),ca[ga]=ya}function Ac(ca,ga){var ya=ca.pendingLanes&~ga;ca.pendingLanes=ga,ca.suspendedLanes=0,ca.pingedLanes=0,ca.expiredLanes&=ga,ca.mutableReadLanes&=ga,ca.entangledLanes&=ga,ga=ca.entanglements;var _a=ca.eventTimes;for(ca=ca.expirationTimes;0<ya;){var _s=31-nc(ya),Ss=1<<_s;ga[_s]=0,_a[_s]=-1,ca[_s]=-1,ya&=~Ss}}function Bc(ca,ga){var ya=ca.entangledLanes|=ga;for(ca=ca.entanglements;ya;){var _a=31-nc(ya),_s=1<<_a;_s&ga|ca[_a]&ga&&(ca[_a]|=ga),ya&=~_s}}var C$2=0;function Cc(ca){return ca&=-ca,1<ca?4<ca?(ca&268435455)!==0?16:536870912:4:1}var Dc,Ec,Fc,Gc,Hc,Ic=!1,Jc=[],Kc=null,Lc=null,Mc=null,Nc=new Map,Oc=new Map,Pc=[],Qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rc(ca,ga){switch(ca){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Lc=null;break;case"mouseover":case"mouseout":Mc=null;break;case"pointerover":case"pointerout":Nc.delete(ga.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(ga.pointerId)}}function Sc(ca,ga,ya,_a,_s,Ss){return ca===null||ca.nativeEvent!==Ss?(ca={blockedOn:ga,domEventName:ya,eventSystemFlags:_a,nativeEvent:Ss,targetContainers:[_s]},ga!==null&&(ga=Bb(ga),ga!==null&&Ec(ga)),ca):(ca.eventSystemFlags|=_a,ga=ca.targetContainers,_s!==null&&ga.indexOf(_s)===-1&&ga.push(_s),ca)}function Tc(ca,ga,ya,_a,_s){switch(ga){case"focusin":return Kc=Sc(Kc,ca,ga,ya,_a,_s),!0;case"dragenter":return Lc=Sc(Lc,ca,ga,ya,_a,_s),!0;case"mouseover":return Mc=Sc(Mc,ca,ga,ya,_a,_s),!0;case"pointerover":var Ss=_s.pointerId;return Nc.set(Ss,Sc(Nc.get(Ss)||null,ca,ga,ya,_a,_s)),!0;case"gotpointercapture":return Ss=_s.pointerId,Oc.set(Ss,Sc(Oc.get(Ss)||null,ca,ga,ya,_a,_s)),!0}return!1}function Uc(ca){var ga=Vc(ca.target);if(ga!==null){var ya=Ub(ga);if(ya!==null){if(ga=ya.tag,ga===13){if(ga=Vb(ya),ga!==null){ca.blockedOn=ga,Hc(ca.priority,function(){Fc(ya)});return}}else if(ga===3&&ya.stateNode.current.memoizedState.isDehydrated){ca.blockedOn=ya.tag===3?ya.stateNode.containerInfo:null;return}}}ca.blockedOn=null}function Wc(ca){if(ca.blockedOn!==null)return!1;for(var ga=ca.targetContainers;0<ga.length;){var ya=Xc(ca.domEventName,ca.eventSystemFlags,ga[0],ca.nativeEvent);if(ya===null){ya=ca.nativeEvent;var _a=new ya.constructor(ya.type,ya);vb=_a,ya.target.dispatchEvent(_a),vb=null}else return ga=Bb(ya),ga!==null&&Ec(ga),ca.blockedOn=ya,!1;ga.shift()}return!0}function Yc(ca,ga,ya){Wc(ca)&&ya.delete(ga)}function Zc(){Ic=!1,Kc!==null&&Wc(Kc)&&(Kc=null),Lc!==null&&Wc(Lc)&&(Lc=null),Mc!==null&&Wc(Mc)&&(Mc=null),Nc.forEach(Yc),Oc.forEach(Yc)}function $c(ca,ga){ca.blockedOn===ga&&(ca.blockedOn=null,Ic||(Ic=!0,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,Zc)))}function ad(ca){function ga(_s){return $c(_s,ca)}if(0<Jc.length){$c(Jc[0],ca);for(var ya=1;ya<Jc.length;ya++){var _a=Jc[ya];_a.blockedOn===ca&&(_a.blockedOn=null)}}for(Kc!==null&&$c(Kc,ca),Lc!==null&&$c(Lc,ca),Mc!==null&&$c(Mc,ca),Nc.forEach(ga),Oc.forEach(ga),ya=0;ya<Pc.length;ya++)_a=Pc[ya],_a.blockedOn===ca&&(_a.blockedOn=null);for(;0<Pc.length&&(ya=Pc[0],ya.blockedOn===null);)Uc(ya),ya.blockedOn===null&&Pc.shift()}var bd=ta.ReactCurrentBatchConfig,cd=!0;function dd(ca,ga,ya,_a){var _s=C$2,Ss=bd.transition;bd.transition=null;try{C$2=1,ed(ca,ga,ya,_a)}finally{C$2=_s,bd.transition=Ss}}function fd(ca,ga,ya,_a){var _s=C$2,Ss=bd.transition;bd.transition=null;try{C$2=4,ed(ca,ga,ya,_a)}finally{C$2=_s,bd.transition=Ss}}function ed(ca,ga,ya,_a){if(cd){var _s=Xc(ca,ga,ya,_a);if(_s===null)gd(ca,ga,_a,hd,ya),Rc(ca,_a);else if(Tc(_s,ca,ga,ya,_a))_a.stopPropagation();else if(Rc(ca,_a),ga&4&&-1<Qc.indexOf(ca)){for(;_s!==null;){var Ss=Bb(_s);if(Ss!==null&&Dc(Ss),Ss=Xc(ca,ga,ya,_a),Ss===null&&gd(ca,ga,_a,hd,ya),Ss===_s)break;_s=Ss}_s!==null&&_a.stopPropagation()}else gd(ca,ga,_a,null,ya)}}var hd=null;function Xc(ca,ga,ya,_a){if(hd=null,ca=wb(_a),ca=Vc(ca),ca!==null)if(ga=Ub(ca),ga===null)ca=null;else if(ya=ga.tag,ya===13){if(ca=Vb(ga),ca!==null)return ca;ca=null}else if(ya===3){if(ga.stateNode.current.memoizedState.isDehydrated)return ga.tag===3?ga.stateNode.containerInfo:null;ca=null}else ga!==ca&&(ca=null);return hd=ca,null}function id(ca){switch(ca){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dc()){case ec:return 1;case fc:return 4;case gc:case hc:return 16;case ic:return 536870912;default:return 16}default:return 16}}var jd=null,kd=null,ld=null;function md(){if(ld)return ld;var ca,ga=kd,ya=ga.length,_a,_s="value"in jd?jd.value:jd.textContent,Ss=_s.length;for(ca=0;ca<ya&&ga[ca]===_s[ca];ca++);var Ms=ya-ca;for(_a=1;_a<=Ms&&ga[ya-_a]===_s[Ss-_a];_a++);return ld=_s.slice(ca,1<_a?1-_a:void 0)}function nd(ca){var ga=ca.keyCode;return"charCode"in ca?(ca=ca.charCode,ca===0&&ga===13&&(ca=13)):ca=ga,ca===10&&(ca=13),32<=ca||ca===13?ca:0}function od(){return!0}function pd(){return!1}function qd(ca){function ga(ya,_a,_s,Ss,Ms){this._reactName=ya,this._targetInst=_s,this.type=_a,this.nativeEvent=Ss,this.target=Ms,this.currentTarget=null;for(var Es in ca)ca.hasOwnProperty(Es)&&(ya=ca[Es],this[Es]=ya?ya(Ss):Ss[Es]);return this.isDefaultPrevented=(Ss.defaultPrevented!=null?Ss.defaultPrevented:Ss.returnValue===!1)?od:pd,this.isPropagationStopped=pd,this}return A$2(ga.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ya=this.nativeEvent;ya&&(ya.preventDefault?ya.preventDefault():typeof ya.returnValue!="unknown"&&(ya.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var ya=this.nativeEvent;ya&&(ya.stopPropagation?ya.stopPropagation():typeof ya.cancelBubble!="unknown"&&(ya.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),ga}var rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ca){return ca.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=qd(rd),td=A$2({},rd,{view:0,detail:0}),ud=qd(td),vd,wd,xd,zd=A$2({},td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yd,button:0,buttons:0,relatedTarget:function(ca){return ca.relatedTarget===void 0?ca.fromElement===ca.srcElement?ca.toElement:ca.fromElement:ca.relatedTarget},movementX:function(ca){return"movementX"in ca?ca.movementX:(ca!==xd&&(xd&&ca.type==="mousemove"?(vd=ca.screenX-xd.screenX,wd=ca.screenY-xd.screenY):wd=vd=0,xd=ca),vd)},movementY:function(ca){return"movementY"in ca?ca.movementY:wd}}),Ad=qd(zd),Bd=A$2({},zd,{dataTransfer:0}),Cd=qd(Bd),Dd=A$2({},td,{relatedTarget:0}),Ed=qd(Dd),Fd=A$2({},rd,{animationName:0,elapsedTime:0,pseudoElement:0}),Gd=qd(Fd),Hd=A$2({},rd,{clipboardData:function(ca){return"clipboardData"in ca?ca.clipboardData:window.clipboardData}}),Id=qd(Hd),Jd=A$2({},rd,{data:0}),Kd=qd(Jd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Od(ca){var ga=this.nativeEvent;return ga.getModifierState?ga.getModifierState(ca):(ca=Nd[ca])?!!ga[ca]:!1}function yd(){return Od}var Pd=A$2({},td,{key:function(ca){if(ca.key){var ga=Ld[ca.key]||ca.key;if(ga!=="Unidentified")return ga}return ca.type==="keypress"?(ca=nd(ca),ca===13?"Enter":String.fromCharCode(ca)):ca.type==="keydown"||ca.type==="keyup"?Md[ca.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yd,charCode:function(ca){return ca.type==="keypress"?nd(ca):0},keyCode:function(ca){return ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0},which:function(ca){return ca.type==="keypress"?nd(ca):ca.type==="keydown"||ca.type==="keyup"?ca.keyCode:0}}),Qd=qd(Pd),Rd=A$2({},zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=qd(Rd),Td=A$2({},td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yd}),Ud=qd(Td),Vd=A$2({},rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wd=qd(Vd),Xd=A$2({},zd,{deltaX:function(ca){return"deltaX"in ca?ca.deltaX:"wheelDeltaX"in ca?-ca.wheelDeltaX:0},deltaY:function(ca){return"deltaY"in ca?ca.deltaY:"wheelDeltaY"in ca?-ca.wheelDeltaY:"wheelDelta"in ca?-ca.wheelDelta:0},deltaZ:0,deltaMode:0}),Yd=qd(Xd),Zd=[9,13,27,32],$d=ia&&"CompositionEvent"in window,ae$1=null;ia&&"documentMode"in document&&(ae$1=document.documentMode);var be$1=ia&&"TextEvent"in window&&!ae$1,ce$1=ia&&(!$d||ae$1&&8<ae$1&&11>=ae$1),de$1=String.fromCharCode(32),ee$1=!1;function fe$1(ca,ga){switch(ca){case"keyup":return Zd.indexOf(ga.keyCode)!==-1;case"keydown":return ga.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ge$1(ca){return ca=ca.detail,typeof ca=="object"&&"data"in ca?ca.data:null}var he$1=!1;function ie$1(ca,ga){switch(ca){case"compositionend":return ge$1(ga);case"keypress":return ga.which!==32?null:(ee$1=!0,de$1);case"textInput":return ca=ga.data,ca===de$1&&ee$1?null:ca;default:return null}}function je$1(ca,ga){if(he$1)return ca==="compositionend"||!$d&&fe$1(ca,ga)?(ca=md(),ld=kd=jd=null,he$1=!1,ca):null;switch(ca){case"paste":return null;case"keypress":if(!(ga.ctrlKey||ga.altKey||ga.metaKey)||ga.ctrlKey&&ga.altKey){if(ga.char&&1<ga.char.length)return ga.char;if(ga.which)return String.fromCharCode(ga.which)}return null;case"compositionend":return ce$1&&ga.locale!=="ko"?null:ga.data;default:return null}}var ke$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function le$1(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga==="input"?!!ke$1[ca.type]:ga==="textarea"}function me$1(ca,ga,ya,_a){Db(_a),ga=ne$1(ga,"onChange"),0<ga.length&&(ya=new sd("onChange","change",null,ya,_a),ca.push({event:ya,listeners:ga}))}var oe$1=null,pe$1=null;function qe$1(ca){re$1(ca,0)}function se$1(ca){var ga=te$1(ca);if(Va(ga))return ca}function ue$1(ca,ga){if(ca==="change")return ga}var ve$1=!1;if(ia){var we$1;if(ia){var xe$1="oninput"in document;if(!xe$1){var ye$1=document.createElement("div");ye$1.setAttribute("oninput","return;"),xe$1=typeof ye$1.oninput=="function"}we$1=xe$1}else we$1=!1;ve$1=we$1&&(!document.documentMode||9<document.documentMode)}function ze$1(){oe$1&&(oe$1.detachEvent("onpropertychange",Ae$1),pe$1=oe$1=null)}function Ae$1(ca){if(ca.propertyName==="value"&&se$1(pe$1)){var ga=[];me$1(ga,pe$1,ca,wb(ca)),Ib(qe$1,ga)}}function Be$1(ca,ga,ya){ca==="focusin"?(ze$1(),oe$1=ga,pe$1=ya,oe$1.attachEvent("onpropertychange",Ae$1)):ca==="focusout"&&ze$1()}function Ce$1(ca){if(ca==="selectionchange"||ca==="keyup"||ca==="keydown")return se$1(pe$1)}function De$1(ca,ga){if(ca==="click")return se$1(ga)}function Ee$1(ca,ga){if(ca==="input"||ca==="change")return se$1(ga)}function Fe$1(ca,ga){return ca===ga&&(ca!==0||1/ca===1/ga)||ca!==ca&&ga!==ga}var Ge$1=typeof Object.is=="function"?Object.is:Fe$1;function He$1(ca,ga){if(Ge$1(ca,ga))return!0;if(typeof ca!="object"||ca===null||typeof ga!="object"||ga===null)return!1;var ya=Object.keys(ca),_a=Object.keys(ga);if(ya.length!==_a.length)return!1;for(_a=0;_a<ya.length;_a++){var _s=ya[_a];if(!ja.call(ga,_s)||!Ge$1(ca[_s],ga[_s]))return!1}return!0}function Ie$1(ca){for(;ca&&ca.firstChild;)ca=ca.firstChild;return ca}function Je$1(ca,ga){var ya=Ie$1(ca);ca=0;for(var _a;ya;){if(ya.nodeType===3){if(_a=ca+ya.textContent.length,ca<=ga&&_a>=ga)return{node:ya,offset:ga-ca};ca=_a}e:{for(;ya;){if(ya.nextSibling){ya=ya.nextSibling;break e}ya=ya.parentNode}ya=void 0}ya=Ie$1(ya)}}function Ke$1(ca,ga){return ca&&ga?ca===ga?!0:ca&&ca.nodeType===3?!1:ga&&ga.nodeType===3?Ke$1(ca,ga.parentNode):"contains"in ca?ca.contains(ga):ca.compareDocumentPosition?!!(ca.compareDocumentPosition(ga)&16):!1:!1}function Le$1(){for(var ca=window,ga=Wa();ga instanceof ca.HTMLIFrameElement;){try{var ya=typeof ga.contentWindow.location.href=="string"}catch{ya=!1}if(ya)ca=ga.contentWindow;else break;ga=Wa(ca.document)}return ga}function Me$1(ca){var ga=ca&&ca.nodeName&&ca.nodeName.toLowerCase();return ga&&(ga==="input"&&(ca.type==="text"||ca.type==="search"||ca.type==="tel"||ca.type==="url"||ca.type==="password")||ga==="textarea"||ca.contentEditable==="true")}function Ne$1(ca){var ga=Le$1(),ya=ca.focusedElem,_a=ca.selectionRange;if(ga!==ya&&ya&&ya.ownerDocument&&Ke$1(ya.ownerDocument.documentElement,ya)){if(_a!==null&&Me$1(ya)){if(ga=_a.start,ca=_a.end,ca===void 0&&(ca=ga),"selectionStart"in ya)ya.selectionStart=ga,ya.selectionEnd=Math.min(ca,ya.value.length);else if(ca=(ga=ya.ownerDocument||document)&&ga.defaultView||window,ca.getSelection){ca=ca.getSelection();var _s=ya.textContent.length,Ss=Math.min(_a.start,_s);_a=_a.end===void 0?Ss:Math.min(_a.end,_s),!ca.extend&&Ss>_a&&(_s=_a,_a=Ss,Ss=_s),_s=Je$1(ya,Ss);var Ms=Je$1(ya,_a);_s&&Ms&&(ca.rangeCount!==1||ca.anchorNode!==_s.node||ca.anchorOffset!==_s.offset||ca.focusNode!==Ms.node||ca.focusOffset!==Ms.offset)&&(ga=ga.createRange(),ga.setStart(_s.node,_s.offset),ca.removeAllRanges(),Ss>_a?(ca.addRange(ga),ca.extend(Ms.node,Ms.offset)):(ga.setEnd(Ms.node,Ms.offset),ca.addRange(ga)))}}for(ga=[],ca=ya;ca=ca.parentNode;)ca.nodeType===1&&ga.push({element:ca,left:ca.scrollLeft,top:ca.scrollTop});for(typeof ya.focus=="function"&&ya.focus(),ya=0;ya<ga.length;ya++)ca=ga[ya],ca.element.scrollLeft=ca.left,ca.element.scrollTop=ca.top}}var Oe$1=ia&&"documentMode"in document&&11>=document.documentMode,Pe$1=null,Qe$1=null,Re$1=null,Se$1=!1;function Te$1(ca,ga,ya){var _a=ya.window===ya?ya.document:ya.nodeType===9?ya:ya.ownerDocument;Se$1||Pe$1==null||Pe$1!==Wa(_a)||(_a=Pe$1,"selectionStart"in _a&&Me$1(_a)?_a={start:_a.selectionStart,end:_a.selectionEnd}:(_a=(_a.ownerDocument&&_a.ownerDocument.defaultView||window).getSelection(),_a={anchorNode:_a.anchorNode,anchorOffset:_a.anchorOffset,focusNode:_a.focusNode,focusOffset:_a.focusOffset}),Re$1&&He$1(Re$1,_a)||(Re$1=_a,_a=ne$1(Qe$1,"onSelect"),0<_a.length&&(ga=new sd("onSelect","select",null,ga,ya),ca.push({event:ga,listeners:_a}),ga.target=Pe$1)))}function Ue$1(ca,ga){var ya={};return ya[ca.toLowerCase()]=ga.toLowerCase(),ya["Webkit"+ca]="webkit"+ga,ya["Moz"+ca]="moz"+ga,ya}var Ve$1={animationend:Ue$1("Animation","AnimationEnd"),animationiteration:Ue$1("Animation","AnimationIteration"),animationstart:Ue$1("Animation","AnimationStart"),transitionend:Ue$1("Transition","TransitionEnd")},We$1={},Xe$1={};ia&&(Xe$1=document.createElement("div").style,"AnimationEvent"in window||(delete Ve$1.animationend.animation,delete Ve$1.animationiteration.animation,delete Ve$1.animationstart.animation),"TransitionEvent"in window||delete Ve$1.transitionend.transition);function Ye$1(ca){if(We$1[ca])return We$1[ca];if(!Ve$1[ca])return ca;var ga=Ve$1[ca],ya;for(ya in ga)if(ga.hasOwnProperty(ya)&&ya in Xe$1)return We$1[ca]=ga[ya];return ca}var Ze$1=Ye$1("animationend"),$e$1=Ye$1("animationiteration"),af=Ye$1("animationstart"),bf=Ye$1("transitionend"),cf=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ef(ca,ga){cf.set(ca,ga),fa(ga,[ca])}for(var ff=0;ff<df.length;ff++){var gf=df[ff],hf=gf.toLowerCase(),jf=gf[0].toUpperCase()+gf.slice(1);ef(hf,"on"+jf)}ef(Ze$1,"onAnimationEnd");ef($e$1,"onAnimationIteration");ef(af,"onAnimationStart");ef("dblclick","onDoubleClick");ef("focusin","onFocus");ef("focusout","onBlur");ef(bf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lf=new Set("cancel close invalid load scroll toggle".split(" ").concat(kf));function mf(ca,ga,ya){var _a=ca.type||"unknown-event";ca.currentTarget=ya,Tb(_a,ga,void 0,ca),ca.currentTarget=null}function re$1(ca,ga){ga=(ga&4)!==0;for(var ya=0;ya<ca.length;ya++){var _a=ca[ya],_s=_a.event;_a=_a.listeners;e:{var Ss=void 0;if(ga)for(var Ms=_a.length-1;0<=Ms;Ms--){var Es=_a[Ms],Cs=Es.instance,Ts=Es.currentTarget;if(Es=Es.listener,Cs!==Ss&&_s.isPropagationStopped())break e;mf(_s,Es,Ts),Ss=Cs}else for(Ms=0;Ms<_a.length;Ms++){if(Es=_a[Ms],Cs=Es.instance,Ts=Es.currentTarget,Es=Es.listener,Cs!==Ss&&_s.isPropagationStopped())break e;mf(_s,Es,Ts),Ss=Cs}}}if(Pb)throw ca=Qb,Pb=!1,Qb=null,ca}function D$1(ca,ga){var ya=ga[nf];ya===void 0&&(ya=ga[nf]=new Set);var _a=ca+"__bubble";ya.has(_a)||(of(ga,ca,2,!1),ya.add(_a))}function pf(ca,ga,ya){var _a=0;ga&&(_a|=4),of(ya,ca,_a,ga)}var qf="_reactListening"+Math.random().toString(36).slice(2);function rf(ca){if(!ca[qf]){ca[qf]=!0,da.forEach(function(ya){ya!=="selectionchange"&&(lf.has(ya)||pf(ya,!1,ca),pf(ya,!0,ca))});var ga=ca.nodeType===9?ca:ca.ownerDocument;ga===null||ga[qf]||(ga[qf]=!0,pf("selectionchange",!1,ga))}}function of(ca,ga,ya,_a){switch(id(ga)){case 1:var _s=dd;break;case 4:_s=fd;break;default:_s=ed}ya=_s.bind(null,ga,ya,ca),_s=void 0,!Kb||ga!=="touchstart"&&ga!=="touchmove"&&ga!=="wheel"||(_s=!0),_a?_s!==void 0?ca.addEventListener(ga,ya,{capture:!0,passive:_s}):ca.addEventListener(ga,ya,!0):_s!==void 0?ca.addEventListener(ga,ya,{passive:_s}):ca.addEventListener(ga,ya,!1)}function gd(ca,ga,ya,_a,_s){var Ss=_a;if((ga&1)===0&&(ga&2)===0&&_a!==null)e:for(;;){if(_a===null)return;var Ms=_a.tag;if(Ms===3||Ms===4){var Es=_a.stateNode.containerInfo;if(Es===_s||Es.nodeType===8&&Es.parentNode===_s)break;if(Ms===4)for(Ms=_a.return;Ms!==null;){var Cs=Ms.tag;if((Cs===3||Cs===4)&&(Cs=Ms.stateNode.containerInfo,Cs===_s||Cs.nodeType===8&&Cs.parentNode===_s))return;Ms=Ms.return}for(;Es!==null;){if(Ms=Vc(Es),Ms===null)return;if(Cs=Ms.tag,Cs===5||Cs===6){_a=Ss=Ms;continue e}Es=Es.parentNode}}_a=_a.return}Ib(function(){var Ts=Ss,Bs=wb(ya),Is=[];e:{var Ps=cf.get(ca);if(Ps!==void 0){var Rs=sd,ks=ca;switch(ca){case"keypress":if(nd(ya)===0)break e;case"keydown":case"keyup":Rs=Qd;break;case"focusin":ks="focus",Rs=Ed;break;case"focusout":ks="blur",Rs=Ed;break;case"beforeblur":case"afterblur":Rs=Ed;break;case"click":if(ya.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Rs=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Rs=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Rs=Ud;break;case Ze$1:case $e$1:case af:Rs=Gd;break;case bf:Rs=Wd;break;case"scroll":Rs=ud;break;case"wheel":Rs=Yd;break;case"copy":case"cut":case"paste":Rs=Id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Rs=Sd}var $s=(ga&4)!==0,Os=!$s&&ca==="scroll",Ls=$s?Ps!==null?Ps+"Capture":null:Ps;$s=[];for(var Ds=Ts,Fs;Ds!==null;){Fs=Ds;var Ns=Fs.stateNode;if(Fs.tag===5&&Ns!==null&&(Fs=Ns,Ls!==null&&(Ns=Jb(Ds,Ls),Ns!=null&&$s.push(sf(Ds,Ns,Fs)))),Os)break;Ds=Ds.return}0<$s.length&&(Ps=new Rs(Ps,ks,null,ya,Bs),Is.push({event:Ps,listeners:$s}))}}if((ga&7)===0){e:{if(Ps=ca==="mouseover"||ca==="pointerover",Rs=ca==="mouseout"||ca==="pointerout",Ps&&ya!==vb&&(ks=ya.relatedTarget||ya.fromElement)&&(Vc(ks)||ks[tf]))break e;if((Rs||Ps)&&(Ps=Bs.window===Bs?Bs:(Ps=Bs.ownerDocument)?Ps.defaultView||Ps.parentWindow:window,Rs?(ks=ya.relatedTarget||ya.toElement,Rs=Ts,ks=ks?Vc(ks):null,ks!==null&&(Os=Ub(ks),ks!==Os||ks.tag!==5&&ks.tag!==6)&&(ks=null)):(Rs=null,ks=Ts),Rs!==ks)){if($s=Ad,Ns="onMouseLeave",Ls="onMouseEnter",Ds="mouse",(ca==="pointerout"||ca==="pointerover")&&($s=Sd,Ns="onPointerLeave",Ls="onPointerEnter",Ds="pointer"),Os=Rs==null?Ps:te$1(Rs),Fs=ks==null?Ps:te$1(ks),Ps=new $s(Ns,Ds+"leave",Rs,ya,Bs),Ps.target=Os,Ps.relatedTarget=Fs,Ns=null,Vc(Bs)===Ts&&($s=new $s(Ls,Ds+"enter",ks,ya,Bs),$s.target=Fs,$s.relatedTarget=Os,Ns=$s),Os=Ns,Rs&&ks)t:{for($s=Rs,Ls=ks,Ds=0,Fs=$s;Fs;Fs=uf(Fs))Ds++;for(Fs=0,Ns=Ls;Ns;Ns=uf(Ns))Fs++;for(;0<Ds-Fs;)$s=uf($s),Ds--;for(;0<Fs-Ds;)Ls=uf(Ls),Fs--;for(;Ds--;){if($s===Ls||Ls!==null&&$s===Ls.alternate)break t;$s=uf($s),Ls=uf(Ls)}$s=null}else $s=null;Rs!==null&&vf(Is,Ps,Rs,$s,!1),ks!==null&&Os!==null&&vf(Is,Os,ks,$s,!0)}}e:{if(Ps=Ts?te$1(Ts):window,Rs=Ps.nodeName&&Ps.nodeName.toLowerCase(),Rs==="select"||Rs==="input"&&Ps.type==="file")var Vs=ue$1;else if(le$1(Ps))if(ve$1)Vs=Ee$1;else{Vs=Ce$1;var Gs=Be$1}else(Rs=Ps.nodeName)&&Rs.toLowerCase()==="input"&&(Ps.type==="checkbox"||Ps.type==="radio")&&(Vs=De$1);if(Vs&&(Vs=Vs(ca,Ts))){me$1(Is,Vs,ya,Bs);break e}Gs&&Gs(ca,Ps,Ts),ca==="focusout"&&(Gs=Ps._wrapperState)&&Gs.controlled&&Ps.type==="number"&&bb(Ps,"number",Ps.value)}switch(Gs=Ts?te$1(Ts):window,ca){case"focusin":(le$1(Gs)||Gs.contentEditable==="true")&&(Pe$1=Gs,Qe$1=Ts,Re$1=null);break;case"focusout":Re$1=Qe$1=Pe$1=null;break;case"mousedown":Se$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Se$1=!1,Te$1(Is,ya,Bs);break;case"selectionchange":if(Oe$1)break;case"keydown":case"keyup":Te$1(Is,ya,Bs)}var Us;if($d)e:{switch(ca){case"compositionstart":var zs="onCompositionStart";break e;case"compositionend":zs="onCompositionEnd";break e;case"compositionupdate":zs="onCompositionUpdate";break e}zs=void 0}else he$1?fe$1(ca,ya)&&(zs="onCompositionEnd"):ca==="keydown"&&ya.keyCode===229&&(zs="onCompositionStart");zs&&(ce$1&&ya.locale!=="ko"&&(he$1||zs!=="onCompositionStart"?zs==="onCompositionEnd"&&he$1&&(Us=md()):(jd=Bs,kd="value"in jd?jd.value:jd.textContent,he$1=!0)),Gs=ne$1(Ts,zs),0<Gs.length&&(zs=new Kd(zs,ca,null,ya,Bs),Is.push({event:zs,listeners:Gs}),Us?zs.data=Us:(Us=ge$1(ya),Us!==null&&(zs.data=Us)))),(Us=be$1?ie$1(ca,ya):je$1(ca,ya))&&(Ts=ne$1(Ts,"onBeforeInput"),0<Ts.length&&(Bs=new Kd("onBeforeInput","beforeinput",null,ya,Bs),Is.push({event:Bs,listeners:Ts}),Bs.data=Us))}re$1(Is,ga)})}function sf(ca,ga,ya){return{instance:ca,listener:ga,currentTarget:ya}}function ne$1(ca,ga){for(var ya=ga+"Capture",_a=[];ca!==null;){var _s=ca,Ss=_s.stateNode;_s.tag===5&&Ss!==null&&(_s=Ss,Ss=Jb(ca,ya),Ss!=null&&_a.unshift(sf(ca,Ss,_s)),Ss=Jb(ca,ga),Ss!=null&&_a.push(sf(ca,Ss,_s))),ca=ca.return}return _a}function uf(ca){if(ca===null)return null;do ca=ca.return;while(ca&&ca.tag!==5);return ca||null}function vf(ca,ga,ya,_a,_s){for(var Ss=ga._reactName,Ms=[];ya!==null&&ya!==_a;){var Es=ya,Cs=Es.alternate,Ts=Es.stateNode;if(Cs!==null&&Cs===_a)break;Es.tag===5&&Ts!==null&&(Es=Ts,_s?(Cs=Jb(ya,Ss),Cs!=null&&Ms.unshift(sf(ya,Cs,Es))):_s||(Cs=Jb(ya,Ss),Cs!=null&&Ms.push(sf(ya,Cs,Es)))),ya=ya.return}Ms.length!==0&&ca.push({event:ga,listeners:Ms})}var wf=/\r\n?/g,xf=/\u0000|\uFFFD/g;function yf(ca){return(typeof ca=="string"?ca:""+ca).replace(wf,`
`).replace(xf,"")}function zf(ca,ga,ya){if(ga=yf(ga),yf(ca)!==ga&&ya)throw Error(p$3(425))}function Af(){}var Bf=null,Cf=null;function Df(ca,ga){return ca==="textarea"||ca==="noscript"||typeof ga.children=="string"||typeof ga.children=="number"||typeof ga.dangerouslySetInnerHTML=="object"&&ga.dangerouslySetInnerHTML!==null&&ga.dangerouslySetInnerHTML.__html!=null}var Ef=typeof setTimeout=="function"?setTimeout:void 0,Ff=typeof clearTimeout=="function"?clearTimeout:void 0,Gf=typeof Promise=="function"?Promise:void 0,If=typeof queueMicrotask=="function"?queueMicrotask:typeof Gf!="undefined"?function(ca){return Gf.resolve(null).then(ca).catch(Hf)}:Ef;function Hf(ca){setTimeout(function(){throw ca})}function Jf(ca,ga){var ya=ga,_a=0;do{var _s=ya.nextSibling;if(ca.removeChild(ya),_s&&_s.nodeType===8)if(ya=_s.data,ya==="/$"){if(_a===0){ca.removeChild(_s),ad(ga);return}_a--}else ya!=="$"&&ya!=="$?"&&ya!=="$!"||_a++;ya=_s}while(ya);ad(ga)}function Kf(ca){for(;ca!=null;ca=ca.nextSibling){var ga=ca.nodeType;if(ga===1||ga===3)break;if(ga===8){if(ga=ca.data,ga==="$"||ga==="$!"||ga==="$?")break;if(ga==="/$")return null}}return ca}function Lf(ca){ca=ca.previousSibling;for(var ga=0;ca;){if(ca.nodeType===8){var ya=ca.data;if(ya==="$"||ya==="$!"||ya==="$?"){if(ga===0)return ca;ga--}else ya==="/$"&&ga++}ca=ca.previousSibling}return null}var Mf=Math.random().toString(36).slice(2),Nf="__reactFiber$"+Mf,Of="__reactProps$"+Mf,tf="__reactContainer$"+Mf,nf="__reactEvents$"+Mf,Pf="__reactListeners$"+Mf,Qf="__reactHandles$"+Mf;function Vc(ca){var ga=ca[Nf];if(ga)return ga;for(var ya=ca.parentNode;ya;){if(ga=ya[tf]||ya[Nf]){if(ya=ga.alternate,ga.child!==null||ya!==null&&ya.child!==null)for(ca=Lf(ca);ca!==null;){if(ya=ca[Nf])return ya;ca=Lf(ca)}return ga}ca=ya,ya=ca.parentNode}return null}function Bb(ca){return ca=ca[Nf]||ca[tf],!ca||ca.tag!==5&&ca.tag!==6&&ca.tag!==13&&ca.tag!==3?null:ca}function te$1(ca){if(ca.tag===5||ca.tag===6)return ca.stateNode;throw Error(p$3(33))}function Cb(ca){return ca[Of]||null}var Rf=[],Sf=-1;function Tf(ca){return{current:ca}}function E$2(ca){0>Sf||(ca.current=Rf[Sf],Rf[Sf]=null,Sf--)}function G$1(ca,ga){Sf++,Rf[Sf]=ca.current,ca.current=ga}var Uf={},H$1=Tf(Uf),Vf=Tf(!1),Wf=Uf;function Xf(ca,ga){var ya=ca.type.contextTypes;if(!ya)return Uf;var _a=ca.stateNode;if(_a&&_a.__reactInternalMemoizedUnmaskedChildContext===ga)return _a.__reactInternalMemoizedMaskedChildContext;var _s={},Ss;for(Ss in ya)_s[Ss]=ga[Ss];return _a&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=ga,ca.__reactInternalMemoizedMaskedChildContext=_s),_s}function Yf(ca){return ca=ca.childContextTypes,ca!=null}function Zf(){E$2(Vf),E$2(H$1)}function $f(ca,ga,ya){if(H$1.current!==Uf)throw Error(p$3(168));G$1(H$1,ga),G$1(Vf,ya)}function ag(ca,ga,ya){var _a=ca.stateNode;if(ga=ga.childContextTypes,typeof _a.getChildContext!="function")return ya;_a=_a.getChildContext();for(var _s in _a)if(!(_s in ga))throw Error(p$3(108,Qa(ca)||"Unknown",_s));return A$2({},ya,_a)}function bg(ca){return ca=(ca=ca.stateNode)&&ca.__reactInternalMemoizedMergedChildContext||Uf,Wf=H$1.current,G$1(H$1,ca),G$1(Vf,Vf.current),!0}function cg(ca,ga,ya){var _a=ca.stateNode;if(!_a)throw Error(p$3(169));ya?(ca=ag(ca,ga,Wf),_a.__reactInternalMemoizedMergedChildContext=ca,E$2(Vf),E$2(H$1),G$1(H$1,ca)):E$2(Vf),G$1(Vf,ya)}var dg=null,eg=!1,fg=!1;function gg(ca){dg===null?dg=[ca]:dg.push(ca)}function hg(ca){eg=!0,gg(ca)}function ig(){if(!fg&&dg!==null){fg=!0;var ca=0,ga=C$2;try{var ya=dg;for(C$2=1;ca<ya.length;ca++){var _a=ya[ca];do _a=_a(!0);while(_a!==null)}dg=null,eg=!1}catch(_s){throw dg!==null&&(dg=dg.slice(ca+1)),$b(ec,ig),_s}finally{C$2=ga,fg=!1}}return null}var jg=ta.ReactCurrentBatchConfig;function kg(ca,ga){if(ca&&ca.defaultProps){ga=A$2({},ga),ca=ca.defaultProps;for(var ya in ca)ga[ya]===void 0&&(ga[ya]=ca[ya]);return ga}return ga}var lg=Tf(null),mg=null,ng=null,og=null;function pg(){og=ng=mg=null}function qg(ca){var ga=lg.current;E$2(lg),ca._currentValue=ga}function rg(ca,ga,ya){for(;ca!==null;){var _a=ca.alternate;if((ca.childLanes&ga)!==ga?(ca.childLanes|=ga,_a!==null&&(_a.childLanes|=ga)):_a!==null&&(_a.childLanes&ga)!==ga&&(_a.childLanes|=ga),ca===ya)break;ca=ca.return}}function sg(ca,ga){mg=ca,og=ng=null,ca=ca.dependencies,ca!==null&&ca.firstContext!==null&&((ca.lanes&ga)!==0&&(tg=!0),ca.firstContext=null)}function ug(ca){var ga=ca._currentValue;if(og!==ca)if(ca={context:ca,memoizedValue:ga,next:null},ng===null){if(mg===null)throw Error(p$3(308));ng=ca,mg.dependencies={lanes:0,firstContext:ca}}else ng=ng.next=ca;return ga}var vg=null,wg=!1;function xg(ca){ca.updateQueue={baseState:ca.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yg(ca,ga){ca=ca.updateQueue,ga.updateQueue===ca&&(ga.updateQueue={baseState:ca.baseState,firstBaseUpdate:ca.firstBaseUpdate,lastBaseUpdate:ca.lastBaseUpdate,shared:ca.shared,effects:ca.effects})}function zg(ca,ga){return{eventTime:ca,lane:ga,tag:0,payload:null,callback:null,next:null}}function Ag(ca,ga){var ya=ca.updateQueue;ya!==null&&(ya=ya.shared,Bg(ca)?(ca=ya.interleaved,ca===null?(ga.next=ga,vg===null?vg=[ya]:vg.push(ya)):(ga.next=ca.next,ca.next=ga),ya.interleaved=ga):(ca=ya.pending,ca===null?ga.next=ga:(ga.next=ca.next,ca.next=ga),ya.pending=ga))}function Cg(ca,ga,ya){if(ga=ga.updateQueue,ga!==null&&(ga=ga.shared,(ya&4194240)!==0)){var _a=ga.lanes;_a&=ca.pendingLanes,ya|=_a,ga.lanes=ya,Bc(ca,ya)}}function Dg(ca,ga){var ya=ca.updateQueue,_a=ca.alternate;if(_a!==null&&(_a=_a.updateQueue,ya===_a)){var _s=null,Ss=null;if(ya=ya.firstBaseUpdate,ya!==null){do{var Ms={eventTime:ya.eventTime,lane:ya.lane,tag:ya.tag,payload:ya.payload,callback:ya.callback,next:null};Ss===null?_s=Ss=Ms:Ss=Ss.next=Ms,ya=ya.next}while(ya!==null);Ss===null?_s=Ss=ga:Ss=Ss.next=ga}else _s=Ss=ga;ya={baseState:_a.baseState,firstBaseUpdate:_s,lastBaseUpdate:Ss,shared:_a.shared,effects:_a.effects},ca.updateQueue=ya;return}ca=ya.lastBaseUpdate,ca===null?ya.firstBaseUpdate=ga:ca.next=ga,ya.lastBaseUpdate=ga}function Eg(ca,ga,ya,_a){var _s=ca.updateQueue;wg=!1;var Ss=_s.firstBaseUpdate,Ms=_s.lastBaseUpdate,Es=_s.shared.pending;if(Es!==null){_s.shared.pending=null;var Cs=Es,Ts=Cs.next;Cs.next=null,Ms===null?Ss=Ts:Ms.next=Ts,Ms=Cs;var Bs=ca.alternate;Bs!==null&&(Bs=Bs.updateQueue,Es=Bs.lastBaseUpdate,Es!==Ms&&(Es===null?Bs.firstBaseUpdate=Ts:Es.next=Ts,Bs.lastBaseUpdate=Cs))}if(Ss!==null){var Is=_s.baseState;Ms=0,Bs=Ts=Cs=null,Es=Ss;do{var Ps=Es.lane,Rs=Es.eventTime;if((_a&Ps)===Ps){Bs!==null&&(Bs=Bs.next={eventTime:Rs,lane:0,tag:Es.tag,payload:Es.payload,callback:Es.callback,next:null});e:{var ks=ca,$s=Es;switch(Ps=ga,Rs=ya,$s.tag){case 1:if(ks=$s.payload,typeof ks=="function"){Is=ks.call(Rs,Is,Ps);break e}Is=ks;break e;case 3:ks.flags=ks.flags&-65537|128;case 0:if(ks=$s.payload,Ps=typeof ks=="function"?ks.call(Rs,Is,Ps):ks,Ps==null)break e;Is=A$2({},Is,Ps);break e;case 2:wg=!0}}Es.callback!==null&&Es.lane!==0&&(ca.flags|=64,Ps=_s.effects,Ps===null?_s.effects=[Es]:Ps.push(Es))}else Rs={eventTime:Rs,lane:Ps,tag:Es.tag,payload:Es.payload,callback:Es.callback,next:null},Bs===null?(Ts=Bs=Rs,Cs=Is):Bs=Bs.next=Rs,Ms|=Ps;if(Es=Es.next,Es===null){if(Es=_s.shared.pending,Es===null)break;Ps=Es,Es=Ps.next,Ps.next=null,_s.lastBaseUpdate=Ps,_s.shared.pending=null}}while(1);if(Bs===null&&(Cs=Is),_s.baseState=Cs,_s.firstBaseUpdate=Ts,_s.lastBaseUpdate=Bs,ga=_s.shared.interleaved,ga!==null){_s=ga;do Ms|=_s.lane,_s=_s.next;while(_s!==ga)}else Ss===null&&(_s.shared.lanes=0);Fg|=Ms,ca.lanes=Ms,ca.memoizedState=Is}}function Gg(ca,ga,ya){if(ca=ga.effects,ga.effects=null,ca!==null)for(ga=0;ga<ca.length;ga++){var _a=ca[ga],_s=_a.callback;if(_s!==null){if(_a.callback=null,_a=ya,typeof _s!="function")throw Error(p$3(191,_s));_s.call(_a)}}}var Hg=new aa.Component().refs;function Ig(ca,ga,ya,_a){ga=ca.memoizedState,ya=ya(_a,ga),ya=ya==null?ga:A$2({},ga,ya),ca.memoizedState=ya,ca.lanes===0&&(ca.updateQueue.baseState=ya)}var Mg={isMounted:function(ca){return(ca=ca._reactInternals)?Ub(ca)===ca:!1},enqueueSetState:function(ca,ga,ya){ca=ca._reactInternals;var _a=Jg(),_s=Kg(ca),Ss=zg(_a,_s);Ss.payload=ga,ya!=null&&(Ss.callback=ya),Ag(ca,Ss),ga=Lg(ca,_s,_a),ga!==null&&Cg(ga,ca,_s)},enqueueReplaceState:function(ca,ga,ya){ca=ca._reactInternals;var _a=Jg(),_s=Kg(ca),Ss=zg(_a,_s);Ss.tag=1,Ss.payload=ga,ya!=null&&(Ss.callback=ya),Ag(ca,Ss),ga=Lg(ca,_s,_a),ga!==null&&Cg(ga,ca,_s)},enqueueForceUpdate:function(ca,ga){ca=ca._reactInternals;var ya=Jg(),_a=Kg(ca),_s=zg(ya,_a);_s.tag=2,ga!=null&&(_s.callback=ga),Ag(ca,_s),ga=Lg(ca,_a,ya),ga!==null&&Cg(ga,ca,_a)}};function Ng(ca,ga,ya,_a,_s,Ss,Ms){return ca=ca.stateNode,typeof ca.shouldComponentUpdate=="function"?ca.shouldComponentUpdate(_a,Ss,Ms):ga.prototype&&ga.prototype.isPureReactComponent?!He$1(ya,_a)||!He$1(_s,Ss):!0}function Og(ca,ga,ya){var _a=!1,_s=Uf,Ss=ga.contextType;return typeof Ss=="object"&&Ss!==null?Ss=ug(Ss):(_s=Yf(ga)?Wf:H$1.current,_a=ga.contextTypes,Ss=(_a=_a!=null)?Xf(ca,_s):Uf),ga=new ga(ya,Ss),ca.memoizedState=ga.state!==null&&ga.state!==void 0?ga.state:null,ga.updater=Mg,ca.stateNode=ga,ga._reactInternals=ca,_a&&(ca=ca.stateNode,ca.__reactInternalMemoizedUnmaskedChildContext=_s,ca.__reactInternalMemoizedMaskedChildContext=Ss),ga}function Pg(ca,ga,ya,_a){ca=ga.state,typeof ga.componentWillReceiveProps=="function"&&ga.componentWillReceiveProps(ya,_a),typeof ga.UNSAFE_componentWillReceiveProps=="function"&&ga.UNSAFE_componentWillReceiveProps(ya,_a),ga.state!==ca&&Mg.enqueueReplaceState(ga,ga.state,null)}function Qg(ca,ga,ya,_a){var _s=ca.stateNode;_s.props=ya,_s.state=ca.memoizedState,_s.refs=Hg,xg(ca);var Ss=ga.contextType;typeof Ss=="object"&&Ss!==null?_s.context=ug(Ss):(Ss=Yf(ga)?Wf:H$1.current,_s.context=Xf(ca,Ss)),_s.state=ca.memoizedState,Ss=ga.getDerivedStateFromProps,typeof Ss=="function"&&(Ig(ca,ga,Ss,ya),_s.state=ca.memoizedState),typeof ga.getDerivedStateFromProps=="function"||typeof _s.getSnapshotBeforeUpdate=="function"||typeof _s.UNSAFE_componentWillMount!="function"&&typeof _s.componentWillMount!="function"||(ga=_s.state,typeof _s.componentWillMount=="function"&&_s.componentWillMount(),typeof _s.UNSAFE_componentWillMount=="function"&&_s.UNSAFE_componentWillMount(),ga!==_s.state&&Mg.enqueueReplaceState(_s,_s.state,null),Eg(ca,ya,_s,_a),_s.state=ca.memoizedState),typeof _s.componentDidMount=="function"&&(ca.flags|=4194308)}var Rg=[],Sg=0,Tg=null,Ug=0,Vg=[],Wg=0,Xg=null,Yg=1,Zg="";function $g(ca,ga){Rg[Sg++]=Ug,Rg[Sg++]=Tg,Tg=ca,Ug=ga}function ah(ca,ga,ya){Vg[Wg++]=Yg,Vg[Wg++]=Zg,Vg[Wg++]=Xg,Xg=ca;var _a=Yg;ca=Zg;var _s=32-nc(_a)-1;_a&=~(1<<_s),ya+=1;var Ss=32-nc(ga)+_s;if(30<Ss){var Ms=_s-_s%5;Ss=(_a&(1<<Ms)-1).toString(32),_a>>=Ms,_s-=Ms,Yg=1<<32-nc(ga)+_s|ya<<_s|_a,Zg=Ss+ca}else Yg=1<<Ss|ya<<_s|_a,Zg=ca}function bh(ca){ca.return!==null&&($g(ca,1),ah(ca,1,0))}function ch(ca){for(;ca===Tg;)Tg=Rg[--Sg],Rg[Sg]=null,Ug=Rg[--Sg],Rg[Sg]=null;for(;ca===Xg;)Xg=Vg[--Wg],Vg[Wg]=null,Zg=Vg[--Wg],Vg[Wg]=null,Yg=Vg[--Wg],Vg[Wg]=null}var dh=null,eh=null,I$1=!1,fh=null;function gh(ca,ga){var ya=hh(5,null,null,0);ya.elementType="DELETED",ya.stateNode=ga,ya.return=ca,ga=ca.deletions,ga===null?(ca.deletions=[ya],ca.flags|=16):ga.push(ya)}function ih(ca,ga){switch(ca.tag){case 5:var ya=ca.type;return ga=ga.nodeType!==1||ya.toLowerCase()!==ga.nodeName.toLowerCase()?null:ga,ga!==null?(ca.stateNode=ga,dh=ca,eh=Kf(ga.firstChild),!0):!1;case 6:return ga=ca.pendingProps===""||ga.nodeType!==3?null:ga,ga!==null?(ca.stateNode=ga,dh=ca,eh=null,!0):!1;case 13:return ga=ga.nodeType!==8?null:ga,ga!==null?(ya=Xg!==null?{id:Yg,overflow:Zg}:null,ca.memoizedState={dehydrated:ga,treeContext:ya,retryLane:1073741824},ya=hh(18,null,null,0),ya.stateNode=ga,ya.return=ca,ca.child=ya,dh=ca,eh=null,!0):!1;default:return!1}}function jh(ca){return(ca.mode&1)!==0&&(ca.flags&128)===0}function kh(ca){if(I$1){var ga=eh;if(ga){var ya=ga;if(!ih(ca,ga)){if(jh(ca))throw Error(p$3(418));ga=Kf(ya.nextSibling);var _a=dh;ga&&ih(ca,ga)?gh(_a,ya):(ca.flags=ca.flags&-4097|2,I$1=!1,dh=ca)}}else{if(jh(ca))throw Error(p$3(418));ca.flags=ca.flags&-4097|2,I$1=!1,dh=ca}}}function lh(ca){for(ca=ca.return;ca!==null&&ca.tag!==5&&ca.tag!==3&&ca.tag!==13;)ca=ca.return;dh=ca}function mh(ca){if(ca!==dh)return!1;if(!I$1)return lh(ca),I$1=!0,!1;var ga;if((ga=ca.tag!==3)&&!(ga=ca.tag!==5)&&(ga=ca.type,ga=ga!=="head"&&ga!=="body"&&!Df(ca.type,ca.memoizedProps)),ga&&(ga=eh)){if(jh(ca)){for(ca=eh;ca;)ca=Kf(ca.nextSibling);throw Error(p$3(418))}for(;ga;)gh(ca,ga),ga=Kf(ga.nextSibling)}if(lh(ca),ca.tag===13){if(ca=ca.memoizedState,ca=ca!==null?ca.dehydrated:null,!ca)throw Error(p$3(317));e:{for(ca=ca.nextSibling,ga=0;ca;){if(ca.nodeType===8){var ya=ca.data;if(ya==="/$"){if(ga===0){eh=Kf(ca.nextSibling);break e}ga--}else ya!=="$"&&ya!=="$!"&&ya!=="$?"||ga++}ca=ca.nextSibling}eh=null}}else eh=dh?Kf(ca.stateNode.nextSibling):null;return!0}function nh(){eh=dh=null,I$1=!1}function oh(ca){fh===null?fh=[ca]:fh.push(ca)}function ph(ca,ga,ya){if(ca=ya.ref,ca!==null&&typeof ca!="function"&&typeof ca!="object"){if(ya._owner){if(ya=ya._owner,ya){if(ya.tag!==1)throw Error(p$3(309));var _a=ya.stateNode}if(!_a)throw Error(p$3(147,ca));var _s=_a,Ss=""+ca;return ga!==null&&ga.ref!==null&&typeof ga.ref=="function"&&ga.ref._stringRef===Ss?ga.ref:(ga=function(Ms){var Es=_s.refs;Es===Hg&&(Es=_s.refs={}),Ms===null?delete Es[Ss]:Es[Ss]=Ms},ga._stringRef=Ss,ga)}if(typeof ca!="string")throw Error(p$3(284));if(!ya._owner)throw Error(p$3(290,ca))}return ca}function qh(ca,ga){throw ca=Object.prototype.toString.call(ga),Error(p$3(31,ca==="[object Object]"?"object with keys {"+Object.keys(ga).join(", ")+"}":ca))}function rh(ca){var ga=ca._init;return ga(ca._payload)}function sh(ca){function ga(Ls,Ds){if(ca){var Fs=Ls.deletions;Fs===null?(Ls.deletions=[Ds],Ls.flags|=16):Fs.push(Ds)}}function ya(Ls,Ds){if(!ca)return null;for(;Ds!==null;)ga(Ls,Ds),Ds=Ds.sibling;return null}function _a(Ls,Ds){for(Ls=new Map;Ds!==null;)Ds.key!==null?Ls.set(Ds.key,Ds):Ls.set(Ds.index,Ds),Ds=Ds.sibling;return Ls}function _s(Ls,Ds){return Ls=th(Ls,Ds),Ls.index=0,Ls.sibling=null,Ls}function Ss(Ls,Ds,Fs){return Ls.index=Fs,ca?(Fs=Ls.alternate,Fs!==null?(Fs=Fs.index,Fs<Ds?(Ls.flags|=2,Ds):Fs):(Ls.flags|=2,Ds)):(Ls.flags|=1048576,Ds)}function Ms(Ls){return ca&&Ls.alternate===null&&(Ls.flags|=2),Ls}function Es(Ls,Ds,Fs,Ns){return Ds===null||Ds.tag!==6?(Ds=uh(Fs,Ls.mode,Ns),Ds.return=Ls,Ds):(Ds=_s(Ds,Fs),Ds.return=Ls,Ds)}function Cs(Ls,Ds,Fs,Ns){var Vs=Fs.type;return Vs===wa?Bs(Ls,Ds,Fs.props.children,Ns,Fs.key):Ds!==null&&(Ds.elementType===Vs||typeof Vs=="object"&&Vs!==null&&Vs.$$typeof===Ga&&rh(Vs)===Ds.type)?(Ns=_s(Ds,Fs.props),Ns.ref=ph(Ls,Ds,Fs),Ns.return=Ls,Ns):(Ns=vh(Fs.type,Fs.key,Fs.props,null,Ls.mode,Ns),Ns.ref=ph(Ls,Ds,Fs),Ns.return=Ls,Ns)}function Ts(Ls,Ds,Fs,Ns){return Ds===null||Ds.tag!==4||Ds.stateNode.containerInfo!==Fs.containerInfo||Ds.stateNode.implementation!==Fs.implementation?(Ds=wh(Fs,Ls.mode,Ns),Ds.return=Ls,Ds):(Ds=_s(Ds,Fs.children||[]),Ds.return=Ls,Ds)}function Bs(Ls,Ds,Fs,Ns,Vs){return Ds===null||Ds.tag!==7?(Ds=xh(Fs,Ls.mode,Ns,Vs),Ds.return=Ls,Ds):(Ds=_s(Ds,Fs),Ds.return=Ls,Ds)}function Is(Ls,Ds,Fs){if(typeof Ds=="string"&&Ds!==""||typeof Ds=="number")return Ds=uh(""+Ds,Ls.mode,Fs),Ds.return=Ls,Ds;if(typeof Ds=="object"&&Ds!==null){switch(Ds.$$typeof){case ua:return Fs=vh(Ds.type,Ds.key,Ds.props,null,Ls.mode,Fs),Fs.ref=ph(Ls,null,Ds),Fs.return=Ls,Fs;case va:return Ds=wh(Ds,Ls.mode,Fs),Ds.return=Ls,Ds;case Ga:var Ns=Ds._init;return Is(Ls,Ns(Ds._payload),Fs)}if(db(Ds)||Ja(Ds))return Ds=xh(Ds,Ls.mode,Fs,null),Ds.return=Ls,Ds;qh(Ls,Ds)}return null}function Ps(Ls,Ds,Fs,Ns){var Vs=Ds!==null?Ds.key:null;if(typeof Fs=="string"&&Fs!==""||typeof Fs=="number")return Vs!==null?null:Es(Ls,Ds,""+Fs,Ns);if(typeof Fs=="object"&&Fs!==null){switch(Fs.$$typeof){case ua:return Fs.key===Vs?Cs(Ls,Ds,Fs,Ns):null;case va:return Fs.key===Vs?Ts(Ls,Ds,Fs,Ns):null;case Ga:return Vs=Fs._init,Ps(Ls,Ds,Vs(Fs._payload),Ns)}if(db(Fs)||Ja(Fs))return Vs!==null?null:Bs(Ls,Ds,Fs,Ns,null);qh(Ls,Fs)}return null}function Rs(Ls,Ds,Fs,Ns,Vs){if(typeof Ns=="string"&&Ns!==""||typeof Ns=="number")return Ls=Ls.get(Fs)||null,Es(Ds,Ls,""+Ns,Vs);if(typeof Ns=="object"&&Ns!==null){switch(Ns.$$typeof){case ua:return Ls=Ls.get(Ns.key===null?Fs:Ns.key)||null,Cs(Ds,Ls,Ns,Vs);case va:return Ls=Ls.get(Ns.key===null?Fs:Ns.key)||null,Ts(Ds,Ls,Ns,Vs);case Ga:var Gs=Ns._init;return Rs(Ls,Ds,Fs,Gs(Ns._payload),Vs)}if(db(Ns)||Ja(Ns))return Ls=Ls.get(Fs)||null,Bs(Ds,Ls,Ns,Vs,null);qh(Ds,Ns)}return null}function ks(Ls,Ds,Fs,Ns){for(var Vs=null,Gs=null,Us=Ds,zs=Ds=0,Hs=null;Us!==null&&zs<Fs.length;zs++){Us.index>zs?(Hs=Us,Us=null):Hs=Us.sibling;var Qs=Ps(Ls,Us,Fs[zs],Ns);if(Qs===null){Us===null&&(Us=Hs);break}ca&&Us&&Qs.alternate===null&&ga(Ls,Us),Ds=Ss(Qs,Ds,zs),Gs===null?Vs=Qs:Gs.sibling=Qs,Gs=Qs,Us=Hs}if(zs===Fs.length)return ya(Ls,Us),I$1&&$g(Ls,zs),Vs;if(Us===null){for(;zs<Fs.length;zs++)Us=Is(Ls,Fs[zs],Ns),Us!==null&&(Ds=Ss(Us,Ds,zs),Gs===null?Vs=Us:Gs.sibling=Us,Gs=Us);return I$1&&$g(Ls,zs),Vs}for(Us=_a(Ls,Us);zs<Fs.length;zs++)Hs=Rs(Us,Ls,zs,Fs[zs],Ns),Hs!==null&&(ca&&Hs.alternate!==null&&Us.delete(Hs.key===null?zs:Hs.key),Ds=Ss(Hs,Ds,zs),Gs===null?Vs=Hs:Gs.sibling=Hs,Gs=Hs);return ca&&Us.forEach(function(js){return ga(Ls,js)}),I$1&&$g(Ls,zs),Vs}function $s(Ls,Ds,Fs,Ns){var Vs=Ja(Fs);if(typeof Vs!="function")throw Error(p$3(150));if(Fs=Vs.call(Fs),Fs==null)throw Error(p$3(151));for(var Gs=Vs=null,Us=Ds,zs=Ds=0,Hs=null,Qs=Fs.next();Us!==null&&!Qs.done;zs++,Qs=Fs.next()){Us.index>zs?(Hs=Us,Us=null):Hs=Us.sibling;var js=Ps(Ls,Us,Qs.value,Ns);if(js===null){Us===null&&(Us=Hs);break}ca&&Us&&js.alternate===null&&ga(Ls,Us),Ds=Ss(js,Ds,zs),Gs===null?Vs=js:Gs.sibling=js,Gs=js,Us=Hs}if(Qs.done)return ya(Ls,Us),I$1&&$g(Ls,zs),Vs;if(Us===null){for(;!Qs.done;zs++,Qs=Fs.next())Qs=Is(Ls,Qs.value,Ns),Qs!==null&&(Ds=Ss(Qs,Ds,zs),Gs===null?Vs=Qs:Gs.sibling=Qs,Gs=Qs);return I$1&&$g(Ls,zs),Vs}for(Us=_a(Ls,Us);!Qs.done;zs++,Qs=Fs.next())Qs=Rs(Us,Ls,zs,Qs.value,Ns),Qs!==null&&(ca&&Qs.alternate!==null&&Us.delete(Qs.key===null?zs:Qs.key),Ds=Ss(Qs,Ds,zs),Gs===null?Vs=Qs:Gs.sibling=Qs,Gs=Qs);return ca&&Us.forEach(function(Zs){return ga(Ls,Zs)}),I$1&&$g(Ls,zs),Vs}function Os(Ls,Ds,Fs,Ns){if(typeof Fs=="object"&&Fs!==null&&Fs.type===wa&&Fs.key===null&&(Fs=Fs.props.children),typeof Fs=="object"&&Fs!==null){switch(Fs.$$typeof){case ua:e:{for(var Vs=Fs.key,Gs=Ds;Gs!==null;){if(Gs.key===Vs){if(Vs=Fs.type,Vs===wa){if(Gs.tag===7){ya(Ls,Gs.sibling),Ds=_s(Gs,Fs.props.children),Ds.return=Ls,Ls=Ds;break e}}else if(Gs.elementType===Vs||typeof Vs=="object"&&Vs!==null&&Vs.$$typeof===Ga&&rh(Vs)===Gs.type){ya(Ls,Gs.sibling),Ds=_s(Gs,Fs.props),Ds.ref=ph(Ls,Gs,Fs),Ds.return=Ls,Ls=Ds;break e}ya(Ls,Gs);break}else ga(Ls,Gs);Gs=Gs.sibling}Fs.type===wa?(Ds=xh(Fs.props.children,Ls.mode,Ns,Fs.key),Ds.return=Ls,Ls=Ds):(Ns=vh(Fs.type,Fs.key,Fs.props,null,Ls.mode,Ns),Ns.ref=ph(Ls,Ds,Fs),Ns.return=Ls,Ls=Ns)}return Ms(Ls);case va:e:{for(Gs=Fs.key;Ds!==null;){if(Ds.key===Gs)if(Ds.tag===4&&Ds.stateNode.containerInfo===Fs.containerInfo&&Ds.stateNode.implementation===Fs.implementation){ya(Ls,Ds.sibling),Ds=_s(Ds,Fs.children||[]),Ds.return=Ls,Ls=Ds;break e}else{ya(Ls,Ds);break}else ga(Ls,Ds);Ds=Ds.sibling}Ds=wh(Fs,Ls.mode,Ns),Ds.return=Ls,Ls=Ds}return Ms(Ls);case Ga:return Gs=Fs._init,Os(Ls,Ds,Gs(Fs._payload),Ns)}if(db(Fs))return ks(Ls,Ds,Fs,Ns);if(Ja(Fs))return $s(Ls,Ds,Fs,Ns);qh(Ls,Fs)}return typeof Fs=="string"&&Fs!==""||typeof Fs=="number"?(Fs=""+Fs,Ds!==null&&Ds.tag===6?(ya(Ls,Ds.sibling),Ds=_s(Ds,Fs),Ds.return=Ls,Ls=Ds):(ya(Ls,Ds),Ds=uh(Fs,Ls.mode,Ns),Ds.return=Ls,Ls=Ds),Ms(Ls)):ya(Ls,Ds)}return Os}var yh=sh(!0),zh=sh(!1),Ah={},Bh=Tf(Ah),Ch=Tf(Ah),Dh=Tf(Ah);function Eh(ca){if(ca===Ah)throw Error(p$3(174));return ca}function Fh(ca,ga){switch(G$1(Dh,ga),G$1(Ch,ca),G$1(Bh,Ah),ca=ga.nodeType,ca){case 9:case 11:ga=(ga=ga.documentElement)?ga.namespaceURI:kb(null,"");break;default:ca=ca===8?ga.parentNode:ga,ga=ca.namespaceURI||null,ca=ca.tagName,ga=kb(ga,ca)}E$2(Bh),G$1(Bh,ga)}function Gh(){E$2(Bh),E$2(Ch),E$2(Dh)}function Hh(ca){Eh(Dh.current);var ga=Eh(Bh.current),ya=kb(ga,ca.type);ga!==ya&&(G$1(Ch,ca),G$1(Bh,ya))}function Ih(ca){Ch.current===ca&&(E$2(Bh),E$2(Ch))}var K$1=Tf(0);function Jh(ca){for(var ga=ca;ga!==null;){if(ga.tag===13){var ya=ga.memoizedState;if(ya!==null&&(ya=ya.dehydrated,ya===null||ya.data==="$?"||ya.data==="$!"))return ga}else if(ga.tag===19&&ga.memoizedProps.revealOrder!==void 0){if((ga.flags&128)!==0)return ga}else if(ga.child!==null){ga.child.return=ga,ga=ga.child;continue}if(ga===ca)break;for(;ga.sibling===null;){if(ga.return===null||ga.return===ca)return null;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}return null}var Kh=[];function Lh(){for(var ca=0;ca<Kh.length;ca++)Kh[ca]._workInProgressVersionPrimary=null;Kh.length=0}var Mh=ta.ReactCurrentDispatcher,Nh=ta.ReactCurrentBatchConfig,Oh=0,L$2=null,M$2=null,N$2=null,Ph=!1,Qh=!1,Rh=0,Sh=0;function O$2(){throw Error(p$3(321))}function Th(ca,ga){if(ga===null)return!1;for(var ya=0;ya<ga.length&&ya<ca.length;ya++)if(!Ge$1(ca[ya],ga[ya]))return!1;return!0}function Uh(ca,ga,ya,_a,_s,Ss){if(Oh=Ss,L$2=ga,ga.memoizedState=null,ga.updateQueue=null,ga.lanes=0,Mh.current=ca===null||ca.memoizedState===null?Vh:Wh,ca=ya(_a,_s),Qh){Ss=0;do{if(Qh=!1,Rh=0,25<=Ss)throw Error(p$3(301));Ss+=1,N$2=M$2=null,ga.updateQueue=null,Mh.current=Xh,ca=ya(_a,_s)}while(Qh)}if(Mh.current=Yh,ga=M$2!==null&&M$2.next!==null,Oh=0,N$2=M$2=L$2=null,Ph=!1,ga)throw Error(p$3(300));return ca}function Zh(){var ca=Rh!==0;return Rh=0,ca}function $h(){var ca={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return N$2===null?L$2.memoizedState=N$2=ca:N$2=N$2.next=ca,N$2}function ai$1(){if(M$2===null){var ca=L$2.alternate;ca=ca!==null?ca.memoizedState:null}else ca=M$2.next;var ga=N$2===null?L$2.memoizedState:N$2.next;if(ga!==null)N$2=ga,M$2=ca;else{if(ca===null)throw Error(p$3(310));M$2=ca,ca={memoizedState:M$2.memoizedState,baseState:M$2.baseState,baseQueue:M$2.baseQueue,queue:M$2.queue,next:null},N$2===null?L$2.memoizedState=N$2=ca:N$2=N$2.next=ca}return N$2}function bi$1(ca,ga){return typeof ga=="function"?ga(ca):ga}function ci$1(ca){var ga=ai$1(),ya=ga.queue;if(ya===null)throw Error(p$3(311));ya.lastRenderedReducer=ca;var _a=M$2,_s=_a.baseQueue,Ss=ya.pending;if(Ss!==null){if(_s!==null){var Ms=_s.next;_s.next=Ss.next,Ss.next=Ms}_a.baseQueue=_s=Ss,ya.pending=null}if(_s!==null){Ss=_s.next,_a=_a.baseState;var Es=Ms=null,Cs=null,Ts=Ss;do{var Bs=Ts.lane;if((Oh&Bs)===Bs)Cs!==null&&(Cs=Cs.next={lane:0,action:Ts.action,hasEagerState:Ts.hasEagerState,eagerState:Ts.eagerState,next:null}),_a=Ts.hasEagerState?Ts.eagerState:ca(_a,Ts.action);else{var Is={lane:Bs,action:Ts.action,hasEagerState:Ts.hasEagerState,eagerState:Ts.eagerState,next:null};Cs===null?(Es=Cs=Is,Ms=_a):Cs=Cs.next=Is,L$2.lanes|=Bs,Fg|=Bs}Ts=Ts.next}while(Ts!==null&&Ts!==Ss);Cs===null?Ms=_a:Cs.next=Es,Ge$1(_a,ga.memoizedState)||(tg=!0),ga.memoizedState=_a,ga.baseState=Ms,ga.baseQueue=Cs,ya.lastRenderedState=_a}if(ca=ya.interleaved,ca!==null){_s=ca;do Ss=_s.lane,L$2.lanes|=Ss,Fg|=Ss,_s=_s.next;while(_s!==ca)}else _s===null&&(ya.lanes=0);return[ga.memoizedState,ya.dispatch]}function di$1(ca){var ga=ai$1(),ya=ga.queue;if(ya===null)throw Error(p$3(311));ya.lastRenderedReducer=ca;var _a=ya.dispatch,_s=ya.pending,Ss=ga.memoizedState;if(_s!==null){ya.pending=null;var Ms=_s=_s.next;do Ss=ca(Ss,Ms.action),Ms=Ms.next;while(Ms!==_s);Ge$1(Ss,ga.memoizedState)||(tg=!0),ga.memoizedState=Ss,ga.baseQueue===null&&(ga.baseState=Ss),ya.lastRenderedState=Ss}return[Ss,_a]}function ei$1(){}function fi$1(ca,ga){var ya=L$2,_a=ai$1(),_s=ga(),Ss=!Ge$1(_a.memoizedState,_s);if(Ss&&(_a.memoizedState=_s,tg=!0),_a=_a.queue,gi$1(hi$1.bind(null,ya,_a,ca),[ca]),_a.getSnapshot!==ga||Ss||N$2!==null&&N$2.memoizedState.tag&1){if(ya.flags|=2048,ii$1(9,ji$1.bind(null,ya,_a,_s,ga),void 0,null),P$2===null)throw Error(p$3(349));(Oh&30)!==0||ki$1(ya,ga,_s)}return _s}function ki$1(ca,ga,ya){ca.flags|=16384,ca={getSnapshot:ga,value:ya},ga=L$2.updateQueue,ga===null?(ga={lastEffect:null,stores:null},L$2.updateQueue=ga,ga.stores=[ca]):(ya=ga.stores,ya===null?ga.stores=[ca]:ya.push(ca))}function ji$1(ca,ga,ya,_a){ga.value=ya,ga.getSnapshot=_a,li$1(ga)&&Lg(ca,1,-1)}function hi$1(ca,ga,ya){return ya(function(){li$1(ga)&&Lg(ca,1,-1)})}function li$1(ca){var ga=ca.getSnapshot;ca=ca.value;try{var ya=ga();return!Ge$1(ca,ya)}catch{return!0}}function mi$1(ca){var ga=$h();return typeof ca=="function"&&(ca=ca()),ga.memoizedState=ga.baseState=ca,ca={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi$1,lastRenderedState:ca},ga.queue=ca,ca=ca.dispatch=ni$1.bind(null,L$2,ca),[ga.memoizedState,ca]}function ii$1(ca,ga,ya,_a){return ca={tag:ca,create:ga,destroy:ya,deps:_a,next:null},ga=L$2.updateQueue,ga===null?(ga={lastEffect:null,stores:null},L$2.updateQueue=ga,ga.lastEffect=ca.next=ca):(ya=ga.lastEffect,ya===null?ga.lastEffect=ca.next=ca:(_a=ya.next,ya.next=ca,ca.next=_a,ga.lastEffect=ca)),ca}function oi$1(){return ai$1().memoizedState}function pi$1(ca,ga,ya,_a){var _s=$h();L$2.flags|=ca,_s.memoizedState=ii$1(1|ga,ya,void 0,_a===void 0?null:_a)}function qi$1(ca,ga,ya,_a){var _s=ai$1();_a=_a===void 0?null:_a;var Ss=void 0;if(M$2!==null){var Ms=M$2.memoizedState;if(Ss=Ms.destroy,_a!==null&&Th(_a,Ms.deps)){_s.memoizedState=ii$1(ga,ya,Ss,_a);return}}L$2.flags|=ca,_s.memoizedState=ii$1(1|ga,ya,Ss,_a)}function ri$1(ca,ga){return pi$1(8390656,8,ca,ga)}function gi$1(ca,ga){return qi$1(2048,8,ca,ga)}function si$1(ca,ga){return qi$1(4,2,ca,ga)}function ti$1(ca,ga){return qi$1(4,4,ca,ga)}function ui$1(ca,ga){if(typeof ga=="function")return ca=ca(),ga(ca),function(){ga(null)};if(ga!=null)return ca=ca(),ga.current=ca,function(){ga.current=null}}function vi$1(ca,ga,ya){return ya=ya!=null?ya.concat([ca]):null,qi$1(4,4,ui$1.bind(null,ga,ca),ya)}function wi$1(){}function xi$1(ca,ga){var ya=ai$1();ga=ga===void 0?null:ga;var _a=ya.memoizedState;return _a!==null&&ga!==null&&Th(ga,_a[1])?_a[0]:(ya.memoizedState=[ca,ga],ca)}function yi$1(ca,ga){var ya=ai$1();ga=ga===void 0?null:ga;var _a=ya.memoizedState;return _a!==null&&ga!==null&&Th(ga,_a[1])?_a[0]:(ca=ca(),ya.memoizedState=[ca,ga],ca)}function zi$1(ca,ga,ya){return(Oh&21)===0?(ca.baseState&&(ca.baseState=!1,tg=!0),ca.memoizedState=ya):(Ge$1(ya,ga)||(ya=xc(),L$2.lanes|=ya,Fg|=ya,ca.baseState=!0),ga)}function Ai$1(ca,ga){var ya=C$2;C$2=ya!==0&&4>ya?ya:4,ca(!0);var _a=Nh.transition;Nh.transition={};try{ca(!1),ga()}finally{C$2=ya,Nh.transition=_a}}function Bi$1(){return ai$1().memoizedState}function Ci$1(ca,ga,ya){var _a=Kg(ca);ya={lane:_a,action:ya,hasEagerState:!1,eagerState:null,next:null},Di$1(ca)?Ei$1(ga,ya):(Fi$1(ca,ga,ya),ya=Jg(),ca=Lg(ca,_a,ya),ca!==null&&Gi$1(ca,ga,_a))}function ni$1(ca,ga,ya){var _a=Kg(ca),_s={lane:_a,action:ya,hasEagerState:!1,eagerState:null,next:null};if(Di$1(ca))Ei$1(ga,_s);else{Fi$1(ca,ga,_s);var Ss=ca.alternate;if(ca.lanes===0&&(Ss===null||Ss.lanes===0)&&(Ss=ga.lastRenderedReducer,Ss!==null))try{var Ms=ga.lastRenderedState,Es=Ss(Ms,ya);if(_s.hasEagerState=!0,_s.eagerState=Es,Ge$1(Es,Ms))return}catch{}finally{}ya=Jg(),ca=Lg(ca,_a,ya),ca!==null&&Gi$1(ca,ga,_a)}}function Di$1(ca){var ga=ca.alternate;return ca===L$2||ga!==null&&ga===L$2}function Ei$1(ca,ga){Qh=Ph=!0;var ya=ca.pending;ya===null?ga.next=ga:(ga.next=ya.next,ya.next=ga),ca.pending=ga}function Fi$1(ca,ga,ya){Bg(ca)?(ca=ga.interleaved,ca===null?(ya.next=ya,vg===null?vg=[ga]:vg.push(ga)):(ya.next=ca.next,ca.next=ya),ga.interleaved=ya):(ca=ga.pending,ca===null?ya.next=ya:(ya.next=ca.next,ca.next=ya),ga.pending=ya)}function Gi$1(ca,ga,ya){if((ya&4194240)!==0){var _a=ga.lanes;_a&=ca.pendingLanes,ya|=_a,ga.lanes=ya,Bc(ca,ya)}}var Yh={readContext:ug,useCallback:O$2,useContext:O$2,useEffect:O$2,useImperativeHandle:O$2,useInsertionEffect:O$2,useLayoutEffect:O$2,useMemo:O$2,useReducer:O$2,useRef:O$2,useState:O$2,useDebugValue:O$2,useDeferredValue:O$2,useTransition:O$2,useMutableSource:O$2,useSyncExternalStore:O$2,useId:O$2,unstable_isNewReconciler:!1},Vh={readContext:ug,useCallback:function(ca,ga){return $h().memoizedState=[ca,ga===void 0?null:ga],ca},useContext:ug,useEffect:ri$1,useImperativeHandle:function(ca,ga,ya){return ya=ya!=null?ya.concat([ca]):null,pi$1(4194308,4,ui$1.bind(null,ga,ca),ya)},useLayoutEffect:function(ca,ga){return pi$1(4194308,4,ca,ga)},useInsertionEffect:function(ca,ga){return pi$1(4,2,ca,ga)},useMemo:function(ca,ga){var ya=$h();return ga=ga===void 0?null:ga,ca=ca(),ya.memoizedState=[ca,ga],ca},useReducer:function(ca,ga,ya){var _a=$h();return ga=ya!==void 0?ya(ga):ga,_a.memoizedState=_a.baseState=ga,ca={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:ga},_a.queue=ca,ca=ca.dispatch=Ci$1.bind(null,L$2,ca),[_a.memoizedState,ca]},useRef:function(ca){var ga=$h();return ca={current:ca},ga.memoizedState=ca},useState:mi$1,useDebugValue:wi$1,useDeferredValue:function(ca){return $h().memoizedState=ca},useTransition:function(){var ca=mi$1(!1),ga=ca[0];return ca=Ai$1.bind(null,ca[1]),$h().memoizedState=ca,[ga,ca]},useMutableSource:function(){},useSyncExternalStore:function(ca,ga,ya){var _a=L$2,_s=$h();if(I$1){if(ya===void 0)throw Error(p$3(407));ya=ya()}else{if(ya=ga(),P$2===null)throw Error(p$3(349));(Oh&30)!==0||ki$1(_a,ga,ya)}_s.memoizedState=ya;var Ss={value:ya,getSnapshot:ga};return _s.queue=Ss,ri$1(hi$1.bind(null,_a,Ss,ca),[ca]),_a.flags|=2048,ii$1(9,ji$1.bind(null,_a,Ss,ya,ga),void 0,null),ya},useId:function(){var ca=$h(),ga=P$2.identifierPrefix;if(I$1){var ya=Zg,_a=Yg;ya=(_a&~(1<<32-nc(_a)-1)).toString(32)+ya,ga=":"+ga+"R"+ya,ya=Rh++,0<ya&&(ga+="H"+ya.toString(32)),ga+=":"}else ya=Sh++,ga=":"+ga+"r"+ya.toString(32)+":";return ca.memoizedState=ga},unstable_isNewReconciler:!1},Wh={readContext:ug,useCallback:xi$1,useContext:ug,useEffect:gi$1,useImperativeHandle:vi$1,useInsertionEffect:si$1,useLayoutEffect:ti$1,useMemo:yi$1,useReducer:ci$1,useRef:oi$1,useState:function(){return ci$1(bi$1)},useDebugValue:wi$1,useDeferredValue:function(ca){var ga=ai$1();return zi$1(ga,M$2.memoizedState,ca)},useTransition:function(){var ca=ci$1(bi$1)[0],ga=ai$1().memoizedState;return[ca,ga]},useMutableSource:ei$1,useSyncExternalStore:fi$1,useId:Bi$1,unstable_isNewReconciler:!1},Xh={readContext:ug,useCallback:xi$1,useContext:ug,useEffect:gi$1,useImperativeHandle:vi$1,useInsertionEffect:si$1,useLayoutEffect:ti$1,useMemo:yi$1,useReducer:di$1,useRef:oi$1,useState:function(){return di$1(bi$1)},useDebugValue:wi$1,useDeferredValue:function(ca){var ga=ai$1();return M$2===null?ga.memoizedState=ca:zi$1(ga,M$2.memoizedState,ca)},useTransition:function(){var ca=di$1(bi$1)[0],ga=ai$1().memoizedState;return[ca,ga]},useMutableSource:ei$1,useSyncExternalStore:fi$1,useId:Bi$1,unstable_isNewReconciler:!1};function Hi$1(ca,ga){try{var ya="",_a=ga;do ya+=Oa(_a),_a=_a.return;while(_a);var _s=ya}catch(Ss){_s=`
Error generating stack: `+Ss.message+`
`+Ss.stack}return{value:ca,source:ga,stack:_s}}function Ii$1(ca,ga){try{console.error(ga.value)}catch(ya){setTimeout(function(){throw ya})}}var Ji$1=typeof WeakMap=="function"?WeakMap:Map;function Ki$1(ca,ga,ya){ya=zg(-1,ya),ya.tag=3,ya.payload={element:null};var _a=ga.value;return ya.callback=function(){Li$1||(Li$1=!0,Mi$1=_a),Ii$1(ca,ga)},ya}function Ni$1(ca,ga,ya){ya=zg(-1,ya),ya.tag=3;var _a=ca.type.getDerivedStateFromError;if(typeof _a=="function"){var _s=ga.value;ya.payload=function(){return _a(_s)},ya.callback=function(){Ii$1(ca,ga)}}var Ss=ca.stateNode;return Ss!==null&&typeof Ss.componentDidCatch=="function"&&(ya.callback=function(){Ii$1(ca,ga),typeof _a!="function"&&(Oi$1===null?Oi$1=new Set([this]):Oi$1.add(this));var Ms=ga.stack;this.componentDidCatch(ga.value,{componentStack:Ms!==null?Ms:""})}),ya}function Pi$1(ca,ga,ya){var _a=ca.pingCache;if(_a===null){_a=ca.pingCache=new Ji$1;var _s=new Set;_a.set(ga,_s)}else _s=_a.get(ga),_s===void 0&&(_s=new Set,_a.set(ga,_s));_s.has(ya)||(_s.add(ya),ca=Qi$1.bind(null,ca,ga,ya),ga.then(ca,ca))}function Ri$1(ca){do{var ga;if((ga=ca.tag===13)&&(ga=ca.memoizedState,ga=ga!==null?ga.dehydrated!==null:!0),ga)return ca;ca=ca.return}while(ca!==null);return null}function Si$1(ca,ga,ya,_a,_s){return(ca.mode&1)===0?(ca===ga?ca.flags|=65536:(ca.flags|=128,ya.flags|=131072,ya.flags&=-52805,ya.tag===1&&(ya.alternate===null?ya.tag=17:(ga=zg(-1,1),ga.tag=2,Ag(ya,ga))),ya.lanes|=1),ca):(ca.flags|=65536,ca.lanes=_s,ca)}var Ti$1,Ui$1,Vi$1,Wi$1;Ti$1=function(ca,ga){for(var ya=ga.child;ya!==null;){if(ya.tag===5||ya.tag===6)ca.appendChild(ya.stateNode);else if(ya.tag!==4&&ya.child!==null){ya.child.return=ya,ya=ya.child;continue}if(ya===ga)break;for(;ya.sibling===null;){if(ya.return===null||ya.return===ga)return;ya=ya.return}ya.sibling.return=ya.return,ya=ya.sibling}};Ui$1=function(){};Vi$1=function(ca,ga,ya,_a){var _s=ca.memoizedProps;if(_s!==_a){ca=ga.stateNode,Eh(Bh.current);var Ss=null;switch(ya){case"input":_s=Xa(ca,_s),_a=Xa(ca,_a),Ss=[];break;case"select":_s=A$2({},_s,{value:void 0}),_a=A$2({},_a,{value:void 0}),Ss=[];break;case"textarea":_s=fb(ca,_s),_a=fb(ca,_a),Ss=[];break;default:typeof _s.onClick!="function"&&typeof _a.onClick=="function"&&(ca.onclick=Af)}tb(ya,_a);var Ms;ya=null;for(Ts in _s)if(!_a.hasOwnProperty(Ts)&&_s.hasOwnProperty(Ts)&&_s[Ts]!=null)if(Ts==="style"){var Es=_s[Ts];for(Ms in Es)Es.hasOwnProperty(Ms)&&(ya||(ya={}),ya[Ms]="")}else Ts!=="dangerouslySetInnerHTML"&&Ts!=="children"&&Ts!=="suppressContentEditableWarning"&&Ts!=="suppressHydrationWarning"&&Ts!=="autoFocus"&&(ea.hasOwnProperty(Ts)?Ss||(Ss=[]):(Ss=Ss||[]).push(Ts,null));for(Ts in _a){var Cs=_a[Ts];if(Es=_s!=null?_s[Ts]:void 0,_a.hasOwnProperty(Ts)&&Cs!==Es&&(Cs!=null||Es!=null))if(Ts==="style")if(Es){for(Ms in Es)!Es.hasOwnProperty(Ms)||Cs&&Cs.hasOwnProperty(Ms)||(ya||(ya={}),ya[Ms]="");for(Ms in Cs)Cs.hasOwnProperty(Ms)&&Es[Ms]!==Cs[Ms]&&(ya||(ya={}),ya[Ms]=Cs[Ms])}else ya||(Ss||(Ss=[]),Ss.push(Ts,ya)),ya=Cs;else Ts==="dangerouslySetInnerHTML"?(Cs=Cs?Cs.__html:void 0,Es=Es?Es.__html:void 0,Cs!=null&&Es!==Cs&&(Ss=Ss||[]).push(Ts,Cs)):Ts==="children"?typeof Cs!="string"&&typeof Cs!="number"||(Ss=Ss||[]).push(Ts,""+Cs):Ts!=="suppressContentEditableWarning"&&Ts!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Ts)?(Cs!=null&&Ts==="onScroll"&&D$1("scroll",ca),Ss||Es===Cs||(Ss=[])):(Ss=Ss||[]).push(Ts,Cs))}ya&&(Ss=Ss||[]).push("style",ya);var Ts=Ss;(ga.updateQueue=Ts)&&(ga.flags|=4)}};Wi$1=function(ca,ga,ya,_a){ya!==_a&&(ga.flags|=4)};function Xi$1(ca,ga){if(!I$1)switch(ca.tailMode){case"hidden":ga=ca.tail;for(var ya=null;ga!==null;)ga.alternate!==null&&(ya=ga),ga=ga.sibling;ya===null?ca.tail=null:ya.sibling=null;break;case"collapsed":ya=ca.tail;for(var _a=null;ya!==null;)ya.alternate!==null&&(_a=ya),ya=ya.sibling;_a===null?ga||ca.tail===null?ca.tail=null:ca.tail.sibling=null:_a.sibling=null}}function Q$1(ca){var ga=ca.alternate!==null&&ca.alternate.child===ca.child,ya=0,_a=0;if(ga)for(var _s=ca.child;_s!==null;)ya|=_s.lanes|_s.childLanes,_a|=_s.subtreeFlags&14680064,_a|=_s.flags&14680064,_s.return=ca,_s=_s.sibling;else for(_s=ca.child;_s!==null;)ya|=_s.lanes|_s.childLanes,_a|=_s.subtreeFlags,_a|=_s.flags,_s.return=ca,_s=_s.sibling;return ca.subtreeFlags|=_a,ca.childLanes=ya,ga}function Yi$1(ca,ga,ya){var _a=ga.pendingProps;switch(ch(ga),ga.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Q$1(ga),null;case 1:return Yf(ga.type)&&Zf(),Q$1(ga),null;case 3:return _a=ga.stateNode,Gh(),E$2(Vf),E$2(H$1),Lh(),_a.pendingContext&&(_a.context=_a.pendingContext,_a.pendingContext=null),(ca===null||ca.child===null)&&(mh(ga)?ga.flags|=4:ca===null||ca.memoizedState.isDehydrated&&(ga.flags&256)===0||(ga.flags|=1024,fh!==null&&(Zi$1(fh),fh=null))),Ui$1(ca,ga),Q$1(ga),null;case 5:Ih(ga);var _s=Eh(Dh.current);if(ya=ga.type,ca!==null&&ga.stateNode!=null)Vi$1(ca,ga,ya,_a,_s),ca.ref!==ga.ref&&(ga.flags|=512,ga.flags|=2097152);else{if(!_a){if(ga.stateNode===null)throw Error(p$3(166));return Q$1(ga),null}if(ca=Eh(Bh.current),mh(ga)){_a=ga.stateNode,ya=ga.type;var Ss=ga.memoizedProps;switch(_a[Nf]=ga,_a[Of]=Ss,ca=(ga.mode&1)!==0,ya){case"dialog":D$1("cancel",_a),D$1("close",_a);break;case"iframe":case"object":case"embed":D$1("load",_a);break;case"video":case"audio":for(_s=0;_s<kf.length;_s++)D$1(kf[_s],_a);break;case"source":D$1("error",_a);break;case"img":case"image":case"link":D$1("error",_a),D$1("load",_a);break;case"details":D$1("toggle",_a);break;case"input":Ya(_a,Ss),D$1("invalid",_a);break;case"select":_a._wrapperState={wasMultiple:!!Ss.multiple},D$1("invalid",_a);break;case"textarea":gb(_a,Ss),D$1("invalid",_a)}tb(ya,Ss),_s=null;for(var Ms in Ss)if(Ss.hasOwnProperty(Ms)){var Es=Ss[Ms];Ms==="children"?typeof Es=="string"?_a.textContent!==Es&&(Ss.suppressHydrationWarning!==!0&&zf(_a.textContent,Es,ca),_s=["children",Es]):typeof Es=="number"&&_a.textContent!==""+Es&&(Ss.suppressHydrationWarning!==!0&&zf(_a.textContent,Es,ca),_s=["children",""+Es]):ea.hasOwnProperty(Ms)&&Es!=null&&Ms==="onScroll"&&D$1("scroll",_a)}switch(ya){case"input":Ua(_a),cb(_a,Ss,!0);break;case"textarea":Ua(_a),ib(_a);break;case"select":case"option":break;default:typeof Ss.onClick=="function"&&(_a.onclick=Af)}_a=_s,ga.updateQueue=_a,_a!==null&&(ga.flags|=4)}else{Ms=_s.nodeType===9?_s:_s.ownerDocument,ca==="http://www.w3.org/1999/xhtml"&&(ca=jb(ya)),ca==="http://www.w3.org/1999/xhtml"?ya==="script"?(ca=Ms.createElement("div"),ca.innerHTML="<script><\/script>",ca=ca.removeChild(ca.firstChild)):typeof _a.is=="string"?ca=Ms.createElement(ya,{is:_a.is}):(ca=Ms.createElement(ya),ya==="select"&&(Ms=ca,_a.multiple?Ms.multiple=!0:_a.size&&(Ms.size=_a.size))):ca=Ms.createElementNS(ca,ya),ca[Nf]=ga,ca[Of]=_a,Ti$1(ca,ga,!1,!1),ga.stateNode=ca;e:{switch(Ms=ub(ya,_a),ya){case"dialog":D$1("cancel",ca),D$1("close",ca),_s=_a;break;case"iframe":case"object":case"embed":D$1("load",ca),_s=_a;break;case"video":case"audio":for(_s=0;_s<kf.length;_s++)D$1(kf[_s],ca);_s=_a;break;case"source":D$1("error",ca),_s=_a;break;case"img":case"image":case"link":D$1("error",ca),D$1("load",ca),_s=_a;break;case"details":D$1("toggle",ca),_s=_a;break;case"input":Ya(ca,_a),_s=Xa(ca,_a),D$1("invalid",ca);break;case"option":_s=_a;break;case"select":ca._wrapperState={wasMultiple:!!_a.multiple},_s=A$2({},_a,{value:void 0}),D$1("invalid",ca);break;case"textarea":gb(ca,_a),_s=fb(ca,_a),D$1("invalid",ca);break;default:_s=_a}tb(ya,_s),Es=_s;for(Ss in Es)if(Es.hasOwnProperty(Ss)){var Cs=Es[Ss];Ss==="style"?rb(ca,Cs):Ss==="dangerouslySetInnerHTML"?(Cs=Cs?Cs.__html:void 0,Cs!=null&&mb(ca,Cs)):Ss==="children"?typeof Cs=="string"?(ya!=="textarea"||Cs!=="")&&nb(ca,Cs):typeof Cs=="number"&&nb(ca,""+Cs):Ss!=="suppressContentEditableWarning"&&Ss!=="suppressHydrationWarning"&&Ss!=="autoFocus"&&(ea.hasOwnProperty(Ss)?Cs!=null&&Ss==="onScroll"&&D$1("scroll",ca):Cs!=null&&sa(ca,Ss,Cs,Ms))}switch(ya){case"input":Ua(ca),cb(ca,_a,!1);break;case"textarea":Ua(ca),ib(ca);break;case"option":_a.value!=null&&ca.setAttribute("value",""+Ra(_a.value));break;case"select":ca.multiple=!!_a.multiple,Ss=_a.value,Ss!=null?eb(ca,!!_a.multiple,Ss,!1):_a.defaultValue!=null&&eb(ca,!!_a.multiple,_a.defaultValue,!0);break;default:typeof _s.onClick=="function"&&(ca.onclick=Af)}switch(ya){case"button":case"input":case"select":case"textarea":_a=!!_a.autoFocus;break e;case"img":_a=!0;break e;default:_a=!1}}_a&&(ga.flags|=4)}ga.ref!==null&&(ga.flags|=512,ga.flags|=2097152)}return Q$1(ga),null;case 6:if(ca&&ga.stateNode!=null)Wi$1(ca,ga,ca.memoizedProps,_a);else{if(typeof _a!="string"&&ga.stateNode===null)throw Error(p$3(166));if(ya=Eh(Dh.current),Eh(Bh.current),mh(ga)){if(_a=ga.stateNode,ya=ga.memoizedProps,_a[Nf]=ga,(Ss=_a.nodeValue!==ya)&&(ca=dh,ca!==null))switch(ca.tag){case 3:zf(_a.nodeValue,ya,(ca.mode&1)!==0);break;case 5:ca.memoizedProps.suppressHydrationWarning!==!0&&zf(_a.nodeValue,ya,(ca.mode&1)!==0)}Ss&&(ga.flags|=4)}else _a=(ya.nodeType===9?ya:ya.ownerDocument).createTextNode(_a),_a[Nf]=ga,ga.stateNode=_a}return Q$1(ga),null;case 13:if(E$2(K$1),_a=ga.memoizedState,I$1&&eh!==null&&(ga.mode&1)!==0&&(ga.flags&128)===0){for(_a=eh;_a;)_a=Kf(_a.nextSibling);return nh(),ga.flags|=98560,ga}if(_a!==null&&_a.dehydrated!==null){if(_a=mh(ga),ca===null){if(!_a)throw Error(p$3(318));if(_a=ga.memoizedState,_a=_a!==null?_a.dehydrated:null,!_a)throw Error(p$3(317));_a[Nf]=ga}else nh(),(ga.flags&128)===0&&(ga.memoizedState=null),ga.flags|=4;return Q$1(ga),null}return fh!==null&&(Zi$1(fh),fh=null),(ga.flags&128)!==0?(ga.lanes=ya,ga):(_a=_a!==null,ya=!1,ca===null?mh(ga):ya=ca.memoizedState!==null,_a!==ya&&_a&&(ga.child.flags|=8192,(ga.mode&1)!==0&&(ca===null||(K$1.current&1)!==0?R$2===0&&(R$2=3):$i$1())),ga.updateQueue!==null&&(ga.flags|=4),Q$1(ga),null);case 4:return Gh(),Ui$1(ca,ga),ca===null&&rf(ga.stateNode.containerInfo),Q$1(ga),null;case 10:return qg(ga.type._context),Q$1(ga),null;case 17:return Yf(ga.type)&&Zf(),Q$1(ga),null;case 19:if(E$2(K$1),Ss=ga.memoizedState,Ss===null)return Q$1(ga),null;if(_a=(ga.flags&128)!==0,Ms=Ss.rendering,Ms===null)if(_a)Xi$1(Ss,!1);else{if(R$2!==0||ca!==null&&(ca.flags&128)!==0)for(ca=ga.child;ca!==null;){if(Ms=Jh(ca),Ms!==null){for(ga.flags|=128,Xi$1(Ss,!1),_a=Ms.updateQueue,_a!==null&&(ga.updateQueue=_a,ga.flags|=4),ga.subtreeFlags=0,_a=ya,ya=ga.child;ya!==null;)Ss=ya,ca=_a,Ss.flags&=14680066,Ms=Ss.alternate,Ms===null?(Ss.childLanes=0,Ss.lanes=ca,Ss.child=null,Ss.subtreeFlags=0,Ss.memoizedProps=null,Ss.memoizedState=null,Ss.updateQueue=null,Ss.dependencies=null,Ss.stateNode=null):(Ss.childLanes=Ms.childLanes,Ss.lanes=Ms.lanes,Ss.child=Ms.child,Ss.subtreeFlags=0,Ss.deletions=null,Ss.memoizedProps=Ms.memoizedProps,Ss.memoizedState=Ms.memoizedState,Ss.updateQueue=Ms.updateQueue,Ss.type=Ms.type,ca=Ms.dependencies,Ss.dependencies=ca===null?null:{lanes:ca.lanes,firstContext:ca.firstContext}),ya=ya.sibling;return G$1(K$1,K$1.current&1|2),ga.child}ca=ca.sibling}Ss.tail!==null&&B$1()>aj&&(ga.flags|=128,_a=!0,Xi$1(Ss,!1),ga.lanes=4194304)}else{if(!_a)if(ca=Jh(Ms),ca!==null){if(ga.flags|=128,_a=!0,ya=ca.updateQueue,ya!==null&&(ga.updateQueue=ya,ga.flags|=4),Xi$1(Ss,!0),Ss.tail===null&&Ss.tailMode==="hidden"&&!Ms.alternate&&!I$1)return Q$1(ga),null}else 2*B$1()-Ss.renderingStartTime>aj&&ya!==1073741824&&(ga.flags|=128,_a=!0,Xi$1(Ss,!1),ga.lanes=4194304);Ss.isBackwards?(Ms.sibling=ga.child,ga.child=Ms):(ya=Ss.last,ya!==null?ya.sibling=Ms:ga.child=Ms,Ss.last=Ms)}return Ss.tail!==null?(ga=Ss.tail,Ss.rendering=ga,Ss.tail=ga.sibling,Ss.renderingStartTime=B$1(),ga.sibling=null,ya=K$1.current,G$1(K$1,_a?ya&1|2:ya&1),ga):(Q$1(ga),null);case 22:case 23:return bj(),_a=ga.memoizedState!==null,ca!==null&&ca.memoizedState!==null!==_a&&(ga.flags|=8192),_a&&(ga.mode&1)!==0?(cj&1073741824)!==0&&(Q$1(ga),ga.subtreeFlags&6&&(ga.flags|=8192)):Q$1(ga),null;case 24:return null;case 25:return null}throw Error(p$3(156,ga.tag))}var dj=ta.ReactCurrentOwner,tg=!1;function ej(ca,ga,ya,_a){ga.child=ca===null?zh(ga,null,ya,_a):yh(ga,ca.child,ya,_a)}function fj(ca,ga,ya,_a,_s){ya=ya.render;var Ss=ga.ref;return sg(ga,_s),_a=Uh(ca,ga,ya,_a,Ss,_s),ya=Zh(),ca!==null&&!tg?(ga.updateQueue=ca.updateQueue,ga.flags&=-2053,ca.lanes&=~_s,gj(ca,ga,_s)):(I$1&&ya&&bh(ga),ga.flags|=1,ej(ca,ga,_a,_s),ga.child)}function hj(ca,ga,ya,_a,_s){if(ca===null){var Ss=ya.type;return typeof Ss=="function"&&!ij(Ss)&&Ss.defaultProps===void 0&&ya.compare===null&&ya.defaultProps===void 0?(ga.tag=15,ga.type=Ss,jj(ca,ga,Ss,_a,_s)):(ca=vh(ya.type,null,_a,ga,ga.mode,_s),ca.ref=ga.ref,ca.return=ga,ga.child=ca)}if(Ss=ca.child,(ca.lanes&_s)===0){var Ms=Ss.memoizedProps;if(ya=ya.compare,ya=ya!==null?ya:He$1,ya(Ms,_a)&&ca.ref===ga.ref)return gj(ca,ga,_s)}return ga.flags|=1,ca=th(Ss,_a),ca.ref=ga.ref,ca.return=ga,ga.child=ca}function jj(ca,ga,ya,_a,_s){if(ca!==null){var Ss=ca.memoizedProps;if(He$1(Ss,_a)&&ca.ref===ga.ref)if(tg=!1,ga.pendingProps=_a=Ss,(ca.lanes&_s)!==0)(ca.flags&131072)!==0&&(tg=!0);else return ga.lanes=ca.lanes,gj(ca,ga,_s)}return kj(ca,ga,ya,_a,_s)}function lj(ca,ga,ya){var _a=ga.pendingProps,_s=_a.children,Ss=ca!==null?ca.memoizedState:null;if(_a.mode==="hidden")if((ga.mode&1)===0)ga.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(mj,cj),cj|=ya;else if((ya&1073741824)!==0)ga.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a=Ss!==null?Ss.baseLanes:ya,G$1(mj,cj),cj|=_a;else return ca=Ss!==null?Ss.baseLanes|ya:ya,ga.lanes=ga.childLanes=1073741824,ga.memoizedState={baseLanes:ca,cachePool:null,transitions:null},ga.updateQueue=null,G$1(mj,cj),cj|=ca,null;else Ss!==null?(_a=Ss.baseLanes|ya,ga.memoizedState=null):_a=ya,G$1(mj,cj),cj|=_a;return ej(ca,ga,_s,ya),ga.child}function nj(ca,ga){var ya=ga.ref;(ca===null&&ya!==null||ca!==null&&ca.ref!==ya)&&(ga.flags|=512,ga.flags|=2097152)}function kj(ca,ga,ya,_a,_s){var Ss=Yf(ya)?Wf:H$1.current;return Ss=Xf(ga,Ss),sg(ga,_s),ya=Uh(ca,ga,ya,_a,Ss,_s),_a=Zh(),ca!==null&&!tg?(ga.updateQueue=ca.updateQueue,ga.flags&=-2053,ca.lanes&=~_s,gj(ca,ga,_s)):(I$1&&_a&&bh(ga),ga.flags|=1,ej(ca,ga,ya,_s),ga.child)}function oj(ca,ga,ya,_a,_s){if(Yf(ya)){var Ss=!0;bg(ga)}else Ss=!1;if(sg(ga,_s),ga.stateNode===null)ca!==null&&(ca.alternate=null,ga.alternate=null,ga.flags|=2),Og(ga,ya,_a),Qg(ga,ya,_a,_s),_a=!0;else if(ca===null){var Ms=ga.stateNode,Es=ga.memoizedProps;Ms.props=Es;var Cs=Ms.context,Ts=ya.contextType;typeof Ts=="object"&&Ts!==null?Ts=ug(Ts):(Ts=Yf(ya)?Wf:H$1.current,Ts=Xf(ga,Ts));var Bs=ya.getDerivedStateFromProps,Is=typeof Bs=="function"||typeof Ms.getSnapshotBeforeUpdate=="function";Is||typeof Ms.UNSAFE_componentWillReceiveProps!="function"&&typeof Ms.componentWillReceiveProps!="function"||(Es!==_a||Cs!==Ts)&&Pg(ga,Ms,_a,Ts),wg=!1;var Ps=ga.memoizedState;Ms.state=Ps,Eg(ga,_a,Ms,_s),Cs=ga.memoizedState,Es!==_a||Ps!==Cs||Vf.current||wg?(typeof Bs=="function"&&(Ig(ga,ya,Bs,_a),Cs=ga.memoizedState),(Es=wg||Ng(ga,ya,Es,_a,Ps,Cs,Ts))?(Is||typeof Ms.UNSAFE_componentWillMount!="function"&&typeof Ms.componentWillMount!="function"||(typeof Ms.componentWillMount=="function"&&Ms.componentWillMount(),typeof Ms.UNSAFE_componentWillMount=="function"&&Ms.UNSAFE_componentWillMount()),typeof Ms.componentDidMount=="function"&&(ga.flags|=4194308)):(typeof Ms.componentDidMount=="function"&&(ga.flags|=4194308),ga.memoizedProps=_a,ga.memoizedState=Cs),Ms.props=_a,Ms.state=Cs,Ms.context=Ts,_a=Es):(typeof Ms.componentDidMount=="function"&&(ga.flags|=4194308),_a=!1)}else{Ms=ga.stateNode,yg(ca,ga),Es=ga.memoizedProps,Ts=ga.type===ga.elementType?Es:kg(ga.type,Es),Ms.props=Ts,Is=ga.pendingProps,Ps=Ms.context,Cs=ya.contextType,typeof Cs=="object"&&Cs!==null?Cs=ug(Cs):(Cs=Yf(ya)?Wf:H$1.current,Cs=Xf(ga,Cs));var Rs=ya.getDerivedStateFromProps;(Bs=typeof Rs=="function"||typeof Ms.getSnapshotBeforeUpdate=="function")||typeof Ms.UNSAFE_componentWillReceiveProps!="function"&&typeof Ms.componentWillReceiveProps!="function"||(Es!==Is||Ps!==Cs)&&Pg(ga,Ms,_a,Cs),wg=!1,Ps=ga.memoizedState,Ms.state=Ps,Eg(ga,_a,Ms,_s);var ks=ga.memoizedState;Es!==Is||Ps!==ks||Vf.current||wg?(typeof Rs=="function"&&(Ig(ga,ya,Rs,_a),ks=ga.memoizedState),(Ts=wg||Ng(ga,ya,Ts,_a,Ps,ks,Cs)||!1)?(Bs||typeof Ms.UNSAFE_componentWillUpdate!="function"&&typeof Ms.componentWillUpdate!="function"||(typeof Ms.componentWillUpdate=="function"&&Ms.componentWillUpdate(_a,ks,Cs),typeof Ms.UNSAFE_componentWillUpdate=="function"&&Ms.UNSAFE_componentWillUpdate(_a,ks,Cs)),typeof Ms.componentDidUpdate=="function"&&(ga.flags|=4),typeof Ms.getSnapshotBeforeUpdate=="function"&&(ga.flags|=1024)):(typeof Ms.componentDidUpdate!="function"||Es===ca.memoizedProps&&Ps===ca.memoizedState||(ga.flags|=4),typeof Ms.getSnapshotBeforeUpdate!="function"||Es===ca.memoizedProps&&Ps===ca.memoizedState||(ga.flags|=1024),ga.memoizedProps=_a,ga.memoizedState=ks),Ms.props=_a,Ms.state=ks,Ms.context=Cs,_a=Ts):(typeof Ms.componentDidUpdate!="function"||Es===ca.memoizedProps&&Ps===ca.memoizedState||(ga.flags|=4),typeof Ms.getSnapshotBeforeUpdate!="function"||Es===ca.memoizedProps&&Ps===ca.memoizedState||(ga.flags|=1024),_a=!1)}return pj(ca,ga,ya,_a,Ss,_s)}function pj(ca,ga,ya,_a,_s,Ss){nj(ca,ga);var Ms=(ga.flags&128)!==0;if(!_a&&!Ms)return _s&&cg(ga,ya,!1),gj(ca,ga,Ss);_a=ga.stateNode,dj.current=ga;var Es=Ms&&typeof ya.getDerivedStateFromError!="function"?null:_a.render();return ga.flags|=1,ca!==null&&Ms?(ga.child=yh(ga,ca.child,null,Ss),ga.child=yh(ga,null,Es,Ss)):ej(ca,ga,Es,Ss),ga.memoizedState=_a.state,_s&&cg(ga,ya,!0),ga.child}function qj(ca){var ga=ca.stateNode;ga.pendingContext?$f(ca,ga.pendingContext,ga.pendingContext!==ga.context):ga.context&&$f(ca,ga.context,!1),Fh(ca,ga.containerInfo)}function rj(ca,ga,ya,_a,_s){return nh(),oh(_s),ga.flags|=256,ej(ca,ga,ya,_a),ga.child}var sj={dehydrated:null,treeContext:null,retryLane:0};function tj(ca){return{baseLanes:ca,cachePool:null,transitions:null}}function uj(ca,ga){return{baseLanes:ca.baseLanes|ga,cachePool:null,transitions:ca.transitions}}function vj(ca,ga,ya){var _a=ga.pendingProps,_s=K$1.current,Ss=!1,Ms=(ga.flags&128)!==0,Es;if((Es=Ms)||(Es=ca!==null&&ca.memoizedState===null?!1:(_s&2)!==0),Es?(Ss=!0,ga.flags&=-129):(ca===null||ca.memoizedState!==null)&&(_s|=1),G$1(K$1,_s&1),ca===null)return kh(ga),ca=ga.memoizedState,ca!==null&&(ca=ca.dehydrated,ca!==null)?((ga.mode&1)===0?ga.lanes=1:ca.data==="$!"?ga.lanes=8:ga.lanes=1073741824,null):(_s=_a.children,ca=_a.fallback,Ss?(_a=ga.mode,Ss=ga.child,_s={mode:"hidden",children:_s},(_a&1)===0&&Ss!==null?(Ss.childLanes=0,Ss.pendingProps=_s):Ss=wj(_s,_a,0,null),ca=xh(ca,_a,ya,null),Ss.return=ga,ca.return=ga,Ss.sibling=ca,ga.child=Ss,ga.child.memoizedState=tj(ya),ga.memoizedState=sj,ca):xj(ga,_s));if(_s=ca.memoizedState,_s!==null){if(Es=_s.dehydrated,Es!==null){if(Ms)return ga.flags&256?(ga.flags&=-257,yj(ca,ga,ya,Error(p$3(422)))):ga.memoizedState!==null?(ga.child=ca.child,ga.flags|=128,null):(Ss=_a.fallback,_s=ga.mode,_a=wj({mode:"visible",children:_a.children},_s,0,null),Ss=xh(Ss,_s,ya,null),Ss.flags|=2,_a.return=ga,Ss.return=ga,_a.sibling=Ss,ga.child=_a,(ga.mode&1)!==0&&yh(ga,ca.child,null,ya),ga.child.memoizedState=tj(ya),ga.memoizedState=sj,Ss);if((ga.mode&1)===0)ga=yj(ca,ga,ya,null);else if(Es.data==="$!")ga=yj(ca,ga,ya,Error(p$3(419)));else if(_a=(ya&ca.childLanes)!==0,tg||_a){if(_a=P$2,_a!==null){switch(ya&-ya){case 4:Ss=2;break;case 16:Ss=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ss=32;break;case 536870912:Ss=268435456;break;default:Ss=0}_a=(Ss&(_a.suspendedLanes|ya))!==0?0:Ss,_a!==0&&_a!==_s.retryLane&&(_s.retryLane=_a,Lg(ca,_a,-1))}$i$1(),ga=yj(ca,ga,ya,Error(p$3(421)))}else Es.data==="$?"?(ga.flags|=128,ga.child=ca.child,ga=zj.bind(null,ca),Es._reactRetry=ga,ga=null):(ya=_s.treeContext,eh=Kf(Es.nextSibling),dh=ga,I$1=!0,fh=null,ya!==null&&(Vg[Wg++]=Yg,Vg[Wg++]=Zg,Vg[Wg++]=Xg,Yg=ya.id,Zg=ya.overflow,Xg=ga),ga=xj(ga,ga.pendingProps.children),ga.flags|=4096);return ga}return Ss?(_a=Aj(ca,ga,_a.children,_a.fallback,ya),Ss=ga.child,_s=ca.child.memoizedState,Ss.memoizedState=_s===null?tj(ya):uj(_s,ya),Ss.childLanes=ca.childLanes&~ya,ga.memoizedState=sj,_a):(ya=Bj(ca,ga,_a.children,ya),ga.memoizedState=null,ya)}return Ss?(_a=Aj(ca,ga,_a.children,_a.fallback,ya),Ss=ga.child,_s=ca.child.memoizedState,Ss.memoizedState=_s===null?tj(ya):uj(_s,ya),Ss.childLanes=ca.childLanes&~ya,ga.memoizedState=sj,_a):(ya=Bj(ca,ga,_a.children,ya),ga.memoizedState=null,ya)}function xj(ca,ga){return ga=wj({mode:"visible",children:ga},ca.mode,0,null),ga.return=ca,ca.child=ga}function Bj(ca,ga,ya,_a){var _s=ca.child;return ca=_s.sibling,ya=th(_s,{mode:"visible",children:ya}),(ga.mode&1)===0&&(ya.lanes=_a),ya.return=ga,ya.sibling=null,ca!==null&&(_a=ga.deletions,_a===null?(ga.deletions=[ca],ga.flags|=16):_a.push(ca)),ga.child=ya}function Aj(ca,ga,ya,_a,_s){var Ss=ga.mode;ca=ca.child;var Ms=ca.sibling,Es={mode:"hidden",children:ya};return(Ss&1)===0&&ga.child!==ca?(ya=ga.child,ya.childLanes=0,ya.pendingProps=Es,ga.deletions=null):(ya=th(ca,Es),ya.subtreeFlags=ca.subtreeFlags&14680064),Ms!==null?_a=th(Ms,_a):(_a=xh(_a,Ss,_s,null),_a.flags|=2),_a.return=ga,ya.return=ga,ya.sibling=_a,ga.child=ya,_a}function yj(ca,ga,ya,_a){return _a!==null&&oh(_a),yh(ga,ca.child,null,ya),ca=xj(ga,ga.pendingProps.children),ca.flags|=2,ga.memoizedState=null,ca}function Cj(ca,ga,ya){ca.lanes|=ga;var _a=ca.alternate;_a!==null&&(_a.lanes|=ga),rg(ca.return,ga,ya)}function Dj(ca,ga,ya,_a,_s){var Ss=ca.memoizedState;Ss===null?ca.memoizedState={isBackwards:ga,rendering:null,renderingStartTime:0,last:_a,tail:ya,tailMode:_s}:(Ss.isBackwards=ga,Ss.rendering=null,Ss.renderingStartTime=0,Ss.last=_a,Ss.tail=ya,Ss.tailMode=_s)}function Ej(ca,ga,ya){var _a=ga.pendingProps,_s=_a.revealOrder,Ss=_a.tail;if(ej(ca,ga,_a.children,ya),_a=K$1.current,(_a&2)!==0)_a=_a&1|2,ga.flags|=128;else{if(ca!==null&&(ca.flags&128)!==0)e:for(ca=ga.child;ca!==null;){if(ca.tag===13)ca.memoizedState!==null&&Cj(ca,ya,ga);else if(ca.tag===19)Cj(ca,ya,ga);else if(ca.child!==null){ca.child.return=ca,ca=ca.child;continue}if(ca===ga)break e;for(;ca.sibling===null;){if(ca.return===null||ca.return===ga)break e;ca=ca.return}ca.sibling.return=ca.return,ca=ca.sibling}_a&=1}if(G$1(K$1,_a),(ga.mode&1)===0)ga.memoizedState=null;else switch(_s){case"forwards":for(ya=ga.child,_s=null;ya!==null;)ca=ya.alternate,ca!==null&&Jh(ca)===null&&(_s=ya),ya=ya.sibling;ya=_s,ya===null?(_s=ga.child,ga.child=null):(_s=ya.sibling,ya.sibling=null),Dj(ga,!1,_s,ya,Ss);break;case"backwards":for(ya=null,_s=ga.child,ga.child=null;_s!==null;){if(ca=_s.alternate,ca!==null&&Jh(ca)===null){ga.child=_s;break}ca=_s.sibling,_s.sibling=ya,ya=_s,_s=ca}Dj(ga,!0,ya,null,Ss);break;case"together":Dj(ga,!1,null,null,void 0);break;default:ga.memoizedState=null}return ga.child}function gj(ca,ga,ya){if(ca!==null&&(ga.dependencies=ca.dependencies),Fg|=ga.lanes,(ya&ga.childLanes)===0)return null;if(ca!==null&&ga.child!==ca.child)throw Error(p$3(153));if(ga.child!==null){for(ca=ga.child,ya=th(ca,ca.pendingProps),ga.child=ya,ya.return=ga;ca.sibling!==null;)ca=ca.sibling,ya=ya.sibling=th(ca,ca.pendingProps),ya.return=ga;ya.sibling=null}return ga.child}function Fj(ca,ga,ya){switch(ga.tag){case 3:qj(ga),nh();break;case 5:Hh(ga);break;case 1:Yf(ga.type)&&bg(ga);break;case 4:Fh(ga,ga.stateNode.containerInfo);break;case 10:var _a=ga.type._context,_s=ga.memoizedProps.value;G$1(lg,_a._currentValue),_a._currentValue=_s;break;case 13:if(_a=ga.memoizedState,_a!==null)return _a.dehydrated!==null?(G$1(K$1,K$1.current&1),ga.flags|=128,null):(ya&ga.child.childLanes)!==0?vj(ca,ga,ya):(G$1(K$1,K$1.current&1),ca=gj(ca,ga,ya),ca!==null?ca.sibling:null);G$1(K$1,K$1.current&1);break;case 19:if(_a=(ya&ga.childLanes)!==0,(ca.flags&128)!==0){if(_a)return Ej(ca,ga,ya);ga.flags|=128}if(_s=ga.memoizedState,_s!==null&&(_s.rendering=null,_s.tail=null,_s.lastEffect=null),G$1(K$1,K$1.current),_a)break;return null;case 22:case 23:return ga.lanes=0,lj(ca,ga,ya)}return gj(ca,ga,ya)}function Gj(ca,ga){switch(ch(ga),ga.tag){case 1:return Yf(ga.type)&&Zf(),ca=ga.flags,ca&65536?(ga.flags=ca&-65537|128,ga):null;case 3:return Gh(),E$2(Vf),E$2(H$1),Lh(),ca=ga.flags,(ca&65536)!==0&&(ca&128)===0?(ga.flags=ca&-65537|128,ga):null;case 5:return Ih(ga),null;case 13:if(E$2(K$1),ca=ga.memoizedState,ca!==null&&ca.dehydrated!==null){if(ga.alternate===null)throw Error(p$3(340));nh()}return ca=ga.flags,ca&65536?(ga.flags=ca&-65537|128,ga):null;case 19:return E$2(K$1),null;case 4:return Gh(),null;case 10:return qg(ga.type._context),null;case 22:case 23:return bj(),null;case 24:return null;default:return null}}var Hj=!1,S$2=!1,Ij=typeof WeakSet=="function"?WeakSet:Set,T$1=null;function Jj(ca,ga){var ya=ca.ref;if(ya!==null)if(typeof ya=="function")try{ya(null)}catch(_a){U$2(ca,ga,_a)}else ya.current=null}function Kj(ca,ga,ya){try{ya()}catch(_a){U$2(ca,ga,_a)}}var Lj=!1;function Mj(ca,ga){if(Bf=cd,ca=Le$1(),Me$1(ca)){if("selectionStart"in ca)var ya={start:ca.selectionStart,end:ca.selectionEnd};else e:{ya=(ya=ca.ownerDocument)&&ya.defaultView||window;var _a=ya.getSelection&&ya.getSelection();if(_a&&_a.rangeCount!==0){ya=_a.anchorNode;var _s=_a.anchorOffset,Ss=_a.focusNode;_a=_a.focusOffset;try{ya.nodeType,Ss.nodeType}catch{ya=null;break e}var Ms=0,Es=-1,Cs=-1,Ts=0,Bs=0,Is=ca,Ps=null;t:for(;;){for(var Rs;Is!==ya||_s!==0&&Is.nodeType!==3||(Es=Ms+_s),Is!==Ss||_a!==0&&Is.nodeType!==3||(Cs=Ms+_a),Is.nodeType===3&&(Ms+=Is.nodeValue.length),(Rs=Is.firstChild)!==null;)Ps=Is,Is=Rs;for(;;){if(Is===ca)break t;if(Ps===ya&&++Ts===_s&&(Es=Ms),Ps===Ss&&++Bs===_a&&(Cs=Ms),(Rs=Is.nextSibling)!==null)break;Is=Ps,Ps=Is.parentNode}Is=Rs}ya=Es===-1||Cs===-1?null:{start:Es,end:Cs}}else ya=null}ya=ya||{start:0,end:0}}else ya=null;for(Cf={focusedElem:ca,selectionRange:ya},cd=!1,T$1=ga;T$1!==null;)if(ga=T$1,ca=ga.child,(ga.subtreeFlags&1028)!==0&&ca!==null)ca.return=ga,T$1=ca;else for(;T$1!==null;){ga=T$1;try{var ks=ga.alternate;if((ga.flags&1024)!==0)switch(ga.tag){case 0:case 11:case 15:break;case 1:if(ks!==null){var $s=ks.memoizedProps,Os=ks.memoizedState,Ls=ga.stateNode,Ds=Ls.getSnapshotBeforeUpdate(ga.elementType===ga.type?$s:kg(ga.type,$s),Os);Ls.__reactInternalSnapshotBeforeUpdate=Ds}break;case 3:var Fs=ga.stateNode.containerInfo;if(Fs.nodeType===1)Fs.textContent="";else if(Fs.nodeType===9){var Ns=Fs.body;Ns!=null&&(Ns.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Vs){U$2(ga,ga.return,Vs)}if(ca=ga.sibling,ca!==null){ca.return=ga.return,T$1=ca;break}T$1=ga.return}return ks=Lj,Lj=!1,ks}function Nj(ca,ga,ya){var _a=ga.updateQueue;if(_a=_a!==null?_a.lastEffect:null,_a!==null){var _s=_a=_a.next;do{if((_s.tag&ca)===ca){var Ss=_s.destroy;_s.destroy=void 0,Ss!==void 0&&Kj(ga,ya,Ss)}_s=_s.next}while(_s!==_a)}}function Oj(ca,ga){if(ga=ga.updateQueue,ga=ga!==null?ga.lastEffect:null,ga!==null){var ya=ga=ga.next;do{if((ya.tag&ca)===ca){var _a=ya.create;ya.destroy=_a()}ya=ya.next}while(ya!==ga)}}function Pj(ca){var ga=ca.ref;if(ga!==null){var ya=ca.stateNode;switch(ca.tag){case 5:ca=ya;break;default:ca=ya}typeof ga=="function"?ga(ca):ga.current=ca}}function Qj(ca){var ga=ca.alternate;ga!==null&&(ca.alternate=null,Qj(ga)),ca.child=null,ca.deletions=null,ca.sibling=null,ca.tag===5&&(ga=ca.stateNode,ga!==null&&(delete ga[Nf],delete ga[Of],delete ga[nf],delete ga[Pf],delete ga[Qf])),ca.stateNode=null,ca.return=null,ca.dependencies=null,ca.memoizedProps=null,ca.memoizedState=null,ca.pendingProps=null,ca.stateNode=null,ca.updateQueue=null}function Rj(ca){return ca.tag===5||ca.tag===3||ca.tag===4}function Sj(ca){e:for(;;){for(;ca.sibling===null;){if(ca.return===null||Rj(ca.return))return null;ca=ca.return}for(ca.sibling.return=ca.return,ca=ca.sibling;ca.tag!==5&&ca.tag!==6&&ca.tag!==18;){if(ca.flags&2||ca.child===null||ca.tag===4)continue e;ca.child.return=ca,ca=ca.child}if(!(ca.flags&2))return ca.stateNode}}function Tj(ca,ga,ya){var _a=ca.tag;if(_a===5||_a===6)ca=ca.stateNode,ga?ya.nodeType===8?ya.parentNode.insertBefore(ca,ga):ya.insertBefore(ca,ga):(ya.nodeType===8?(ga=ya.parentNode,ga.insertBefore(ca,ya)):(ga=ya,ga.appendChild(ca)),ya=ya._reactRootContainer,ya!=null||ga.onclick!==null||(ga.onclick=Af));else if(_a!==4&&(ca=ca.child,ca!==null))for(Tj(ca,ga,ya),ca=ca.sibling;ca!==null;)Tj(ca,ga,ya),ca=ca.sibling}function Uj(ca,ga,ya){var _a=ca.tag;if(_a===5||_a===6)ca=ca.stateNode,ga?ya.insertBefore(ca,ga):ya.appendChild(ca);else if(_a!==4&&(ca=ca.child,ca!==null))for(Uj(ca,ga,ya),ca=ca.sibling;ca!==null;)Uj(ca,ga,ya),ca=ca.sibling}var V$2=null,Vj=!1;function Wj(ca,ga,ya){for(ya=ya.child;ya!==null;)Xj(ca,ga,ya),ya=ya.sibling}function Xj(ca,ga,ya){if(kc&&typeof kc.onCommitFiberUnmount=="function")try{kc.onCommitFiberUnmount(jc,ya)}catch{}switch(ya.tag){case 5:S$2||Jj(ya,ga);case 6:var _a=V$2,_s=Vj;V$2=null,Wj(ca,ga,ya),V$2=_a,Vj=_s,V$2!==null&&(Vj?(ca=V$2,ya=ya.stateNode,ca.nodeType===8?ca.parentNode.removeChild(ya):ca.removeChild(ya)):V$2.removeChild(ya.stateNode));break;case 18:V$2!==null&&(Vj?(ca=V$2,ya=ya.stateNode,ca.nodeType===8?Jf(ca.parentNode,ya):ca.nodeType===1&&Jf(ca,ya),ad(ca)):Jf(V$2,ya.stateNode));break;case 4:_a=V$2,_s=Vj,V$2=ya.stateNode.containerInfo,Vj=!0,Wj(ca,ga,ya),V$2=_a,Vj=_s;break;case 0:case 11:case 14:case 15:if(!S$2&&(_a=ya.updateQueue,_a!==null&&(_a=_a.lastEffect,_a!==null))){_s=_a=_a.next;do{var Ss=_s,Ms=Ss.destroy;Ss=Ss.tag,Ms!==void 0&&((Ss&2)!==0||(Ss&4)!==0)&&Kj(ya,ga,Ms),_s=_s.next}while(_s!==_a)}Wj(ca,ga,ya);break;case 1:if(!S$2&&(Jj(ya,ga),_a=ya.stateNode,typeof _a.componentWillUnmount=="function"))try{_a.props=ya.memoizedProps,_a.state=ya.memoizedState,_a.componentWillUnmount()}catch(Es){U$2(ya,ga,Es)}Wj(ca,ga,ya);break;case 21:Wj(ca,ga,ya);break;case 22:ya.mode&1?(S$2=(_a=S$2)||ya.memoizedState!==null,Wj(ca,ga,ya),S$2=_a):Wj(ca,ga,ya);break;default:Wj(ca,ga,ya)}}function Yj(ca){var ga=ca.updateQueue;if(ga!==null){ca.updateQueue=null;var ya=ca.stateNode;ya===null&&(ya=ca.stateNode=new Ij),ga.forEach(function(_a){var _s=Zj.bind(null,ca,_a);ya.has(_a)||(ya.add(_a),_a.then(_s,_s))})}}function ak(ca,ga){var ya=ga.deletions;if(ya!==null)for(var _a=0;_a<ya.length;_a++){var _s=ya[_a];try{var Ss=ca,Ms=ga,Es=Ms;e:for(;Es!==null;){switch(Es.tag){case 5:V$2=Es.stateNode,Vj=!1;break e;case 3:V$2=Es.stateNode.containerInfo,Vj=!0;break e;case 4:V$2=Es.stateNode.containerInfo,Vj=!0;break e}Es=Es.return}if(V$2===null)throw Error(p$3(160));Xj(Ss,Ms,_s),V$2=null,Vj=!1;var Cs=_s.alternate;Cs!==null&&(Cs.return=null),_s.return=null}catch(Ts){U$2(_s,ga,Ts)}}if(ga.subtreeFlags&12854)for(ga=ga.child;ga!==null;)bk(ga,ca),ga=ga.sibling}function bk(ca,ga){var ya=ca.alternate,_a=ca.flags;switch(ca.tag){case 0:case 11:case 14:case 15:if(ak(ga,ca),ck(ca),_a&4){try{Nj(3,ca,ca.return),Oj(3,ca)}catch(ks){U$2(ca,ca.return,ks)}try{Nj(5,ca,ca.return)}catch(ks){U$2(ca,ca.return,ks)}}break;case 1:ak(ga,ca),ck(ca),_a&512&&ya!==null&&Jj(ya,ya.return);break;case 5:if(ak(ga,ca),ck(ca),_a&512&&ya!==null&&Jj(ya,ya.return),ca.flags&32){var _s=ca.stateNode;try{nb(_s,"")}catch(ks){U$2(ca,ca.return,ks)}}if(_a&4&&(_s=ca.stateNode,_s!=null)){var Ss=ca.memoizedProps,Ms=ya!==null?ya.memoizedProps:Ss,Es=ca.type,Cs=ca.updateQueue;if(ca.updateQueue=null,Cs!==null)try{Es==="input"&&Ss.type==="radio"&&Ss.name!=null&&Za(_s,Ss),ub(Es,Ms);var Ts=ub(Es,Ss);for(Ms=0;Ms<Cs.length;Ms+=2){var Bs=Cs[Ms],Is=Cs[Ms+1];Bs==="style"?rb(_s,Is):Bs==="dangerouslySetInnerHTML"?mb(_s,Is):Bs==="children"?nb(_s,Is):sa(_s,Bs,Is,Ts)}switch(Es){case"input":$a(_s,Ss);break;case"textarea":hb(_s,Ss);break;case"select":var Ps=_s._wrapperState.wasMultiple;_s._wrapperState.wasMultiple=!!Ss.multiple;var Rs=Ss.value;Rs!=null?eb(_s,!!Ss.multiple,Rs,!1):Ps!==!!Ss.multiple&&(Ss.defaultValue!=null?eb(_s,!!Ss.multiple,Ss.defaultValue,!0):eb(_s,!!Ss.multiple,Ss.multiple?[]:"",!1))}_s[Of]=Ss}catch(ks){U$2(ca,ca.return,ks)}}break;case 6:if(ak(ga,ca),ck(ca),_a&4){if(ca.stateNode===null)throw Error(p$3(162));Ts=ca.stateNode,Bs=ca.memoizedProps;try{Ts.nodeValue=Bs}catch(ks){U$2(ca,ca.return,ks)}}break;case 3:if(ak(ga,ca),ck(ca),_a&4&&ya!==null&&ya.memoizedState.isDehydrated)try{ad(ga.containerInfo)}catch(ks){U$2(ca,ca.return,ks)}break;case 4:ak(ga,ca),ck(ca);break;case 13:ak(ga,ca),ck(ca),Ts=ca.child,Ts.flags&8192&&Ts.memoizedState!==null&&(Ts.alternate===null||Ts.alternate.memoizedState===null)&&(dk=B$1()),_a&4&&Yj(ca);break;case 22:if(Ts=ya!==null&&ya.memoizedState!==null,ca.mode&1?(S$2=(Bs=S$2)||Ts,ak(ga,ca),S$2=Bs):ak(ga,ca),ck(ca),_a&8192){Bs=ca.memoizedState!==null;e:for(Is=null,Ps=ca;;){if(Ps.tag===5){if(Is===null){Is=Ps;try{_s=Ps.stateNode,Bs?(Ss=_s.style,typeof Ss.setProperty=="function"?Ss.setProperty("display","none","important"):Ss.display="none"):(Es=Ps.stateNode,Cs=Ps.memoizedProps.style,Ms=Cs!=null&&Cs.hasOwnProperty("display")?Cs.display:null,Es.style.display=qb("display",Ms))}catch(ks){U$2(ca,ca.return,ks)}}}else if(Ps.tag===6){if(Is===null)try{Ps.stateNode.nodeValue=Bs?"":Ps.memoizedProps}catch(ks){U$2(ca,ca.return,ks)}}else if((Ps.tag!==22&&Ps.tag!==23||Ps.memoizedState===null||Ps===ca)&&Ps.child!==null){Ps.child.return=Ps,Ps=Ps.child;continue}if(Ps===ca)break e;for(;Ps.sibling===null;){if(Ps.return===null||Ps.return===ca)break e;Is===Ps&&(Is=null),Ps=Ps.return}Is===Ps&&(Is=null),Ps.sibling.return=Ps.return,Ps=Ps.sibling}if(Bs&&!Ts&&(ca.mode&1)!==0)for(T$1=ca,ca=ca.child;ca!==null;){for(Ts=T$1=ca;T$1!==null;){switch(Bs=T$1,Is=Bs.child,Bs.tag){case 0:case 11:case 14:case 15:Nj(4,Bs,Bs.return);break;case 1:if(Jj(Bs,Bs.return),Ss=Bs.stateNode,typeof Ss.componentWillUnmount=="function"){Ps=Bs,Rs=Bs.return;try{_s=Ps,Ss.props=_s.memoizedProps,Ss.state=_s.memoizedState,Ss.componentWillUnmount()}catch(ks){U$2(Ps,Rs,ks)}}break;case 5:Jj(Bs,Bs.return);break;case 22:if(Bs.memoizedState!==null){ek(Ts);continue}}Is!==null?(Is.return=Bs,T$1=Is):ek(Ts)}ca=ca.sibling}}break;case 19:ak(ga,ca),ck(ca),_a&4&&Yj(ca);break;case 21:break;default:ak(ga,ca),ck(ca)}}function ck(ca){var ga=ca.flags;if(ga&2){try{e:{for(var ya=ca.return;ya!==null;){if(Rj(ya)){var _a=ya;break e}ya=ya.return}throw Error(p$3(160))}switch(_a.tag){case 5:var _s=_a.stateNode;_a.flags&32&&(nb(_s,""),_a.flags&=-33);var Ss=Sj(ca);Uj(ca,Ss,_s);break;case 3:case 4:var Ms=_a.stateNode.containerInfo,Es=Sj(ca);Tj(ca,Es,Ms);break;default:throw Error(p$3(161))}}catch(Cs){U$2(ca,ca.return,Cs)}ca.flags&=-3}ga&4096&&(ca.flags&=-4097)}function fk(ca,ga,ya){T$1=ca,gk(ca)}function gk(ca,ga,ya){for(var _a=(ca.mode&1)!==0;T$1!==null;){var _s=T$1,Ss=_s.child;if(_s.tag===22&&_a){var Ms=_s.memoizedState!==null||Hj;if(!Ms){var Es=_s.alternate,Cs=Es!==null&&Es.memoizedState!==null||S$2;Es=Hj;var Ts=S$2;if(Hj=Ms,(S$2=Cs)&&!Ts)for(T$1=_s;T$1!==null;)Ms=T$1,Cs=Ms.child,Ms.tag===22&&Ms.memoizedState!==null?hk(_s):Cs!==null?(Cs.return=Ms,T$1=Cs):hk(_s);for(;Ss!==null;)T$1=Ss,gk(Ss),Ss=Ss.sibling;T$1=_s,Hj=Es,S$2=Ts}ik(ca)}else(_s.subtreeFlags&8772)!==0&&Ss!==null?(Ss.return=_s,T$1=Ss):ik(ca)}}function ik(ca){for(;T$1!==null;){var ga=T$1;if((ga.flags&8772)!==0){var ya=ga.alternate;try{if((ga.flags&8772)!==0)switch(ga.tag){case 0:case 11:case 15:S$2||Oj(5,ga);break;case 1:var _a=ga.stateNode;if(ga.flags&4&&!S$2)if(ya===null)_a.componentDidMount();else{var _s=ga.elementType===ga.type?ya.memoizedProps:kg(ga.type,ya.memoizedProps);_a.componentDidUpdate(_s,ya.memoizedState,_a.__reactInternalSnapshotBeforeUpdate)}var Ss=ga.updateQueue;Ss!==null&&Gg(ga,Ss,_a);break;case 3:var Ms=ga.updateQueue;if(Ms!==null){if(ya=null,ga.child!==null)switch(ga.child.tag){case 5:ya=ga.child.stateNode;break;case 1:ya=ga.child.stateNode}Gg(ga,Ms,ya)}break;case 5:var Es=ga.stateNode;if(ya===null&&ga.flags&4){ya=Es;var Cs=ga.memoizedProps;switch(ga.type){case"button":case"input":case"select":case"textarea":Cs.autoFocus&&ya.focus();break;case"img":Cs.src&&(ya.src=Cs.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(ga.memoizedState===null){var Ts=ga.alternate;if(Ts!==null){var Bs=Ts.memoizedState;if(Bs!==null){var Is=Bs.dehydrated;Is!==null&&ad(Is)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(p$3(163))}S$2||ga.flags&512&&Pj(ga)}catch(Ps){U$2(ga,ga.return,Ps)}}if(ga===ca){T$1=null;break}if(ya=ga.sibling,ya!==null){ya.return=ga.return,T$1=ya;break}T$1=ga.return}}function ek(ca){for(;T$1!==null;){var ga=T$1;if(ga===ca){T$1=null;break}var ya=ga.sibling;if(ya!==null){ya.return=ga.return,T$1=ya;break}T$1=ga.return}}function hk(ca){for(;T$1!==null;){var ga=T$1;try{switch(ga.tag){case 0:case 11:case 15:var ya=ga.return;try{Oj(4,ga)}catch(Cs){U$2(ga,ya,Cs)}break;case 1:var _a=ga.stateNode;if(typeof _a.componentDidMount=="function"){var _s=ga.return;try{_a.componentDidMount()}catch(Cs){U$2(ga,_s,Cs)}}var Ss=ga.return;try{Pj(ga)}catch(Cs){U$2(ga,Ss,Cs)}break;case 5:var Ms=ga.return;try{Pj(ga)}catch(Cs){U$2(ga,Ms,Cs)}}}catch(Cs){U$2(ga,ga.return,Cs)}if(ga===ca){T$1=null;break}var Es=ga.sibling;if(Es!==null){Es.return=ga.return,T$1=Es;break}T$1=ga.return}}var jk=Math.ceil,kk=ta.ReactCurrentDispatcher,lk=ta.ReactCurrentOwner,mk=ta.ReactCurrentBatchConfig,W$2=0,P$2=null,X$1=null,Y$1=0,cj=0,mj=Tf(0),R$2=0,nk=null,Fg=0,ok=0,pk=0,qk=null,rk=null,dk=0,aj=1/0,sk=null,Li$1=!1,Mi$1=null,Oi$1=null,tk=!1,uk=null,vk=0,wk=0,xk=null,yk=-1,zk=0;function Jg(){return(W$2&6)!==0?B$1():yk!==-1?yk:yk=B$1()}function Kg(ca){return(ca.mode&1)===0?1:(W$2&2)!==0&&Y$1!==0?Y$1&-Y$1:jg.transition!==null?(zk===0&&(zk=xc()),zk):(ca=C$2,ca!==0||(ca=window.event,ca=ca===void 0?16:id(ca.type)),ca)}function Lg(ca,ga,ya){if(50<wk)throw wk=0,xk=null,Error(p$3(185));var _a=Ak(ca,ga);return _a===null?null:(zc(_a,ga,ya),((W$2&2)===0||_a!==P$2)&&(_a===P$2&&((W$2&2)===0&&(ok|=ga),R$2===4&&Bk(_a,Y$1)),Ck(_a,ya),ga===1&&W$2===0&&(ca.mode&1)===0&&(aj=B$1()+500,eg&&ig())),_a)}function Ak(ca,ga){ca.lanes|=ga;var ya=ca.alternate;for(ya!==null&&(ya.lanes|=ga),ya=ca,ca=ca.return;ca!==null;)ca.childLanes|=ga,ya=ca.alternate,ya!==null&&(ya.childLanes|=ga),ya=ca,ca=ca.return;return ya.tag===3?ya.stateNode:null}function Bg(ca){return(P$2!==null||vg!==null)&&(ca.mode&1)!==0&&(W$2&2)===0}function Ck(ca,ga){var ya=ca.callbackNode;vc(ca,ga);var _a=tc(ca,ca===P$2?Y$1:0);if(_a===0)ya!==null&&ac(ya),ca.callbackNode=null,ca.callbackPriority=0;else if(ga=_a&-_a,ca.callbackPriority!==ga){if(ya!=null&&ac(ya),ga===1)ca.tag===0?hg(Dk.bind(null,ca)):gg(Dk.bind(null,ca)),If(function(){W$2===0&&ig()}),ya=null;else{switch(Cc(_a)){case 1:ya=ec;break;case 4:ya=fc;break;case 16:ya=gc;break;case 536870912:ya=ic;break;default:ya=gc}ya=Ek(ya,Fk.bind(null,ca))}ca.callbackPriority=ga,ca.callbackNode=ya}}function Fk(ca,ga){if(yk=-1,zk=0,(W$2&6)!==0)throw Error(p$3(327));var ya=ca.callbackNode;if(Gk()&&ca.callbackNode!==ya)return null;var _a=tc(ca,ca===P$2?Y$1:0);if(_a===0)return null;if((_a&30)!==0||(_a&ca.expiredLanes)!==0||ga)ga=Hk(ca,_a);else{ga=_a;var _s=W$2;W$2|=2;var Ss=Ik();(P$2!==ca||Y$1!==ga)&&(sk=null,aj=B$1()+500,Jk(ca,ga));do try{Kk();break}catch(Es){Lk(ca,Es)}while(1);pg(),kk.current=Ss,W$2=_s,X$1!==null?ga=0:(P$2=null,Y$1=0,ga=R$2)}if(ga!==0){if(ga===2&&(_s=wc(ca),_s!==0&&(_a=_s,ga=Mk(ca,_s))),ga===1)throw ya=nk,Jk(ca,0),Bk(ca,_a),Ck(ca,B$1()),ya;if(ga===6)Bk(ca,_a);else{if(_s=ca.current.alternate,(_a&30)===0&&!Nk(_s)&&(ga=Hk(ca,_a),ga===2&&(Ss=wc(ca),Ss!==0&&(_a=Ss,ga=Mk(ca,Ss))),ga===1))throw ya=nk,Jk(ca,0),Bk(ca,_a),Ck(ca,B$1()),ya;switch(ca.finishedWork=_s,ca.finishedLanes=_a,ga){case 0:case 1:throw Error(p$3(345));case 2:Ok(ca,rk,sk);break;case 3:if(Bk(ca,_a),(_a&130023424)===_a&&(ga=dk+500-B$1(),10<ga)){if(tc(ca,0)!==0)break;if(_s=ca.suspendedLanes,(_s&_a)!==_a){Jg(),ca.pingedLanes|=ca.suspendedLanes&_s;break}ca.timeoutHandle=Ef(Ok.bind(null,ca,rk,sk),ga);break}Ok(ca,rk,sk);break;case 4:if(Bk(ca,_a),(_a&4194240)===_a)break;for(ga=ca.eventTimes,_s=-1;0<_a;){var Ms=31-nc(_a);Ss=1<<Ms,Ms=ga[Ms],Ms>_s&&(_s=Ms),_a&=~Ss}if(_a=_s,_a=B$1()-_a,_a=(120>_a?120:480>_a?480:1080>_a?1080:1920>_a?1920:3e3>_a?3e3:4320>_a?4320:1960*jk(_a/1960))-_a,10<_a){ca.timeoutHandle=Ef(Ok.bind(null,ca,rk,sk),_a);break}Ok(ca,rk,sk);break;case 5:Ok(ca,rk,sk);break;default:throw Error(p$3(329))}}}return Ck(ca,B$1()),ca.callbackNode===ya?Fk.bind(null,ca):null}function Mk(ca,ga){var ya=qk;return ca.current.memoizedState.isDehydrated&&(Jk(ca,ga).flags|=256),ca=Hk(ca,ga),ca!==2&&(ga=rk,rk=ya,ga!==null&&Zi$1(ga)),ca}function Zi$1(ca){rk===null?rk=ca:rk.push.apply(rk,ca)}function Nk(ca){for(var ga=ca;;){if(ga.flags&16384){var ya=ga.updateQueue;if(ya!==null&&(ya=ya.stores,ya!==null))for(var _a=0;_a<ya.length;_a++){var _s=ya[_a],Ss=_s.getSnapshot;_s=_s.value;try{if(!Ge$1(Ss(),_s))return!1}catch{return!1}}}if(ya=ga.child,ga.subtreeFlags&16384&&ya!==null)ya.return=ga,ga=ya;else{if(ga===ca)break;for(;ga.sibling===null;){if(ga.return===null||ga.return===ca)return!0;ga=ga.return}ga.sibling.return=ga.return,ga=ga.sibling}}return!0}function Bk(ca,ga){for(ga&=~pk,ga&=~ok,ca.suspendedLanes|=ga,ca.pingedLanes&=~ga,ca=ca.expirationTimes;0<ga;){var ya=31-nc(ga),_a=1<<ya;ca[ya]=-1,ga&=~_a}}function Dk(ca){if((W$2&6)!==0)throw Error(p$3(327));Gk();var ga=tc(ca,0);if((ga&1)===0)return Ck(ca,B$1()),null;var ya=Hk(ca,ga);if(ca.tag!==0&&ya===2){var _a=wc(ca);_a!==0&&(ga=_a,ya=Mk(ca,_a))}if(ya===1)throw ya=nk,Jk(ca,0),Bk(ca,ga),Ck(ca,B$1()),ya;if(ya===6)throw Error(p$3(345));return ca.finishedWork=ca.current.alternate,ca.finishedLanes=ga,Ok(ca,rk,sk),Ck(ca,B$1()),null}function Pk(ca,ga){var ya=W$2;W$2|=1;try{return ca(ga)}finally{W$2=ya,W$2===0&&(aj=B$1()+500,eg&&ig())}}function Qk(ca){uk!==null&&uk.tag===0&&(W$2&6)===0&&Gk();var ga=W$2;W$2|=1;var ya=mk.transition,_a=C$2;try{if(mk.transition=null,C$2=1,ca)return ca()}finally{C$2=_a,mk.transition=ya,W$2=ga,(W$2&6)===0&&ig()}}function bj(){cj=mj.current,E$2(mj)}function Jk(ca,ga){ca.finishedWork=null,ca.finishedLanes=0;var ya=ca.timeoutHandle;if(ya!==-1&&(ca.timeoutHandle=-1,Ff(ya)),X$1!==null)for(ya=X$1.return;ya!==null;){var _a=ya;switch(ch(_a),_a.tag){case 1:_a=_a.type.childContextTypes,_a!=null&&Zf();break;case 3:Gh(),E$2(Vf),E$2(H$1),Lh();break;case 5:Ih(_a);break;case 4:Gh();break;case 13:E$2(K$1);break;case 19:E$2(K$1);break;case 10:qg(_a.type._context);break;case 22:case 23:bj()}ya=ya.return}if(P$2=ca,X$1=ca=th(ca.current,null),Y$1=cj=ga,R$2=0,nk=null,pk=ok=Fg=0,rk=qk=null,vg!==null){for(ga=0;ga<vg.length;ga++)if(ya=vg[ga],_a=ya.interleaved,_a!==null){ya.interleaved=null;var _s=_a.next,Ss=ya.pending;if(Ss!==null){var Ms=Ss.next;Ss.next=_s,_a.next=Ms}ya.pending=_a}vg=null}return ca}function Lk(ca,ga){do{var ya=X$1;try{if(pg(),Mh.current=Yh,Ph){for(var _a=L$2.memoizedState;_a!==null;){var _s=_a.queue;_s!==null&&(_s.pending=null),_a=_a.next}Ph=!1}if(Oh=0,N$2=M$2=L$2=null,Qh=!1,Rh=0,lk.current=null,ya===null||ya.return===null){R$2=1,nk=ga,X$1=null;break}e:{var Ss=ca,Ms=ya.return,Es=ya,Cs=ga;if(ga=Y$1,Es.flags|=32768,Cs!==null&&typeof Cs=="object"&&typeof Cs.then=="function"){var Ts=Cs,Bs=Es,Is=Bs.tag;if((Bs.mode&1)===0&&(Is===0||Is===11||Is===15)){var Ps=Bs.alternate;Ps?(Bs.updateQueue=Ps.updateQueue,Bs.memoizedState=Ps.memoizedState,Bs.lanes=Ps.lanes):(Bs.updateQueue=null,Bs.memoizedState=null)}var Rs=Ri$1(Ms);if(Rs!==null){Rs.flags&=-257,Si$1(Rs,Ms,Es,Ss,ga),Rs.mode&1&&Pi$1(Ss,Ts,ga),ga=Rs,Cs=Ts;var ks=ga.updateQueue;if(ks===null){var $s=new Set;$s.add(Cs),ga.updateQueue=$s}else ks.add(Cs);break e}else{if((ga&1)===0){Pi$1(Ss,Ts,ga),$i$1();break e}Cs=Error(p$3(426))}}else if(I$1&&Es.mode&1){var Os=Ri$1(Ms);if(Os!==null){(Os.flags&65536)===0&&(Os.flags|=256),Si$1(Os,Ms,Es,Ss,ga),oh(Cs);break e}}Ss=Cs,R$2!==4&&(R$2=2),qk===null?qk=[Ss]:qk.push(Ss),Cs=Hi$1(Cs,Es),Es=Ms;do{switch(Es.tag){case 3:Es.flags|=65536,ga&=-ga,Es.lanes|=ga;var Ls=Ki$1(Es,Cs,ga);Dg(Es,Ls);break e;case 1:Ss=Cs;var Ds=Es.type,Fs=Es.stateNode;if((Es.flags&128)===0&&(typeof Ds.getDerivedStateFromError=="function"||Fs!==null&&typeof Fs.componentDidCatch=="function"&&(Oi$1===null||!Oi$1.has(Fs)))){Es.flags|=65536,ga&=-ga,Es.lanes|=ga;var Ns=Ni$1(Es,Ss,ga);Dg(Es,Ns);break e}}Es=Es.return}while(Es!==null)}Rk(ya)}catch(Vs){ga=Vs,X$1===ya&&ya!==null&&(X$1=ya=ya.return);continue}break}while(1)}function Ik(){var ca=kk.current;return kk.current=Yh,ca===null?Yh:ca}function $i$1(){(R$2===0||R$2===3||R$2===2)&&(R$2=4),P$2===null||(Fg&268435455)===0&&(ok&268435455)===0||Bk(P$2,Y$1)}function Hk(ca,ga){var ya=W$2;W$2|=2;var _a=Ik();(P$2!==ca||Y$1!==ga)&&(sk=null,Jk(ca,ga));do try{Sk();break}catch(_s){Lk(ca,_s)}while(1);if(pg(),W$2=ya,kk.current=_a,X$1!==null)throw Error(p$3(261));return P$2=null,Y$1=0,R$2}function Sk(){for(;X$1!==null;)Tk(X$1)}function Kk(){for(;X$1!==null&&!bc();)Tk(X$1)}function Tk(ca){var ga=Uk(ca.alternate,ca,cj);ca.memoizedProps=ca.pendingProps,ga===null?Rk(ca):X$1=ga,lk.current=null}function Rk(ca){var ga=ca;do{var ya=ga.alternate;if(ca=ga.return,(ga.flags&32768)===0){if(ya=Yi$1(ya,ga,cj),ya!==null){X$1=ya;return}}else{if(ya=Gj(ya,ga),ya!==null){ya.flags&=32767,X$1=ya;return}if(ca!==null)ca.flags|=32768,ca.subtreeFlags=0,ca.deletions=null;else{R$2=6,X$1=null;return}}if(ga=ga.sibling,ga!==null){X$1=ga;return}X$1=ga=ca}while(ga!==null);R$2===0&&(R$2=5)}function Ok(ca,ga,ya){var _a=C$2,_s=mk.transition;try{mk.transition=null,C$2=1,Vk(ca,ga,ya,_a)}finally{mk.transition=_s,C$2=_a}return null}function Vk(ca,ga,ya,_a){do Gk();while(uk!==null);if((W$2&6)!==0)throw Error(p$3(327));ya=ca.finishedWork;var _s=ca.finishedLanes;if(ya===null)return null;if(ca.finishedWork=null,ca.finishedLanes=0,ya===ca.current)throw Error(p$3(177));ca.callbackNode=null,ca.callbackPriority=0;var Ss=ya.lanes|ya.childLanes;if(Ac(ca,Ss),ca===P$2&&(X$1=P$2=null,Y$1=0),(ya.subtreeFlags&2064)===0&&(ya.flags&2064)===0||tk||(tk=!0,Ek(gc,function(){return Gk(),null})),Ss=(ya.flags&15990)!==0,(ya.subtreeFlags&15990)!==0||Ss){Ss=mk.transition,mk.transition=null;var Ms=C$2;C$2=1;var Es=W$2;W$2|=4,lk.current=null,Mj(ca,ya),bk(ya,ca),Ne$1(Cf),cd=!!Bf,Cf=Bf=null,ca.current=ya,fk(ya),cc(),W$2=Es,C$2=Ms,mk.transition=Ss}else ca.current=ya;if(tk&&(tk=!1,uk=ca,vk=_s),Ss=ca.pendingLanes,Ss===0&&(Oi$1=null),lc(ya.stateNode),Ck(ca,B$1()),ga!==null)for(_a=ca.onRecoverableError,ya=0;ya<ga.length;ya++)_a(ga[ya]);if(Li$1)throw Li$1=!1,ca=Mi$1,Mi$1=null,ca;return(vk&1)!==0&&ca.tag!==0&&Gk(),Ss=ca.pendingLanes,(Ss&1)!==0?ca===xk?wk++:(wk=0,xk=ca):wk=0,ig(),null}function Gk(){if(uk!==null){var ca=Cc(vk),ga=mk.transition,ya=C$2;try{if(mk.transition=null,C$2=16>ca?16:ca,uk===null)var _a=!1;else{if(ca=uk,uk=null,vk=0,(W$2&6)!==0)throw Error(p$3(331));var _s=W$2;for(W$2|=4,T$1=ca.current;T$1!==null;){var Ss=T$1,Ms=Ss.child;if((T$1.flags&16)!==0){var Es=Ss.deletions;if(Es!==null){for(var Cs=0;Cs<Es.length;Cs++){var Ts=Es[Cs];for(T$1=Ts;T$1!==null;){var Bs=T$1;switch(Bs.tag){case 0:case 11:case 15:Nj(8,Bs,Ss)}var Is=Bs.child;if(Is!==null)Is.return=Bs,T$1=Is;else for(;T$1!==null;){Bs=T$1;var Ps=Bs.sibling,Rs=Bs.return;if(Qj(Bs),Bs===Ts){T$1=null;break}if(Ps!==null){Ps.return=Rs,T$1=Ps;break}T$1=Rs}}}var ks=Ss.alternate;if(ks!==null){var $s=ks.child;if($s!==null){ks.child=null;do{var Os=$s.sibling;$s.sibling=null,$s=Os}while($s!==null)}}T$1=Ss}}if((Ss.subtreeFlags&2064)!==0&&Ms!==null)Ms.return=Ss,T$1=Ms;else e:for(;T$1!==null;){if(Ss=T$1,(Ss.flags&2048)!==0)switch(Ss.tag){case 0:case 11:case 15:Nj(9,Ss,Ss.return)}var Ls=Ss.sibling;if(Ls!==null){Ls.return=Ss.return,T$1=Ls;break e}T$1=Ss.return}}var Ds=ca.current;for(T$1=Ds;T$1!==null;){Ms=T$1;var Fs=Ms.child;if((Ms.subtreeFlags&2064)!==0&&Fs!==null)Fs.return=Ms,T$1=Fs;else e:for(Ms=Ds;T$1!==null;){if(Es=T$1,(Es.flags&2048)!==0)try{switch(Es.tag){case 0:case 11:case 15:Oj(9,Es)}}catch(Vs){U$2(Es,Es.return,Vs)}if(Es===Ms){T$1=null;break e}var Ns=Es.sibling;if(Ns!==null){Ns.return=Es.return,T$1=Ns;break e}T$1=Es.return}}if(W$2=_s,ig(),kc&&typeof kc.onPostCommitFiberRoot=="function")try{kc.onPostCommitFiberRoot(jc,ca)}catch{}_a=!0}return _a}finally{C$2=ya,mk.transition=ga}}return!1}function Wk(ca,ga,ya){ga=Hi$1(ya,ga),ga=Ki$1(ca,ga,1),Ag(ca,ga),ga=Jg(),ca=Ak(ca,1),ca!==null&&(zc(ca,1,ga),Ck(ca,ga))}function U$2(ca,ga,ya){if(ca.tag===3)Wk(ca,ca,ya);else for(;ga!==null;){if(ga.tag===3){Wk(ga,ca,ya);break}else if(ga.tag===1){var _a=ga.stateNode;if(typeof ga.type.getDerivedStateFromError=="function"||typeof _a.componentDidCatch=="function"&&(Oi$1===null||!Oi$1.has(_a))){ca=Hi$1(ya,ca),ca=Ni$1(ga,ca,1),Ag(ga,ca),ca=Jg(),ga=Ak(ga,1),ga!==null&&(zc(ga,1,ca),Ck(ga,ca));break}}ga=ga.return}}function Qi$1(ca,ga,ya){var _a=ca.pingCache;_a!==null&&_a.delete(ga),ga=Jg(),ca.pingedLanes|=ca.suspendedLanes&ya,P$2===ca&&(Y$1&ya)===ya&&(R$2===4||R$2===3&&(Y$1&130023424)===Y$1&&500>B$1()-dk?Jk(ca,0):pk|=ya),Ck(ca,ga)}function Xk(ca,ga){ga===0&&((ca.mode&1)===0?ga=1:(ga=rc,rc<<=1,(rc&130023424)===0&&(rc=4194304)));var ya=Jg();ca=Ak(ca,ga),ca!==null&&(zc(ca,ga,ya),Ck(ca,ya))}function zj(ca){var ga=ca.memoizedState,ya=0;ga!==null&&(ya=ga.retryLane),Xk(ca,ya)}function Zj(ca,ga){var ya=0;switch(ca.tag){case 13:var _a=ca.stateNode,_s=ca.memoizedState;_s!==null&&(ya=_s.retryLane);break;case 19:_a=ca.stateNode;break;default:throw Error(p$3(314))}_a!==null&&_a.delete(ga),Xk(ca,ya)}var Uk;Uk=function(ca,ga,ya){if(ca!==null)if(ca.memoizedProps!==ga.pendingProps||Vf.current)tg=!0;else{if((ca.lanes&ya)===0&&(ga.flags&128)===0)return tg=!1,Fj(ca,ga,ya);tg=(ca.flags&131072)!==0}else tg=!1,I$1&&(ga.flags&1048576)!==0&&ah(ga,Ug,ga.index);switch(ga.lanes=0,ga.tag){case 2:var _a=ga.type;ca!==null&&(ca.alternate=null,ga.alternate=null,ga.flags|=2),ca=ga.pendingProps;var _s=Xf(ga,H$1.current);sg(ga,ya),_s=Uh(null,ga,_a,ca,_s,ya);var Ss=Zh();return ga.flags|=1,typeof _s=="object"&&_s!==null&&typeof _s.render=="function"&&_s.$$typeof===void 0?(ga.tag=1,ga.memoizedState=null,ga.updateQueue=null,Yf(_a)?(Ss=!0,bg(ga)):Ss=!1,ga.memoizedState=_s.state!==null&&_s.state!==void 0?_s.state:null,xg(ga),_s.updater=Mg,ga.stateNode=_s,_s._reactInternals=ga,Qg(ga,_a,ca,ya),ga=pj(null,ga,_a,!0,Ss,ya)):(ga.tag=0,I$1&&Ss&&bh(ga),ej(null,ga,_s,ya),ga=ga.child),ga;case 16:_a=ga.elementType;e:{switch(ca!==null&&(ca.alternate=null,ga.alternate=null,ga.flags|=2),ca=ga.pendingProps,_s=_a._init,_a=_s(_a._payload),ga.type=_a,_s=ga.tag=Yk(_a),ca=kg(_a,ca),_s){case 0:ga=kj(null,ga,_a,ca,ya);break e;case 1:ga=oj(null,ga,_a,ca,ya);break e;case 11:ga=fj(null,ga,_a,ca,ya);break e;case 14:ga=hj(null,ga,_a,kg(_a.type,ca),ya);break e}throw Error(p$3(306,_a,""))}return ga;case 0:return _a=ga.type,_s=ga.pendingProps,_s=ga.elementType===_a?_s:kg(_a,_s),kj(ca,ga,_a,_s,ya);case 1:return _a=ga.type,_s=ga.pendingProps,_s=ga.elementType===_a?_s:kg(_a,_s),oj(ca,ga,_a,_s,ya);case 3:e:{if(qj(ga),ca===null)throw Error(p$3(387));_a=ga.pendingProps,Ss=ga.memoizedState,_s=Ss.element,yg(ca,ga),Eg(ga,_a,null,ya);var Ms=ga.memoizedState;if(_a=Ms.element,Ss.isDehydrated)if(Ss={element:_a,isDehydrated:!1,cache:Ms.cache,pendingSuspenseBoundaries:Ms.pendingSuspenseBoundaries,transitions:Ms.transitions},ga.updateQueue.baseState=Ss,ga.memoizedState=Ss,ga.flags&256){_s=Error(p$3(423)),ga=rj(ca,ga,_a,ya,_s);break e}else if(_a!==_s){_s=Error(p$3(424)),ga=rj(ca,ga,_a,ya,_s);break e}else for(eh=Kf(ga.stateNode.containerInfo.firstChild),dh=ga,I$1=!0,fh=null,ya=zh(ga,null,_a,ya),ga.child=ya;ya;)ya.flags=ya.flags&-3|4096,ya=ya.sibling;else{if(nh(),_a===_s){ga=gj(ca,ga,ya);break e}ej(ca,ga,_a,ya)}ga=ga.child}return ga;case 5:return Hh(ga),ca===null&&kh(ga),_a=ga.type,_s=ga.pendingProps,Ss=ca!==null?ca.memoizedProps:null,Ms=_s.children,Df(_a,_s)?Ms=null:Ss!==null&&Df(_a,Ss)&&(ga.flags|=32),nj(ca,ga),ej(ca,ga,Ms,ya),ga.child;case 6:return ca===null&&kh(ga),null;case 13:return vj(ca,ga,ya);case 4:return Fh(ga,ga.stateNode.containerInfo),_a=ga.pendingProps,ca===null?ga.child=yh(ga,null,_a,ya):ej(ca,ga,_a,ya),ga.child;case 11:return _a=ga.type,_s=ga.pendingProps,_s=ga.elementType===_a?_s:kg(_a,_s),fj(ca,ga,_a,_s,ya);case 7:return ej(ca,ga,ga.pendingProps,ya),ga.child;case 8:return ej(ca,ga,ga.pendingProps.children,ya),ga.child;case 12:return ej(ca,ga,ga.pendingProps.children,ya),ga.child;case 10:e:{if(_a=ga.type._context,_s=ga.pendingProps,Ss=ga.memoizedProps,Ms=_s.value,G$1(lg,_a._currentValue),_a._currentValue=Ms,Ss!==null)if(Ge$1(Ss.value,Ms)){if(Ss.children===_s.children&&!Vf.current){ga=gj(ca,ga,ya);break e}}else for(Ss=ga.child,Ss!==null&&(Ss.return=ga);Ss!==null;){var Es=Ss.dependencies;if(Es!==null){Ms=Ss.child;for(var Cs=Es.firstContext;Cs!==null;){if(Cs.context===_a){if(Ss.tag===1){Cs=zg(-1,ya&-ya),Cs.tag=2;var Ts=Ss.updateQueue;if(Ts!==null){Ts=Ts.shared;var Bs=Ts.pending;Bs===null?Cs.next=Cs:(Cs.next=Bs.next,Bs.next=Cs),Ts.pending=Cs}}Ss.lanes|=ya,Cs=Ss.alternate,Cs!==null&&(Cs.lanes|=ya),rg(Ss.return,ya,ga),Es.lanes|=ya;break}Cs=Cs.next}}else if(Ss.tag===10)Ms=Ss.type===ga.type?null:Ss.child;else if(Ss.tag===18){if(Ms=Ss.return,Ms===null)throw Error(p$3(341));Ms.lanes|=ya,Es=Ms.alternate,Es!==null&&(Es.lanes|=ya),rg(Ms,ya,ga),Ms=Ss.sibling}else Ms=Ss.child;if(Ms!==null)Ms.return=Ss;else for(Ms=Ss;Ms!==null;){if(Ms===ga){Ms=null;break}if(Ss=Ms.sibling,Ss!==null){Ss.return=Ms.return,Ms=Ss;break}Ms=Ms.return}Ss=Ms}ej(ca,ga,_s.children,ya),ga=ga.child}return ga;case 9:return _s=ga.type,_a=ga.pendingProps.children,sg(ga,ya),_s=ug(_s),_a=_a(_s),ga.flags|=1,ej(ca,ga,_a,ya),ga.child;case 14:return _a=ga.type,_s=kg(_a,ga.pendingProps),_s=kg(_a.type,_s),hj(ca,ga,_a,_s,ya);case 15:return jj(ca,ga,ga.type,ga.pendingProps,ya);case 17:return _a=ga.type,_s=ga.pendingProps,_s=ga.elementType===_a?_s:kg(_a,_s),ca!==null&&(ca.alternate=null,ga.alternate=null,ga.flags|=2),ga.tag=1,Yf(_a)?(ca=!0,bg(ga)):ca=!1,sg(ga,ya),Og(ga,_a,_s),Qg(ga,_a,_s,ya),pj(null,ga,_a,!0,ca,ya);case 19:return Ej(ca,ga,ya);case 22:return lj(ca,ga,ya)}throw Error(p$3(156,ga.tag))};function Ek(ca,ga){return $b(ca,ga)}function Zk(ca,ga,ya,_a){this.tag=ca,this.key=ya,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ga,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hh(ca,ga,ya,_a){return new Zk(ca,ga,ya,_a)}function ij(ca){return ca=ca.prototype,!(!ca||!ca.isReactComponent)}function Yk(ca){if(typeof ca=="function")return ij(ca)?1:0;if(ca!=null){if(ca=ca.$$typeof,ca===Ca)return 11;if(ca===Fa)return 14}return 2}function th(ca,ga){var ya=ca.alternate;return ya===null?(ya=hh(ca.tag,ga,ca.key,ca.mode),ya.elementType=ca.elementType,ya.type=ca.type,ya.stateNode=ca.stateNode,ya.alternate=ca,ca.alternate=ya):(ya.pendingProps=ga,ya.type=ca.type,ya.flags=0,ya.subtreeFlags=0,ya.deletions=null),ya.flags=ca.flags&14680064,ya.childLanes=ca.childLanes,ya.lanes=ca.lanes,ya.child=ca.child,ya.memoizedProps=ca.memoizedProps,ya.memoizedState=ca.memoizedState,ya.updateQueue=ca.updateQueue,ga=ca.dependencies,ya.dependencies=ga===null?null:{lanes:ga.lanes,firstContext:ga.firstContext},ya.sibling=ca.sibling,ya.index=ca.index,ya.ref=ca.ref,ya}function vh(ca,ga,ya,_a,_s,Ss){var Ms=2;if(_a=ca,typeof ca=="function")ij(ca)&&(Ms=1);else if(typeof ca=="string")Ms=5;else e:switch(ca){case wa:return xh(ya.children,_s,Ss,ga);case xa:Ms=8,_s|=8;break;case za:return ca=hh(12,ya,ga,_s|2),ca.elementType=za,ca.lanes=Ss,ca;case Da:return ca=hh(13,ya,ga,_s),ca.elementType=Da,ca.lanes=Ss,ca;case Ea:return ca=hh(19,ya,ga,_s),ca.elementType=Ea,ca.lanes=Ss,ca;case Ha:return wj(ya,_s,Ss,ga);default:if(typeof ca=="object"&&ca!==null)switch(ca.$$typeof){case Aa:Ms=10;break e;case Ba:Ms=9;break e;case Ca:Ms=11;break e;case Fa:Ms=14;break e;case Ga:Ms=16,_a=null;break e}throw Error(p$3(130,ca==null?ca:typeof ca,""))}return ga=hh(Ms,ya,ga,_s),ga.elementType=ca,ga.type=_a,ga.lanes=Ss,ga}function xh(ca,ga,ya,_a){return ca=hh(7,ca,_a,ga),ca.lanes=ya,ca}function wj(ca,ga,ya,_a){return ca=hh(22,ca,_a,ga),ca.elementType=Ha,ca.lanes=ya,ca.stateNode={},ca}function uh(ca,ga,ya){return ca=hh(6,ca,null,ga),ca.lanes=ya,ca}function wh(ca,ga,ya){return ga=hh(4,ca.children!==null?ca.children:[],ca.key,ga),ga.lanes=ya,ga.stateNode={containerInfo:ca.containerInfo,pendingChildren:null,implementation:ca.implementation},ga}function $k(ca,ga,ya,_a,_s){this.tag=ga,this.containerInfo=ca,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yc(0),this.expirationTimes=yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.identifierPrefix=_a,this.onRecoverableError=_s,this.mutableSourceEagerHydrationData=null}function al(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){return ca=new $k(ca,ga,ya,Es,Cs),ga===1?(ga=1,Ss===!0&&(ga|=8)):ga=0,Ss=hh(3,null,null,ga),ca.current=Ss,Ss.stateNode=ca,Ss.memoizedState={element:_a,isDehydrated:ya,cache:null,transitions:null,pendingSuspenseBoundaries:null},xg(Ss),ca}function bl(ca,ga,ya){var _a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:_a==null?null:""+_a,children:ca,containerInfo:ga,implementation:ya}}function cl(ca){if(!ca)return Uf;ca=ca._reactInternals;e:{if(Ub(ca)!==ca||ca.tag!==1)throw Error(p$3(170));var ga=ca;do{switch(ga.tag){case 3:ga=ga.stateNode.context;break e;case 1:if(Yf(ga.type)){ga=ga.stateNode.__reactInternalMemoizedMergedChildContext;break e}}ga=ga.return}while(ga!==null);throw Error(p$3(171))}if(ca.tag===1){var ya=ca.type;if(Yf(ya))return ag(ca,ya,ga)}return ga}function dl(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){return ca=al(ya,_a,!0,ca,_s,Ss,Ms,Es,Cs),ca.context=cl(null),ya=ca.current,_a=Jg(),_s=Kg(ya),Ss=zg(_a,_s),Ss.callback=ga!=null?ga:null,Ag(ya,Ss),ca.current.lanes=_s,zc(ca,_s,_a),Ck(ca,_a),ca}function el(ca,ga,ya,_a){var _s=ga.current,Ss=Jg(),Ms=Kg(_s);return ya=cl(ya),ga.context===null?ga.context=ya:ga.pendingContext=ya,ga=zg(Ss,Ms),ga.payload={element:ca},_a=_a===void 0?null:_a,_a!==null&&(ga.callback=_a),Ag(_s,ga),ca=Lg(_s,Ms,Ss),ca!==null&&Cg(ca,_s,Ms),Ms}function fl(ca){if(ca=ca.current,!ca.child)return null;switch(ca.child.tag){case 5:return ca.child.stateNode;default:return ca.child.stateNode}}function gl(ca,ga){if(ca=ca.memoizedState,ca!==null&&ca.dehydrated!==null){var ya=ca.retryLane;ca.retryLane=ya!==0&&ya<ga?ya:ga}}function hl(ca,ga){gl(ca,ga),(ca=ca.alternate)&&gl(ca,ga)}function il(){return null}var jl=typeof reportError=="function"?reportError:function(ca){console.error(ca)};function kl(ca){this._internalRoot=ca}ll.prototype.render=kl.prototype.render=function(ca){var ga=this._internalRoot;if(ga===null)throw Error(p$3(409));el(ca,ga,null,null)};ll.prototype.unmount=kl.prototype.unmount=function(){var ca=this._internalRoot;if(ca!==null){this._internalRoot=null;var ga=ca.containerInfo;Qk(function(){el(null,ca,null,null)}),ga[tf]=null}};function ll(ca){this._internalRoot=ca}ll.prototype.unstable_scheduleHydration=function(ca){if(ca){var ga=Gc();ca={blockedOn:null,target:ca,priority:ga};for(var ya=0;ya<Pc.length&&ga!==0&&ga<Pc[ya].priority;ya++);Pc.splice(ya,0,ca),ya===0&&Uc(ca)}};function ml(ca){return!(!ca||ca.nodeType!==1&&ca.nodeType!==9&&ca.nodeType!==11)}function nl(ca){return!(!ca||ca.nodeType!==1&&ca.nodeType!==9&&ca.nodeType!==11&&(ca.nodeType!==8||ca.nodeValue!==" react-mount-point-unstable "))}function ol(){}function pl(ca,ga,ya,_a,_s){if(_s){if(typeof _a=="function"){var Ss=_a;_a=function(){var Ts=fl(Ms);Ss.call(Ts)}}var Ms=dl(ga,_a,ca,0,null,!1,!1,"",ol);return ca._reactRootContainer=Ms,ca[tf]=Ms.current,rf(ca.nodeType===8?ca.parentNode:ca),Qk(),Ms}for(;_s=ca.lastChild;)ca.removeChild(_s);if(typeof _a=="function"){var Es=_a;_a=function(){var Ts=fl(Cs);Es.call(Ts)}}var Cs=al(ca,0,!1,null,null,!1,!1,"",ol);return ca._reactRootContainer=Cs,ca[tf]=Cs.current,rf(ca.nodeType===8?ca.parentNode:ca),Qk(function(){el(ga,Cs,ya,_a)}),Cs}function ql(ca,ga,ya,_a,_s){var Ss=ya._reactRootContainer;if(Ss){var Ms=Ss;if(typeof _s=="function"){var Es=_s;_s=function(){var Cs=fl(Ms);Es.call(Cs)}}el(ga,Ms,ca,_s)}else Ms=pl(ya,ga,ca,_s,_a);return fl(Ms)}Dc=function(ca){switch(ca.tag){case 3:var ga=ca.stateNode;if(ga.current.memoizedState.isDehydrated){var ya=sc(ga.pendingLanes);ya!==0&&(Bc(ga,ya|1),Ck(ga,B$1()),(W$2&6)===0&&(aj=B$1()+500,ig()))}break;case 13:var _a=Jg();Qk(function(){return Lg(ca,1,_a)}),hl(ca,1)}};Ec=function(ca){if(ca.tag===13){var ga=Jg();Lg(ca,134217728,ga),hl(ca,134217728)}};Fc=function(ca){if(ca.tag===13){var ga=Jg(),ya=Kg(ca);Lg(ca,ya,ga),hl(ca,ya)}};Gc=function(){return C$2};Hc=function(ca,ga){var ya=C$2;try{return C$2=ca,ga()}finally{C$2=ya}};xb=function(ca,ga,ya){switch(ga){case"input":if($a(ca,ya),ga=ya.name,ya.type==="radio"&&ga!=null){for(ya=ca;ya.parentNode;)ya=ya.parentNode;for(ya=ya.querySelectorAll("input[name="+JSON.stringify(""+ga)+'][type="radio"]'),ga=0;ga<ya.length;ga++){var _a=ya[ga];if(_a!==ca&&_a.form===ca.form){var _s=Cb(_a);if(!_s)throw Error(p$3(90));Va(_a),$a(_a,_s)}}}break;case"textarea":hb(ca,ya);break;case"select":ga=ya.value,ga!=null&&eb(ca,!!ya.multiple,ga,!1)}};Fb=Pk;Gb=Qk;var rl={usingClientEntryPoint:!1,Events:[Bb,te$1,Cb,Db,Eb,Pk]},sl={findFiberByHostInstance:Vc,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},tl={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(ca){return ca=Yb(ca),ca===null?null:ca.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||il,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{jc=ul.inject(tl),kc=ul}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rl;reactDom_production_min.createPortal=function(ca,ga){var ya=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ml(ga))throw Error(p$3(200));return bl(ca,ga,null,ya)};reactDom_production_min.createRoot=function(ca,ga){if(!ml(ca))throw Error(p$3(299));var ya=!1,_a="",_s=jl;return ga!=null&&(ga.unstable_strictMode===!0&&(ya=!0),ga.identifierPrefix!==void 0&&(_a=ga.identifierPrefix),ga.onRecoverableError!==void 0&&(_s=ga.onRecoverableError)),ga=al(ca,1,!1,null,null,ya,!1,_a,_s),ca[tf]=ga.current,rf(ca.nodeType===8?ca.parentNode:ca),new kl(ga)};reactDom_production_min.findDOMNode=function(ca){if(ca==null)return null;if(ca.nodeType===1)return ca;var ga=ca._reactInternals;if(ga===void 0)throw typeof ca.render=="function"?Error(p$3(188)):(ca=Object.keys(ca).join(","),Error(p$3(268,ca)));return ca=Yb(ga),ca=ca===null?null:ca.stateNode,ca};reactDom_production_min.flushSync=function(ca){return Qk(ca)};reactDom_production_min.hydrate=function(ca,ga,ya){if(!nl(ga))throw Error(p$3(200));return ql(null,ca,ga,!0,ya)};reactDom_production_min.hydrateRoot=function(ca,ga,ya){if(!ml(ca))throw Error(p$3(405));var _a=ya!=null&&ya.hydratedSources||null,_s=!1,Ss="",Ms=jl;if(ya!=null&&(ya.unstable_strictMode===!0&&(_s=!0),ya.identifierPrefix!==void 0&&(Ss=ya.identifierPrefix),ya.onRecoverableError!==void 0&&(Ms=ya.onRecoverableError)),ga=dl(ga,null,ca,1,ya!=null?ya:null,_s,!1,Ss,Ms),ca[tf]=ga.current,rf(ca),_a)for(ca=0;ca<_a.length;ca++)ya=_a[ca],_s=ya._getVersion,_s=_s(ya._source),ga.mutableSourceEagerHydrationData==null?ga.mutableSourceEagerHydrationData=[ya,_s]:ga.mutableSourceEagerHydrationData.push(ya,_s);return new ll(ga)};reactDom_production_min.render=function(ca,ga,ya){if(!nl(ga))throw Error(p$3(200));return ql(null,ca,ga,!1,ya)};reactDom_production_min.unmountComponentAtNode=function(ca){if(!nl(ca))throw Error(p$3(40));return ca._reactRootContainer?(Qk(function(){ql(null,null,ca,!1,function(){ca._reactRootContainer=null,ca[tf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Pk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ca,ga,ya,_a){if(!nl(ya))throw Error(p$3(200));if(ca==null||ca._reactInternals===void 0)throw Error(p$3(38));return ql(ca,ga,ya,!1,_a)};reactDom_production_min.version="18.1.0-next-22edb9f77-20220426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ca){console.error(ca)}}checkDCE(),reactDom.exports=reactDom_production_min;var createRoot,m$3=reactDom.exports;createRoot=m$3.createRoot;var five={};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(ca){return typeof ca=="number"&&isFinite(ca)&&Math.floor(ca)===ca});Math.sign===void 0&&(Math.sign=function(ca){return ca<0?-1:ca>0?1:+ca});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(ca){if(ca==null)throw new TypeError("Cannot convert undefined or null to object");const ga=Object(ca);for(let ya=1;ya<arguments.length;ya++){const _a=arguments[ya];if(_a!=null)for(const _s in _a)Object.prototype.hasOwnProperty.call(_a,_s)&&(ga[_s]=_a[_s])}return ga});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(ca,ga){this._listeners===void 0&&(this._listeners={});var ya=this._listeners;ya[ca]===void 0&&(ya[ca]=[]),ya[ca].indexOf(ga)===-1&&ya[ca].push(ga)},hasEventListener:function(ca,ga){if(this._listeners===void 0)return!1;var ya=this._listeners;return ya[ca]!==void 0&&ya[ca].indexOf(ga)!==-1},removeEventListener:function(ca,ga){if(this._listeners!==void 0){var ya=this._listeners,_a=ya[ca];if(_a!==void 0){var _s=_a.indexOf(ga);_s!==-1&&_a.splice(_s,1)}}},dispatchEvent:function(ca){if(this._listeners!==void 0){var ga=this._listeners,ya=ga[ca.type];if(ya!==void 0){ca.target=this;for(var _a=ya.slice(0),_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s].call(this,ca)}}}});var _lut=[];for(var i$2=0;i$2<256;i$2++)_lut[i$2]=(i$2<16?"0":"")+i$2.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var ca=Math.random()*4294967295|0,ga=Math.random()*4294967295|0,ya=Math.random()*4294967295|0,_a=Math.random()*4294967295|0,_s=_lut[ca&255]+_lut[ca>>8&255]+_lut[ca>>16&255]+_lut[ca>>24&255]+"-"+_lut[ga&255]+_lut[ga>>8&255]+"-"+_lut[ga>>16&15|64]+_lut[ga>>24&255]+"-"+_lut[ya&63|128]+_lut[ya>>8&255]+"-"+_lut[ya>>16&255]+_lut[ya>>24&255]+_lut[_a&255]+_lut[_a>>8&255]+_lut[_a>>16&255]+_lut[_a>>24&255];return _s.toUpperCase()},clamp:function(ca,ga,ya){return Math.max(ga,Math.min(ya,ca))},euclideanModulo:function(ca,ga){return(ca%ga+ga)%ga},mapLinear:function(ca,ga,ya,_a,_s){return _a+(ca-ga)*(_s-_a)/(ya-ga)},lerp:function(ca,ga,ya){return(1-ya)*ca+ya*ga},smoothstep:function(ca,ga,ya){return ca<=ga?0:ca>=ya?1:(ca=(ca-ga)/(ya-ga),ca*ca*(3-2*ca))},smootherstep:function(ca,ga,ya){return ca<=ga?0:ca>=ya?1:(ca=(ca-ga)/(ya-ga),ca*ca*ca*(ca*(ca*6-15)+10))},randInt:function(ca,ga){return ca+Math.floor(Math.random()*(ga-ca+1))},randFloat:function(ca,ga){return ca+Math.random()*(ga-ca)},randFloatSpread:function(ca){return ca*(.5-Math.random())},degToRad:function(ca){return ca*MathUtils.DEG2RAD},radToDeg:function(ca){return ca*MathUtils.RAD2DEG},isPowerOfTwo:function(ca){return(ca&ca-1)===0&&ca!==0},ceilPowerOfTwo:function(ca){return Math.pow(2,Math.ceil(Math.log(ca)/Math.LN2))},floorPowerOfTwo:function(ca){return Math.pow(2,Math.floor(Math.log(ca)/Math.LN2))},setQuaternionFromProperEuler:function(ca,ga,ya,_a,_s){var Ss=Math.cos,Ms=Math.sin,Es=Ss(ya/2),Cs=Ms(ya/2),Ts=Ss((ga+_a)/2),Bs=Ms((ga+_a)/2),Is=Ss((ga-_a)/2),Ps=Ms((ga-_a)/2),Rs=Ss((_a-ga)/2),ks=Ms((_a-ga)/2);switch(_s){case"XYX":ca.set(Es*Bs,Cs*Is,Cs*Ps,Es*Ts);break;case"YZY":ca.set(Cs*Ps,Es*Bs,Cs*Is,Es*Ts);break;case"ZXZ":ca.set(Cs*Is,Cs*Ps,Es*Bs,Es*Ts);break;case"XZX":ca.set(Es*Bs,Cs*ks,Cs*Rs,Es*Ts);break;case"YXY":ca.set(Cs*Rs,Es*Bs,Cs*ks,Es*Ts);break;case"ZYZ":ca.set(Cs*ks,Cs*Rs,Es*Bs,Es*Ts);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+_s)}}};function Vector2(ca,ga){this.x=ca||0,this.y=ga||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(ca){this.x=ca}},height:{get:function(){return this.y},set:function(ca){this.y=ca}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(ca,ga){return this.x=ca,this.y=ga,this},setScalar:function(ca){return this.x=ca,this.y=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this},multiply:function(ca){return this.x*=ca.x,this.y*=ca.y,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},applyMatrix3:function(ca){var ga=this.x,ya=this.y,_a=ca.elements;return this.x=_a[0]*ga+_a[3]*ya+_a[6],this.y=_a[1]*ga+_a[4]*ya+_a[7],this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this},clampLength:function(ca,ga){var ya=this.length();return this.divideScalar(ya||1).multiplyScalar(Math.max(ca,Math.min(ga,ya)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(ca){return this.x*ca.x+this.y*ca.y},cross:function(ca){return this.x*ca.y-this.y*ca.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var ca=Math.atan2(-this.y,-this.x)+Math.PI;return ca},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,ya=this.y-ca.y;return ga*ga+ya*ya},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this},lerpVectors:function(ca,ga,ya){return this.x=ca.x+(ga.x-ca.x)*ya,this.y=ca.y+(ga.y-ca.y)*ya,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca},fromBufferAttribute:function(ca,ga,ya){return ya!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this},rotateAround:function(ca,ga){var ya=Math.cos(ga),_a=Math.sin(ga),_s=this.x-ca.x,Ss=this.y-ca.y;return this.x=_s*ya-Ss*_a+ca.x,this.y=_s*_a+Ss*ya+ca.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){var Ts=this.elements;return Ts[0]=ca,Ts[1]=_a,Ts[2]=Ms,Ts[3]=ga,Ts[4]=_s,Ts[5]=Es,Ts[6]=ya,Ts[7]=Ss,Ts[8]=Cs,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(ca){var ga=this.elements,ya=ca.elements;return ga[0]=ya[0],ga[1]=ya[1],ga[2]=ya[2],ga[3]=ya[3],ga[4]=ya[4],ga[5]=ya[5],ga[6]=ya[6],ga[7]=ya[7],ga[8]=ya[8],this},extractBasis:function(ca,ga,ya){return ca.setFromMatrix3Column(this,0),ga.setFromMatrix3Column(this,1),ya.setFromMatrix3Column(this,2),this},setFromMatrix4:function(ca){var ga=ca.elements;return this.set(ga[0],ga[4],ga[8],ga[1],ga[5],ga[9],ga[2],ga[6],ga[10]),this},multiply:function(ca){return this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var ya=ca.elements,_a=ga.elements,_s=this.elements,Ss=ya[0],Ms=ya[3],Es=ya[6],Cs=ya[1],Ts=ya[4],Bs=ya[7],Is=ya[2],Ps=ya[5],Rs=ya[8],ks=_a[0],$s=_a[3],Os=_a[6],Ls=_a[1],Ds=_a[4],Fs=_a[7],Ns=_a[2],Vs=_a[5],Gs=_a[8];return _s[0]=Ss*ks+Ms*Ls+Es*Ns,_s[3]=Ss*$s+Ms*Ds+Es*Vs,_s[6]=Ss*Os+Ms*Fs+Es*Gs,_s[1]=Cs*ks+Ts*Ls+Bs*Ns,_s[4]=Cs*$s+Ts*Ds+Bs*Vs,_s[7]=Cs*Os+Ts*Fs+Bs*Gs,_s[2]=Is*ks+Ps*Ls+Rs*Ns,_s[5]=Is*$s+Ps*Ds+Rs*Vs,_s[8]=Is*Os+Ps*Fs+Rs*Gs,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[3]*=ca,ga[6]*=ca,ga[1]*=ca,ga[4]*=ca,ga[7]*=ca,ga[2]*=ca,ga[5]*=ca,ga[8]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],ya=ca[1],_a=ca[2],_s=ca[3],Ss=ca[4],Ms=ca[5],Es=ca[6],Cs=ca[7],Ts=ca[8];return ga*Ss*Ts-ga*Ms*Cs-ya*_s*Ts+ya*Ms*Es+_a*_s*Cs-_a*Ss*Es},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var ya=ca.elements,_a=this.elements,_s=ya[0],Ss=ya[1],Ms=ya[2],Es=ya[3],Cs=ya[4],Ts=ya[5],Bs=ya[6],Is=ya[7],Ps=ya[8],Rs=Ps*Cs-Ts*Is,ks=Ts*Bs-Ps*Es,$s=Is*Es-Cs*Bs,Os=_s*Rs+Ss*ks+Ms*$s;if(Os===0)return this.set(0,0,0,0,0,0,0,0,0);var Ls=1/Os;return _a[0]=Rs*Ls,_a[1]=(Ms*Is-Ps*Ss)*Ls,_a[2]=(Ts*Ss-Ms*Cs)*Ls,_a[3]=ks*Ls,_a[4]=(Ps*_s-Ms*Bs)*Ls,_a[5]=(Ms*Es-Ts*_s)*Ls,_a[6]=$s*Ls,_a[7]=(Ss*Bs-Is*_s)*Ls,_a[8]=(Cs*_s-Ss*Es)*Ls,this},transpose:function(){var ca,ga=this.elements;return ca=ga[1],ga[1]=ga[3],ga[3]=ca,ca=ga[2],ga[2]=ga[6],ga[6]=ca,ca=ga[5],ga[5]=ga[7],ga[7]=ca,this},getNormalMatrix:function(ca){return this.setFromMatrix4(ca).getInverse(this).transpose()},transposeIntoArray:function(ca){var ga=this.elements;return ca[0]=ga[0],ca[1]=ga[3],ca[2]=ga[6],ca[3]=ga[1],ca[4]=ga[4],ca[5]=ga[7],ca[6]=ga[2],ca[7]=ga[5],ca[8]=ga[8],this},setUvTransform:function(ca,ga,ya,_a,_s,Ss,Ms){var Es=Math.cos(_s),Cs=Math.sin(_s);this.set(ya*Es,ya*Cs,-ya*(Es*Ss+Cs*Ms)+Ss+ca,-_a*Cs,_a*Es,-_a*(-Cs*Ss+Es*Ms)+Ms+ga,0,0,1)},scale:function(ca,ga){var ya=this.elements;return ya[0]*=ca,ya[3]*=ca,ya[6]*=ca,ya[1]*=ga,ya[4]*=ga,ya[7]*=ga,this},rotate:function(ca){var ga=Math.cos(ca),ya=Math.sin(ca),_a=this.elements,_s=_a[0],Ss=_a[3],Ms=_a[6],Es=_a[1],Cs=_a[4],Ts=_a[7];return _a[0]=ga*_s+ya*Es,_a[3]=ga*Ss+ya*Cs,_a[6]=ga*Ms+ya*Ts,_a[1]=-ya*_s+ga*Es,_a[4]=-ya*Ss+ga*Cs,_a[7]=-ya*Ms+ga*Ts,this},translate:function(ca,ga){var ya=this.elements;return ya[0]+=ca*ya[2],ya[3]+=ca*ya[5],ya[6]+=ca*ya[8],ya[1]+=ga*ya[2],ya[4]+=ga*ya[5],ya[7]+=ga*ya[8],this},equals:function(ca){for(var ga=this.elements,ya=ca.elements,_a=0;_a<9;_a++)if(ga[_a]!==ya[_a])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var ya=0;ya<9;ya++)this.elements[ya]=ca[ya+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var ya=this.elements;return ca[ga]=ya[0],ca[ga+1]=ya[1],ca[ga+2]=ya[2],ca[ga+3]=ya[3],ca[ga+4]=ya[4],ca[ga+5]=ya[5],ca[ga+6]=ya[6],ca[ga+7]=ya[7],ca[ga+8]=ya[8],ca}});var _canvas,ImageUtils={getDataURL:function(ca){var ga;if(typeof HTMLCanvasElement=="undefined")return ca.src;if(ca instanceof HTMLCanvasElement)ga=ca;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=ca.width,_canvas.height=ca.height;var ya=_canvas.getContext("2d");ca instanceof ImageData?ya.putImageData(ca,0,0):ya.drawImage(ca,0,0,ca.width,ca.height),ga=_canvas}return ga.width>2048||ga.height>2048?ga.toDataURL("image/jpeg",.6):ga.toDataURL("image/png")}},textureId=0;function Texture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=ca!==void 0?ca:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=ga!==void 0?ga:Texture.DEFAULT_MAPPING,this.wrapS=ya!==void 0?ya:ClampToEdgeWrapping,this.wrapT=_a!==void 0?_a:ClampToEdgeWrapping,this.magFilter=_s!==void 0?_s:LinearFilter,this.minFilter=Ss!==void 0?Ss:LinearMipmapLinearFilter,this.anisotropy=Cs!==void 0?Cs:1,this.format=Ms!==void 0?Ms:RGBAFormat,this.internalFormat=null,this.type=Es!==void 0?Es:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Ts!==void 0?Ts:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.name=ca.name,this.image=ca.image,this.mipmaps=ca.mipmaps.slice(0),this.mapping=ca.mapping,this.wrapS=ca.wrapS,this.wrapT=ca.wrapT,this.magFilter=ca.magFilter,this.minFilter=ca.minFilter,this.anisotropy=ca.anisotropy,this.format=ca.format,this.internalFormat=ca.internalFormat,this.type=ca.type,this.offset.copy(ca.offset),this.repeat.copy(ca.repeat),this.center.copy(ca.center),this.rotation=ca.rotation,this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrix.copy(ca.matrix),this.generateMipmaps=ca.generateMipmaps,this.premultiplyAlpha=ca.premultiplyAlpha,this.flipY=ca.flipY,this.unpackAlignment=ca.unpackAlignment,this.encoding=ca.encoding,this},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";if(!ga&&ca.textures[this.uuid]!==void 0)return ca.textures[this.uuid];var ya={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var _a=this.image;if(_a.uuid===void 0&&(_a.uuid=MathUtils.generateUUID()),!ga&&ca.images[_a.uuid]===void 0){var _s;if(Array.isArray(_a)){_s=[];for(var Ss=0,Ms=_a.length;Ss<Ms;Ss++)_s.push(ImageUtils.getDataURL(_a[Ss]))}else _s=ImageUtils.getDataURL(_a);ca.images[_a.uuid]={uuid:_a.uuid,url:_s}}ya.image=_a.uuid}return ga||(ca.textures[this.uuid]=ya),ya},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(ca){if(this.mapping!==UVMapping)return ca;if(ca.applyMatrix3(this.matrix),ca.x<0||ca.x>1)switch(this.wrapS){case RepeatWrapping:ca.x=ca.x-Math.floor(ca.x);break;case ClampToEdgeWrapping:ca.x=ca.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.x)%2)===1?ca.x=Math.ceil(ca.x)-ca.x:ca.x=ca.x-Math.floor(ca.x);break}if(ca.y<0||ca.y>1)switch(this.wrapT){case RepeatWrapping:ca.y=ca.y-Math.floor(ca.y);break;case ClampToEdgeWrapping:ca.y=ca.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(ca.y)%2)===1?ca.y=Math.ceil(ca.y)-ca.y:ca.y=ca.y-Math.floor(ca.y);break}return this.flipY&&(ca.y=1-ca.y),ca}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function Vector4(ca,ga,ya,_a){this.x=ca||0,this.y=ga||0,this.z=ya||0,this.w=_a!==void 0?_a:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(ca){this.z=ca}},height:{get:function(){return this.w},set:function(ca){this.w=ca}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(ca,ga,ya,_a){return this.x=ca,this.y=ga,this.z=ya,this.w=_a,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this.w=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setW:function(ca){return this.w=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;case 3:this.w=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this.w=ca.w!==void 0?ca.w:1,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this.w+=ca.w,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this.w+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this.w=ca.w+ga.w,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this.w+=ca.w*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this.w-=ca.w,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this.w-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this.w=ca.w-ga.w,this},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this.w*=ca,this},applyMatrix4:function(ca){var ga=this.x,ya=this.y,_a=this.z,_s=this.w,Ss=ca.elements;return this.x=Ss[0]*ga+Ss[4]*ya+Ss[8]*_a+Ss[12]*_s,this.y=Ss[1]*ga+Ss[5]*ya+Ss[9]*_a+Ss[13]*_s,this.z=Ss[2]*ga+Ss[6]*ya+Ss[10]*_a+Ss[14]*_s,this.w=Ss[3]*ga+Ss[7]*ya+Ss[11]*_a+Ss[15]*_s,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},setAxisAngleFromQuaternion:function(ca){this.w=2*Math.acos(ca.w);var ga=Math.sqrt(1-ca.w*ca.w);return ga<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=ca.x/ga,this.y=ca.y/ga,this.z=ca.z/ga),this},setAxisAngleFromRotationMatrix:function(ca){var ga,ya,_a,_s,Ss=.01,Ms=.1,Es=ca.elements,Cs=Es[0],Ts=Es[4],Bs=Es[8],Is=Es[1],Ps=Es[5],Rs=Es[9],ks=Es[2],$s=Es[6],Os=Es[10];if(Math.abs(Ts-Is)<Ss&&Math.abs(Bs-ks)<Ss&&Math.abs(Rs-$s)<Ss){if(Math.abs(Ts+Is)<Ms&&Math.abs(Bs+ks)<Ms&&Math.abs(Rs+$s)<Ms&&Math.abs(Cs+Ps+Os-3)<Ms)return this.set(1,0,0,0),this;ga=Math.PI;var Ls=(Cs+1)/2,Ds=(Ps+1)/2,Fs=(Os+1)/2,Ns=(Ts+Is)/4,Vs=(Bs+ks)/4,Gs=(Rs+$s)/4;return Ls>Ds&&Ls>Fs?Ls<Ss?(ya=0,_a=.707106781,_s=.707106781):(ya=Math.sqrt(Ls),_a=Ns/ya,_s=Vs/ya):Ds>Fs?Ds<Ss?(ya=.707106781,_a=0,_s=.707106781):(_a=Math.sqrt(Ds),ya=Ns/_a,_s=Gs/_a):Fs<Ss?(ya=.707106781,_a=.707106781,_s=0):(_s=Math.sqrt(Fs),ya=Vs/_s,_a=Gs/_s),this.set(ya,_a,_s,ga),this}var Us=Math.sqrt(($s-Rs)*($s-Rs)+(Bs-ks)*(Bs-ks)+(Is-Ts)*(Is-Ts));return Math.abs(Us)<.001&&(Us=1),this.x=($s-Rs)/Us,this.y=(Bs-ks)/Us,this.z=(Is-Ts)/Us,this.w=Math.acos((Cs+Ps+Os-1)/2),this},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this.w=Math.min(this.w,ca.w),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this.w=Math.max(this.w,ca.w),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this.w=Math.max(ca.w,Math.min(ga.w,this.w)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this.w=Math.max(ca,Math.min(ga,this.w)),this},clampLength:function(ca,ga){var ya=this.length();return this.divideScalar(ya||1).multiplyScalar(Math.max(ca,Math.min(ga,ya)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z+this.w*ca.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this.w+=(ca.w-this.w)*ga,this},lerpVectors:function(ca,ga,ya){return this.x=ca.x+(ga.x-ca.x)*ya,this.y=ca.y+(ga.y-ca.y)*ya,this.z=ca.z+(ga.z-ca.z)*ya,this.w=ca.w+(ga.w-ca.w)*ya,this},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z&&ca.w===this.w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this.w=ca[ga+3],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca[ga+3]=this.w,ca},fromBufferAttribute:function(ca,ga,ya){return ya!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this.w=ca.getW(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(ca,ga,ya){this.width=ca,this.height=ga,this.scissor=new Vector4(0,0,ca,ga),this.scissorTest=!1,this.viewport=new Vector4(0,0,ca,ga),ya=ya||{},this.texture=new Texture(void 0,ya.mapping,ya.wrapS,ya.wrapT,ya.magFilter,ya.minFilter,ya.format,ya.type,ya.anisotropy,ya.encoding),this.texture.image={},this.texture.image.width=ca,this.texture.image.height=ga,this.texture.generateMipmaps=ya.generateMipmaps!==void 0?ya.generateMipmaps:!1,this.texture.minFilter=ya.minFilter!==void 0?ya.minFilter:LinearFilter,this.depthBuffer=ya.depthBuffer!==void 0?ya.depthBuffer:!0,this.stencilBuffer=ya.stencilBuffer!==void 0?ya.stencilBuffer:!0,this.depthTexture=ya.depthTexture!==void 0?ya.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(ca,ga){(this.width!==ca||this.height!==ga)&&(this.width=ca,this.height=ga,this.texture.image.width=ca,this.texture.image.height=ga,this.dispose()),this.viewport.set(0,0,ca,ga),this.scissor.set(0,0,ca,ga)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.width=ca.width,this.height=ca.height,this.viewport.copy(ca.viewport),this.texture=ca.texture.clone(),this.depthBuffer=ca.depthBuffer,this.stencilBuffer=ca.stencilBuffer,this.depthTexture=ca.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(ca,ga,ya){WebGLRenderTarget.call(this,ca,ga,ya),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(ca){return WebGLRenderTarget.prototype.copy.call(this,ca),this.samples=ca.samples,this}});function Quaternion(ca,ga,ya,_a){this._x=ca||0,this._y=ga||0,this._z=ya||0,this._w=_a!==void 0?_a:1}Object.assign(Quaternion,{slerp:function(ca,ga,ya,_a){return ya.copy(ca).slerp(ga,_a)},slerpFlat:function(ca,ga,ya,_a,_s,Ss,Ms){var Es=ya[_a+0],Cs=ya[_a+1],Ts=ya[_a+2],Bs=ya[_a+3],Is=_s[Ss+0],Ps=_s[Ss+1],Rs=_s[Ss+2],ks=_s[Ss+3];if(Bs!==ks||Es!==Is||Cs!==Ps||Ts!==Rs){var $s=1-Ms,Os=Es*Is+Cs*Ps+Ts*Rs+Bs*ks,Ls=Os>=0?1:-1,Ds=1-Os*Os;if(Ds>Number.EPSILON){var Fs=Math.sqrt(Ds),Ns=Math.atan2(Fs,Os*Ls);$s=Math.sin($s*Ns)/Fs,Ms=Math.sin(Ms*Ns)/Fs}var Vs=Ms*Ls;if(Es=Es*$s+Is*Vs,Cs=Cs*$s+Ps*Vs,Ts=Ts*$s+Rs*Vs,Bs=Bs*$s+ks*Vs,$s===1-Ms){var Gs=1/Math.sqrt(Es*Es+Cs*Cs+Ts*Ts+Bs*Bs);Es*=Gs,Cs*=Gs,Ts*=Gs,Bs*=Gs}}ca[ga]=Es,ca[ga+1]=Cs,ca[ga+2]=Ts,ca[ga+3]=Bs},multiplyQuaternionsFlat:function(ca,ga,ya,_a,_s,Ss){var Ms=ya[_a],Es=ya[_a+1],Cs=ya[_a+2],Ts=ya[_a+3],Bs=_s[Ss],Is=_s[Ss+1],Ps=_s[Ss+2],Rs=_s[Ss+3];return ca[ga]=Ms*Rs+Ts*Bs+Es*Ps-Cs*Is,ca[ga+1]=Es*Rs+Ts*Is+Cs*Bs-Ms*Ps,ca[ga+2]=Cs*Rs+Ts*Ps+Ms*Is-Es*Bs,ca[ga+3]=Ts*Rs-Ms*Bs-Es*Is-Cs*Ps,ca}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(ca){this._w=ca,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(ca,ga,ya,_a){return this._x=ca,this._y=ga,this._z=ya,this._w=_a,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(ca){return this._x=ca.x,this._y=ca.y,this._z=ca.z,this._w=ca.w,this._onChangeCallback(),this},setFromEuler:function(ca,ga){if(!(ca&&ca.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var ya=ca._x,_a=ca._y,_s=ca._z,Ss=ca.order,Ms=Math.cos,Es=Math.sin,Cs=Ms(ya/2),Ts=Ms(_a/2),Bs=Ms(_s/2),Is=Es(ya/2),Ps=Es(_a/2),Rs=Es(_s/2);switch(Ss){case"XYZ":this._x=Is*Ts*Bs+Cs*Ps*Rs,this._y=Cs*Ps*Bs-Is*Ts*Rs,this._z=Cs*Ts*Rs+Is*Ps*Bs,this._w=Cs*Ts*Bs-Is*Ps*Rs;break;case"YXZ":this._x=Is*Ts*Bs+Cs*Ps*Rs,this._y=Cs*Ps*Bs-Is*Ts*Rs,this._z=Cs*Ts*Rs-Is*Ps*Bs,this._w=Cs*Ts*Bs+Is*Ps*Rs;break;case"ZXY":this._x=Is*Ts*Bs-Cs*Ps*Rs,this._y=Cs*Ps*Bs+Is*Ts*Rs,this._z=Cs*Ts*Rs+Is*Ps*Bs,this._w=Cs*Ts*Bs-Is*Ps*Rs;break;case"ZYX":this._x=Is*Ts*Bs-Cs*Ps*Rs,this._y=Cs*Ps*Bs+Is*Ts*Rs,this._z=Cs*Ts*Rs-Is*Ps*Bs,this._w=Cs*Ts*Bs+Is*Ps*Rs;break;case"YZX":this._x=Is*Ts*Bs+Cs*Ps*Rs,this._y=Cs*Ps*Bs+Is*Ts*Rs,this._z=Cs*Ts*Rs-Is*Ps*Bs,this._w=Cs*Ts*Bs-Is*Ps*Rs;break;case"XZY":this._x=Is*Ts*Bs-Cs*Ps*Rs,this._y=Cs*Ps*Bs-Is*Ts*Rs,this._z=Cs*Ts*Rs+Is*Ps*Bs,this._w=Cs*Ts*Bs+Is*Ps*Rs;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ss)}return ga!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(ca,ga){var ya=ga/2,_a=Math.sin(ya);return this._x=ca.x*_a,this._y=ca.y*_a,this._z=ca.z*_a,this._w=Math.cos(ya),this._onChangeCallback(),this},setFromRotationMatrix:function(ca){var ga=ca.elements,ya=ga[0],_a=ga[4],_s=ga[8],Ss=ga[1],Ms=ga[5],Es=ga[9],Cs=ga[2],Ts=ga[6],Bs=ga[10],Is=ya+Ms+Bs,Ps;return Is>0?(Ps=.5/Math.sqrt(Is+1),this._w=.25/Ps,this._x=(Ts-Es)*Ps,this._y=(_s-Cs)*Ps,this._z=(Ss-_a)*Ps):ya>Ms&&ya>Bs?(Ps=2*Math.sqrt(1+ya-Ms-Bs),this._w=(Ts-Es)/Ps,this._x=.25*Ps,this._y=(_a+Ss)/Ps,this._z=(_s+Cs)/Ps):Ms>Bs?(Ps=2*Math.sqrt(1+Ms-ya-Bs),this._w=(_s-Cs)/Ps,this._x=(_a+Ss)/Ps,this._y=.25*Ps,this._z=(Es+Ts)/Ps):(Ps=2*Math.sqrt(1+Bs-ya-Ms),this._w=(Ss-_a)/Ps,this._x=(_s+Cs)/Ps,this._y=(Es+Ts)/Ps,this._z=.25*Ps),this._onChangeCallback(),this},setFromUnitVectors:function(ca,ga){var ya=1e-6,_a=ca.dot(ga)+1;return _a<ya?(_a=0,Math.abs(ca.x)>Math.abs(ca.z)?(this._x=-ca.y,this._y=ca.x,this._z=0,this._w=_a):(this._x=0,this._y=-ca.z,this._z=ca.y,this._w=_a)):(this._x=ca.y*ga.z-ca.z*ga.y,this._y=ca.z*ga.x-ca.x*ga.z,this._z=ca.x*ga.y-ca.y*ga.x,this._w=_a),this.normalize()},angleTo:function(ca){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(ca),-1,1)))},rotateTowards:function(ca,ga){var ya=this.angleTo(ca);if(ya===0)return this;var _a=Math.min(1,ga/ya);return this.slerp(ca,_a),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(ca){return this._x*ca._x+this._y*ca._y+this._z*ca._z+this._w*ca._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var ca=this.length();return ca===0?(this._x=0,this._y=0,this._z=0,this._w=1):(ca=1/ca,this._x=this._x*ca,this._y=this._y*ca,this._z=this._z*ca,this._w=this._w*ca),this._onChangeCallback(),this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(ca,ga)):this.multiplyQuaternions(this,ca)},premultiply:function(ca){return this.multiplyQuaternions(ca,this)},multiplyQuaternions:function(ca,ga){var ya=ca._x,_a=ca._y,_s=ca._z,Ss=ca._w,Ms=ga._x,Es=ga._y,Cs=ga._z,Ts=ga._w;return this._x=ya*Ts+Ss*Ms+_a*Cs-_s*Es,this._y=_a*Ts+Ss*Es+_s*Ms-ya*Cs,this._z=_s*Ts+Ss*Cs+ya*Es-_a*Ms,this._w=Ss*Ts-ya*Ms-_a*Es-_s*Cs,this._onChangeCallback(),this},slerp:function(ca,ga){if(ga===0)return this;if(ga===1)return this.copy(ca);var ya=this._x,_a=this._y,_s=this._z,Ss=this._w,Ms=Ss*ca._w+ya*ca._x+_a*ca._y+_s*ca._z;if(Ms<0?(this._w=-ca._w,this._x=-ca._x,this._y=-ca._y,this._z=-ca._z,Ms=-Ms):this.copy(ca),Ms>=1)return this._w=Ss,this._x=ya,this._y=_a,this._z=_s,this;var Es=1-Ms*Ms;if(Es<=Number.EPSILON){var Cs=1-ga;return this._w=Cs*Ss+ga*this._w,this._x=Cs*ya+ga*this._x,this._y=Cs*_a+ga*this._y,this._z=Cs*_s+ga*this._z,this.normalize(),this._onChangeCallback(),this}var Ts=Math.sqrt(Es),Bs=Math.atan2(Ts,Ms),Is=Math.sin((1-ga)*Bs)/Ts,Ps=Math.sin(ga*Bs)/Ts;return this._w=Ss*Is+this._w*Ps,this._x=ya*Is+this._x*Ps,this._y=_a*Is+this._y*Ps,this._z=_s*Is+this._z*Ps,this._onChangeCallback(),this},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._w===this._w},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this._x=ca[ga],this._y=ca[ga+1],this._z=ca[ga+2],this._w=ca[ga+3],this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._w,ca},fromBufferAttribute:function(ca,ga){return this._x=ca.getX(ga),this._y=ca.getY(ga),this._z=ca.getZ(ga),this._w=ca.getW(ga),this},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(ca,ga,ya){this.x=ca||0,this.y=ga||0,this.z=ya||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(ca,ga,ya){return this.x=ca,this.y=ga,this.z=ya,this},setScalar:function(ca){return this.x=ca,this.y=ca,this.z=ca,this},setX:function(ca){return this.x=ca,this},setY:function(ca){return this.y=ca,this},setZ:function(ca){return this.z=ca,this},setComponent:function(ca,ga){switch(ca){case 0:this.x=ga;break;case 1:this.y=ga;break;case 2:this.z=ga;break;default:throw new Error("index is out of range: "+ca)}return this},getComponent:function(ca){switch(ca){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+ca)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(ca){return this.x=ca.x,this.y=ca.y,this.z=ca.z,this},add:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(ca,ga)):(this.x+=ca.x,this.y+=ca.y,this.z+=ca.z,this)},addScalar:function(ca){return this.x+=ca,this.y+=ca,this.z+=ca,this},addVectors:function(ca,ga){return this.x=ca.x+ga.x,this.y=ca.y+ga.y,this.z=ca.z+ga.z,this},addScaledVector:function(ca,ga){return this.x+=ca.x*ga,this.y+=ca.y*ga,this.z+=ca.z*ga,this},sub:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(ca,ga)):(this.x-=ca.x,this.y-=ca.y,this.z-=ca.z,this)},subScalar:function(ca){return this.x-=ca,this.y-=ca,this.z-=ca,this},subVectors:function(ca,ga){return this.x=ca.x-ga.x,this.y=ca.y-ga.y,this.z=ca.z-ga.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(ca,ga)):(this.x*=ca.x,this.y*=ca.y,this.z*=ca.z,this)},multiplyScalar:function(ca){return this.x*=ca,this.y*=ca,this.z*=ca,this},multiplyVectors:function(ca,ga){return this.x=ca.x*ga.x,this.y=ca.y*ga.y,this.z=ca.z*ga.z,this},applyEuler:function(ca){return ca&&ca.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(ca))},applyAxisAngle:function(ca,ga){return this.applyQuaternion(_quaternion.setFromAxisAngle(ca,ga))},applyMatrix3:function(ca){var ga=this.x,ya=this.y,_a=this.z,_s=ca.elements;return this.x=_s[0]*ga+_s[3]*ya+_s[6]*_a,this.y=_s[1]*ga+_s[4]*ya+_s[7]*_a,this.z=_s[2]*ga+_s[5]*ya+_s[8]*_a,this},applyNormalMatrix:function(ca){return this.applyMatrix3(ca).normalize()},applyMatrix4:function(ca){var ga=this.x,ya=this.y,_a=this.z,_s=ca.elements,Ss=1/(_s[3]*ga+_s[7]*ya+_s[11]*_a+_s[15]);return this.x=(_s[0]*ga+_s[4]*ya+_s[8]*_a+_s[12])*Ss,this.y=(_s[1]*ga+_s[5]*ya+_s[9]*_a+_s[13])*Ss,this.z=(_s[2]*ga+_s[6]*ya+_s[10]*_a+_s[14])*Ss,this},applyQuaternion:function(ca){var ga=this.x,ya=this.y,_a=this.z,_s=ca.x,Ss=ca.y,Ms=ca.z,Es=ca.w,Cs=Es*ga+Ss*_a-Ms*ya,Ts=Es*ya+Ms*ga-_s*_a,Bs=Es*_a+_s*ya-Ss*ga,Is=-_s*ga-Ss*ya-Ms*_a;return this.x=Cs*Es+Is*-_s+Ts*-Ms-Bs*-Ss,this.y=Ts*Es+Is*-Ss+Bs*-_s-Cs*-Ms,this.z=Bs*Es+Is*-Ms+Cs*-Ss-Ts*-_s,this},project:function(ca){return this.applyMatrix4(ca.matrixWorldInverse).applyMatrix4(ca.projectionMatrix)},unproject:function(ca){return this.applyMatrix4(ca.projectionMatrixInverse).applyMatrix4(ca.matrixWorld)},transformDirection:function(ca){var ga=this.x,ya=this.y,_a=this.z,_s=ca.elements;return this.x=_s[0]*ga+_s[4]*ya+_s[8]*_a,this.y=_s[1]*ga+_s[5]*ya+_s[9]*_a,this.z=_s[2]*ga+_s[6]*ya+_s[10]*_a,this.normalize()},divide:function(ca){return this.x/=ca.x,this.y/=ca.y,this.z/=ca.z,this},divideScalar:function(ca){return this.multiplyScalar(1/ca)},min:function(ca){return this.x=Math.min(this.x,ca.x),this.y=Math.min(this.y,ca.y),this.z=Math.min(this.z,ca.z),this},max:function(ca){return this.x=Math.max(this.x,ca.x),this.y=Math.max(this.y,ca.y),this.z=Math.max(this.z,ca.z),this},clamp:function(ca,ga){return this.x=Math.max(ca.x,Math.min(ga.x,this.x)),this.y=Math.max(ca.y,Math.min(ga.y,this.y)),this.z=Math.max(ca.z,Math.min(ga.z,this.z)),this},clampScalar:function(ca,ga){return this.x=Math.max(ca,Math.min(ga,this.x)),this.y=Math.max(ca,Math.min(ga,this.y)),this.z=Math.max(ca,Math.min(ga,this.z)),this},clampLength:function(ca,ga){var ya=this.length();return this.divideScalar(ya||1).multiplyScalar(Math.max(ca,Math.min(ga,ya)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(ca){return this.x*ca.x+this.y*ca.y+this.z*ca.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(ca){return this.normalize().multiplyScalar(ca)},lerp:function(ca,ga){return this.x+=(ca.x-this.x)*ga,this.y+=(ca.y-this.y)*ga,this.z+=(ca.z-this.z)*ga,this},lerpVectors:function(ca,ga,ya){return this.x=ca.x+(ga.x-ca.x)*ya,this.y=ca.y+(ga.y-ca.y)*ya,this.z=ca.z+(ga.z-ca.z)*ya,this},cross:function(ca,ga){return ga!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(ca,ga)):this.crossVectors(this,ca)},crossVectors:function(ca,ga){var ya=ca.x,_a=ca.y,_s=ca.z,Ss=ga.x,Ms=ga.y,Es=ga.z;return this.x=_a*Es-_s*Ms,this.y=_s*Ss-ya*Es,this.z=ya*Ms-_a*Ss,this},projectOnVector:function(ca){var ga=ca.lengthSq();if(ga===0)return this.set(0,0,0);var ya=ca.dot(this)/ga;return this.copy(ca).multiplyScalar(ya)},projectOnPlane:function(ca){return _vector.copy(this).projectOnVector(ca),this.sub(_vector)},reflect:function(ca){return this.sub(_vector.copy(ca).multiplyScalar(2*this.dot(ca)))},angleTo:function(ca){var ga=Math.sqrt(this.lengthSq()*ca.lengthSq());if(ga===0)return Math.PI/2;var ya=this.dot(ca)/ga;return Math.acos(MathUtils.clamp(ya,-1,1))},distanceTo:function(ca){return Math.sqrt(this.distanceToSquared(ca))},distanceToSquared:function(ca){var ga=this.x-ca.x,ya=this.y-ca.y,_a=this.z-ca.z;return ga*ga+ya*ya+_a*_a},manhattanDistanceTo:function(ca){return Math.abs(this.x-ca.x)+Math.abs(this.y-ca.y)+Math.abs(this.z-ca.z)},setFromSpherical:function(ca){return this.setFromSphericalCoords(ca.radius,ca.phi,ca.theta)},setFromSphericalCoords:function(ca,ga,ya){var _a=Math.sin(ga)*ca;return this.x=_a*Math.sin(ya),this.y=Math.cos(ga)*ca,this.z=_a*Math.cos(ya),this},setFromCylindrical:function(ca){return this.setFromCylindricalCoords(ca.radius,ca.theta,ca.y)},setFromCylindricalCoords:function(ca,ga,ya){return this.x=ca*Math.sin(ga),this.y=ya,this.z=ca*Math.cos(ga),this},setFromMatrixPosition:function(ca){var ga=ca.elements;return this.x=ga[12],this.y=ga[13],this.z=ga[14],this},setFromMatrixScale:function(ca){var ga=this.setFromMatrixColumn(ca,0).length(),ya=this.setFromMatrixColumn(ca,1).length(),_a=this.setFromMatrixColumn(ca,2).length();return this.x=ga,this.y=ya,this.z=_a,this},setFromMatrixColumn:function(ca,ga){return this.fromArray(ca.elements,ga*4)},setFromMatrix3Column:function(ca,ga){return this.fromArray(ca.elements,ga*3)},equals:function(ca){return ca.x===this.x&&ca.y===this.y&&ca.z===this.z},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.x=ca[ga],this.y=ca[ga+1],this.z=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.x,ca[ga+1]=this.y,ca[ga+2]=this.z,ca},fromBufferAttribute:function(ca,ga,ya){return ya!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=ca.getX(ga),this.y=ca.getY(ga),this.z=ca.getZ(ga),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps,Rs,ks,$s){var Os=this.elements;return Os[0]=ca,Os[4]=ga,Os[8]=ya,Os[12]=_a,Os[1]=_s,Os[5]=Ss,Os[9]=Ms,Os[13]=Es,Os[2]=Cs,Os[6]=Ts,Os[10]=Bs,Os[14]=Is,Os[3]=Ps,Os[7]=Rs,Os[11]=ks,Os[15]=$s,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(ca){var ga=this.elements,ya=ca.elements;return ga[0]=ya[0],ga[1]=ya[1],ga[2]=ya[2],ga[3]=ya[3],ga[4]=ya[4],ga[5]=ya[5],ga[6]=ya[6],ga[7]=ya[7],ga[8]=ya[8],ga[9]=ya[9],ga[10]=ya[10],ga[11]=ya[11],ga[12]=ya[12],ga[13]=ya[13],ga[14]=ya[14],ga[15]=ya[15],this},copyPosition:function(ca){var ga=this.elements,ya=ca.elements;return ga[12]=ya[12],ga[13]=ya[13],ga[14]=ya[14],this},extractBasis:function(ca,ga,ya){return ca.setFromMatrixColumn(this,0),ga.setFromMatrixColumn(this,1),ya.setFromMatrixColumn(this,2),this},makeBasis:function(ca,ga,ya){return this.set(ca.x,ga.x,ya.x,0,ca.y,ga.y,ya.y,0,ca.z,ga.z,ya.z,0,0,0,0,1),this},extractRotation:function(ca){var ga=this.elements,ya=ca.elements,_a=1/_v1.setFromMatrixColumn(ca,0).length(),_s=1/_v1.setFromMatrixColumn(ca,1).length(),Ss=1/_v1.setFromMatrixColumn(ca,2).length();return ga[0]=ya[0]*_a,ga[1]=ya[1]*_a,ga[2]=ya[2]*_a,ga[3]=0,ga[4]=ya[4]*_s,ga[5]=ya[5]*_s,ga[6]=ya[6]*_s,ga[7]=0,ga[8]=ya[8]*Ss,ga[9]=ya[9]*Ss,ga[10]=ya[10]*Ss,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromEuler:function(ca){ca&&ca.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var ga=this.elements,ya=ca.x,_a=ca.y,_s=ca.z,Ss=Math.cos(ya),Ms=Math.sin(ya),Es=Math.cos(_a),Cs=Math.sin(_a),Ts=Math.cos(_s),Bs=Math.sin(_s);if(ca.order==="XYZ"){var Is=Ss*Ts,Ps=Ss*Bs,Rs=Ms*Ts,ks=Ms*Bs;ga[0]=Es*Ts,ga[4]=-Es*Bs,ga[8]=Cs,ga[1]=Ps+Rs*Cs,ga[5]=Is-ks*Cs,ga[9]=-Ms*Es,ga[2]=ks-Is*Cs,ga[6]=Rs+Ps*Cs,ga[10]=Ss*Es}else if(ca.order==="YXZ"){var $s=Es*Ts,Os=Es*Bs,Ls=Cs*Ts,Ds=Cs*Bs;ga[0]=$s+Ds*Ms,ga[4]=Ls*Ms-Os,ga[8]=Ss*Cs,ga[1]=Ss*Bs,ga[5]=Ss*Ts,ga[9]=-Ms,ga[2]=Os*Ms-Ls,ga[6]=Ds+$s*Ms,ga[10]=Ss*Es}else if(ca.order==="ZXY"){var $s=Es*Ts,Os=Es*Bs,Ls=Cs*Ts,Ds=Cs*Bs;ga[0]=$s-Ds*Ms,ga[4]=-Ss*Bs,ga[8]=Ls+Os*Ms,ga[1]=Os+Ls*Ms,ga[5]=Ss*Ts,ga[9]=Ds-$s*Ms,ga[2]=-Ss*Cs,ga[6]=Ms,ga[10]=Ss*Es}else if(ca.order==="ZYX"){var Is=Ss*Ts,Ps=Ss*Bs,Rs=Ms*Ts,ks=Ms*Bs;ga[0]=Es*Ts,ga[4]=Rs*Cs-Ps,ga[8]=Is*Cs+ks,ga[1]=Es*Bs,ga[5]=ks*Cs+Is,ga[9]=Ps*Cs-Rs,ga[2]=-Cs,ga[6]=Ms*Es,ga[10]=Ss*Es}else if(ca.order==="YZX"){var Fs=Ss*Es,Ns=Ss*Cs,Vs=Ms*Es,Gs=Ms*Cs;ga[0]=Es*Ts,ga[4]=Gs-Fs*Bs,ga[8]=Vs*Bs+Ns,ga[1]=Bs,ga[5]=Ss*Ts,ga[9]=-Ms*Ts,ga[2]=-Cs*Ts,ga[6]=Ns*Bs+Vs,ga[10]=Fs-Gs*Bs}else if(ca.order==="XZY"){var Fs=Ss*Es,Ns=Ss*Cs,Vs=Ms*Es,Gs=Ms*Cs;ga[0]=Es*Ts,ga[4]=-Bs,ga[8]=Cs*Ts,ga[1]=Fs*Bs+Gs,ga[5]=Ss*Ts,ga[9]=Ns*Bs-Vs,ga[2]=Vs*Bs-Ns,ga[6]=Ms*Ts,ga[10]=Gs*Bs+Fs}return ga[3]=0,ga[7]=0,ga[11]=0,ga[12]=0,ga[13]=0,ga[14]=0,ga[15]=1,this},makeRotationFromQuaternion:function(ca){return this.compose(_zero,ca,_one)},lookAt:function(ca,ga,ya){var _a=this.elements;return _z.subVectors(ca,ga),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ya,_z),_x.lengthSq()===0&&(Math.abs(ya.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ya,_z)),_x.normalize(),_y.crossVectors(_z,_x),_a[0]=_x.x,_a[4]=_y.x,_a[8]=_z.x,_a[1]=_x.y,_a[5]=_y.y,_a[9]=_z.y,_a[2]=_x.z,_a[6]=_y.z,_a[10]=_z.z,this},multiply:function(ca,ga){return ga!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(ca,ga)):this.multiplyMatrices(this,ca)},premultiply:function(ca){return this.multiplyMatrices(ca,this)},multiplyMatrices:function(ca,ga){var ya=ca.elements,_a=ga.elements,_s=this.elements,Ss=ya[0],Ms=ya[4],Es=ya[8],Cs=ya[12],Ts=ya[1],Bs=ya[5],Is=ya[9],Ps=ya[13],Rs=ya[2],ks=ya[6],$s=ya[10],Os=ya[14],Ls=ya[3],Ds=ya[7],Fs=ya[11],Ns=ya[15],Vs=_a[0],Gs=_a[4],Us=_a[8],zs=_a[12],Hs=_a[1],Qs=_a[5],js=_a[9],Zs=_a[13],Ks=_a[2],Ys=_a[6],qs=_a[10],eu=_a[14],Js=_a[3],Xs=_a[7],ru=_a[11],su=_a[15];return _s[0]=Ss*Vs+Ms*Hs+Es*Ks+Cs*Js,_s[4]=Ss*Gs+Ms*Qs+Es*Ys+Cs*Xs,_s[8]=Ss*Us+Ms*js+Es*qs+Cs*ru,_s[12]=Ss*zs+Ms*Zs+Es*eu+Cs*su,_s[1]=Ts*Vs+Bs*Hs+Is*Ks+Ps*Js,_s[5]=Ts*Gs+Bs*Qs+Is*Ys+Ps*Xs,_s[9]=Ts*Us+Bs*js+Is*qs+Ps*ru,_s[13]=Ts*zs+Bs*Zs+Is*eu+Ps*su,_s[2]=Rs*Vs+ks*Hs+$s*Ks+Os*Js,_s[6]=Rs*Gs+ks*Qs+$s*Ys+Os*Xs,_s[10]=Rs*Us+ks*js+$s*qs+Os*ru,_s[14]=Rs*zs+ks*Zs+$s*eu+Os*su,_s[3]=Ls*Vs+Ds*Hs+Fs*Ks+Ns*Js,_s[7]=Ls*Gs+Ds*Qs+Fs*Ys+Ns*Xs,_s[11]=Ls*Us+Ds*js+Fs*qs+Ns*ru,_s[15]=Ls*zs+Ds*Zs+Fs*eu+Ns*su,this},multiplyScalar:function(ca){var ga=this.elements;return ga[0]*=ca,ga[4]*=ca,ga[8]*=ca,ga[12]*=ca,ga[1]*=ca,ga[5]*=ca,ga[9]*=ca,ga[13]*=ca,ga[2]*=ca,ga[6]*=ca,ga[10]*=ca,ga[14]*=ca,ga[3]*=ca,ga[7]*=ca,ga[11]*=ca,ga[15]*=ca,this},determinant:function(){var ca=this.elements,ga=ca[0],ya=ca[4],_a=ca[8],_s=ca[12],Ss=ca[1],Ms=ca[5],Es=ca[9],Cs=ca[13],Ts=ca[2],Bs=ca[6],Is=ca[10],Ps=ca[14],Rs=ca[3],ks=ca[7],$s=ca[11],Os=ca[15];return Rs*(+_s*Es*Bs-_a*Cs*Bs-_s*Ms*Is+ya*Cs*Is+_a*Ms*Ps-ya*Es*Ps)+ks*(+ga*Es*Ps-ga*Cs*Is+_s*Ss*Is-_a*Ss*Ps+_a*Cs*Ts-_s*Es*Ts)+$s*(+ga*Cs*Bs-ga*Ms*Ps-_s*Ss*Bs+ya*Ss*Ps+_s*Ms*Ts-ya*Cs*Ts)+Os*(-_a*Ms*Ts-ga*Es*Bs+ga*Ms*Is+_a*Ss*Bs-ya*Ss*Is+ya*Es*Ts)},transpose:function(){var ca=this.elements,ga;return ga=ca[1],ca[1]=ca[4],ca[4]=ga,ga=ca[2],ca[2]=ca[8],ca[8]=ga,ga=ca[6],ca[6]=ca[9],ca[9]=ga,ga=ca[3],ca[3]=ca[12],ca[12]=ga,ga=ca[7],ca[7]=ca[13],ca[13]=ga,ga=ca[11],ca[11]=ca[14],ca[14]=ga,this},setPosition:function(ca,ga,ya){var _a=this.elements;return ca.isVector3?(_a[12]=ca.x,_a[13]=ca.y,_a[14]=ca.z):(_a[12]=ca,_a[13]=ga,_a[14]=ya),this},getInverse:function(ca,ga){ga!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var ya=this.elements,_a=ca.elements,_s=_a[0],Ss=_a[1],Ms=_a[2],Es=_a[3],Cs=_a[4],Ts=_a[5],Bs=_a[6],Is=_a[7],Ps=_a[8],Rs=_a[9],ks=_a[10],$s=_a[11],Os=_a[12],Ls=_a[13],Ds=_a[14],Fs=_a[15],Ns=Rs*Ds*Is-Ls*ks*Is+Ls*Bs*$s-Ts*Ds*$s-Rs*Bs*Fs+Ts*ks*Fs,Vs=Os*ks*Is-Ps*Ds*Is-Os*Bs*$s+Cs*Ds*$s+Ps*Bs*Fs-Cs*ks*Fs,Gs=Ps*Ls*Is-Os*Rs*Is+Os*Ts*$s-Cs*Ls*$s-Ps*Ts*Fs+Cs*Rs*Fs,Us=Os*Rs*Bs-Ps*Ls*Bs-Os*Ts*ks+Cs*Ls*ks+Ps*Ts*Ds-Cs*Rs*Ds,zs=_s*Ns+Ss*Vs+Ms*Gs+Es*Us;if(zs===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Hs=1/zs;return ya[0]=Ns*Hs,ya[1]=(Ls*ks*Es-Rs*Ds*Es-Ls*Ms*$s+Ss*Ds*$s+Rs*Ms*Fs-Ss*ks*Fs)*Hs,ya[2]=(Ts*Ds*Es-Ls*Bs*Es+Ls*Ms*Is-Ss*Ds*Is-Ts*Ms*Fs+Ss*Bs*Fs)*Hs,ya[3]=(Rs*Bs*Es-Ts*ks*Es-Rs*Ms*Is+Ss*ks*Is+Ts*Ms*$s-Ss*Bs*$s)*Hs,ya[4]=Vs*Hs,ya[5]=(Ps*Ds*Es-Os*ks*Es+Os*Ms*$s-_s*Ds*$s-Ps*Ms*Fs+_s*ks*Fs)*Hs,ya[6]=(Os*Bs*Es-Cs*Ds*Es-Os*Ms*Is+_s*Ds*Is+Cs*Ms*Fs-_s*Bs*Fs)*Hs,ya[7]=(Cs*ks*Es-Ps*Bs*Es+Ps*Ms*Is-_s*ks*Is-Cs*Ms*$s+_s*Bs*$s)*Hs,ya[8]=Gs*Hs,ya[9]=(Os*Rs*Es-Ps*Ls*Es-Os*Ss*$s+_s*Ls*$s+Ps*Ss*Fs-_s*Rs*Fs)*Hs,ya[10]=(Cs*Ls*Es-Os*Ts*Es+Os*Ss*Is-_s*Ls*Is-Cs*Ss*Fs+_s*Ts*Fs)*Hs,ya[11]=(Ps*Ts*Es-Cs*Rs*Es-Ps*Ss*Is+_s*Rs*Is+Cs*Ss*$s-_s*Ts*$s)*Hs,ya[12]=Us*Hs,ya[13]=(Ps*Ls*Ms-Os*Rs*Ms+Os*Ss*ks-_s*Ls*ks-Ps*Ss*Ds+_s*Rs*Ds)*Hs,ya[14]=(Os*Ts*Ms-Cs*Ls*Ms-Os*Ss*Bs+_s*Ls*Bs+Cs*Ss*Ds-_s*Ts*Ds)*Hs,ya[15]=(Cs*Rs*Ms-Ps*Ts*Ms+Ps*Ss*Bs-_s*Rs*Bs-Cs*Ss*ks+_s*Ts*ks)*Hs,this},scale:function(ca){var ga=this.elements,ya=ca.x,_a=ca.y,_s=ca.z;return ga[0]*=ya,ga[4]*=_a,ga[8]*=_s,ga[1]*=ya,ga[5]*=_a,ga[9]*=_s,ga[2]*=ya,ga[6]*=_a,ga[10]*=_s,ga[3]*=ya,ga[7]*=_a,ga[11]*=_s,this},getMaxScaleOnAxis:function(){var ca=this.elements,ga=ca[0]*ca[0]+ca[1]*ca[1]+ca[2]*ca[2],ya=ca[4]*ca[4]+ca[5]*ca[5]+ca[6]*ca[6],_a=ca[8]*ca[8]+ca[9]*ca[9]+ca[10]*ca[10];return Math.sqrt(Math.max(ga,ya,_a))},makeTranslation:function(ca,ga,ya){return this.set(1,0,0,ca,0,1,0,ga,0,0,1,ya,0,0,0,1),this},makeRotationX:function(ca){var ga=Math.cos(ca),ya=Math.sin(ca);return this.set(1,0,0,0,0,ga,-ya,0,0,ya,ga,0,0,0,0,1),this},makeRotationY:function(ca){var ga=Math.cos(ca),ya=Math.sin(ca);return this.set(ga,0,ya,0,0,1,0,0,-ya,0,ga,0,0,0,0,1),this},makeRotationZ:function(ca){var ga=Math.cos(ca),ya=Math.sin(ca);return this.set(ga,-ya,0,0,ya,ga,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(ca,ga){var ya=Math.cos(ga),_a=Math.sin(ga),_s=1-ya,Ss=ca.x,Ms=ca.y,Es=ca.z,Cs=_s*Ss,Ts=_s*Ms;return this.set(Cs*Ss+ya,Cs*Ms-_a*Es,Cs*Es+_a*Ms,0,Cs*Ms+_a*Es,Ts*Ms+ya,Ts*Es-_a*Ss,0,Cs*Es-_a*Ms,Ts*Es+_a*Ss,_s*Es*Es+ya,0,0,0,0,1),this},makeScale:function(ca,ga,ya){return this.set(ca,0,0,0,0,ga,0,0,0,0,ya,0,0,0,0,1),this},makeShear:function(ca,ga,ya){return this.set(1,ga,ya,0,ca,1,ya,0,ca,ga,1,0,0,0,0,1),this},compose:function(ca,ga,ya){var _a=this.elements,_s=ga._x,Ss=ga._y,Ms=ga._z,Es=ga._w,Cs=_s+_s,Ts=Ss+Ss,Bs=Ms+Ms,Is=_s*Cs,Ps=_s*Ts,Rs=_s*Bs,ks=Ss*Ts,$s=Ss*Bs,Os=Ms*Bs,Ls=Es*Cs,Ds=Es*Ts,Fs=Es*Bs,Ns=ya.x,Vs=ya.y,Gs=ya.z;return _a[0]=(1-(ks+Os))*Ns,_a[1]=(Ps+Fs)*Ns,_a[2]=(Rs-Ds)*Ns,_a[3]=0,_a[4]=(Ps-Fs)*Vs,_a[5]=(1-(Is+Os))*Vs,_a[6]=($s+Ls)*Vs,_a[7]=0,_a[8]=(Rs+Ds)*Gs,_a[9]=($s-Ls)*Gs,_a[10]=(1-(Is+ks))*Gs,_a[11]=0,_a[12]=ca.x,_a[13]=ca.y,_a[14]=ca.z,_a[15]=1,this},decompose:function(ca,ga,ya){var _a=this.elements,_s=_v1.set(_a[0],_a[1],_a[2]).length(),Ss=_v1.set(_a[4],_a[5],_a[6]).length(),Ms=_v1.set(_a[8],_a[9],_a[10]).length(),Es=this.determinant();Es<0&&(_s=-_s),ca.x=_a[12],ca.y=_a[13],ca.z=_a[14],_m1.copy(this);var Cs=1/_s,Ts=1/Ss,Bs=1/Ms;return _m1.elements[0]*=Cs,_m1.elements[1]*=Cs,_m1.elements[2]*=Cs,_m1.elements[4]*=Ts,_m1.elements[5]*=Ts,_m1.elements[6]*=Ts,_m1.elements[8]*=Bs,_m1.elements[9]*=Bs,_m1.elements[10]*=Bs,ga.setFromRotationMatrix(_m1),ya.x=_s,ya.y=Ss,ya.z=Ms,this},makePerspective:function(ca,ga,ya,_a,_s,Ss){Ss===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var Ms=this.elements,Es=2*_s/(ga-ca),Cs=2*_s/(ya-_a),Ts=(ga+ca)/(ga-ca),Bs=(ya+_a)/(ya-_a),Is=-(Ss+_s)/(Ss-_s),Ps=-2*Ss*_s/(Ss-_s);return Ms[0]=Es,Ms[4]=0,Ms[8]=Ts,Ms[12]=0,Ms[1]=0,Ms[5]=Cs,Ms[9]=Bs,Ms[13]=0,Ms[2]=0,Ms[6]=0,Ms[10]=Is,Ms[14]=Ps,Ms[3]=0,Ms[7]=0,Ms[11]=-1,Ms[15]=0,this},makeOrthographic:function(ca,ga,ya,_a,_s,Ss){var Ms=this.elements,Es=1/(ga-ca),Cs=1/(ya-_a),Ts=1/(Ss-_s),Bs=(ga+ca)*Es,Is=(ya+_a)*Cs,Ps=(Ss+_s)*Ts;return Ms[0]=2*Es,Ms[4]=0,Ms[8]=0,Ms[12]=-Bs,Ms[1]=0,Ms[5]=2*Cs,Ms[9]=0,Ms[13]=-Is,Ms[2]=0,Ms[6]=0,Ms[10]=-2*Ts,Ms[14]=-Ps,Ms[3]=0,Ms[7]=0,Ms[11]=0,Ms[15]=1,this},equals:function(ca){for(var ga=this.elements,ya=ca.elements,_a=0;_a<16;_a++)if(ga[_a]!==ya[_a])return!1;return!0},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var ya=0;ya<16;ya++)this.elements[ya]=ca[ya+ga];return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);var ya=this.elements;return ca[ga]=ya[0],ca[ga+1]=ya[1],ca[ga+2]=ya[2],ca[ga+3]=ya[3],ca[ga+4]=ya[4],ca[ga+5]=ya[5],ca[ga+6]=ya[6],ca[ga+7]=ya[7],ca[ga+8]=ya[8],ca[ga+9]=ya[9],ca[ga+10]=ya[10],ca[ga+11]=ya[11],ca[ga+12]=ya[12],ca[ga+13]=ya[13],ca[ga+14]=ya[14],ca[ga+15]=ya[15],ca}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(ca,ga,ya,_a){this._x=ca||0,this._y=ga||0,this._z=ya||0,this._order=_a||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(ca){this._x=ca,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(ca){this._y=ca,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(ca){this._z=ca,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(ca){this._order=ca,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(ca,ga,ya,_a){return this._x=ca,this._y=ga,this._z=ya,this._order=_a||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(ca){return this._x=ca._x,this._y=ca._y,this._z=ca._z,this._order=ca._order,this._onChangeCallback(),this},setFromRotationMatrix:function(ca,ga,ya){var _a=MathUtils.clamp,_s=ca.elements,Ss=_s[0],Ms=_s[4],Es=_s[8],Cs=_s[1],Ts=_s[5],Bs=_s[9],Is=_s[2],Ps=_s[6],Rs=_s[10];switch(ga=ga||this._order,ga){case"XYZ":this._y=Math.asin(_a(Es,-1,1)),Math.abs(Es)<.9999999?(this._x=Math.atan2(-Bs,Rs),this._z=Math.atan2(-Ms,Ss)):(this._x=Math.atan2(Ps,Ts),this._z=0);break;case"YXZ":this._x=Math.asin(-_a(Bs,-1,1)),Math.abs(Bs)<.9999999?(this._y=Math.atan2(Es,Rs),this._z=Math.atan2(Cs,Ts)):(this._y=Math.atan2(-Is,Ss),this._z=0);break;case"ZXY":this._x=Math.asin(_a(Ps,-1,1)),Math.abs(Ps)<.9999999?(this._y=Math.atan2(-Is,Rs),this._z=Math.atan2(-Ms,Ts)):(this._y=0,this._z=Math.atan2(Cs,Ss));break;case"ZYX":this._y=Math.asin(-_a(Is,-1,1)),Math.abs(Is)<.9999999?(this._x=Math.atan2(Ps,Rs),this._z=Math.atan2(Cs,Ss)):(this._x=0,this._z=Math.atan2(-Ms,Ts));break;case"YZX":this._z=Math.asin(_a(Cs,-1,1)),Math.abs(Cs)<.9999999?(this._x=Math.atan2(-Bs,Ts),this._y=Math.atan2(-Is,Ss)):(this._x=0,this._y=Math.atan2(Es,Rs));break;case"XZY":this._z=Math.asin(-_a(Ms,-1,1)),Math.abs(Ms)<.9999999?(this._x=Math.atan2(Ps,Ts),this._y=Math.atan2(Es,Ss)):(this._x=Math.atan2(-Bs,Rs),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+ga)}return this._order=ga,ya!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(ca,ga,ya){return _matrix.makeRotationFromQuaternion(ca),this.setFromRotationMatrix(_matrix,ga,ya)},setFromVector3:function(ca,ga){return this.set(ca.x,ca.y,ca.z,ga||this._order)},reorder:function(ca){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,ca)},equals:function(ca){return ca._x===this._x&&ca._y===this._y&&ca._z===this._z&&ca._order===this._order},fromArray:function(ca){return this._x=ca[0],this._y=ca[1],this._z=ca[2],ca[3]!==void 0&&(this._order=ca[3]),this._onChangeCallback(),this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this._x,ca[ga+1]=this._y,ca[ga+2]=this._z,ca[ga+3]=this._order,ca},toVector3:function(ca){return ca?ca.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(ca){return this._onChangeCallback=ca,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(ca){this.mask=1<<ca|0},enable:function(ca){this.mask|=1<<ca|0},enableAll:function(){this.mask=-1},toggle:function(ca){this.mask^=1<<ca|0},disable:function(ca){this.mask&=~(1<<ca|0)},disableAll:function(){this.mask=0},test:function(ca){return(this.mask&ca.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var ca=new Vector3,ga=new Euler,ya=new Quaternion,_a=new Vector3(1,1,1);function _s(){ya.setFromEuler(ga,!1)}function Ss(){ga.setFromQuaternion(ya,void 0,!1)}ga._onChange(_s),ya._onChange(Ss),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:ca},rotation:{configurable:!0,enumerable:!0,value:ga},quaternion:{configurable:!0,enumerable:!0,value:ya},scale:{configurable:!0,enumerable:!0,value:_a},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(ca),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(ca){return this.quaternion.premultiply(ca),this},setRotationFromAxisAngle:function(ca,ga){this.quaternion.setFromAxisAngle(ca,ga)},setRotationFromEuler:function(ca){this.quaternion.setFromEuler(ca,!0)},setRotationFromMatrix:function(ca){this.quaternion.setFromRotationMatrix(ca)},setRotationFromQuaternion:function(ca){this.quaternion.copy(ca)},rotateOnAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(ca,ga){return _q1.setFromAxisAngle(ca,ga),this.quaternion.premultiply(_q1),this},rotateX:function(ca){return this.rotateOnAxis(_xAxis,ca)},rotateY:function(ca){return this.rotateOnAxis(_yAxis,ca)},rotateZ:function(ca){return this.rotateOnAxis(_zAxis,ca)},translateOnAxis:function(ca,ga){return _v1$1.copy(ca).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(ga)),this},translateX:function(ca){return this.translateOnAxis(_xAxis,ca)},translateY:function(ca){return this.translateOnAxis(_yAxis,ca)},translateZ:function(ca){return this.translateOnAxis(_zAxis,ca)},localToWorld:function(ca){return ca.applyMatrix4(this.matrixWorld)},worldToLocal:function(ca){return ca.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(ca,ga,ya){ca.isVector3?_target.copy(ca):_target.set(ca,ga,ya);var _a=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),_a&&(_m1$1.extractRotation(_a.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.add(arguments[ga]);return this}return ca===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",ca),this):(ca&&ca.isObject3D?(ca.parent!==null&&ca.parent.remove(ca),ca.parent=this,this.children.push(ca),ca.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",ca),this)},remove:function(ca){if(arguments.length>1){for(var ga=0;ga<arguments.length;ga++)this.remove(arguments[ga]);return this}var ya=this.children.indexOf(ca);return ya!==-1&&(ca.parent=null,this.children.splice(ya,1),ca.dispatchEvent(_removedEvent)),this},attach:function(ca){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),ca.parent!==null&&(ca.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(ca.parent.matrixWorld)),ca.applyMatrix4(_m1$1),ca.updateWorldMatrix(!1,!1),this.add(ca),this},getObjectById:function(ca){return this.getObjectByProperty("id",ca)},getObjectByName:function(ca){return this.getObjectByProperty("name",ca)},getObjectByProperty:function(ca,ga){if(this[ca]===ga)return this;for(var ya=0,_a=this.children.length;ya<_a;ya++){var _s=this.children[ya],Ss=_s.getObjectByProperty(ca,ga);if(Ss!==void 0)return Ss}},getWorldPosition:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),ca.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),ca=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,ca,_scale),ca},getWorldScale:function(ca){return ca===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,ca),ca},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(ga[8],ga[9],ga[10]).normalize()},raycast:function(){},traverse:function(ca){ca(this);for(var ga=this.children,ya=0,_a=ga.length;ya<_a;ya++)ga[ya].traverse(ca)},traverseVisible:function(ca){if(this.visible!==!1){ca(this);for(var ga=this.children,ya=0,_a=ga.length;ya<_a;ya++)ga[ya].traverseVisible(ca)}},traverseAncestors:function(ca){var ga=this.parent;ga!==null&&(ca(ga),ga.traverseAncestors(ca))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(ca){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||ca)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,ca=!0);for(var ga=this.children,ya=0,_a=ga.length;ya<_a;ya++)ga[ya].updateMatrixWorld(ca)},updateWorldMatrix:function(ca,ga){var ya=this.parent;if(ca===!0&&ya!==null&&ya.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),ga===!0)for(var _a=this.children,_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s].updateWorldMatrix(!1,!0)},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string",ya={};ga&&(ca={geometries:{},materials:{},textures:{},images:{},shapes:{}},ya.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var _a={};_a.uuid=this.uuid,_a.type=this.type,this.name!==""&&(_a.name=this.name),this.castShadow===!0&&(_a.castShadow=!0),this.receiveShadow===!0&&(_a.receiveShadow=!0),this.visible===!1&&(_a.visible=!1),this.frustumCulled===!1&&(_a.frustumCulled=!1),this.renderOrder!==0&&(_a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(_a.userData=this.userData),_a.layers=this.layers.mask,_a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(_a.matrixAutoUpdate=!1),this.isInstancedMesh&&(_a.type="InstancedMesh",_a.count=this.count,_a.instanceMatrix=this.instanceMatrix.toJSON());function _s(Os,Ls){return Os[Ls.uuid]===void 0&&(Os[Ls.uuid]=Ls.toJSON(ca)),Ls.uuid}if(this.isMesh||this.isLine||this.isPoints){_a.geometry=_s(ca.geometries,this.geometry);var Ss=this.geometry.parameters;if(Ss!==void 0&&Ss.shapes!==void 0){var Ms=Ss.shapes;if(Array.isArray(Ms))for(var Es=0,Cs=Ms.length;Es<Cs;Es++){var Ts=Ms[Es];_s(ca.shapes,Ts)}else _s(ca.shapes,Ms)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var Bs=[],Es=0,Cs=this.material.length;Es<Cs;Es++)Bs.push(_s(ca.materials,this.material[Es]));_a.material=Bs}else _a.material=_s(ca.materials,this.material);if(this.children.length>0){_a.children=[];for(var Es=0;Es<this.children.length;Es++)_a.children.push(this.children[Es].toJSON(ca).object)}if(ga){var Is=$s(ca.geometries),Ps=$s(ca.materials),Rs=$s(ca.textures),ks=$s(ca.images),Ms=$s(ca.shapes);Is.length>0&&(ya.geometries=Is),Ps.length>0&&(ya.materials=Ps),Rs.length>0&&(ya.textures=Rs),ks.length>0&&(ya.images=ks),Ms.length>0&&(ya.shapes=Ms)}return ya.object=_a,ya;function $s(Os){var Ls=[];for(var Ds in Os){var Fs=Os[Ds];delete Fs.metadata,Ls.push(Fs)}return Ls}},clone:function(ca){return new this.constructor().copy(this,ca)},copy:function(ca,ga){if(ga===void 0&&(ga=!0),this.name=ca.name,this.up.copy(ca.up),this.position.copy(ca.position),this.quaternion.copy(ca.quaternion),this.scale.copy(ca.scale),this.matrix.copy(ca.matrix),this.matrixWorld.copy(ca.matrixWorld),this.matrixAutoUpdate=ca.matrixAutoUpdate,this.matrixWorldNeedsUpdate=ca.matrixWorldNeedsUpdate,this.layers.mask=ca.layers.mask,this.visible=ca.visible,this.castShadow=ca.castShadow,this.receiveShadow=ca.receiveShadow,this.frustumCulled=ca.frustumCulled,this.renderOrder=ca.renderOrder,this.userData=JSON.parse(JSON.stringify(ca.userData)),ga===!0)for(var ya=0;ya<ca.children.length;ya++){var _a=ca.children[ya];this.add(_a.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),ca.background!==null&&(this.background=ca.background.clone()),ca.environment!==null&&(this.environment=ca.environment.clone()),ca.fog!==null&&(this.fog=ca.fog.clone()),ca.overrideMaterial!==null&&(this.overrideMaterial=ca.overrideMaterial.clone()),this.autoUpdate=ca.autoUpdate,this.matrixAutoUpdate=ca.matrixAutoUpdate,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return this.background!==null&&(ga.object.background=this.background.toJSON(ca)),this.environment!==null&&(ga.object.environment=this.environment.toJSON(ca)),this.fog!==null&&(ga.object.fog=this.fog.toJSON()),ga},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(ca,ga){this.min=ca!==void 0?ca:new Vector3(1/0,1/0,1/0),this.max=ga!==void 0?ga:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromArray:function(ca){for(var ga=1/0,ya=1/0,_a=1/0,_s=-1/0,Ss=-1/0,Ms=-1/0,Es=0,Cs=ca.length;Es<Cs;Es+=3){var Ts=ca[Es],Bs=ca[Es+1],Is=ca[Es+2];Ts<ga&&(ga=Ts),Bs<ya&&(ya=Bs),Is<_a&&(_a=Is),Ts>_s&&(_s=Ts),Bs>Ss&&(Ss=Bs),Is>Ms&&(Ms=Is)}return this.min.set(ga,ya,_a),this.max.set(_s,Ss,Ms),this},setFromBufferAttribute:function(ca){for(var ga=1/0,ya=1/0,_a=1/0,_s=-1/0,Ss=-1/0,Ms=-1/0,Es=0,Cs=ca.count;Es<Cs;Es++){var Ts=ca.getX(Es),Bs=ca.getY(Es),Is=ca.getZ(Es);Ts<ga&&(ga=Ts),Bs<ya&&(ya=Bs),Is<_a&&(_a=Is),Ts>_s&&(_s=Ts),Bs>Ss&&(Ss=Bs),Is>Ms&&(Ms=Is)}return this.min.set(ga,ya,_a),this.max.set(_s,Ss,Ms),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,ya=ca.length;ga<ya;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var ya=_vector$1.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(ya),this.max.copy(ca).add(ya),this},setFromObject:function(ca){return this.makeEmpty(),this.expandByObject(ca)},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),ca=new Vector3),this.isEmpty()?ca.set(0,0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},expandByObject:function(ca){ca.updateWorldMatrix(!1,!1);var ga=ca.geometry;ga!==void 0&&(ga.boundingBox===null&&ga.computeBoundingBox(),_box.copy(ga.boundingBox),_box.applyMatrix4(ca.matrixWorld),this.union(_box));for(var ya=ca.children,_a=0,_s=ya.length;_a<_s;_a++)this.expandByObject(ya[_a]);return this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y||ca.z<this.min.z||ca.z>this.max.z)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y&&this.min.z<=ca.min.z&&ca.max.z<=this.max.z},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),ga=new Vector3),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y),(ca.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y||ca.max.z<this.min.z||ca.min.z>this.max.z)},intersectsSphere:function(ca){return this.clampPoint(ca.center,_vector$1),_vector$1.distanceToSquared(ca.center)<=ca.radius*ca.radius},intersectsPlane:function(ca){var ga,ya;return ca.normal.x>0?(ga=ca.normal.x*this.min.x,ya=ca.normal.x*this.max.x):(ga=ca.normal.x*this.max.x,ya=ca.normal.x*this.min.x),ca.normal.y>0?(ga+=ca.normal.y*this.min.y,ya+=ca.normal.y*this.max.y):(ga+=ca.normal.y*this.max.y,ya+=ca.normal.y*this.min.y),ca.normal.z>0?(ga+=ca.normal.z*this.min.z,ya+=ca.normal.z*this.max.z):(ga+=ca.normal.z*this.max.z,ya+=ca.normal.z*this.min.z),ga<=-ca.constant&&ya>=-ca.constant},intersectsTriangle:function(ca){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(ca.a,_center),_v1$2.subVectors(ca.b,_center),_v2.subVectors(ca.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var ga=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(ga,_v0,_v1$2,_v2,_extents)||(ga=[1,0,0,0,1,0,0,0,1],!satForAxes(ga,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),ga=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(ga,_v0,_v1$2,_v2,_extents))},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$1.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},getBoundingSphere:function(ca){return ca===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(ca.center),ca.radius=this.getSize(_vector$1).length()*.5,ca},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this.isEmpty()&&this.makeEmpty(),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},applyMatrix4:function(ca){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(ca),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(ca),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(ca),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(ca),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(ca),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(ca),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(ca),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(ca),this.setFromPoints(_points),this)},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});function satForAxes(ca,ga,ya,_a,_s){var Ss,Ms;for(Ss=0,Ms=ca.length-3;Ss<=Ms;Ss+=3){_testAxis.fromArray(ca,Ss);var Es=_s.x*Math.abs(_testAxis.x)+_s.y*Math.abs(_testAxis.y)+_s.z*Math.abs(_testAxis.z),Cs=ga.dot(_testAxis),Ts=ya.dot(_testAxis),Bs=_a.dot(_testAxis);if(Math.max(-Math.max(Cs,Ts,Bs),Math.min(Cs,Ts,Bs))>Es)return!1}return!0}var _box$1=new Box3;function Sphere(ca,ga){this.center=ca!==void 0?ca:new Vector3,this.radius=ga!==void 0?ga:-1}Object.assign(Sphere.prototype,{set:function(ca,ga){return this.center.copy(ca),this.radius=ga,this},setFromPoints:function(ca,ga){var ya=this.center;ga!==void 0?ya.copy(ga):_box$1.setFromPoints(ca).getCenter(ya);for(var _a=0,_s=0,Ss=ca.length;_s<Ss;_s++)_a=Math.max(_a,ya.distanceToSquared(ca[_s]));return this.radius=Math.sqrt(_a),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.center.copy(ca.center),this.radius=ca.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(ca){return ca.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(ca){return ca.distanceTo(this.center)-this.radius},intersectsSphere:function(ca){var ga=this.radius+ca.radius;return ca.center.distanceToSquared(this.center)<=ga*ga},intersectsBox:function(ca){return ca.intersectsSphere(this)},intersectsPlane:function(ca){return Math.abs(ca.distanceToPoint(this.center))<=this.radius},clampPoint:function(ca,ga){var ya=this.center.distanceToSquared(ca);return ga===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),ga=new Vector3),ga.copy(ca),ya>this.radius*this.radius&&(ga.sub(this.center).normalize(),ga.multiplyScalar(this.radius).add(this.center)),ga},getBoundingBox:function(ca){return ca===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),ca=new Box3),this.isEmpty()?(ca.makeEmpty(),ca):(ca.set(this.center,this.center),ca.expandByScalar(this.radius),ca)},applyMatrix4:function(ca){return this.center.applyMatrix4(ca),this.radius=this.radius*ca.getMaxScaleOnAxis(),this},translate:function(ca){return this.center.add(ca),this},equals:function(ca){return ca.center.equals(this.center)&&ca.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(ca,ga){this.origin=ca!==void 0?ca:new Vector3,this.direction=ga!==void 0?ga:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(ca,ga){return this.origin.copy(ca),this.direction.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.origin.copy(ca.origin),this.direction.copy(ca.direction),this},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Ray: .at() target is now required"),ga=new Vector3),ga.copy(this.direction).multiplyScalar(ca).add(this.origin)},lookAt:function(ca){return this.direction.copy(ca).sub(this.origin).normalize(),this},recast:function(ca){return this.origin.copy(this.at(ca,_vector$2)),this},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),ga=new Vector3),ga.subVectors(ca,this.origin);var ya=ga.dot(this.direction);return ya<0?ga.copy(this.origin):ga.copy(this.direction).multiplyScalar(ya).add(this.origin)},distanceToPoint:function(ca){return Math.sqrt(this.distanceSqToPoint(ca))},distanceSqToPoint:function(ca){var ga=_vector$2.subVectors(ca,this.origin).dot(this.direction);return ga<0?this.origin.distanceToSquared(ca):(_vector$2.copy(this.direction).multiplyScalar(ga).add(this.origin),_vector$2.distanceToSquared(ca))},distanceSqToSegment:function(ca,ga,ya,_a){_segCenter.copy(ca).add(ga).multiplyScalar(.5),_segDir.copy(ga).sub(ca).normalize(),_diff.copy(this.origin).sub(_segCenter);var _s=ca.distanceTo(ga)*.5,Ss=-this.direction.dot(_segDir),Ms=_diff.dot(this.direction),Es=-_diff.dot(_segDir),Cs=_diff.lengthSq(),Ts=Math.abs(1-Ss*Ss),Bs,Is,Ps,Rs;if(Ts>0)if(Bs=Ss*Es-Ms,Is=Ss*Ms-Es,Rs=_s*Ts,Bs>=0)if(Is>=-Rs)if(Is<=Rs){var ks=1/Ts;Bs*=ks,Is*=ks,Ps=Bs*(Bs+Ss*Is+2*Ms)+Is*(Ss*Bs+Is+2*Es)+Cs}else Is=_s,Bs=Math.max(0,-(Ss*Is+Ms)),Ps=-Bs*Bs+Is*(Is+2*Es)+Cs;else Is=-_s,Bs=Math.max(0,-(Ss*Is+Ms)),Ps=-Bs*Bs+Is*(Is+2*Es)+Cs;else Is<=-Rs?(Bs=Math.max(0,-(-Ss*_s+Ms)),Is=Bs>0?-_s:Math.min(Math.max(-_s,-Es),_s),Ps=-Bs*Bs+Is*(Is+2*Es)+Cs):Is<=Rs?(Bs=0,Is=Math.min(Math.max(-_s,-Es),_s),Ps=Is*(Is+2*Es)+Cs):(Bs=Math.max(0,-(Ss*_s+Ms)),Is=Bs>0?_s:Math.min(Math.max(-_s,-Es),_s),Ps=-Bs*Bs+Is*(Is+2*Es)+Cs);else Is=Ss>0?-_s:_s,Bs=Math.max(0,-(Ss*Is+Ms)),Ps=-Bs*Bs+Is*(Is+2*Es)+Cs;return ya&&ya.copy(this.direction).multiplyScalar(Bs).add(this.origin),_a&&_a.copy(_segDir).multiplyScalar(Is).add(_segCenter),Ps},intersectSphere:function(ca,ga){_vector$2.subVectors(ca.center,this.origin);var ya=_vector$2.dot(this.direction),_a=_vector$2.dot(_vector$2)-ya*ya,_s=ca.radius*ca.radius;if(_a>_s)return null;var Ss=Math.sqrt(_s-_a),Ms=ya-Ss,Es=ya+Ss;return Ms<0&&Es<0?null:Ms<0?this.at(Es,ga):this.at(Ms,ga)},intersectsSphere:function(ca){return this.distanceSqToPoint(ca.center)<=ca.radius*ca.radius},distanceToPlane:function(ca){var ga=ca.normal.dot(this.direction);if(ga===0)return ca.distanceToPoint(this.origin)===0?0:null;var ya=-(this.origin.dot(ca.normal)+ca.constant)/ga;return ya>=0?ya:null},intersectPlane:function(ca,ga){var ya=this.distanceToPlane(ca);return ya===null?null:this.at(ya,ga)},intersectsPlane:function(ca){var ga=ca.distanceToPoint(this.origin);if(ga===0)return!0;var ya=ca.normal.dot(this.direction);return ya*ga<0},intersectBox:function(ca,ga){var ya,_a,_s,Ss,Ms,Es,Cs=1/this.direction.x,Ts=1/this.direction.y,Bs=1/this.direction.z,Is=this.origin;return Cs>=0?(ya=(ca.min.x-Is.x)*Cs,_a=(ca.max.x-Is.x)*Cs):(ya=(ca.max.x-Is.x)*Cs,_a=(ca.min.x-Is.x)*Cs),Ts>=0?(_s=(ca.min.y-Is.y)*Ts,Ss=(ca.max.y-Is.y)*Ts):(_s=(ca.max.y-Is.y)*Ts,Ss=(ca.min.y-Is.y)*Ts),ya>Ss||_s>_a||((_s>ya||ya!==ya)&&(ya=_s),(Ss<_a||_a!==_a)&&(_a=Ss),Bs>=0?(Ms=(ca.min.z-Is.z)*Bs,Es=(ca.max.z-Is.z)*Bs):(Ms=(ca.max.z-Is.z)*Bs,Es=(ca.min.z-Is.z)*Bs),ya>Es||Ms>_a)||((Ms>ya||ya!==ya)&&(ya=Ms),(Es<_a||_a!==_a)&&(_a=Es),_a<0)?null:this.at(ya>=0?ya:_a,ga)},intersectsBox:function(ca){return this.intersectBox(ca,_vector$2)!==null},intersectTriangle:function(ca,ga,ya,_a,_s){_edge1.subVectors(ga,ca),_edge2.subVectors(ya,ca),_normal.crossVectors(_edge1,_edge2);var Ss=this.direction.dot(_normal),Ms;if(Ss>0){if(_a)return null;Ms=1}else if(Ss<0)Ms=-1,Ss=-Ss;else return null;_diff.subVectors(this.origin,ca);var Es=Ms*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Es<0)return null;var Cs=Ms*this.direction.dot(_edge1.cross(_diff));if(Cs<0||Es+Cs>Ss)return null;var Ts=-Ms*_diff.dot(_normal);return Ts<0?null:this.at(Ts/Ss,_s)},applyMatrix4:function(ca){return this.origin.applyMatrix4(ca),this.direction.transformDirection(ca),this},equals:function(ca){return ca.origin.equals(this.origin)&&ca.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(ca,ga){this.normal=ca!==void 0?ca:new Vector3(1,0,0),this.constant=ga!==void 0?ga:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(ca,ga){return this.normal.copy(ca),this.constant=ga,this},setComponents:function(ca,ga,ya,_a){return this.normal.set(ca,ga,ya),this.constant=_a,this},setFromNormalAndCoplanarPoint:function(ca,ga){return this.normal.copy(ca),this.constant=-ga.dot(this.normal),this},setFromCoplanarPoints:function(ca,ga,ya){var _a=_vector1.subVectors(ya,ga).cross(_vector2.subVectors(ca,ga)).normalize();return this.setFromNormalAndCoplanarPoint(_a,ca),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.normal.copy(ca.normal),this.constant=ca.constant,this},normalize:function(){var ca=1/this.normal.length();return this.normal.multiplyScalar(ca),this.constant*=ca,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(ca){return this.normal.dot(ca)+this.constant},distanceToSphere:function(ca){return this.distanceToPoint(ca.center)-ca.radius},projectPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),ga=new Vector3),ga.copy(this.normal).multiplyScalar(-this.distanceToPoint(ca)).add(ca)},intersectLine:function(ca,ga){ga===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),ga=new Vector3);var ya=ca.delta(_vector1),_a=this.normal.dot(ya);if(_a===0)return this.distanceToPoint(ca.start)===0?ga.copy(ca.start):void 0;var _s=-(ca.start.dot(this.normal)+this.constant)/_a;if(!(_s<0||_s>1))return ga.copy(ya).multiplyScalar(_s).add(ca.start)},intersectsLine:function(ca){var ga=this.distanceToPoint(ca.start),ya=this.distanceToPoint(ca.end);return ga<0&&ya>0||ya<0&&ga>0},intersectsBox:function(ca){return ca.intersectsPlane(this)},intersectsSphere:function(ca){return ca.intersectsPlane(this)},coplanarPoint:function(ca){return ca===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),ca=new Vector3),ca.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(ca,ga){var ya=ga||_normalMatrix.getNormalMatrix(ca),_a=this.coplanarPoint(_vector1).applyMatrix4(ca),_s=this.normal.applyMatrix3(ya).normalize();return this.constant=-_a.dot(_s),this},translate:function(ca){return this.constant-=ca.dot(this.normal),this},equals:function(ca){return ca.normal.equals(this.normal)&&ca.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(ca,ga,ya){this.a=ca!==void 0?ca:new Vector3,this.b=ga!==void 0?ga:new Vector3,this.c=ya!==void 0?ya:new Vector3}Object.assign(Triangle,{getNormal:function(ca,ga,ya,_a){_a===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),_a=new Vector3),_a.subVectors(ya,ga),_v0$1.subVectors(ca,ga),_a.cross(_v0$1);var _s=_a.lengthSq();return _s>0?_a.multiplyScalar(1/Math.sqrt(_s)):_a.set(0,0,0)},getBarycoord:function(ca,ga,ya,_a,_s){_v0$1.subVectors(_a,ga),_v1$3.subVectors(ya,ga),_v2$1.subVectors(ca,ga);var Ss=_v0$1.dot(_v0$1),Ms=_v0$1.dot(_v1$3),Es=_v0$1.dot(_v2$1),Cs=_v1$3.dot(_v1$3),Ts=_v1$3.dot(_v2$1),Bs=Ss*Cs-Ms*Ms;if(_s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),_s=new Vector3),Bs===0)return _s.set(-2,-1,-1);var Is=1/Bs,Ps=(Cs*Es-Ms*Ts)*Is,Rs=(Ss*Ts-Ms*Es)*Is;return _s.set(1-Ps-Rs,Rs,Ps)},containsPoint:function(ca,ga,ya,_a){return Triangle.getBarycoord(ca,ga,ya,_a,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(ca,ga,ya,_a,_s,Ss,Ms,Es){return this.getBarycoord(ca,ga,ya,_a,_v3),Es.set(0,0),Es.addScaledVector(_s,_v3.x),Es.addScaledVector(Ss,_v3.y),Es.addScaledVector(Ms,_v3.z),Es},isFrontFacing:function(ca,ga,ya,_a){return _v0$1.subVectors(ya,ga),_v1$3.subVectors(ca,ga),_v0$1.cross(_v1$3).dot(_a)<0}});Object.assign(Triangle.prototype,{set:function(ca,ga,ya){return this.a.copy(ca),this.b.copy(ga),this.c.copy(ya),this},setFromPointsAndIndices:function(ca,ga,ya,_a){return this.a.copy(ca[ga]),this.b.copy(ca[ya]),this.c.copy(ca[_a]),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.a.copy(ca.a),this.b.copy(ca.b),this.c.copy(ca.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),ca=new Vector3),ca.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(ca){return Triangle.getNormal(this.a,this.b,this.c,ca)},getPlane:function(ca){return ca===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),ca=new Plane),ca.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(ca,ga){return Triangle.getBarycoord(ca,this.a,this.b,this.c,ga)},getUV:function(ca,ga,ya,_a,_s){return Triangle.getUV(ca,this.a,this.b,this.c,ga,ya,_a,_s)},containsPoint:function(ca){return Triangle.containsPoint(ca,this.a,this.b,this.c)},isFrontFacing:function(ca){return Triangle.isFrontFacing(this.a,this.b,this.c,ca)},intersectsBox:function(ca){return ca.intersectsTriangle(this)},closestPointToPoint:function(ca,ga){ga===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),ga=new Vector3);var ya=this.a,_a=this.b,_s=this.c,Ss,Ms;_vab.subVectors(_a,ya),_vac.subVectors(_s,ya),_vap.subVectors(ca,ya);var Es=_vab.dot(_vap),Cs=_vac.dot(_vap);if(Es<=0&&Cs<=0)return ga.copy(ya);_vbp.subVectors(ca,_a);var Ts=_vab.dot(_vbp),Bs=_vac.dot(_vbp);if(Ts>=0&&Bs<=Ts)return ga.copy(_a);var Is=Es*Bs-Ts*Cs;if(Is<=0&&Es>=0&&Ts<=0)return Ss=Es/(Es-Ts),ga.copy(ya).addScaledVector(_vab,Ss);_vcp.subVectors(ca,_s);var Ps=_vab.dot(_vcp),Rs=_vac.dot(_vcp);if(Rs>=0&&Ps<=Rs)return ga.copy(_s);var ks=Ps*Cs-Es*Rs;if(ks<=0&&Cs>=0&&Rs<=0)return Ms=Cs/(Cs-Rs),ga.copy(ya).addScaledVector(_vac,Ms);var $s=Ts*Rs-Ps*Bs;if($s<=0&&Bs-Ts>=0&&Ps-Rs>=0)return _vbc.subVectors(_s,_a),Ms=(Bs-Ts)/(Bs-Ts+(Ps-Rs)),ga.copy(_a).addScaledVector(_vbc,Ms);var Os=1/($s+ks+Is);return Ss=ks*Os,Ms=Is*Os,ga.copy(ya).addScaledVector(_vab,Ss).addScaledVector(_vac,Ms)},equals:function(ca){return ca.a.equals(this.a)&&ca.b.equals(this.b)&&ca.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(ca,ga,ya){return ga===void 0&&ya===void 0?this.set(ca):this.setRGB(ca,ga,ya)}function hue2rgb(ca,ga,ya){return ya<0&&(ya+=1),ya>1&&(ya-=1),ya<1/6?ca+(ga-ca)*6*ya:ya<1/2?ga:ya<2/3?ca+(ga-ca)*6*(2/3-ya):ca}function SRGBToLinear(ca){return ca<.04045?ca*.0773993808:Math.pow(ca*.9478672986+.0521327014,2.4)}function LinearToSRGB(ca){return ca<.0031308?ca*12.92:1.055*Math.pow(ca,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(ca){return ca&&ca.isColor?this.copy(ca):typeof ca=="number"?this.setHex(ca):typeof ca=="string"&&this.setStyle(ca),this},setScalar:function(ca){return this.r=ca,this.g=ca,this.b=ca,this},setHex:function(ca){return ca=Math.floor(ca),this.r=(ca>>16&255)/255,this.g=(ca>>8&255)/255,this.b=(ca&255)/255,this},setRGB:function(ca,ga,ya){return this.r=ca,this.g=ga,this.b=ya,this},setHSL:function(ca,ga,ya){if(ca=MathUtils.euclideanModulo(ca,1),ga=MathUtils.clamp(ga,0,1),ya=MathUtils.clamp(ya,0,1),ga===0)this.r=this.g=this.b=ya;else{var _a=ya<=.5?ya*(1+ga):ya+ga-ya*ga,_s=2*ya-_a;this.r=hue2rgb(_s,_a,ca+1/3),this.g=hue2rgb(_s,_a,ca),this.b=hue2rgb(_s,_a,ca-1/3)}return this},setStyle:function(ca){function ga(Is){Is!==void 0&&parseFloat(Is)<1&&console.warn("THREE.Color: Alpha component of "+ca+" will be ignored.")}var ya;if(ya=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(ca)){var _a,_s=ya[1],Ss=ya[2];switch(_s){case"rgb":case"rgba":if(_a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ss))return this.r=Math.min(255,parseInt(_a[1],10))/255,this.g=Math.min(255,parseInt(_a[2],10))/255,this.b=Math.min(255,parseInt(_a[3],10))/255,ga(_a[5]),this;if(_a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ss))return this.r=Math.min(100,parseInt(_a[1],10))/100,this.g=Math.min(100,parseInt(_a[2],10))/100,this.b=Math.min(100,parseInt(_a[3],10))/100,ga(_a[5]),this;break;case"hsl":case"hsla":if(_a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(Ss)){var Ms=parseFloat(_a[1])/360,Es=parseInt(_a[2],10)/100,Cs=parseInt(_a[3],10)/100;return ga(_a[5]),this.setHSL(Ms,Es,Cs)}break}}else if(ya=/^\#([A-Fa-f0-9]+)$/.exec(ca)){var Ts=ya[1],Bs=Ts.length;if(Bs===3)return this.r=parseInt(Ts.charAt(0)+Ts.charAt(0),16)/255,this.g=parseInt(Ts.charAt(1)+Ts.charAt(1),16)/255,this.b=parseInt(Ts.charAt(2)+Ts.charAt(2),16)/255,this;if(Bs===6)return this.r=parseInt(Ts.charAt(0)+Ts.charAt(1),16)/255,this.g=parseInt(Ts.charAt(2)+Ts.charAt(3),16)/255,this.b=parseInt(Ts.charAt(4)+Ts.charAt(5),16)/255,this}return ca&&ca.length>0?this.setColorName(ca):this},setColorName:function(ca){var ga=_colorKeywords[ca];return ga!==void 0?this.setHex(ga):console.warn("THREE.Color: Unknown color "+ca),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(ca){return this.r=ca.r,this.g=ca.g,this.b=ca.b,this},copyGammaToLinear:function(ca,ga){return ga===void 0&&(ga=2),this.r=Math.pow(ca.r,ga),this.g=Math.pow(ca.g,ga),this.b=Math.pow(ca.b,ga),this},copyLinearToGamma:function(ca,ga){ga===void 0&&(ga=2);var ya=ga>0?1/ga:1;return this.r=Math.pow(ca.r,ya),this.g=Math.pow(ca.g,ya),this.b=Math.pow(ca.b,ya),this},convertGammaToLinear:function(ca){return this.copyGammaToLinear(this,ca),this},convertLinearToGamma:function(ca){return this.copyLinearToGamma(this,ca),this},copySRGBToLinear:function(ca){return this.r=SRGBToLinear(ca.r),this.g=SRGBToLinear(ca.g),this.b=SRGBToLinear(ca.b),this},copyLinearToSRGB:function(ca){return this.r=LinearToSRGB(ca.r),this.g=LinearToSRGB(ca.g),this.b=LinearToSRGB(ca.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(ca){ca===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),ca={h:0,s:0,l:0});var ga=this.r,ya=this.g,_a=this.b,_s=Math.max(ga,ya,_a),Ss=Math.min(ga,ya,_a),Ms,Es,Cs=(Ss+_s)/2;if(Ss===_s)Ms=0,Es=0;else{var Ts=_s-Ss;switch(Es=Cs<=.5?Ts/(_s+Ss):Ts/(2-_s-Ss),_s){case ga:Ms=(ya-_a)/Ts+(ya<_a?6:0);break;case ya:Ms=(_a-ga)/Ts+2;break;case _a:Ms=(ga-ya)/Ts+4;break}Ms/=6}return ca.h=Ms,ca.s=Es,ca.l=Cs,ca},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(ca,ga,ya){return this.getHSL(_hslA),_hslA.h+=ca,_hslA.s+=ga,_hslA.l+=ya,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(ca){return this.r+=ca.r,this.g+=ca.g,this.b+=ca.b,this},addColors:function(ca,ga){return this.r=ca.r+ga.r,this.g=ca.g+ga.g,this.b=ca.b+ga.b,this},addScalar:function(ca){return this.r+=ca,this.g+=ca,this.b+=ca,this},sub:function(ca){return this.r=Math.max(0,this.r-ca.r),this.g=Math.max(0,this.g-ca.g),this.b=Math.max(0,this.b-ca.b),this},multiply:function(ca){return this.r*=ca.r,this.g*=ca.g,this.b*=ca.b,this},multiplyScalar:function(ca){return this.r*=ca,this.g*=ca,this.b*=ca,this},lerp:function(ca,ga){return this.r+=(ca.r-this.r)*ga,this.g+=(ca.g-this.g)*ga,this.b+=(ca.b-this.b)*ga,this},lerpHSL:function(ca,ga){this.getHSL(_hslA),ca.getHSL(_hslB);var ya=MathUtils.lerp(_hslA.h,_hslB.h,ga),_a=MathUtils.lerp(_hslA.s,_hslB.s,ga),_s=MathUtils.lerp(_hslA.l,_hslB.l,ga);return this.setHSL(ya,_a,_s),this},equals:function(ca){return ca.r===this.r&&ca.g===this.g&&ca.b===this.b},fromArray:function(ca,ga){return ga===void 0&&(ga=0),this.r=ca[ga],this.g=ca[ga+1],this.b=ca[ga+2],this},toArray:function(ca,ga){return ca===void 0&&(ca=[]),ga===void 0&&(ga=0),ca[ga]=this.r,ca[ga+1]=this.g,ca[ga+2]=this.b,ca},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(ca,ga,ya,_a,_s,Ss){this.a=ca,this.b=ga,this.c=ya,this.normal=_a&&_a.isVector3?_a:new Vector3,this.vertexNormals=Array.isArray(_a)?_a:[],this.color=_s&&_s.isColor?_s:new Color,this.vertexColors=Array.isArray(_s)?_s:[],this.materialIndex=Ss!==void 0?Ss:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.a=ca.a,this.b=ca.b,this.c=ca.c,this.normal.copy(ca.normal),this.color.copy(ca.color),this.materialIndex=ca.materialIndex;for(var ga=0,ya=ca.vertexNormals.length;ga<ya;ga++)this.vertexNormals[ga]=ca.vertexNormals[ga].clone();for(var ga=0,ya=ca.vertexColors.length;ga<ya;ga++)this.vertexColors[ga]=ca.vertexColors[ga].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(ca){if(ca!==void 0)for(var ga in ca){var ya=ca[ga];if(ya===void 0){console.warn("THREE.Material: '"+ga+"' parameter is undefined.");continue}if(ga==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ya===FlatShading;continue}var _a=this[ga];if(_a===void 0){console.warn("THREE."+this.type+": '"+ga+"' is not a property of this material.");continue}_a&&_a.isColor?_a.set(ya):_a&&_a.isVector3&&ya&&ya.isVector3?_a.copy(ya):this[ga]=ya}},toJSON:function(ca){var ga=ca===void 0||typeof ca=="string";ga&&(ca={textures:{},images:{}});var ya={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};ya.uuid=this.uuid,ya.type=this.type,this.name!==""&&(ya.name=this.name),this.color&&this.color.isColor&&(ya.color=this.color.getHex()),this.roughness!==void 0&&(ya.roughness=this.roughness),this.metalness!==void 0&&(ya.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(ya.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(ya.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(ya.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ya.specular=this.specular.getHex()),this.shininess!==void 0&&(ya.shininess=this.shininess),this.clearcoat!==void 0&&(ya.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ya.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ya.clearcoatMap=this.clearcoatMap.toJSON(ca).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ya.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(ca).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ya.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(ca).uuid,ya.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(ya.map=this.map.toJSON(ca).uuid),this.matcap&&this.matcap.isTexture&&(ya.matcap=this.matcap.toJSON(ca).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ya.alphaMap=this.alphaMap.toJSON(ca).uuid),this.lightMap&&this.lightMap.isTexture&&(ya.lightMap=this.lightMap.toJSON(ca).uuid),this.aoMap&&this.aoMap.isTexture&&(ya.aoMap=this.aoMap.toJSON(ca).uuid,ya.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ya.bumpMap=this.bumpMap.toJSON(ca).uuid,ya.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ya.normalMap=this.normalMap.toJSON(ca).uuid,ya.normalMapType=this.normalMapType,ya.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ya.displacementMap=this.displacementMap.toJSON(ca).uuid,ya.displacementScale=this.displacementScale,ya.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ya.roughnessMap=this.roughnessMap.toJSON(ca).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ya.metalnessMap=this.metalnessMap.toJSON(ca).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ya.emissiveMap=this.emissiveMap.toJSON(ca).uuid),this.specularMap&&this.specularMap.isTexture&&(ya.specularMap=this.specularMap.toJSON(ca).uuid),this.envMap&&this.envMap.isTexture&&(ya.envMap=this.envMap.toJSON(ca).uuid,ya.reflectivity=this.reflectivity,ya.refractionRatio=this.refractionRatio,this.combine!==void 0&&(ya.combine=this.combine),this.envMapIntensity!==void 0&&(ya.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(ya.gradientMap=this.gradientMap.toJSON(ca).uuid),this.size!==void 0&&(ya.size=this.size),this.sizeAttenuation!==void 0&&(ya.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(ya.blending=this.blending),this.flatShading===!0&&(ya.flatShading=this.flatShading),this.side!==FrontSide&&(ya.side=this.side),this.vertexColors&&(ya.vertexColors=!0),this.opacity<1&&(ya.opacity=this.opacity),this.transparent===!0&&(ya.transparent=this.transparent),ya.depthFunc=this.depthFunc,ya.depthTest=this.depthTest,ya.depthWrite=this.depthWrite,ya.stencilWrite=this.stencilWrite,ya.stencilWriteMask=this.stencilWriteMask,ya.stencilFunc=this.stencilFunc,ya.stencilRef=this.stencilRef,ya.stencilFuncMask=this.stencilFuncMask,ya.stencilFail=this.stencilFail,ya.stencilZFail=this.stencilZFail,ya.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(ya.rotation=this.rotation),this.polygonOffset===!0&&(ya.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ya.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ya.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(ya.linewidth=this.linewidth),this.dashSize!==void 0&&(ya.dashSize=this.dashSize),this.gapSize!==void 0&&(ya.gapSize=this.gapSize),this.scale!==void 0&&(ya.scale=this.scale),this.dithering===!0&&(ya.dithering=!0),this.alphaTest>0&&(ya.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(ya.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(ya.wireframe=this.wireframe),this.wireframeLinewidth>1&&(ya.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ya.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ya.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(ya.morphTargets=!0),this.morphNormals===!0&&(ya.morphNormals=!0),this.skinning===!0&&(ya.skinning=!0),this.visible===!1&&(ya.visible=!1),this.toneMapped===!1&&(ya.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(ya.userData=this.userData);function _a(Ms){var Es=[];for(var Cs in Ms){var Ts=Ms[Cs];delete Ts.metadata,Es.push(Ts)}return Es}if(ga){var _s=_a(ca.textures),Ss=_a(ca.images);_s.length>0&&(ya.textures=_s),Ss.length>0&&(ya.images=Ss)}return ya},clone:function(){return new this.constructor().copy(this)},copy:function(ca){this.name=ca.name,this.fog=ca.fog,this.blending=ca.blending,this.side=ca.side,this.flatShading=ca.flatShading,this.vertexColors=ca.vertexColors,this.opacity=ca.opacity,this.transparent=ca.transparent,this.blendSrc=ca.blendSrc,this.blendDst=ca.blendDst,this.blendEquation=ca.blendEquation,this.blendSrcAlpha=ca.blendSrcAlpha,this.blendDstAlpha=ca.blendDstAlpha,this.blendEquationAlpha=ca.blendEquationAlpha,this.depthFunc=ca.depthFunc,this.depthTest=ca.depthTest,this.depthWrite=ca.depthWrite,this.stencilWriteMask=ca.stencilWriteMask,this.stencilFunc=ca.stencilFunc,this.stencilRef=ca.stencilRef,this.stencilFuncMask=ca.stencilFuncMask,this.stencilFail=ca.stencilFail,this.stencilZFail=ca.stencilZFail,this.stencilZPass=ca.stencilZPass,this.stencilWrite=ca.stencilWrite;var ga=ca.clippingPlanes,ya=null;if(ga!==null){var _a=ga.length;ya=new Array(_a);for(var _s=0;_s!==_a;++_s)ya[_s]=ga[_s].clone()}return this.clippingPlanes=ya,this.clipIntersection=ca.clipIntersection,this.clipShadows=ca.clipShadows,this.shadowSide=ca.shadowSide,this.colorWrite=ca.colorWrite,this.precision=ca.precision,this.polygonOffset=ca.polygonOffset,this.polygonOffsetFactor=ca.polygonOffsetFactor,this.polygonOffsetUnits=ca.polygonOffsetUnits,this.dithering=ca.dithering,this.alphaTest=ca.alphaTest,this.premultipliedAlpha=ca.premultipliedAlpha,this.visible=ca.visible,this.toneMapped=ca.toneMapped,this.userData=JSON.parse(JSON.stringify(ca.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});function MeshBasicMaterial(ca){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(ca)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(ca,ga,ya){if(Array.isArray(ca))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=ca,this.itemSize=ga,this.count=ca!==void 0?ca.length/ga:0,this.normalized=ya===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.name=ca.name,this.array=new ca.array.constructor(ca.array),this.itemSize=ca.itemSize,this.count=ca.count,this.normalized=ca.normalized,this.usage=ca.usage,this},copyAt:function(ca,ga,ya){ca*=this.itemSize,ya*=ga.itemSize;for(var _a=0,_s=this.itemSize;_a<_s;_a++)this.array[ca+_a]=ga.array[ya+_a];return this},copyArray:function(ca){return this.array.set(ca),this},copyColorsArray:function(ca){for(var ga=this.array,ya=0,_a=0,_s=ca.length;_a<_s;_a++){var Ss=ca[_a];Ss===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",_a),Ss=new Color),ga[ya++]=Ss.r,ga[ya++]=Ss.g,ga[ya++]=Ss.b}return this},copyVector2sArray:function(ca){for(var ga=this.array,ya=0,_a=0,_s=ca.length;_a<_s;_a++){var Ss=ca[_a];Ss===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",_a),Ss=new Vector2),ga[ya++]=Ss.x,ga[ya++]=Ss.y}return this},copyVector3sArray:function(ca){for(var ga=this.array,ya=0,_a=0,_s=ca.length;_a<_s;_a++){var Ss=ca[_a];Ss===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",_a),Ss=new Vector3),ga[ya++]=Ss.x,ga[ya++]=Ss.y,ga[ya++]=Ss.z}return this},copyVector4sArray:function(ca){for(var ga=this.array,ya=0,_a=0,_s=ca.length;_a<_s;_a++){var Ss=ca[_a];Ss===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",_a),Ss=new Vector4),ga[ya++]=Ss.x,ga[ya++]=Ss.y,ga[ya++]=Ss.z,ga[ya++]=Ss.w}return this},applyMatrix3:function(ca){for(var ga=0,ya=this.count;ga<ya;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix3(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(ca){for(var ga=0,ya=this.count;ga<ya;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyMatrix4(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(ca){for(var ga=0,ya=this.count;ga<ya;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.applyNormalMatrix(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(ca){for(var ga=0,ya=this.count;ga<ya;ga++)_vector$3.x=this.getX(ga),_vector$3.y=this.getY(ga),_vector$3.z=this.getZ(ga),_vector$3.transformDirection(ca),this.setXYZ(ga,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},getX:function(ca){return this.array[ca*this.itemSize]},setX:function(ca,ga){return this.array[ca*this.itemSize]=ga,this},getY:function(ca){return this.array[ca*this.itemSize+1]},setY:function(ca,ga){return this.array[ca*this.itemSize+1]=ga,this},getZ:function(ca){return this.array[ca*this.itemSize+2]},setZ:function(ca,ga){return this.array[ca*this.itemSize+2]=ga,this},getW:function(ca){return this.array[ca*this.itemSize+3]},setW:function(ca,ga){return this.array[ca*this.itemSize+3]=ga,this},setXY:function(ca,ga,ya){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=ya,this},setXYZ:function(ca,ga,ya,_a){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=ya,this.array[ca+2]=_a,this},setXYZW:function(ca,ga,ya,_a,_s){return ca*=this.itemSize,this.array[ca+0]=ga,this.array[ca+1]=ya,this.array[ca+2]=_a,this.array[ca+3]=_s,this},onUpload:function(ca){return this.onUploadCallback=ca,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Int8Array(ca),ga,ya)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Uint8Array(ca),ga,ya)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Uint8ClampedArray(ca),ga,ya)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Int16Array(ca),ga,ya)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Uint16Array(ca),ga,ya)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Int32Array(ca),ga,ya)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Uint32Array(ca),ga,ya)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Float32Array(ca),ga,ya)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(ca,ga,ya){BufferAttribute.call(this,new Float64Array(ca),ga,ya)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(ca){for(var ga,ya=[],_a=void 0,_s=ca.faces,Ss=0;Ss<_s.length;Ss++){var Ms=_s[Ss];Ms.materialIndex!==_a&&(_a=Ms.materialIndex,ga!==void 0&&(ga.count=Ss*3-ga.start,ya.push(ga)),ga={start:Ss*3,materialIndex:_a})}ga!==void 0&&(ga.count=Ss*3-ga.start,ya.push(ga)),this.groups=ya},fromGeometry:function(ca){var ga=ca.faces,ya=ca.vertices,_a=ca.faceVertexUvs,_s=_a[0]&&_a[0].length>0,Ss=_a[1]&&_a[1].length>0,Ms=ca.morphTargets,Es=Ms.length,Cs;if(Es>0){Cs=[];for(var Ts=0;Ts<Es;Ts++)Cs[Ts]={name:Ms[Ts].name,data:[]};this.morphTargets.position=Cs}var Bs=ca.morphNormals,Is=Bs.length,Ps;if(Is>0){Ps=[];for(var Ts=0;Ts<Is;Ts++)Ps[Ts]={name:Bs[Ts].name,data:[]};this.morphTargets.normal=Ps}var Rs=ca.skinIndices,ks=ca.skinWeights,$s=Rs.length===ya.length,Os=ks.length===ya.length;ya.length>0&&ga.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Ts=0;Ts<ga.length;Ts++){var Ls=ga[Ts];this.vertices.push(ya[Ls.a],ya[Ls.b],ya[Ls.c]);var Ds=Ls.vertexNormals;if(Ds.length===3)this.normals.push(Ds[0],Ds[1],Ds[2]);else{var Fs=Ls.normal;this.normals.push(Fs,Fs,Fs)}var Ns=Ls.vertexColors;if(Ns.length===3)this.colors.push(Ns[0],Ns[1],Ns[2]);else{var Vs=Ls.color;this.colors.push(Vs,Vs,Vs)}if(_s===!0){var Gs=_a[0][Ts];Gs!==void 0?this.uvs.push(Gs[0],Gs[1],Gs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Ts),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(Ss===!0){var Gs=_a[1][Ts];Gs!==void 0?this.uvs2.push(Gs[0],Gs[1],Gs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Ts),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var Us=0;Us<Es;Us++){var zs=Ms[Us].vertices;Cs[Us].data.push(zs[Ls.a],zs[Ls.b],zs[Ls.c])}for(var Us=0;Us<Is;Us++){var Hs=Bs[Us].vertexNormals[Ts];Ps[Us].data.push(Hs.a,Hs.b,Hs.c)}$s&&this.skinIndices.push(Rs[Ls.a],Rs[Ls.b],Rs[Ls.c]),Os&&this.skinWeights.push(ks[Ls.a],ks[Ls.b],ks[Ls.c])}return this.computeGroups(ca),this.verticesNeedUpdate=ca.verticesNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this}});function arrayMax(ca){if(ca.length===0)return-1/0;let ga=ca[0];for(let ya=1,_a=ca.length;ya<_a;++ya)ca[ya]>ga&&(ga=ca[ya]);return ga}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(ca){Array.isArray(ca)?this.index=new(arrayMax(ca)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(ca,1):this.index=ca},getAttribute:function(ca){return this.attributes[ca]},setAttribute:function(ca,ga){return this.attributes[ca]=ga,this},deleteAttribute:function(ca){return delete this.attributes[ca],this},addGroup:function(ca,ga,ya){this.groups.push({start:ca,count:ga,materialIndex:ya!==void 0?ya:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(ca,ga){this.drawRange.start=ca,this.drawRange.count=ga},applyMatrix4:function(ca){var ga=this.attributes.position;ga!==void 0&&(ga.applyMatrix4(ca),ga.needsUpdate=!0);var ya=this.attributes.normal;if(ya!==void 0){var _a=new Matrix3().getNormalMatrix(ca);ya.applyNormalMatrix(_a),ya.needsUpdate=!0}var _s=this.attributes.tangent;return _s!==void 0&&(_s.transformDirection(ca),_s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(ca){return _m1$2.makeRotationX(ca),this.applyMatrix4(_m1$2),this},rotateY:function(ca){return _m1$2.makeRotationY(ca),this.applyMatrix4(_m1$2),this},rotateZ:function(ca){return _m1$2.makeRotationZ(ca),this.applyMatrix4(_m1$2),this},translate:function(ca,ga,ya){return _m1$2.makeTranslation(ca,ga,ya),this.applyMatrix4(_m1$2),this},scale:function(ca,ga,ya){return _m1$2.makeScale(ca,ga,ya),this.applyMatrix4(_m1$2),this},lookAt:function(ca){return _obj.lookAt(ca),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(ca){var ga=ca.geometry;if(ca.isPoints||ca.isLine){var ya=new Float32BufferAttribute(ga.vertices.length*3,3),_a=new Float32BufferAttribute(ga.colors.length*3,3);if(this.setAttribute("position",ya.copyVector3sArray(ga.vertices)),this.setAttribute("color",_a.copyColorsArray(ga.colors)),ga.lineDistances&&ga.lineDistances.length===ga.vertices.length){var _s=new Float32BufferAttribute(ga.lineDistances.length,1);this.setAttribute("lineDistance",_s.copyArray(ga.lineDistances))}ga.boundingSphere!==null&&(this.boundingSphere=ga.boundingSphere.clone()),ga.boundingBox!==null&&(this.boundingBox=ga.boundingBox.clone())}else ca.isMesh&&ga&&ga.isGeometry&&this.fromGeometry(ga);return this},setFromPoints:function(ca){for(var ga=[],ya=0,_a=ca.length;ya<_a;ya++){var _s=ca[ya];ga.push(_s.x,_s.y,_s.z||0)}return this.setAttribute("position",new Float32BufferAttribute(ga,3)),this},updateFromObject:function(ca){var ga=ca.geometry;if(ca.isMesh){var ya=ga.__directGeometry;if(ga.elementsNeedUpdate===!0&&(ya=void 0,ga.elementsNeedUpdate=!1),ya===void 0)return this.fromGeometry(ga);ya.verticesNeedUpdate=ga.verticesNeedUpdate,ya.normalsNeedUpdate=ga.normalsNeedUpdate,ya.colorsNeedUpdate=ga.colorsNeedUpdate,ya.uvsNeedUpdate=ga.uvsNeedUpdate,ya.groupsNeedUpdate=ga.groupsNeedUpdate,ga.verticesNeedUpdate=!1,ga.normalsNeedUpdate=!1,ga.colorsNeedUpdate=!1,ga.uvsNeedUpdate=!1,ga.groupsNeedUpdate=!1,ga=ya}var _a;return ga.verticesNeedUpdate===!0&&(_a=this.attributes.position,_a!==void 0&&(_a.copyVector3sArray(ga.vertices),_a.needsUpdate=!0),ga.verticesNeedUpdate=!1),ga.normalsNeedUpdate===!0&&(_a=this.attributes.normal,_a!==void 0&&(_a.copyVector3sArray(ga.normals),_a.needsUpdate=!0),ga.normalsNeedUpdate=!1),ga.colorsNeedUpdate===!0&&(_a=this.attributes.color,_a!==void 0&&(_a.copyColorsArray(ga.colors),_a.needsUpdate=!0),ga.colorsNeedUpdate=!1),ga.uvsNeedUpdate&&(_a=this.attributes.uv,_a!==void 0&&(_a.copyVector2sArray(ga.uvs),_a.needsUpdate=!0),ga.uvsNeedUpdate=!1),ga.lineDistancesNeedUpdate&&(_a=this.attributes.lineDistance,_a!==void 0&&(_a.copyArray(ga.lineDistances),_a.needsUpdate=!0),ga.lineDistancesNeedUpdate=!1),ga.groupsNeedUpdate&&(ga.computeGroups(ca.geometry),this.groups=ga.groups,ga.groupsNeedUpdate=!1),this},fromGeometry:function(ca){return ca.__directGeometry=new DirectGeometry().fromGeometry(ca),this.fromDirectGeometry(ca.__directGeometry)},fromDirectGeometry:function(ca){var ga=new Float32Array(ca.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(ga,3).copyVector3sArray(ca.vertices)),ca.normals.length>0){var ya=new Float32Array(ca.normals.length*3);this.setAttribute("normal",new BufferAttribute(ya,3).copyVector3sArray(ca.normals))}if(ca.colors.length>0){var _a=new Float32Array(ca.colors.length*3);this.setAttribute("color",new BufferAttribute(_a,3).copyColorsArray(ca.colors))}if(ca.uvs.length>0){var _s=new Float32Array(ca.uvs.length*2);this.setAttribute("uv",new BufferAttribute(_s,2).copyVector2sArray(ca.uvs))}if(ca.uvs2.length>0){var Ss=new Float32Array(ca.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(Ss,2).copyVector2sArray(ca.uvs2))}this.groups=ca.groups;for(var Ms in ca.morphTargets){for(var Es=[],Cs=ca.morphTargets[Ms],Ts=0,Bs=Cs.length;Ts<Bs;Ts++){var Is=Cs[Ts],Ps=new Float32BufferAttribute(Is.data.length*3,3);Ps.name=Is.name,Es.push(Ps.copyVector3sArray(Is.data))}this.morphAttributes[Ms]=Es}if(ca.skinIndices.length>0){var Rs=new Float32BufferAttribute(ca.skinIndices.length*4,4);this.setAttribute("skinIndex",Rs.copyVector4sArray(ca.skinIndices))}if(ca.skinWeights.length>0){var ks=new Float32BufferAttribute(ca.skinWeights.length*4,4);this.setAttribute("skinWeight",ks.copyVector4sArray(ca.skinWeights))}return ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca!==void 0){if(this.boundingBox.setFromBufferAttribute(ca),ga)for(var ya=0,_a=ga.length;ya<_a;ya++){var _s=ga[ya];_box$2.setFromBufferAttribute(_s),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var ca=this.attributes.position,ga=this.morphAttributes.position;if(ca){var ya=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(ca),ga)for(var _a=0,_s=ga.length;_a<_s;_a++){var Ss=ga[_a];_boxMorphTargets.setFromBufferAttribute(Ss),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(ya);for(var Ms=0,_a=0,_s=ca.count;_a<_s;_a++)_vector$4.fromBufferAttribute(ca,_a),Ms=Math.max(Ms,ya.distanceToSquared(_vector$4));if(ga)for(var _a=0,_s=ga.length;_a<_s;_a++)for(var Ss=ga[_a],Es=this.morphTargetsRelative,Cs=0,Ts=Ss.count;Cs<Ts;Cs++)_vector$4.fromBufferAttribute(Ss,Cs),Es&&(_offset.fromBufferAttribute(ca,Cs),_vector$4.add(_offset)),Ms=Math.max(Ms,ya.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(Ms),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var ca=this.index,ga=this.attributes;if(ga.position){var ya=ga.position.array;if(ga.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(ya.length),3));else for(var _a=ga.normal.array,_s=0,Ss=_a.length;_s<Ss;_s++)_a[_s]=0;var Ms=ga.normal.array,Es,Cs,Ts,Bs=new Vector3,Is=new Vector3,Ps=new Vector3,Rs=new Vector3,ks=new Vector3;if(ca)for(var $s=ca.array,_s=0,Ss=ca.count;_s<Ss;_s+=3)Es=$s[_s+0]*3,Cs=$s[_s+1]*3,Ts=$s[_s+2]*3,Bs.fromArray(ya,Es),Is.fromArray(ya,Cs),Ps.fromArray(ya,Ts),Rs.subVectors(Ps,Is),ks.subVectors(Bs,Is),Rs.cross(ks),Ms[Es]+=Rs.x,Ms[Es+1]+=Rs.y,Ms[Es+2]+=Rs.z,Ms[Cs]+=Rs.x,Ms[Cs+1]+=Rs.y,Ms[Cs+2]+=Rs.z,Ms[Ts]+=Rs.x,Ms[Ts+1]+=Rs.y,Ms[Ts+2]+=Rs.z;else for(var _s=0,Ss=ya.length;_s<Ss;_s+=9)Bs.fromArray(ya,_s),Is.fromArray(ya,_s+3),Ps.fromArray(ya,_s+6),Rs.subVectors(Ps,Is),ks.subVectors(Bs,Is),Rs.cross(ks),Ms[_s]=Rs.x,Ms[_s+1]=Rs.y,Ms[_s+2]=Rs.z,Ms[_s+3]=Rs.x,Ms[_s+4]=Rs.y,Ms[_s+5]=Rs.z,Ms[_s+6]=Rs.x,Ms[_s+7]=Rs.y,Ms[_s+8]=Rs.z;this.normalizeNormals(),ga.normal.needsUpdate=!0}},merge:function(ca,ga){if(!(ca&&ca.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",ca);return}ga===void 0&&(ga=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var ya=this.attributes;for(var _a in ya)if(ca.attributes[_a]!==void 0)for(var _s=ya[_a],Ss=_s.array,Ms=ca.attributes[_a],Es=Ms.array,Cs=Ms.itemSize*ga,Ts=Math.min(Es.length,Ss.length-Cs),Bs=0,Is=Cs;Bs<Ts;Bs++,Is++)Ss[Is]=Es[Bs];return this},normalizeNormals:function(){for(var ca=this.attributes.normal,ga=0,ya=ca.count;ga<ya;ga++)_vector$4.x=ca.getX(ga),_vector$4.y=ca.getY(ga),_vector$4.z=ca.getZ(ga),_vector$4.normalize(),ca.setXYZ(ga,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function ca($s,Os){for(var Ls=$s.array,Ds=$s.itemSize,Fs=$s.normalized,Ns=new Ls.constructor(Os.length*Ds),Vs=0,Gs=0,Us=0,zs=Os.length;Us<zs;Us++){Vs=Os[Us]*Ds;for(var Hs=0;Hs<Ds;Hs++)Ns[Gs++]=Ls[Vs++]}return new BufferAttribute(Ns,Ds,Fs)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var ga=new BufferGeometry,ya=this.index.array,_a=this.attributes;for(var _s in _a){var Ss=_a[_s],Ms=ca(Ss,ya);ga.setAttribute(_s,Ms)}var Es=this.morphAttributes;for(_s in Es){for(var Cs=[],Ts=Es[_s],Bs=0,Is=Ts.length;Bs<Is;Bs++){var Ss=Ts[Bs],Ms=ca(Ss,ya);Cs.push(Ms)}ga.morphAttributes[_s]=Cs}ga.morphTargetsRelative=this.morphTargetsRelative;for(var Ps=this.groups,Bs=0,Rs=Ps.length;Bs<Rs;Bs++){var ks=Ps[Bs];ga.addGroup(ks.start,ks.count,ks.materialIndex)}return ga},toJSON:function(){var ca={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),Object.keys(this.userData).length>0&&(ca.userData=this.userData),this.parameters!==void 0){var ga=this.parameters;for(var ya in ga)ga[ya]!==void 0&&(ca[ya]=ga[ya]);return ca}ca.data={attributes:{}};var _a=this.index;_a!==null&&(ca.data.index={type:_a.array.constructor.name,array:Array.prototype.slice.call(_a.array)});var _s=this.attributes;for(var ya in _s){var Ss=_s[ya],Ms=Ss.toJSON();Ss.name!==""&&(Ms.name=Ss.name),ca.data.attributes[ya]=Ms}var Es={},Cs=!1;for(var ya in this.morphAttributes){for(var Ts=this.morphAttributes[ya],Bs=[],Is=0,Ps=Ts.length;Is<Ps;Is++){var Ss=Ts[Is],Ms=Ss.toJSON();Ss.name!==""&&(Ms.name=Ss.name),Bs.push(Ms)}Bs.length>0&&(Es[ya]=Bs,Cs=!0)}Cs&&(ca.data.morphAttributes=Es,ca.data.morphTargetsRelative=this.morphTargetsRelative);var Rs=this.groups;Rs.length>0&&(ca.data.groups=JSON.parse(JSON.stringify(Rs)));var ks=this.boundingSphere;return ks!==null&&(ca.data.boundingSphere={center:ks.center.toArray(),radius:ks.radius}),ca},clone:function(){return new BufferGeometry().copy(this)},copy:function(ca){var ga,ya,_a;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var _s=ca.index;_s!==null&&this.setIndex(_s.clone());var Ss=ca.attributes;for(ga in Ss){var Ms=Ss[ga];this.setAttribute(ga,Ms.clone())}var Es=ca.morphAttributes;for(ga in Es){var Cs=[],Ts=Es[ga];for(ya=0,_a=Ts.length;ya<_a;ya++)Cs.push(Ts[ya].clone());this.morphAttributes[ga]=Cs}this.morphTargetsRelative=ca.morphTargetsRelative;var Bs=ca.groups;for(ya=0,_a=Bs.length;ya<_a;ya++){var Is=Bs[ya];this.addGroup(Is.start,Is.count,Is.materialIndex)}var Ps=ca.boundingBox;Ps!==null&&(this.boundingBox=Ps.clone());var Rs=ca.boundingSphere;return Rs!==null&&(this.boundingSphere=Rs.clone()),this.drawRange.start=ca.drawRange.start,this.drawRange.count=ca.drawRange.count,this.userData=ca.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(ca,ga){Object3D.call(this),this.type="Mesh",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=ca.morphTargetInfluences.slice()),ca.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},ca.morphTargetDictionary)),this},updateMorphTargets:function(){var ca=this.geometry,ga,ya,_a;if(ca.isBufferGeometry){var _s=ca.morphAttributes,Ss=Object.keys(_s);if(Ss.length>0){var Ms=_s[Ss[0]];if(Ms!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,ya=Ms.length;ga<ya;ga++)_a=Ms[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[_a]=ga}}else{var Es=ca.morphTargets;Es!==void 0&&Es.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(ca,ga){var ya=this.geometry,_a=this.material,_s=this.matrixWorld;if(_a!==void 0&&(ya.boundingSphere===null&&ya.computeBoundingSphere(),_sphere.copy(ya.boundingSphere),_sphere.applyMatrix4(_s),ca.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(_s),_ray.copy(ca.ray).applyMatrix4(_inverseMatrix),!(ya.boundingBox!==null&&_ray.intersectsBox(ya.boundingBox)===!1)))){var Ss;if(ya.isBufferGeometry){var Ms,Es,Cs,Ts=ya.index,Bs=ya.attributes.position,Is=ya.morphAttributes.position,Ps=ya.morphTargetsRelative,Rs=ya.attributes.uv,ks=ya.attributes.uv2,$s=ya.groups,Os=ya.drawRange,Ls,Ds,Fs,Ns,Vs,Gs,Us,zs;if(Ts!==null)if(Array.isArray(_a))for(Ls=0,Fs=$s.length;Ls<Fs;Ls++)for(Vs=$s[Ls],Gs=_a[Vs.materialIndex],Us=Math.max(Vs.start,Os.start),zs=Math.min(Vs.start+Vs.count,Os.start+Os.count),Ds=Us,Ns=zs;Ds<Ns;Ds+=3)Ms=Ts.getX(Ds),Es=Ts.getX(Ds+1),Cs=Ts.getX(Ds+2),Ss=checkBufferGeometryIntersection(this,Gs,ca,_ray,Bs,Is,Ps,Rs,ks,Ms,Es,Cs),Ss&&(Ss.faceIndex=Math.floor(Ds/3),Ss.face.materialIndex=Vs.materialIndex,ga.push(Ss));else for(Us=Math.max(0,Os.start),zs=Math.min(Ts.count,Os.start+Os.count),Ls=Us,Fs=zs;Ls<Fs;Ls+=3)Ms=Ts.getX(Ls),Es=Ts.getX(Ls+1),Cs=Ts.getX(Ls+2),Ss=checkBufferGeometryIntersection(this,_a,ca,_ray,Bs,Is,Ps,Rs,ks,Ms,Es,Cs),Ss&&(Ss.faceIndex=Math.floor(Ls/3),ga.push(Ss));else if(Bs!==void 0)if(Array.isArray(_a))for(Ls=0,Fs=$s.length;Ls<Fs;Ls++)for(Vs=$s[Ls],Gs=_a[Vs.materialIndex],Us=Math.max(Vs.start,Os.start),zs=Math.min(Vs.start+Vs.count,Os.start+Os.count),Ds=Us,Ns=zs;Ds<Ns;Ds+=3)Ms=Ds,Es=Ds+1,Cs=Ds+2,Ss=checkBufferGeometryIntersection(this,Gs,ca,_ray,Bs,Is,Ps,Rs,ks,Ms,Es,Cs),Ss&&(Ss.faceIndex=Math.floor(Ds/3),Ss.face.materialIndex=Vs.materialIndex,ga.push(Ss));else for(Us=Math.max(0,Os.start),zs=Math.min(Bs.count,Os.start+Os.count),Ls=Us,Fs=zs;Ls<Fs;Ls+=3)Ms=Ls,Es=Ls+1,Cs=Ls+2,Ss=checkBufferGeometryIntersection(this,_a,ca,_ray,Bs,Is,Ps,Rs,ks,Ms,Es,Cs),Ss&&(Ss.faceIndex=Math.floor(Ls/3),ga.push(Ss))}else if(ya.isGeometry){var Hs,Qs,js,Zs=Array.isArray(_a),Ks=ya.vertices,Ys=ya.faces,qs,eu=ya.faceVertexUvs[0];eu.length>0&&(qs=eu);for(var Js=0,Xs=Ys.length;Js<Xs;Js++){var ru=Ys[Js],su=Zs?_a[ru.materialIndex]:_a;if(su!==void 0&&(Hs=Ks[ru.a],Qs=Ks[ru.b],js=Ks[ru.c],Ss=checkIntersection(this,su,ca,_ray,Hs,Qs,js,_intersectionPoint),Ss)){if(qs&&qs[Js]){var lu=qs[Js];_uvA.copy(lu[0]),_uvB.copy(lu[1]),_uvC.copy(lu[2]),Ss.uv=Triangle.getUV(_intersectionPoint,Hs,Qs,js,_uvA,_uvB,_uvC,new Vector2)}Ss.face=ru,Ss.faceIndex=Js,ga.push(Ss)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(ca,ga,ya,_a,_s,Ss,Ms,Es){var Cs;if(ga.side===BackSide?Cs=_a.intersectTriangle(Ms,Ss,_s,!0,Es):Cs=_a.intersectTriangle(_s,Ss,Ms,ga.side!==DoubleSide,Es),Cs===null)return null;_intersectionPointWorld.copy(Es),_intersectionPointWorld.applyMatrix4(ca.matrixWorld);var Ts=ya.ray.origin.distanceTo(_intersectionPointWorld);return Ts<ya.near||Ts>ya.far?null:{distance:Ts,point:_intersectionPointWorld.clone(),object:ca}}function checkBufferGeometryIntersection(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is){_vA.fromBufferAttribute(_s,Ts),_vB.fromBufferAttribute(_s,Bs),_vC.fromBufferAttribute(_s,Is);var Ps=ca.morphTargetInfluences;if(ga.morphTargets&&Ss&&Ps){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var Rs=0,ks=Ss.length;Rs<ks;Rs++){var $s=Ps[Rs],Os=Ss[Rs];$s!==0&&(_tempA.fromBufferAttribute(Os,Ts),_tempB.fromBufferAttribute(Os,Bs),_tempC.fromBufferAttribute(Os,Is),Ms?(_morphA.addScaledVector(_tempA,$s),_morphB.addScaledVector(_tempB,$s),_morphC.addScaledVector(_tempC,$s)):(_morphA.addScaledVector(_tempA.sub(_vA),$s),_morphB.addScaledVector(_tempB.sub(_vB),$s),_morphC.addScaledVector(_tempC.sub(_vC),$s)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}ca.isSkinnedMesh&&(ca.boneTransform(Ts,_vA),ca.boneTransform(Bs,_vB),ca.boneTransform(Is,_vC));var Ls=checkIntersection(ca,ga,ya,_a,_vA,_vB,_vC,_intersectionPoint);if(Ls){Es&&(_uvA.fromBufferAttribute(Es,Ts),_uvB.fromBufferAttribute(Es,Bs),_uvC.fromBufferAttribute(Es,Is),Ls.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),Cs&&(_uvA.fromBufferAttribute(Cs,Ts),_uvB.fromBufferAttribute(Cs,Bs),_uvC.fromBufferAttribute(Cs,Is),Ls.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var Ds=new Face3(Ts,Bs,Is);Triangle.getNormal(_vA,_vB,_vC,Ds.normal),Ls.face=Ds}return Ls}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(ca){for(var ga=new Matrix3().getNormalMatrix(ca),ya=0,_a=this.vertices.length;ya<_a;ya++){var _s=this.vertices[ya];_s.applyMatrix4(ca)}for(var ya=0,_a=this.faces.length;ya<_a;ya++){var Ss=this.faces[ya];Ss.normal.applyMatrix3(ga).normalize();for(var Ms=0,Es=Ss.vertexNormals.length;Ms<Es;Ms++)Ss.vertexNormals[Ms].applyMatrix3(ga).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(ca){return _m1$3.makeRotationX(ca),this.applyMatrix4(_m1$3),this},rotateY:function(ca){return _m1$3.makeRotationY(ca),this.applyMatrix4(_m1$3),this},rotateZ:function(ca){return _m1$3.makeRotationZ(ca),this.applyMatrix4(_m1$3),this},translate:function(ca,ga,ya){return _m1$3.makeTranslation(ca,ga,ya),this.applyMatrix4(_m1$3),this},scale:function(ca,ga,ya){return _m1$3.makeScale(ca,ga,ya),this.applyMatrix4(_m1$3),this},lookAt:function(ca){return _obj$1.lookAt(ca),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(ca){var ga=this,ya=ca.index!==null?ca.index.array:void 0,_a=ca.attributes;if(_a.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var _s=_a.position.array,Ss=_a.normal!==void 0?_a.normal.array:void 0,Ms=_a.color!==void 0?_a.color.array:void 0,Es=_a.uv!==void 0?_a.uv.array:void 0,Cs=_a.uv2!==void 0?_a.uv2.array:void 0;Cs!==void 0&&(this.faceVertexUvs[1]=[]);for(var Ts=0;Ts<_s.length;Ts+=3)ga.vertices.push(new Vector3().fromArray(_s,Ts)),Ms!==void 0&&ga.colors.push(new Color().fromArray(Ms,Ts));function Bs(Ls,Ds,Fs,Ns){var Vs=Ms===void 0?[]:[ga.colors[Ls].clone(),ga.colors[Ds].clone(),ga.colors[Fs].clone()],Gs=Ss===void 0?[]:[new Vector3().fromArray(Ss,Ls*3),new Vector3().fromArray(Ss,Ds*3),new Vector3().fromArray(Ss,Fs*3)],Us=new Face3(Ls,Ds,Fs,Gs,Vs,Ns);ga.faces.push(Us),Es!==void 0&&ga.faceVertexUvs[0].push([new Vector2().fromArray(Es,Ls*2),new Vector2().fromArray(Es,Ds*2),new Vector2().fromArray(Es,Fs*2)]),Cs!==void 0&&ga.faceVertexUvs[1].push([new Vector2().fromArray(Cs,Ls*2),new Vector2().fromArray(Cs,Ds*2),new Vector2().fromArray(Cs,Fs*2)])}var Is=ca.groups;if(Is.length>0)for(var Ts=0;Ts<Is.length;Ts++)for(var Ps=Is[Ts],Rs=Ps.start,ks=Ps.count,$s=Rs,Os=Rs+ks;$s<Os;$s+=3)ya!==void 0?Bs(ya[$s],ya[$s+1],ya[$s+2],Ps.materialIndex):Bs($s,$s+1,$s+2,Ps.materialIndex);else if(ya!==void 0)for(var Ts=0;Ts<ya.length;Ts+=3)Bs(ya[Ts],ya[Ts+1],ya[Ts+2]);else for(var Ts=0;Ts<_s.length/3;Ts+=3)Bs(Ts,Ts+1,Ts+2);return this.computeFaceNormals(),ca.boundingBox!==null&&(this.boundingBox=ca.boundingBox.clone()),ca.boundingSphere!==null&&(this.boundingSphere=ca.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var ca=this.boundingSphere.center,ga=this.boundingSphere.radius,ya=ga===0?1:1/ga,_a=new Matrix4;return _a.set(ya,0,0,-ya*ca.x,0,ya,0,-ya*ca.y,0,0,ya,-ya*ca.z,0,0,0,1),this.applyMatrix4(_a),this},computeFaceNormals:function(){for(var ca=new Vector3,ga=new Vector3,ya=0,_a=this.faces.length;ya<_a;ya++){var _s=this.faces[ya],Ss=this.vertices[_s.a],Ms=this.vertices[_s.b],Es=this.vertices[_s.c];ca.subVectors(Es,Ms),ga.subVectors(Ss,Ms),ca.cross(ga),ca.normalize(),_s.normal.copy(ca)}},computeVertexNormals:function(ca){ca===void 0&&(ca=!0);var ga,ya,_a,_s,Ss,Ms;for(Ms=new Array(this.vertices.length),ga=0,ya=this.vertices.length;ga<ya;ga++)Ms[ga]=new Vector3;if(ca){var Es,Cs,Ts,Bs=new Vector3,Is=new Vector3;for(_a=0,_s=this.faces.length;_a<_s;_a++)Ss=this.faces[_a],Es=this.vertices[Ss.a],Cs=this.vertices[Ss.b],Ts=this.vertices[Ss.c],Bs.subVectors(Ts,Cs),Is.subVectors(Es,Cs),Bs.cross(Is),Ms[Ss.a].add(Bs),Ms[Ss.b].add(Bs),Ms[Ss.c].add(Bs)}else for(this.computeFaceNormals(),_a=0,_s=this.faces.length;_a<_s;_a++)Ss=this.faces[_a],Ms[Ss.a].add(Ss.normal),Ms[Ss.b].add(Ss.normal),Ms[Ss.c].add(Ss.normal);for(ga=0,ya=this.vertices.length;ga<ya;ga++)Ms[ga].normalize();for(_a=0,_s=this.faces.length;_a<_s;_a++){Ss=this.faces[_a];var Ps=Ss.vertexNormals;Ps.length===3?(Ps[0].copy(Ms[Ss.a]),Ps[1].copy(Ms[Ss.b]),Ps[2].copy(Ms[Ss.c])):(Ps[0]=Ms[Ss.a].clone(),Ps[1]=Ms[Ss.b].clone(),Ps[2]=Ms[Ss.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var ca,ga,ya;for(this.computeFaceNormals(),ca=0,ga=this.faces.length;ca<ga;ca++){ya=this.faces[ca];var _a=ya.vertexNormals;_a.length===3?(_a[0].copy(ya.normal),_a[1].copy(ya.normal),_a[2].copy(ya.normal)):(_a[0]=ya.normal.clone(),_a[1]=ya.normal.clone(),_a[2]=ya.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var ca,ga,ya,_a,_s;for(ya=0,_a=this.faces.length;ya<_a;ya++)for(_s=this.faces[ya],_s.__originalFaceNormal?_s.__originalFaceNormal.copy(_s.normal):_s.__originalFaceNormal=_s.normal.clone(),_s.__originalVertexNormals||(_s.__originalVertexNormals=[]),ca=0,ga=_s.vertexNormals.length;ca<ga;ca++)_s.__originalVertexNormals[ca]?_s.__originalVertexNormals[ca].copy(_s.vertexNormals[ca]):_s.__originalVertexNormals[ca]=_s.vertexNormals[ca].clone();var Ss=new Geometry;for(Ss.faces=this.faces,ca=0,ga=this.morphTargets.length;ca<ga;ca++){if(!this.morphNormals[ca]){this.morphNormals[ca]={},this.morphNormals[ca].faceNormals=[],this.morphNormals[ca].vertexNormals=[];var Ms=this.morphNormals[ca].faceNormals,Es=this.morphNormals[ca].vertexNormals,Ts,Bs;for(ya=0,_a=this.faces.length;ya<_a;ya++)Ts=new Vector3,Bs={a:new Vector3,b:new Vector3,c:new Vector3},Ms.push(Ts),Es.push(Bs)}var Cs=this.morphNormals[ca];Ss.vertices=this.morphTargets[ca].vertices,Ss.computeFaceNormals(),Ss.computeVertexNormals();var Ts,Bs;for(ya=0,_a=this.faces.length;ya<_a;ya++)_s=this.faces[ya],Ts=Cs.faceNormals[ya],Bs=Cs.vertexNormals[ya],Ts.copy(_s.normal),Bs.a.copy(_s.vertexNormals[0]),Bs.b.copy(_s.vertexNormals[1]),Bs.c.copy(_s.vertexNormals[2])}for(ya=0,_a=this.faces.length;ya<_a;ya++)_s=this.faces[ya],_s.normal=_s.__originalFaceNormal,_s.vertexNormals=_s.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(ca,ga,ya){if(!(ca&&ca.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",ca);return}var _a,_s=this.vertices.length,Ss=this.vertices,Ms=ca.vertices,Es=this.faces,Cs=ca.faces,Ts=this.colors,Bs=ca.colors;ya===void 0&&(ya=0),ga!==void 0&&(_a=new Matrix3().getNormalMatrix(ga));for(var Is=0,Ps=Ms.length;Is<Ps;Is++){var Rs=Ms[Is],ks=Rs.clone();ga!==void 0&&ks.applyMatrix4(ga),Ss.push(ks)}for(var Is=0,Ps=Bs.length;Is<Ps;Is++)Ts.push(Bs[Is].clone());for(Is=0,Ps=Cs.length;Is<Ps;Is++){var $s=Cs[Is],Os,Ls,Ds,Fs=$s.vertexNormals,Ns=$s.vertexColors;Os=new Face3($s.a+_s,$s.b+_s,$s.c+_s),Os.normal.copy($s.normal),_a!==void 0&&Os.normal.applyMatrix3(_a).normalize();for(var Vs=0,Gs=Fs.length;Vs<Gs;Vs++)Ls=Fs[Vs].clone(),_a!==void 0&&Ls.applyMatrix3(_a).normalize(),Os.vertexNormals.push(Ls);Os.color.copy($s.color);for(var Vs=0,Gs=Ns.length;Vs<Gs;Vs++)Ds=Ns[Vs],Os.vertexColors.push(Ds.clone());Os.materialIndex=$s.materialIndex+ya,Es.push(Os)}for(var Is=0,Ps=ca.faceVertexUvs.length;Is<Ps;Is++){var Us=ca.faceVertexUvs[Is];this.faceVertexUvs[Is]===void 0&&(this.faceVertexUvs[Is]=[]);for(var Vs=0,Gs=Us.length;Vs<Gs;Vs++){for(var zs=Us[Vs],Hs=[],Qs=0,js=zs.length;Qs<js;Qs++)Hs.push(zs[Qs].clone());this.faceVertexUvs[Is].push(Hs)}}},mergeMesh:function(ca){if(!(ca&&ca.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",ca);return}ca.matrixAutoUpdate&&ca.updateMatrix(),this.merge(ca.geometry,ca.matrix)},mergeVertices:function(){var ca={},ga=[],ya=[],_a,_s,Ss=4,Ms=Math.pow(10,Ss),Es,Cs,Ts,Bs,Is,Ps;for(Es=0,Cs=this.vertices.length;Es<Cs;Es++)_a=this.vertices[Es],_s=Math.round(_a.x*Ms)+"_"+Math.round(_a.y*Ms)+"_"+Math.round(_a.z*Ms),ca[_s]===void 0?(ca[_s]=Es,ga.push(this.vertices[Es]),ya[Es]=ga.length-1):ya[Es]=ya[ca[_s]];var Rs=[];for(Es=0,Cs=this.faces.length;Es<Cs;Es++){Ts=this.faces[Es],Ts.a=ya[Ts.a],Ts.b=ya[Ts.b],Ts.c=ya[Ts.c],Bs=[Ts.a,Ts.b,Ts.c];for(var ks=0;ks<3;ks++)if(Bs[ks]===Bs[(ks+1)%3]){Rs.push(Es);break}}for(Es=Rs.length-1;Es>=0;Es--){var $s=Rs[Es];for(this.faces.splice($s,1),Is=0,Ps=this.faceVertexUvs.length;Is<Ps;Is++)this.faceVertexUvs[Is].splice($s,1)}var Os=this.vertices.length-ga.length;return this.vertices=ga,Os},setFromPoints:function(ca){this.vertices=[];for(var ga=0,ya=ca.length;ga<ya;ga++){var _a=ca[ga];this.vertices.push(new Vector3(_a.x,_a.y,_a.z||0))}return this},sortFacesByMaterialIndex:function(){for(var ca=this.faces,ga=ca.length,ya=0;ya<ga;ya++)ca[ya]._id=ya;function _a(Ts,Bs){return Ts.materialIndex-Bs.materialIndex}ca.sort(_a);var _s=this.faceVertexUvs[0],Ss=this.faceVertexUvs[1],Ms,Es;_s&&_s.length===ga&&(Ms=[]),Ss&&Ss.length===ga&&(Es=[]);for(var ya=0;ya<ga;ya++){var Cs=ca[ya]._id;Ms&&Ms.push(_s[Cs]),Es&&Es.push(Ss[Cs])}Ms&&(this.faceVertexUvs[0]=Ms),Es&&(this.faceVertexUvs[1]=Es)},toJSON:function(){var ca={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(ca.uuid=this.uuid,ca.type=this.type,this.name!==""&&(ca.name=this.name),this.parameters!==void 0){var ga=this.parameters;for(var ya in ga)ga[ya]!==void 0&&(ca[ya]=ga[ya]);return ca}for(var _a=[],_s=0;_s<this.vertices.length;_s++){var Ss=this.vertices[_s];_a.push(Ss.x,Ss.y,Ss.z)}for(var Ms=[],Es=[],Cs={},Ts=[],Bs={},Is=[],Ps={},_s=0;_s<this.faces.length;_s++){var Rs=this.faces[_s],ks=!0,$s=!1,Os=this.faceVertexUvs[0][_s]!==void 0,Ls=Rs.normal.length()>0,Ds=Rs.vertexNormals.length>0,Fs=Rs.color.r!==1||Rs.color.g!==1||Rs.color.b!==1,Ns=Rs.vertexColors.length>0,Vs=0;if(Vs=Hs(Vs,0,0),Vs=Hs(Vs,1,ks),Vs=Hs(Vs,2,$s),Vs=Hs(Vs,3,Os),Vs=Hs(Vs,4,Ls),Vs=Hs(Vs,5,Ds),Vs=Hs(Vs,6,Fs),Vs=Hs(Vs,7,Ns),Ms.push(Vs),Ms.push(Rs.a,Rs.b,Rs.c),Ms.push(Rs.materialIndex),Os){var Gs=this.faceVertexUvs[0][_s];Ms.push(Zs(Gs[0]),Zs(Gs[1]),Zs(Gs[2]))}if(Ls&&Ms.push(Qs(Rs.normal)),Ds){var Us=Rs.vertexNormals;Ms.push(Qs(Us[0]),Qs(Us[1]),Qs(Us[2]))}if(Fs&&Ms.push(js(Rs.color)),Ns){var zs=Rs.vertexColors;Ms.push(js(zs[0]),js(zs[1]),js(zs[2]))}}function Hs(Ks,Ys,qs){return qs?Ks|1<<Ys:Ks&~(1<<Ys)}function Qs(Ks){var Ys=Ks.x.toString()+Ks.y.toString()+Ks.z.toString();return Cs[Ys]!==void 0||(Cs[Ys]=Es.length/3,Es.push(Ks.x,Ks.y,Ks.z)),Cs[Ys]}function js(Ks){var Ys=Ks.r.toString()+Ks.g.toString()+Ks.b.toString();return Bs[Ys]!==void 0||(Bs[Ys]=Ts.length,Ts.push(Ks.getHex())),Bs[Ys]}function Zs(Ks){var Ys=Ks.x.toString()+Ks.y.toString();return Ps[Ys]!==void 0||(Ps[Ys]=Is.length/2,Is.push(Ks.x,Ks.y)),Ps[Ys]}return ca.data={},ca.data.vertices=_a,ca.data.normals=Es,Ts.length>0&&(ca.data.colors=Ts),Is.length>0&&(ca.data.uvs=[Is]),ca.data.faces=Ms,ca},clone:function(){return new Geometry().copy(this)},copy:function(ca){var ga,ya,_a,_s,Ss,Ms;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=ca.name;var Es=ca.vertices;for(ga=0,ya=Es.length;ga<ya;ga++)this.vertices.push(Es[ga].clone());var Cs=ca.colors;for(ga=0,ya=Cs.length;ga<ya;ga++)this.colors.push(Cs[ga].clone());var Ts=ca.faces;for(ga=0,ya=Ts.length;ga<ya;ga++)this.faces.push(Ts[ga].clone());for(ga=0,ya=ca.faceVertexUvs.length;ga<ya;ga++){var Bs=ca.faceVertexUvs[ga];for(this.faceVertexUvs[ga]===void 0&&(this.faceVertexUvs[ga]=[]),_a=0,_s=Bs.length;_a<_s;_a++){var Is=Bs[_a],Ps=[];for(Ss=0,Ms=Is.length;Ss<Ms;Ss++){var Rs=Is[Ss];Ps.push(Rs.clone())}this.faceVertexUvs[ga].push(Ps)}}var ks=ca.morphTargets;for(ga=0,ya=ks.length;ga<ya;ga++){var $s={};if($s.name=ks[ga].name,ks[ga].vertices!==void 0)for($s.vertices=[],_a=0,_s=ks[ga].vertices.length;_a<_s;_a++)$s.vertices.push(ks[ga].vertices[_a].clone());if(ks[ga].normals!==void 0)for($s.normals=[],_a=0,_s=ks[ga].normals.length;_a<_s;_a++)$s.normals.push(ks[ga].normals[_a].clone());this.morphTargets.push($s)}var Os=ca.morphNormals;for(ga=0,ya=Os.length;ga<ya;ga++){var Ls={};if(Os[ga].vertexNormals!==void 0)for(Ls.vertexNormals=[],_a=0,_s=Os[ga].vertexNormals.length;_a<_s;_a++){var Ds=Os[ga].vertexNormals[_a],Fs={};Fs.a=Ds.a.clone(),Fs.b=Ds.b.clone(),Fs.c=Ds.c.clone(),Ls.vertexNormals.push(Fs)}if(Os[ga].faceNormals!==void 0)for(Ls.faceNormals=[],_a=0,_s=Os[ga].faceNormals.length;_a<_s;_a++)Ls.faceNormals.push(Os[ga].faceNormals[_a].clone());this.morphNormals.push(Ls)}var Ns=ca.skinWeights;for(ga=0,ya=Ns.length;ga<ya;ga++)this.skinWeights.push(Ns[ga].clone());var Vs=ca.skinIndices;for(ga=0,ya=Vs.length;ga<ya;ga++)this.skinIndices.push(Vs[ga].clone());var Gs=ca.lineDistances;for(ga=0,ya=Gs.length;ga<ya;ga++)this.lineDistances.push(Gs[ga]);var Us=ca.boundingBox;Us!==null&&(this.boundingBox=Us.clone());var zs=ca.boundingSphere;return zs!==null&&(this.boundingSphere=zs.clone()),this.elementsNeedUpdate=ca.elementsNeedUpdate,this.verticesNeedUpdate=ca.verticesNeedUpdate,this.uvsNeedUpdate=ca.uvsNeedUpdate,this.normalsNeedUpdate=ca.normalsNeedUpdate,this.colorsNeedUpdate=ca.colorsNeedUpdate,this.lineDistancesNeedUpdate=ca.lineDistancesNeedUpdate,this.groupsNeedUpdate=ca.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(ga,ya,_a,_s,Ss,Ms){super(),this.type="BoxGeometry",this.parameters={width:ga,height:ya,depth:_a,widthSegments:_s,heightSegments:Ss,depthSegments:Ms},this.fromBufferGeometry(new BoxBufferGeometry(ga,ya,_a,_s,Ss,Ms)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(ga,ya,_a,_s,Ss,Ms){super(),this.type="BoxBufferGeometry",this.parameters={width:ga,height:ya,depth:_a,widthSegments:_s,heightSegments:Ss,depthSegments:Ms};const Es=this;ga=ga||1,ya=ya||1,_a=_a||1,_s=Math.floor(_s)||1,Ss=Math.floor(Ss)||1,Ms=Math.floor(Ms)||1;const Cs=[],Ts=[],Bs=[],Is=[];let Ps=0,Rs=0;ks("z","y","x",-1,-1,_a,ya,ga,Ms,Ss,0),ks("z","y","x",1,-1,_a,ya,-ga,Ms,Ss,1),ks("x","z","y",1,1,ga,_a,ya,_s,Ms,2),ks("x","z","y",1,-1,ga,_a,-ya,_s,Ms,3),ks("x","y","z",1,-1,ga,ya,_a,_s,Ss,4),ks("x","y","z",-1,-1,ga,ya,-_a,_s,Ss,5),this.setIndex(Cs),this.setAttribute("position",new Float32BufferAttribute(Ts,3)),this.setAttribute("normal",new Float32BufferAttribute(Bs,3)),this.setAttribute("uv",new Float32BufferAttribute(Is,2));function ks($s,Os,Ls,Ds,Fs,Ns,Vs,Gs,Us,zs,Hs){const Qs=Ns/Us,js=Vs/zs,Zs=Ns/2,Ks=Vs/2,Ys=Gs/2,qs=Us+1,eu=zs+1;let Js=0,Xs=0;const ru=new Vector3;for(let su=0;su<eu;su++){const lu=su*js-Ks;for(let cu=0;cu<qs;cu++){const xu=cu*Qs-Zs;ru[$s]=xu*Ds,ru[Os]=lu*Fs,ru[Ls]=Ys,Ts.push(ru.x,ru.y,ru.z),ru[$s]=0,ru[Os]=0,ru[Ls]=Gs>0?1:-1,Bs.push(ru.x,ru.y,ru.z),Is.push(cu/Us),Is.push(1-su/zs),Js+=1}}for(let su=0;su<zs;su++)for(let lu=0;lu<Us;lu++){const cu=Ps+lu+qs*su,xu=Ps+lu+qs*(su+1),bu=Ps+(lu+1)+qs*(su+1),yu=Ps+(lu+1)+qs*su;Cs.push(cu,xu,yu),Cs.push(xu,bu,yu),Xs+=6}Es.addGroup(Rs,Xs,Hs),Rs+=Xs,Ps+=Js}}}function cloneUniforms(ca){var ga={};for(var ya in ca){ga[ya]={};for(var _a in ca[ya]){var _s=ca[ya][_a];_s&&(_s.isColor||_s.isMatrix3||_s.isMatrix4||_s.isVector2||_s.isVector3||_s.isVector4||_s.isTexture)?ga[ya][_a]=_s.clone():Array.isArray(_s)?ga[ya][_a]=_s.slice():ga[ya][_a]=_s}}return ga}function mergeUniforms(ca){for(var ga={},ya=0;ya<ca.length;ya++){var _a=cloneUniforms(ca[ya]);for(var _s in _a)ga[_s]=_a[_s]}return ga}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(ca){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,ca!==void 0&&(ca.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(ca))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.fragmentShader=ca.fragmentShader,this.vertexShader=ca.vertexShader,this.uniforms=cloneUniforms(ca.uniforms),this.defines=Object.assign({},ca.defines),this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.lights=ca.lights,this.clipping=ca.clipping,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.extensions=Object.assign({},ca.extensions),this};ShaderMaterial.prototype.toJSON=function(ca){var ga=Material.prototype.toJSON.call(this,ca);ga.uniforms={};for(var ya in this.uniforms){var _a=this.uniforms[ya],_s=_a.value;_s&&_s.isTexture?ga.uniforms[ya]={type:"t",value:_s.toJSON(ca).uuid}:_s&&_s.isColor?ga.uniforms[ya]={type:"c",value:_s.getHex()}:_s&&_s.isVector2?ga.uniforms[ya]={type:"v2",value:_s.toArray()}:_s&&_s.isVector3?ga.uniforms[ya]={type:"v3",value:_s.toArray()}:_s&&_s.isVector4?ga.uniforms[ya]={type:"v4",value:_s.toArray()}:_s&&_s.isMatrix3?ga.uniforms[ya]={type:"m3",value:_s.toArray()}:_s&&_s.isMatrix4?ga.uniforms[ya]={type:"m4",value:_s.toArray()}:ga.uniforms[ya]={value:_s}}Object.keys(this.defines).length>0&&(ga.defines=this.defines),ga.vertexShader=this.vertexShader,ga.fragmentShader=this.fragmentShader;var Ss={};for(var Ms in this.extensions)this.extensions[Ms]===!0&&(Ss[Ms]=!0);return Object.keys(Ss).length>0&&(ga.extensions=Ss),ga};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(ca,ga){return Object3D.prototype.copy.call(this,ca,ga),this.matrixWorldInverse.copy(ca.matrixWorldInverse),this.projectionMatrix.copy(ca.projectionMatrix),this.projectionMatrixInverse.copy(ca.projectionMatrixInverse),this},getWorldDirection:function(ca){ca===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),ca=new Vector3),this.updateMatrixWorld(!0);var ga=this.matrixWorld.elements;return ca.set(-ga[8],-ga[9],-ga[10]).normalize()},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(ca,ga){Object3D.prototype.updateWorldMatrix.call(this,ca,ga),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(ca,ga,ya,_a){Camera.call(this),this.type="PerspectiveCamera",this.fov=ca!==void 0?ca:50,this.zoom=1,this.near=ya!==void 0?ya:.1,this.far=_a!==void 0?_a:2e3,this.focus=10,this.aspect=ga!==void 0?ga:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.fov=ca.fov,this.zoom=ca.zoom,this.near=ca.near,this.far=ca.far,this.focus=ca.focus,this.aspect=ca.aspect,this.view=ca.view===null?null:Object.assign({},ca.view),this.filmGauge=ca.filmGauge,this.filmOffset=ca.filmOffset,this},setFocalLength:function(ca){var ga=.5*this.getFilmHeight()/ca;this.fov=MathUtils.RAD2DEG*2*Math.atan(ga),this.updateProjectionMatrix()},getFocalLength:function(){var ca=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/ca},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(ca,ga,ya,_a,_s,Ss){this.aspect=ca/ga,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=ya,this.view.offsetY=_a,this.view.width=_s,this.view.height=Ss,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=this.near,ga=ca*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,ya=2*ga,_a=this.aspect*ya,_s=-.5*_a,Ss=this.view;if(this.view!==null&&this.view.enabled){var Ms=Ss.fullWidth,Es=Ss.fullHeight;_s+=Ss.offsetX*_a/Ms,ga-=Ss.offsetY*ya/Es,_a*=Ss.width/Ms,ya*=Ss.height/Es}var Cs=this.filmOffset;Cs!==0&&(_s+=ca*Cs/this.getFilmWidth()),this.projectionMatrix.makePerspective(_s,_s+_a,ga,ga-ya,ca,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.fov=this.fov,ga.object.zoom=this.zoom,ga.object.near=this.near,ga.object.far=this.far,ga.object.focus=this.focus,ga.object.aspect=this.aspect,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga.object.filmGauge=this.filmGauge,ga.object.filmOffset=this.filmOffset,ga}});var fov=90,aspect=1;function CubeCamera(ca,ga,ya){if(Object3D.call(this),this.type="CubeCamera",ya.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=ya;var _a=new PerspectiveCamera(fov,aspect,ca,ga);_a.layers=this.layers,_a.up.set(0,-1,0),_a.lookAt(new Vector3(1,0,0)),this.add(_a);var _s=new PerspectiveCamera(fov,aspect,ca,ga);_s.layers=this.layers,_s.up.set(0,-1,0),_s.lookAt(new Vector3(-1,0,0)),this.add(_s);var Ss=new PerspectiveCamera(fov,aspect,ca,ga);Ss.layers=this.layers,Ss.up.set(0,0,1),Ss.lookAt(new Vector3(0,1,0)),this.add(Ss);var Ms=new PerspectiveCamera(fov,aspect,ca,ga);Ms.layers=this.layers,Ms.up.set(0,0,-1),Ms.lookAt(new Vector3(0,-1,0)),this.add(Ms);var Es=new PerspectiveCamera(fov,aspect,ca,ga);Es.layers=this.layers,Es.up.set(0,-1,0),Es.lookAt(new Vector3(0,0,1)),this.add(Es);var Cs=new PerspectiveCamera(fov,aspect,ca,ga);Cs.layers=this.layers,Cs.up.set(0,-1,0),Cs.lookAt(new Vector3(0,0,-1)),this.add(Cs),this.update=function(Ts,Bs){this.parent===null&&this.updateMatrixWorld();var Is=Ts.xr.enabled,Ps=Ts.getRenderTarget();Ts.xr.enabled=!1;var Rs=ya.texture.generateMipmaps;ya.texture.generateMipmaps=!1,Ts.setRenderTarget(ya,0),Ts.render(Bs,_a),Ts.setRenderTarget(ya,1),Ts.render(Bs,_s),Ts.setRenderTarget(ya,2),Ts.render(Bs,Ss),Ts.setRenderTarget(ya,3),Ts.render(Bs,Ms),Ts.setRenderTarget(ya,4),Ts.render(Bs,Es),ya.texture.generateMipmaps=Rs,Ts.setRenderTarget(ya,5),Ts.render(Bs,Cs),Ts.setRenderTarget(Ps),Ts.xr.enabled=Is},this.clear=function(Ts,Bs,Is,Ps){for(var Rs=Ts.getRenderTarget(),ks=0;ks<6;ks++)Ts.setRenderTarget(ya,ks),Ts.clear(Bs,Is,Ps);Ts.setRenderTarget(Rs)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(ca,ga,ya){Number.isInteger(ga)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),ga=ya),WebGLRenderTarget.call(this,ca,ca,ga)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(ca,ga){this.texture.type=ga.type,this.texture.format=ga.format,this.texture.encoding=ga.encoding;var ya=new Scene,_a={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},_s=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(_a.uniforms),vertexShader:_a.vertexShader,fragmentShader:_a.fragmentShader,side:BackSide,blending:NoBlending});_s.uniforms.tEquirect.value=ga;var Ss=new Mesh(new BoxBufferGeometry(5,5,5),_s);ya.add(Ss);var Ms=new CubeCamera(1,10,this);return Ms.update(ca,ya),Ss.geometry.dispose(),Ss.material.dispose(),this};function DataTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is){Texture.call(this,null,Ss,Ms,Es,Cs,Ts,_a,_s,Bs,Is),this.image={data:ca||null,width:ga||1,height:ya||1},this.magFilter=Cs!==void 0?Cs:NearestFilter,this.minFilter=Ts!==void 0?Ts:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(ca,ga,ya,_a,_s,Ss){this.planes=[ca!==void 0?ca:new Plane,ga!==void 0?ga:new Plane,ya!==void 0?ya:new Plane,_a!==void 0?_a:new Plane,_s!==void 0?_s:new Plane,Ss!==void 0?Ss:new Plane]}Object.assign(Frustum.prototype,{set:function(ca,ga,ya,_a,_s,Ss){var Ms=this.planes;return Ms[0].copy(ca),Ms[1].copy(ga),Ms[2].copy(ya),Ms[3].copy(_a),Ms[4].copy(_s),Ms[5].copy(Ss),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){for(var ga=this.planes,ya=0;ya<6;ya++)ga[ya].copy(ca.planes[ya]);return this},setFromProjectionMatrix:function(ca){var ga=this.planes,ya=ca.elements,_a=ya[0],_s=ya[1],Ss=ya[2],Ms=ya[3],Es=ya[4],Cs=ya[5],Ts=ya[6],Bs=ya[7],Is=ya[8],Ps=ya[9],Rs=ya[10],ks=ya[11],$s=ya[12],Os=ya[13],Ls=ya[14],Ds=ya[15];return ga[0].setComponents(Ms-_a,Bs-Es,ks-Is,Ds-$s).normalize(),ga[1].setComponents(Ms+_a,Bs+Es,ks+Is,Ds+$s).normalize(),ga[2].setComponents(Ms+_s,Bs+Cs,ks+Ps,Ds+Os).normalize(),ga[3].setComponents(Ms-_s,Bs-Cs,ks-Ps,Ds-Os).normalize(),ga[4].setComponents(Ms-Ss,Bs-Ts,ks-Rs,Ds-Ls).normalize(),ga[5].setComponents(Ms+Ss,Bs+Ts,ks+Rs,Ds+Ls).normalize(),this},intersectsObject:function(ca){var ga=ca.geometry;return ga.boundingSphere===null&&ga.computeBoundingSphere(),_sphere$1.copy(ga.boundingSphere).applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(ca){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(ca.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(ca){for(var ga=this.planes,ya=ca.center,_a=-ca.radius,_s=0;_s<6;_s++){var Ss=ga[_s].distanceToPoint(ya);if(Ss<_a)return!1}return!0},intersectsBox:function(ca){for(var ga=this.planes,ya=0;ya<6;ya++){var _a=ga[ya];if(_vector$5.x=_a.normal.x>0?ca.max.x:ca.min.x,_vector$5.y=_a.normal.y>0?ca.max.y:ca.min.y,_vector$5.z=_a.normal.z>0?ca.max.z:ca.min.z,_a.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(ca){for(var ga=this.planes,ya=0;ya<6;ya++)if(ga[ya].distanceToPoint(ca)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var ca=null,ga=!1,ya=null;function _a(_s,Ss){ga!==!1&&(ya(_s,Ss),ca.requestAnimationFrame(_a))}return{start:function(){ga!==!0&&ya!==null&&(ca.requestAnimationFrame(_a),ga=!0)},stop:function(){ga=!1},setAnimationLoop:function(_s){ya=_s},setContext:function(_s){ca=_s}}}function WebGLAttributes(ca,ga){var ya=ga.isWebGL2,_a=new WeakMap;function _s(Ts,Bs){var Is=Ts.array,Ps=Ts.usage,Rs=ca.createBuffer();ca.bindBuffer(Bs,Rs),ca.bufferData(Bs,Is,Ps),Ts.onUploadCallback();var ks=5126;return Is instanceof Float32Array?ks=5126:Is instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):Is instanceof Uint16Array?ks=5123:Is instanceof Int16Array?ks=5122:Is instanceof Uint32Array?ks=5125:Is instanceof Int32Array?ks=5124:Is instanceof Int8Array?ks=5120:Is instanceof Uint8Array&&(ks=5121),{buffer:Rs,type:ks,bytesPerElement:Is.BYTES_PER_ELEMENT,version:Ts.version}}function Ss(Ts,Bs,Is){var Ps=Bs.array,Rs=Bs.updateRange;ca.bindBuffer(Is,Ts),Rs.count===-1?ca.bufferSubData(Is,0,Ps):(ya?ca.bufferSubData(Is,Rs.offset*Ps.BYTES_PER_ELEMENT,Ps,Rs.offset,Rs.count):ca.bufferSubData(Is,Rs.offset*Ps.BYTES_PER_ELEMENT,Ps.subarray(Rs.offset,Rs.offset+Rs.count)),Rs.count=-1)}function Ms(Ts){return Ts.isInterleavedBufferAttribute&&(Ts=Ts.data),_a.get(Ts)}function Es(Ts){Ts.isInterleavedBufferAttribute&&(Ts=Ts.data);var Bs=_a.get(Ts);Bs&&(ca.deleteBuffer(Bs.buffer),_a.delete(Ts))}function Cs(Ts,Bs){Ts.isInterleavedBufferAttribute&&(Ts=Ts.data);var Is=_a.get(Ts);Is===void 0?_a.set(Ts,_s(Ts,Bs)):Is.version<Ts.version&&(Ss(Is.buffer,Ts,Bs),Is.version=Ts.version)}return{get:Ms,remove:Es,update:Cs}}function PlaneGeometry(ca,ga,ya,_a){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:ca,height:ga,widthSegments:ya,heightSegments:_a},this.fromBufferGeometry(new PlaneBufferGeometry(ca,ga,ya,_a)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(ca,ga,ya,_a){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:ca,height:ga,widthSegments:ya,heightSegments:_a},ca=ca||1,ga=ga||1;var _s=ca/2,Ss=ga/2,Ms=Math.floor(ya)||1,Es=Math.floor(_a)||1,Cs=Ms+1,Ts=Es+1,Bs=ca/Ms,Is=ga/Es,Ps,Rs,ks=[],$s=[],Os=[],Ls=[];for(Rs=0;Rs<Ts;Rs++){var Ds=Rs*Is-Ss;for(Ps=0;Ps<Cs;Ps++){var Fs=Ps*Bs-_s;$s.push(Fs,-Ds,0),Os.push(0,0,1),Ls.push(Ps/Ms),Ls.push(1-Rs/Es)}}for(Rs=0;Rs<Es;Rs++)for(Ps=0;Ps<Ms;Ps++){var Ns=Ps+Cs*Rs,Vs=Ps+Cs*(Rs+1),Gs=Ps+1+Cs*(Rs+1),Us=Ps+1+Cs*Rs;ks.push(Ns,Vs,Us),ks.push(Vs,Gs,Us)}this.setIndex(ks),this.setAttribute("position",new Float32BufferAttribute($s,3)),this.setAttribute("normal",new Float32BufferAttribute(Os,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common$2=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common:common$2,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(ca,ga,ya,_a){var _s=new Color(0),Ss=0,Ms,Es,Cs=null,Ts=0,Bs=null;function Is(Rs,ks,$s,Os){var Ls=ks.background,Ds=ca.xr,Fs=Ds.getSession&&Ds.getSession();if(Fs&&Fs.environmentBlendMode==="additive"&&(Ls=null),Ls===null?Ps(_s,Ss):Ls&&Ls.isColor&&(Ps(Ls,1),Os=!0),(ca.autoClear||Os)&&ca.clear(ca.autoClearColor,ca.autoClearDepth,ca.autoClearStencil),Ls&&(Ls.isCubeTexture||Ls.isWebGLCubeRenderTarget||Ls.mapping===CubeUVReflectionMapping)){Es===void 0&&(Es=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Es.geometry.deleteAttribute("normal"),Es.geometry.deleteAttribute("uv"),Es.onBeforeRender=function(Vs,Gs,Us){this.matrixWorld.copyPosition(Us.matrixWorld)},Object.defineProperty(Es.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),ya.update(Es));var Ns=Ls.isWebGLCubeRenderTarget?Ls.texture:Ls;Es.material.uniforms.envMap.value=Ns,Es.material.uniforms.flipEnvMap.value=Ns.isCubeTexture?-1:1,(Cs!==Ls||Ts!==Ns.version||Bs!==ca.toneMapping)&&(Es.material.needsUpdate=!0,Cs=Ls,Ts=Ns.version,Bs=ca.toneMapping),Rs.unshift(Es,Es.geometry,Es.material,0,0,null)}else Ls&&Ls.isTexture&&(Ms===void 0&&(Ms=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ms.geometry.deleteAttribute("normal"),Object.defineProperty(Ms.material,"map",{get:function(){return this.uniforms.t2D.value}}),ya.update(Ms)),Ms.material.uniforms.t2D.value=Ls,Ls.matrixAutoUpdate===!0&&Ls.updateMatrix(),Ms.material.uniforms.uvTransform.value.copy(Ls.matrix),(Cs!==Ls||Ts!==Ls.version||Bs!==ca.toneMapping)&&(Ms.material.needsUpdate=!0,Cs=Ls,Ts=Ls.version,Bs=ca.toneMapping),Rs.unshift(Ms,Ms.geometry,Ms.material,0,0,null))}function Ps(Rs,ks){ga.buffers.color.setClear(Rs.r,Rs.g,Rs.b,ks,_a)}return{getClearColor:function(){return _s},setClearColor:function(Rs,ks){_s.set(Rs),Ss=ks!==void 0?ks:1,Ps(_s,Ss)},getClearAlpha:function(){return Ss},setClearAlpha:function(Rs){Ss=Rs,Ps(_s,Ss)},render:Is}}function WebGLBufferRenderer(ca,ga,ya,_a){var _s=_a.isWebGL2,Ss;function Ms(Ts){Ss=Ts}function Es(Ts,Bs){ca.drawArrays(Ss,Ts,Bs),ya.update(Bs,Ss)}function Cs(Ts,Bs,Is,Ps){if(Ps!==0){var Rs,ks;if(_s)Rs=ca,ks="drawArraysInstanced";else if(Rs=ga.get("ANGLE_instanced_arrays"),ks="drawArraysInstancedANGLE",Rs===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Rs[ks](Ss,Bs,Is,Ps),ya.update(Is,Ss,Ps)}}this.setMode=Ms,this.render=Es,this.renderInstances=Cs}function WebGLCapabilities(ca,ga,ya){var _a;function _s(){if(_a!==void 0)return _a;var Gs=ga.get("EXT_texture_filter_anisotropic");return Gs!==null?_a=ca.getParameter(Gs.MAX_TEXTURE_MAX_ANISOTROPY_EXT):_a=0,_a}function Ss(Gs){if(Gs==="highp"){if(ca.getShaderPrecisionFormat(35633,36338).precision>0&&ca.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Gs="mediump"}return Gs==="mediump"&&ca.getShaderPrecisionFormat(35633,36337).precision>0&&ca.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var Ms=typeof WebGL2RenderingContext!="undefined"&&ca instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&ca instanceof WebGL2ComputeRenderingContext,Es=ya.precision!==void 0?ya.precision:"highp",Cs=Ss(Es);Cs!==Es&&(console.warn("THREE.WebGLRenderer:",Es,"not supported, using",Cs,"instead."),Es=Cs);var Ts=ya.logarithmicDepthBuffer===!0,Bs=ca.getParameter(34930),Is=ca.getParameter(35660),Ps=ca.getParameter(3379),Rs=ca.getParameter(34076),ks=ca.getParameter(34921),$s=ca.getParameter(36347),Os=ca.getParameter(36348),Ls=ca.getParameter(36349),Ds=Is>0,Fs=Ms||!!ga.get("OES_texture_float"),Ns=Ds&&Fs,Vs=Ms?ca.getParameter(36183):0;return{isWebGL2:Ms,getMaxAnisotropy:_s,getMaxPrecision:Ss,precision:Es,logarithmicDepthBuffer:Ts,maxTextures:Bs,maxVertexTextures:Is,maxTextureSize:Ps,maxCubemapSize:Rs,maxAttributes:ks,maxVertexUniforms:$s,maxVaryings:Os,maxFragmentUniforms:Ls,vertexTextures:Ds,floatFragmentTextures:Fs,floatVertexTextures:Ns,maxSamples:Vs}}function WebGLClipping(){var ca=this,ga=null,ya=0,_a=!1,_s=!1,Ss=new Plane,Ms=new Matrix3,Es={value:null,needsUpdate:!1};this.uniform=Es,this.numPlanes=0,this.numIntersection=0,this.init=function(Bs,Is,Ps){var Rs=Bs.length!==0||Is||ya!==0||_a;return _a=Is,ga=Ts(Bs,Ps,0),ya=Bs.length,Rs},this.beginShadows=function(){_s=!0,Ts(null)},this.endShadows=function(){_s=!1,Cs()},this.setState=function(Bs,Is,Ps,Rs,ks,$s){if(!_a||Bs===null||Bs.length===0||_s&&!Ps)_s?Ts(null):Cs();else{var Os=_s?0:ya,Ls=Os*4,Ds=ks.clippingState||null;Es.value=Ds,Ds=Ts(Bs,Rs,Ls,$s);for(var Fs=0;Fs!==Ls;++Fs)Ds[Fs]=ga[Fs];ks.clippingState=Ds,this.numIntersection=Is?this.numPlanes:0,this.numPlanes+=Os}};function Cs(){Es.value!==ga&&(Es.value=ga,Es.needsUpdate=ya>0),ca.numPlanes=ya,ca.numIntersection=0}function Ts(Bs,Is,Ps,Rs){var ks=Bs!==null?Bs.length:0,$s=null;if(ks!==0){if($s=Es.value,Rs!==!0||$s===null){var Os=Ps+ks*4,Ls=Is.matrixWorldInverse;Ms.getNormalMatrix(Ls),($s===null||$s.length<Os)&&($s=new Float32Array(Os));for(var Ds=0,Fs=Ps;Ds!==ks;++Ds,Fs+=4)Ss.copy(Bs[Ds]).applyMatrix4(Ls,Ms),Ss.normal.toArray($s,Fs),$s[Fs+3]=Ss.constant}Es.value=$s,Es.needsUpdate=!0}return ca.numPlanes=ks,ca.numIntersection=0,$s}}function WebGLExtensions(ca){var ga={};return{get:function(ya){if(ga[ya]!==void 0)return ga[ya];var _a;switch(ya){case"WEBGL_depth_texture":_a=ca.getExtension("WEBGL_depth_texture")||ca.getExtension("MOZ_WEBGL_depth_texture")||ca.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":_a=ca.getExtension("EXT_texture_filter_anisotropic")||ca.getExtension("MOZ_EXT_texture_filter_anisotropic")||ca.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":_a=ca.getExtension("WEBGL_compressed_texture_s3tc")||ca.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":_a=ca.getExtension("WEBGL_compressed_texture_pvrtc")||ca.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:_a=ca.getExtension(ya)}return _a===null&&console.warn("THREE.WebGLRenderer: "+ya+" extension not supported."),ga[ya]=_a,_a}}}function WebGLGeometries(ca,ga,ya){var _a=new WeakMap,_s=new WeakMap;function Ss(Bs){var Is=Bs.target,Ps=_a.get(Is);Ps.index!==null&&ga.remove(Ps.index);for(var Rs in Ps.attributes)ga.remove(Ps.attributes[Rs]);Is.removeEventListener("dispose",Ss),_a.delete(Is);var ks=_s.get(Ps);ks&&(ga.remove(ks),_s.delete(Ps)),ya.memory.geometries--}function Ms(Bs,Is){var Ps=_a.get(Is);return Ps||(Is.addEventListener("dispose",Ss),Is.isBufferGeometry?Ps=Is:Is.isGeometry&&(Is._bufferGeometry===void 0&&(Is._bufferGeometry=new BufferGeometry().setFromObject(Bs)),Ps=Is._bufferGeometry),_a.set(Is,Ps),ya.memory.geometries++,Ps)}function Es(Bs){var Is=Bs.index,Ps=Bs.attributes;Is!==null&&ga.update(Is,34963);for(var Rs in Ps)ga.update(Ps[Rs],34962);var ks=Bs.morphAttributes;for(var Rs in ks)for(var $s=ks[Rs],Os=0,Ls=$s.length;Os<Ls;Os++)ga.update($s[Os],34962)}function Cs(Bs){var Is=[],Ps=Bs.index,Rs=Bs.attributes.position,ks=0;if(Ps!==null){var $s=Ps.array;ks=Ps.version;for(var Os=0,Ls=$s.length;Os<Ls;Os+=3){var Ds=$s[Os+0],Fs=$s[Os+1],Ns=$s[Os+2];Is.push(Ds,Fs,Fs,Ns,Ns,Ds)}}else{var $s=Rs.array;ks=Rs.version;for(var Os=0,Ls=$s.length/3-1;Os<Ls;Os+=3){var Ds=Os+0,Fs=Os+1,Ns=Os+2;Is.push(Ds,Fs,Fs,Ns,Ns,Ds)}}var Vs=new(arrayMax(Is)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(Is,1);Vs.version=ks,ga.update(Vs,34963);var Gs=_s.get(Bs);Gs&&ga.remove(Gs),_s.set(Bs,Vs)}function Ts(Bs){var Is=_s.get(Bs);if(Is){var Ps=Bs.index;Ps!==null&&Is.version<Ps.version&&Cs(Bs)}else Cs(Bs);return _s.get(Bs)}return{get:Ms,update:Es,getWireframeAttribute:Ts}}function WebGLIndexedBufferRenderer(ca,ga,ya,_a){var _s=_a.isWebGL2,Ss;function Ms(Ps){Ss=Ps}var Es,Cs;function Ts(Ps){Es=Ps.type,Cs=Ps.bytesPerElement}function Bs(Ps,Rs){ca.drawElements(Ss,Rs,Es,Ps*Cs),ya.update(Rs,Ss)}function Is(Ps,Rs,ks,$s){if($s!==0){var Os,Ls;if(_s)Os=ca,Ls="drawElementsInstanced";else if(Os=ga.get("ANGLE_instanced_arrays"),Ls="drawElementsInstancedANGLE",Os===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Os[Ls](Ss,ks,Es,Rs*Cs,$s),ya.update(ks,Ss,$s)}}this.setMode=Ms,this.setIndex=Ts,this.render=Bs,this.renderInstances=Is}function WebGLInfo(ca){var ga={geometries:0,textures:0},ya={frame:0,calls:0,triangles:0,points:0,lines:0};function _a(Ss,Ms,Es){switch(Es=Es||1,ya.calls++,Ms){case 4:ya.triangles+=Es*(Ss/3);break;case 1:ya.lines+=Es*(Ss/2);break;case 3:ya.lines+=Es*(Ss-1);break;case 2:ya.lines+=Es*Ss;break;case 0:ya.points+=Es*Ss;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ms);break}}function _s(){ya.frame++,ya.calls=0,ya.triangles=0,ya.points=0,ya.lines=0}return{memory:ga,render:ya,programs:null,autoReset:!0,reset:_s,update:_a}}function absNumericalSort(ca,ga){return Math.abs(ga[1])-Math.abs(ca[1])}function WebGLMorphtargets(ca){var ga={},ya=new Float32Array(8);function _a(_s,Ss,Ms,Es){var Cs=_s.morphTargetInfluences,Ts=Cs===void 0?0:Cs.length,Bs=ga[Ss.id];if(Bs===void 0){Bs=[];for(var Is=0;Is<Ts;Is++)Bs[Is]=[Is,0];ga[Ss.id]=Bs}for(var Ps=Ms.morphTargets&&Ss.morphAttributes.position,Rs=Ms.morphNormals&&Ss.morphAttributes.normal,Is=0;Is<Ts;Is++){var ks=Bs[Is];ks[1]!==0&&(Ps&&Ss.deleteAttribute("morphTarget"+Is),Rs&&Ss.deleteAttribute("morphNormal"+Is))}for(var Is=0;Is<Ts;Is++){var ks=Bs[Is];ks[0]=Is,ks[1]=Cs[Is]}Bs.sort(absNumericalSort);for(var $s=0,Is=0;Is<8;Is++){var ks=Bs[Is];if(ks){var Os=ks[0],Ls=ks[1];if(Ls){Ps&&Ss.setAttribute("morphTarget"+Is,Ps[Os]),Rs&&Ss.setAttribute("morphNormal"+Is,Rs[Os]),ya[Is]=Ls,$s+=Ls;continue}}ya[Is]=0}var Ds=Ss.morphTargetsRelative?1:1-$s;Es.getUniforms().setValue(ca,"morphTargetBaseInfluence",Ds),Es.getUniforms().setValue(ca,"morphTargetInfluences",ya)}return{update:_a}}function WebGLObjects(ca,ga,ya,_a){var _s=new WeakMap;function Ss(Es){var Cs=_a.render.frame,Ts=Es.geometry,Bs=ga.get(Es,Ts);return _s.get(Bs)!==Cs&&(Ts.isGeometry&&Bs.updateFromObject(Es),ga.update(Bs),_s.set(Bs,Cs)),Es.isInstancedMesh&&ya.update(Es.instanceMatrix,34962),Bs}function Ms(){_s=new WeakMap}return{update:Ss,dispose:Ms}}function CubeTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts){ca=ca!==void 0?ca:[],ga=ga!==void 0?ga:CubeReflectionMapping,Ms=Ms!==void 0?Ms:RGBFormat,Texture.call(this,ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(ca){this.image=ca}});function DataTexture2DArray(ca,ga,ya,_a){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:ya||1,depth:_a||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(ca,ga,ya,_a){Texture.call(this,null),this.image={data:ca||null,width:ga||1,height:ya||1,depth:_a||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(ca,ga,ya){var _a=ca[0];if(_a<=0||_a>0)return ca;var _s=ga*ya,Ss=arrayCacheF32[_s];if(Ss===void 0&&(Ss=new Float32Array(_s),arrayCacheF32[_s]=Ss),ga!==0){_a.toArray(Ss,0);for(var Ms=1,Es=0;Ms!==ga;++Ms)Es+=ya,ca[Ms].toArray(Ss,Es)}return Ss}function arraysEqual(ca,ga){if(ca.length!==ga.length)return!1;for(var ya=0,_a=ca.length;ya<_a;ya++)if(ca[ya]!==ga[ya])return!1;return!0}function copyArray(ca,ga){for(var ya=0,_a=ga.length;ya<_a;ya++)ca[ya]=ga[ya]}function allocTexUnits(ca,ga){var ya=arrayCacheI32[ga];ya===void 0&&(ya=new Int32Array(ga),arrayCacheI32[ga]=ya);for(var _a=0;_a!==ga;++_a)ya[_a]=ca.allocateTextureUnit();return ya}function setValueV1f(ca,ga){var ya=this.cache;ya[0]!==ga&&(ca.uniform1f(this.addr,ga),ya[0]=ga)}function setValueV2f(ca,ga){var ya=this.cache;if(ga.x!==void 0)(ya[0]!==ga.x||ya[1]!==ga.y)&&(ca.uniform2f(this.addr,ga.x,ga.y),ya[0]=ga.x,ya[1]=ga.y);else{if(arraysEqual(ya,ga))return;ca.uniform2fv(this.addr,ga),copyArray(ya,ga)}}function setValueV3f(ca,ga){var ya=this.cache;if(ga.x!==void 0)(ya[0]!==ga.x||ya[1]!==ga.y||ya[2]!==ga.z)&&(ca.uniform3f(this.addr,ga.x,ga.y,ga.z),ya[0]=ga.x,ya[1]=ga.y,ya[2]=ga.z);else if(ga.r!==void 0)(ya[0]!==ga.r||ya[1]!==ga.g||ya[2]!==ga.b)&&(ca.uniform3f(this.addr,ga.r,ga.g,ga.b),ya[0]=ga.r,ya[1]=ga.g,ya[2]=ga.b);else{if(arraysEqual(ya,ga))return;ca.uniform3fv(this.addr,ga),copyArray(ya,ga)}}function setValueV4f(ca,ga){var ya=this.cache;if(ga.x!==void 0)(ya[0]!==ga.x||ya[1]!==ga.y||ya[2]!==ga.z||ya[3]!==ga.w)&&(ca.uniform4f(this.addr,ga.x,ga.y,ga.z,ga.w),ya[0]=ga.x,ya[1]=ga.y,ya[2]=ga.z,ya[3]=ga.w);else{if(arraysEqual(ya,ga))return;ca.uniform4fv(this.addr,ga),copyArray(ya,ga)}}function setValueM2(ca,ga){var ya=this.cache,_a=ga.elements;if(_a===void 0){if(arraysEqual(ya,ga))return;ca.uniformMatrix2fv(this.addr,!1,ga),copyArray(ya,ga)}else{if(arraysEqual(ya,_a))return;mat2array.set(_a),ca.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(ya,_a)}}function setValueM3(ca,ga){var ya=this.cache,_a=ga.elements;if(_a===void 0){if(arraysEqual(ya,ga))return;ca.uniformMatrix3fv(this.addr,!1,ga),copyArray(ya,ga)}else{if(arraysEqual(ya,_a))return;mat3array.set(_a),ca.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(ya,_a)}}function setValueM4(ca,ga){var ya=this.cache,_a=ga.elements;if(_a===void 0){if(arraysEqual(ya,ga))return;ca.uniformMatrix4fv(this.addr,!1,ga),copyArray(ya,ga)}else{if(arraysEqual(ya,_a))return;mat4array.set(_a),ca.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(ya,_a)}}function setValueT1(ca,ga,ya){var _a=this.cache,_s=ya.allocateTextureUnit();_a[0]!==_s&&(ca.uniform1i(this.addr,_s),_a[0]=_s),ya.safeSetTexture2D(ga||emptyTexture,_s)}function setValueT2DArray1(ca,ga,ya){var _a=this.cache,_s=ya.allocateTextureUnit();_a[0]!==_s&&(ca.uniform1i(this.addr,_s),_a[0]=_s),ya.setTexture2DArray(ga||emptyTexture2dArray,_s)}function setValueT3D1(ca,ga,ya){var _a=this.cache,_s=ya.allocateTextureUnit();_a[0]!==_s&&(ca.uniform1i(this.addr,_s),_a[0]=_s),ya.setTexture3D(ga||emptyTexture3d,_s)}function setValueT6(ca,ga,ya){var _a=this.cache,_s=ya.allocateTextureUnit();_a[0]!==_s&&(ca.uniform1i(this.addr,_s),_a[0]=_s),ya.safeSetTextureCube(ga||emptyCubeTexture,_s)}function setValueV1i(ca,ga){var ya=this.cache;ya[0]!==ga&&(ca.uniform1i(this.addr,ga),ya[0]=ga)}function setValueV2i(ca,ga){var ya=this.cache;arraysEqual(ya,ga)||(ca.uniform2iv(this.addr,ga),copyArray(ya,ga))}function setValueV3i(ca,ga){var ya=this.cache;arraysEqual(ya,ga)||(ca.uniform3iv(this.addr,ga),copyArray(ya,ga))}function setValueV4i(ca,ga){var ya=this.cache;arraysEqual(ya,ga)||(ca.uniform4iv(this.addr,ga),copyArray(ya,ga))}function setValueV1ui(ca,ga){var ya=this.cache;ya[0]!==ga&&(ca.uniform1ui(this.addr,ga),ya[0]=ga)}function getSingularSetter(ca){switch(ca){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ca,ga){ca.uniform1fv(this.addr,ga)}function setValueV1iArray(ca,ga){ca.uniform1iv(this.addr,ga)}function setValueV2iArray(ca,ga){ca.uniform2iv(this.addr,ga)}function setValueV3iArray(ca,ga){ca.uniform3iv(this.addr,ga)}function setValueV4iArray(ca,ga){ca.uniform4iv(this.addr,ga)}function setValueV2fArray(ca,ga){var ya=flatten(ga,this.size,2);ca.uniform2fv(this.addr,ya)}function setValueV3fArray(ca,ga){var ya=flatten(ga,this.size,3);ca.uniform3fv(this.addr,ya)}function setValueV4fArray(ca,ga){var ya=flatten(ga,this.size,4);ca.uniform4fv(this.addr,ya)}function setValueM2Array(ca,ga){var ya=flatten(ga,this.size,4);ca.uniformMatrix2fv(this.addr,!1,ya)}function setValueM3Array(ca,ga){var ya=flatten(ga,this.size,9);ca.uniformMatrix3fv(this.addr,!1,ya)}function setValueM4Array(ca,ga){var ya=flatten(ga,this.size,16);ca.uniformMatrix4fv(this.addr,!1,ya)}function setValueT1Array(ca,ga,ya){var _a=ga.length,_s=allocTexUnits(ya,_a);ca.uniform1iv(this.addr,_s);for(var Ss=0;Ss!==_a;++Ss)ya.safeSetTexture2D(ga[Ss]||emptyTexture,_s[Ss])}function setValueT6Array(ca,ga,ya){var _a=ga.length,_s=allocTexUnits(ya,_a);ca.uniform1iv(this.addr,_s);for(var Ss=0;Ss!==_a;++Ss)ya.safeSetTextureCube(ga[Ss]||emptyCubeTexture,_s[Ss])}function getPureArraySetter(ca){switch(ca){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(ca,ga,ya){this.id=ca,this.addr=ya,this.cache=[],this.setValue=getSingularSetter(ga.type)}function PureArrayUniform(ca,ga,ya){this.id=ca,this.addr=ya,this.cache=[],this.size=ga.size,this.setValue=getPureArraySetter(ga.type)}PureArrayUniform.prototype.updateCache=function(ca){var ga=this.cache;ca instanceof Float32Array&&ga.length!==ca.length&&(this.cache=new Float32Array(ca.length)),copyArray(ga,ca)};function StructuredUniform(ca){this.id=ca,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(ca,ga,ya){for(var _a=this.seq,_s=0,Ss=_a.length;_s!==Ss;++_s){var Ms=_a[_s];Ms.setValue(ca,ga[Ms.id],ya)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(ca,ga){ca.seq.push(ga),ca.map[ga.id]=ga}function parseUniform(ca,ga,ya){var _a=ca.name,_s=_a.length;for(RePathPart.lastIndex=0;;){var Ss=RePathPart.exec(_a),Ms=RePathPart.lastIndex,Es=Ss[1],Cs=Ss[2]==="]",Ts=Ss[3];if(Cs&&(Es=Es|0),Ts===void 0||Ts==="["&&Ms+2===_s){addUniform(ya,Ts===void 0?new SingleUniform(Es,ca,ga):new PureArrayUniform(Es,ca,ga));break}else{var Bs=ya.map,Is=Bs[Es];Is===void 0&&(Is=new StructuredUniform(Es),addUniform(ya,Is)),ya=Is}}}function WebGLUniforms(ca,ga){this.seq=[],this.map={};for(var ya=ca.getProgramParameter(ga,35718),_a=0;_a<ya;++_a){var _s=ca.getActiveUniform(ga,_a),Ss=ca.getUniformLocation(ga,_s.name);parseUniform(_s,Ss,this)}}WebGLUniforms.prototype.setValue=function(ca,ga,ya,_a){var _s=this.map[ga];_s!==void 0&&_s.setValue(ca,ya,_a)};WebGLUniforms.prototype.setOptional=function(ca,ga,ya){var _a=ga[ya];_a!==void 0&&this.setValue(ca,ya,_a)};WebGLUniforms.upload=function(ca,ga,ya,_a){for(var _s=0,Ss=ga.length;_s!==Ss;++_s){var Ms=ga[_s],Es=ya[Ms.id];Es.needsUpdate!==!1&&Ms.setValue(ca,Es.value,_a)}};WebGLUniforms.seqWithValue=function(ca,ga){for(var ya=[],_a=0,_s=ca.length;_a!==_s;++_a){var Ss=ca[_a];Ss.id in ga&&ya.push(Ss)}return ya};function WebGLShader(ca,ga,ya){var _a=ca.createShader(ga);return ca.shaderSource(_a,ya),ca.compileShader(_a),_a}var programIdCount=0;function addLineNumbers(ca){for(var ga=ca.split(`
`),ya=0;ya<ga.length;ya++)ga[ya]=ya+1+": "+ga[ya];return ga.join(`
`)}function getEncodingComponents(ca){switch(ca){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+ca)}}function getShaderErrors(ca,ga,ya){var _a=ca.getShaderParameter(ga,35713),_s=ca.getShaderInfoLog(ga).trim();if(_a&&_s==="")return"";var Ss=ca.getShaderSource(ga);return"THREE.WebGLShader: gl.getShaderInfoLog() "+ya+`
`+_s+addLineNumbers(Ss)}function getTexelDecodingFunction(ca,ga){var ya=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return "+ya[0]+"ToLinear"+ya[1]+"; }"}function getTexelEncodingFunction(ca,ga){var ya=getEncodingComponents(ga);return"vec4 "+ca+"( vec4 value ) { return LinearTo"+ya[0]+ya[1]+"; }"}function getToneMappingFunction(ca,ga){var ya;switch(ga){case LinearToneMapping:ya="Linear";break;case ReinhardToneMapping:ya="Reinhard";break;case Uncharted2ToneMapping:ya="Uncharted2";break;case CineonToneMapping:ya="OptimizedCineon";break;case ACESFilmicToneMapping:ya="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+ga)}return"vec3 "+ca+"( vec3 color ) { return "+ya+"ToneMapping( color ); }"}function generateExtensions(ca){var ga=[ca.extensionDerivatives||ca.envMapCubeUV||ca.bumpMap||ca.tangentSpaceNormalMap||ca.clearcoatNormalMap||ca.flatShading||ca.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ca.extensionFragDepth||ca.logarithmicDepthBuffer)&&ca.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ca.extensionDrawBuffers&&ca.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ca.extensionShaderTextureLOD||ca.envMap)&&ca.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return ga.filter(filterEmptyLine).join(`
`)}function generateDefines(ca){var ga=[];for(var ya in ca){var _a=ca[ya];_a!==!1&&ga.push("#define "+ya+" "+_a)}return ga.join(`
`)}function fetchAttributeLocations(ca,ga){for(var ya={},_a=ca.getProgramParameter(ga,35721),_s=0;_s<_a;_s++){var Ss=ca.getActiveAttrib(ga,_s),Ms=Ss.name;ya[Ms]=ca.getAttribLocation(ga,Ms)}return ya}function filterEmptyLine(ca){return ca!==""}function replaceLightNums(ca,ga){return ca.replace(/NUM_DIR_LIGHTS/g,ga.numDirLights).replace(/NUM_SPOT_LIGHTS/g,ga.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,ga.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,ga.numPointLights).replace(/NUM_HEMI_LIGHTS/g,ga.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,ga.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,ga.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,ga.numPointLightShadows)}function replaceClippingPlaneNums(ca,ga){return ca.replace(/NUM_CLIPPING_PLANES/g,ga.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,ga.numClippingPlanes-ga.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ca){return ca.replace(includePattern,includeReplacer)}function includeReplacer(ca,ga){var ya=ShaderChunk[ga];if(ya===void 0)throw new Error("Can not resolve #include <"+ga+">");return resolveIncludes(ya)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(ca){return ca.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(ca,ga,ya,_a){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(ca,ga,ya,_a)}function loopReplacer(ca,ga,ya,_a){for(var _s="",Ss=parseInt(ga);Ss<parseInt(ya);Ss++)_s+=_a.replace(/\[ i \]/g,"[ "+Ss+" ]").replace(/UNROLLED_LOOP_INDEX/g,Ss);return _s}function generatePrecision(ca){var ga="precision "+ca.precision+` float;
precision `+ca.precision+" int;";return ca.precision==="highp"?ga+=`
#define HIGH_PRECISION`:ca.precision==="mediump"?ga+=`
#define MEDIUM_PRECISION`:ca.precision==="lowp"&&(ga+=`
#define LOW_PRECISION`),ga}function generateShadowMapTypeDefine(ca){var ga="SHADOWMAP_TYPE_BASIC";return ca.shadowMapType===PCFShadowMap?ga="SHADOWMAP_TYPE_PCF":ca.shadowMapType===PCFSoftShadowMap?ga="SHADOWMAP_TYPE_PCF_SOFT":ca.shadowMapType===VSMShadowMap&&(ga="SHADOWMAP_TYPE_VSM"),ga}function generateEnvMapTypeDefine(ca){var ga="ENVMAP_TYPE_CUBE";if(ca.envMap)switch(ca.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:ga="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:ga="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:ga="ENVMAP_TYPE_SPHERE";break}return ga}function generateEnvMapModeDefine(ca){var ga="ENVMAP_MODE_REFLECTION";if(ca.envMap)switch(ca.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:ga="ENVMAP_MODE_REFRACTION";break}return ga}function generateEnvMapBlendingDefine(ca){var ga="ENVMAP_BLENDING_NONE";if(ca.envMap)switch(ca.combine){case MultiplyOperation:ga="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:ga="ENVMAP_BLENDING_MIX";break;case AddOperation:ga="ENVMAP_BLENDING_ADD";break}return ga}function WebGLProgram(ca,ga,ya){var _a=ca.getContext(),_s=ya.defines,Ss=ya.vertexShader,Ms=ya.fragmentShader,Es=generateShadowMapTypeDefine(ya),Cs=generateEnvMapTypeDefine(ya),Ts=generateEnvMapModeDefine(ya),Bs=generateEnvMapBlendingDefine(ya),Is=ca.gammaFactor>0?ca.gammaFactor:1,Ps=ya.isWebGL2?"":generateExtensions(ya),Rs=generateDefines(_s),ks=_a.createProgram(),$s,Os;if(ya.isRawShaderMaterial?($s=[Rs].filter(filterEmptyLine).join(`
`),$s.length>0&&($s+=`
`),Os=[Ps,Rs].filter(filterEmptyLine).join(`
`),Os.length>0&&(Os+=`
`)):($s=[generatePrecision(ya),"#define SHADER_NAME "+ya.shaderName,Rs,ya.instancing?"#define USE_INSTANCING":"",ya.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Is,"#define MAX_BONES "+ya.maxBones,ya.useFog&&ya.fog?"#define USE_FOG":"",ya.useFog&&ya.fogExp2?"#define FOG_EXP2":"",ya.map?"#define USE_MAP":"",ya.envMap?"#define USE_ENVMAP":"",ya.envMap?"#define "+Ts:"",ya.lightMap?"#define USE_LIGHTMAP":"",ya.aoMap?"#define USE_AOMAP":"",ya.emissiveMap?"#define USE_EMISSIVEMAP":"",ya.bumpMap?"#define USE_BUMPMAP":"",ya.normalMap?"#define USE_NORMALMAP":"",ya.normalMap&&ya.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ya.normalMap&&ya.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ya.clearcoatMap?"#define USE_CLEARCOATMAP":"",ya.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ya.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ya.displacementMap&&ya.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",ya.specularMap?"#define USE_SPECULARMAP":"",ya.roughnessMap?"#define USE_ROUGHNESSMAP":"",ya.metalnessMap?"#define USE_METALNESSMAP":"",ya.alphaMap?"#define USE_ALPHAMAP":"",ya.vertexTangents?"#define USE_TANGENT":"",ya.vertexColors?"#define USE_COLOR":"",ya.vertexUvs?"#define USE_UV":"",ya.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ya.flatShading?"#define FLAT_SHADED":"",ya.skinning?"#define USE_SKINNING":"",ya.useVertexTexture?"#define BONE_TEXTURE":"",ya.morphTargets?"#define USE_MORPHTARGETS":"",ya.morphNormals&&ya.flatShading===!1?"#define USE_MORPHNORMALS":"",ya.doubleSided?"#define DOUBLE_SIDED":"",ya.flipSided?"#define FLIP_SIDED":"",ya.shadowMapEnabled?"#define USE_SHADOWMAP":"",ya.shadowMapEnabled?"#define "+Es:"",ya.sizeAttenuation?"#define USE_SIZEATTENUATION":"",ya.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ya.logarithmicDepthBuffer&&ya.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Os=[Ps,generatePrecision(ya),"#define SHADER_NAME "+ya.shaderName,Rs,ya.alphaTest?"#define ALPHATEST "+ya.alphaTest+(ya.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Is,ya.useFog&&ya.fog?"#define USE_FOG":"",ya.useFog&&ya.fogExp2?"#define FOG_EXP2":"",ya.map?"#define USE_MAP":"",ya.matcap?"#define USE_MATCAP":"",ya.envMap?"#define USE_ENVMAP":"",ya.envMap?"#define "+Cs:"",ya.envMap?"#define "+Ts:"",ya.envMap?"#define "+Bs:"",ya.lightMap?"#define USE_LIGHTMAP":"",ya.aoMap?"#define USE_AOMAP":"",ya.emissiveMap?"#define USE_EMISSIVEMAP":"",ya.bumpMap?"#define USE_BUMPMAP":"",ya.normalMap?"#define USE_NORMALMAP":"",ya.normalMap&&ya.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ya.normalMap&&ya.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ya.clearcoatMap?"#define USE_CLEARCOATMAP":"",ya.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ya.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ya.specularMap?"#define USE_SPECULARMAP":"",ya.roughnessMap?"#define USE_ROUGHNESSMAP":"",ya.metalnessMap?"#define USE_METALNESSMAP":"",ya.alphaMap?"#define USE_ALPHAMAP":"",ya.sheen?"#define USE_SHEEN":"",ya.vertexTangents?"#define USE_TANGENT":"",ya.vertexColors?"#define USE_COLOR":"",ya.vertexUvs?"#define USE_UV":"",ya.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ya.gradientMap?"#define USE_GRADIENTMAP":"",ya.flatShading?"#define FLAT_SHADED":"",ya.doubleSided?"#define DOUBLE_SIDED":"",ya.flipSided?"#define FLIP_SIDED":"",ya.shadowMapEnabled?"#define USE_SHADOWMAP":"",ya.shadowMapEnabled?"#define "+Es:"",ya.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",ya.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",ya.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ya.logarithmicDepthBuffer&&ya.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(ya.extensionShaderTextureLOD||ya.envMap)&&ya.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",ya.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",ya.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",ya.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",ya.toneMapping):"",ya.dithering?"#define DITHERING":"",ya.outputEncoding||ya.mapEncoding||ya.matcapEncoding||ya.envMapEncoding||ya.emissiveMapEncoding||ya.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",ya.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",ya.mapEncoding):"",ya.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",ya.matcapEncoding):"",ya.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",ya.envMapEncoding):"",ya.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",ya.emissiveMapEncoding):"",ya.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",ya.lightMapEncoding):"",ya.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",ya.outputEncoding):"",ya.depthPacking?"#define DEPTH_PACKING "+ya.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ss=resolveIncludes(Ss),Ss=replaceLightNums(Ss,ya),Ss=replaceClippingPlaneNums(Ss,ya),Ms=resolveIncludes(Ms),Ms=replaceLightNums(Ms,ya),Ms=replaceClippingPlaneNums(Ms,ya),Ss=unrollLoops(Ss),Ms=unrollLoops(Ms),ya.isWebGL2&&!ya.isRawShaderMaterial){var Ls=!1,Ds=/^\s*#version\s+300\s+es\s*\n/;ya.isShaderMaterial&&Ss.match(Ds)!==null&&Ms.match(Ds)!==null&&(Ls=!0,Ss=Ss.replace(Ds,""),Ms=Ms.replace(Ds,"")),$s=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+$s,Os=[`#version 300 es
`,"#define varying in",Ls?"":"out highp vec4 pc_fragColor;",Ls?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Os}var Fs=$s+Ss,Ns=Os+Ms,Vs=WebGLShader(_a,35633,Fs),Gs=WebGLShader(_a,35632,Ns);if(_a.attachShader(ks,Vs),_a.attachShader(ks,Gs),ya.index0AttributeName!==void 0?_a.bindAttribLocation(ks,0,ya.index0AttributeName):ya.morphTargets===!0&&_a.bindAttribLocation(ks,0,"position"),_a.linkProgram(ks),ca.debug.checkShaderErrors){var Us=_a.getProgramInfoLog(ks).trim(),zs=_a.getShaderInfoLog(Vs).trim(),Hs=_a.getShaderInfoLog(Gs).trim(),Qs=!0,js=!0;if(_a.getProgramParameter(ks,35714)===!1){Qs=!1;var Zs=getShaderErrors(_a,Vs,"vertex"),Ks=getShaderErrors(_a,Gs,"fragment");console.error("THREE.WebGLProgram: shader error: ",_a.getError(),"35715",_a.getProgramParameter(ks,35715),"gl.getProgramInfoLog",Us,Zs,Ks)}else Us!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Us):(zs===""||Hs==="")&&(js=!1);js&&(this.diagnostics={runnable:Qs,programLog:Us,vertexShader:{log:zs,prefix:$s},fragmentShader:{log:Hs,prefix:Os}})}_a.deleteShader(Vs),_a.deleteShader(Gs);var Ys;this.getUniforms=function(){return Ys===void 0&&(Ys=new WebGLUniforms(_a,ks)),Ys};var qs;return this.getAttributes=function(){return qs===void 0&&(qs=fetchAttributeLocations(_a,ks)),qs},this.destroy=function(){_a.deleteProgram(ks),this.program=void 0},this.name=ya.shaderName,this.id=programIdCount++,this.cacheKey=ga,this.usedTimes=1,this.program=ks,this.vertexShader=Vs,this.fragmentShader=Gs,this}function WebGLPrograms(ca,ga,ya){var _a=[],_s=ya.isWebGL2,Ss=ya.logarithmicDepthBuffer,Ms=ya.floatVertexTextures,Es=ya.precision,Cs=ya.maxVertexUniforms,Ts=ya.vertexTextures,Bs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Is=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function Ps($s,Os){var Ls;if(Os){var Ds=ShaderLib[Os];Ls={name:$s.type,uniforms:UniformsUtils.clone(Ds.uniforms),vertexShader:Ds.vertexShader,fragmentShader:Ds.fragmentShader}}else Ls={name:$s.type,uniforms:$s.uniforms,vertexShader:$s.vertexShader,fragmentShader:$s.fragmentShader};return Ls}function Rs($s){var Os=$s.skeleton,Ls=Os.bones;if(Ms)return 1024;var Ds=Cs,Fs=Math.floor((Ds-20)/4),Ns=Math.min(Fs,Ls.length);return Ns<Ls.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ls.length+" bones. This GPU supports "+Ns+"."),0):Ns}function ks($s){var Os;return $s?$s.isTexture?Os=$s.encoding:$s.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Os=$s.texture.encoding):Os=LinearEncoding,Os}this.getParameters=function($s,Os,Ls,Ds,Fs,Ns,Vs){var Gs=Ds.fog,Us=$s.isMeshStandardMaterial?Ds.environment:null,zs=$s.envMap||Us,Hs=Bs[$s.type],Qs=Vs.isSkinnedMesh?Rs(Vs):0;$s.precision!==null&&(Es=ya.getMaxPrecision($s.precision),Es!==$s.precision&&console.warn("THREE.WebGLProgram.getParameters:",$s.precision,"not supported, using",Es,"instead."));var js=Ps($s,Hs);$s.onBeforeCompile(js,ca);var Zs=ca.getRenderTarget(),Ks={isWebGL2:_s,shaderID:Hs,shaderName:js.name,uniforms:js.uniforms,vertexShader:js.vertexShader,fragmentShader:js.fragmentShader,defines:$s.defines,isRawShaderMaterial:$s.isRawShaderMaterial,isShaderMaterial:$s.isShaderMaterial,precision:Es,instancing:Vs.isInstancedMesh===!0,supportsVertexTextures:Ts,outputEncoding:Zs!==null?ks(Zs.texture):ca.outputEncoding,map:!!$s.map,mapEncoding:ks($s.map),matcap:!!$s.matcap,matcapEncoding:ks($s.matcap),envMap:!!zs,envMapMode:zs&&zs.mapping,envMapEncoding:ks(zs),envMapCubeUV:!!zs&&(zs.mapping===CubeUVReflectionMapping||zs.mapping===CubeUVRefractionMapping),lightMap:!!$s.lightMap,lightMapEncoding:ks($s.lightMap),aoMap:!!$s.aoMap,emissiveMap:!!$s.emissiveMap,emissiveMapEncoding:ks($s.emissiveMap),bumpMap:!!$s.bumpMap,normalMap:!!$s.normalMap,objectSpaceNormalMap:$s.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:$s.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!$s.clearcoatMap,clearcoatRoughnessMap:!!$s.clearcoatRoughnessMap,clearcoatNormalMap:!!$s.clearcoatNormalMap,displacementMap:!!$s.displacementMap,roughnessMap:!!$s.roughnessMap,metalnessMap:!!$s.metalnessMap,specularMap:!!$s.specularMap,alphaMap:!!$s.alphaMap,gradientMap:!!$s.gradientMap,sheen:!!$s.sheen,combine:$s.combine,vertexTangents:$s.normalMap&&$s.vertexTangents,vertexColors:$s.vertexColors,vertexUvs:!!$s.map||!!$s.bumpMap||!!$s.normalMap||!!$s.specularMap||!!$s.alphaMap||!!$s.emissiveMap||!!$s.roughnessMap||!!$s.metalnessMap||!!$s.clearcoatMap||!!$s.clearcoatRoughnessMap||!!$s.clearcoatNormalMap||!!$s.displacementMap,uvsVertexOnly:!(!!$s.map||!!$s.bumpMap||!!$s.normalMap||!!$s.specularMap||!!$s.alphaMap||!!$s.emissiveMap||!!$s.roughnessMap||!!$s.metalnessMap||!!$s.clearcoatNormalMap)&&!!$s.displacementMap,fog:!!Gs,useFog:$s.fog,fogExp2:Gs&&Gs.isFogExp2,flatShading:$s.flatShading,sizeAttenuation:$s.sizeAttenuation,logarithmicDepthBuffer:Ss,skinning:$s.skinning&&Qs>0,maxBones:Qs,useVertexTexture:Ms,morphTargets:$s.morphTargets,morphNormals:$s.morphNormals,maxMorphTargets:ca.maxMorphTargets,maxMorphNormals:ca.maxMorphNormals,numDirLights:Os.directional.length,numPointLights:Os.point.length,numSpotLights:Os.spot.length,numRectAreaLights:Os.rectArea.length,numHemiLights:Os.hemi.length,numDirLightShadows:Os.directionalShadowMap.length,numPointLightShadows:Os.pointShadowMap.length,numSpotLightShadows:Os.spotShadowMap.length,numClippingPlanes:Fs,numClipIntersection:Ns,dithering:$s.dithering,shadowMapEnabled:ca.shadowMap.enabled&&Ls.length>0,shadowMapType:ca.shadowMap.type,toneMapping:$s.toneMapped?ca.toneMapping:NoToneMapping,physicallyCorrectLights:ca.physicallyCorrectLights,premultipliedAlpha:$s.premultipliedAlpha,alphaTest:$s.alphaTest,doubleSided:$s.side===DoubleSide,flipSided:$s.side===BackSide,depthPacking:$s.depthPacking!==void 0?$s.depthPacking:!1,index0AttributeName:$s.index0AttributeName,extensionDerivatives:$s.extensions&&$s.extensions.derivatives,extensionFragDepth:$s.extensions&&$s.extensions.fragDepth,extensionDrawBuffers:$s.extensions&&$s.extensions.drawBuffers,extensionShaderTextureLOD:$s.extensions&&$s.extensions.shaderTextureLOD,rendererExtensionFragDepth:_s||ga.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:_s||ga.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:_s||ga.get("EXT_shader_texture_lod")!==null,onBeforeCompile:$s.onBeforeCompile};return Ks},this.getProgramCacheKey=function($s){var Os=[];if($s.shaderID?Os.push($s.shaderID):(Os.push($s.fragmentShader),Os.push($s.vertexShader)),$s.defines!==void 0)for(var Ls in $s.defines)Os.push(Ls),Os.push($s.defines[Ls]);if($s.isRawShaderMaterial===void 0){for(var Ds=0;Ds<Is.length;Ds++)Os.push($s[Is[Ds]]);Os.push(ca.outputEncoding),Os.push(ca.gammaFactor)}return Os.push($s.onBeforeCompile.toString()),Os.join()},this.acquireProgram=function($s,Os){for(var Ls,Ds=0,Fs=_a.length;Ds<Fs;Ds++){var Ns=_a[Ds];if(Ns.cacheKey===Os){Ls=Ns,++Ls.usedTimes;break}}return Ls===void 0&&(Ls=new WebGLProgram(ca,Os,$s),_a.push(Ls)),Ls},this.releaseProgram=function($s){if(--$s.usedTimes===0){var Os=_a.indexOf($s);_a[Os]=_a[_a.length-1],_a.pop(),$s.destroy()}},this.programs=_a}function WebGLProperties(){var ca=new WeakMap;function ga(Ss){var Ms=ca.get(Ss);return Ms===void 0&&(Ms={},ca.set(Ss,Ms)),Ms}function ya(Ss){ca.delete(Ss)}function _a(Ss,Ms,Es){ca.get(Ss)[Ms]=Es}function _s(){ca=new WeakMap}return{get:ga,remove:ya,update:_a,dispose:_s}}function painterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.program!==ga.program?ca.program.id-ga.program.id:ca.material.id!==ga.material.id?ca.material.id-ga.material.id:ca.z!==ga.z?ca.z-ga.z:ca.id-ga.id}function reversePainterSortStable(ca,ga){return ca.groupOrder!==ga.groupOrder?ca.groupOrder-ga.groupOrder:ca.renderOrder!==ga.renderOrder?ca.renderOrder-ga.renderOrder:ca.z!==ga.z?ga.z-ca.z:ca.id-ga.id}function WebGLRenderList(){var ca=[],ga=0,ya=[],_a=[],_s={id:-1};function Ss(){ga=0,ya.length=0,_a.length=0}function Ms(Is,Ps,Rs,ks,$s,Os){var Ls=ca[ga];return Ls===void 0?(Ls={id:Is.id,object:Is,geometry:Ps,material:Rs,program:Rs.program||_s,groupOrder:ks,renderOrder:Is.renderOrder,z:$s,group:Os},ca[ga]=Ls):(Ls.id=Is.id,Ls.object=Is,Ls.geometry=Ps,Ls.material=Rs,Ls.program=Rs.program||_s,Ls.groupOrder=ks,Ls.renderOrder=Is.renderOrder,Ls.z=$s,Ls.group=Os),ga++,Ls}function Es(Is,Ps,Rs,ks,$s,Os){var Ls=Ms(Is,Ps,Rs,ks,$s,Os);(Rs.transparent===!0?_a:ya).push(Ls)}function Cs(Is,Ps,Rs,ks,$s,Os){var Ls=Ms(Is,Ps,Rs,ks,$s,Os);(Rs.transparent===!0?_a:ya).unshift(Ls)}function Ts(Is,Ps){ya.length>1&&ya.sort(Is||painterSortStable),_a.length>1&&_a.sort(Ps||reversePainterSortStable)}function Bs(){for(var Is=ga,Ps=ca.length;Is<Ps;Is++){var Rs=ca[Is];if(Rs.id===null)break;Rs.id=null,Rs.object=null,Rs.geometry=null,Rs.material=null,Rs.program=null,Rs.group=null}}return{opaque:ya,transparent:_a,init:Ss,push:Es,unshift:Cs,finish:Bs,sort:Ts}}function WebGLRenderLists(){var ca=new WeakMap;function ga(_s){var Ss=_s.target;Ss.removeEventListener("dispose",ga),ca.delete(Ss)}function ya(_s,Ss){var Ms=ca.get(_s),Es;return Ms===void 0?(Es=new WebGLRenderList,ca.set(_s,new WeakMap),ca.get(_s).set(Ss,Es),_s.addEventListener("dispose",ga)):(Es=Ms.get(Ss),Es===void 0&&(Es=new WebGLRenderList,Ms.set(Ss,Es))),Es}function _a(){ca=new WeakMap}return{get:ya,dispose:_a}}function UniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var ya;switch(ga.type){case"DirectionalLight":ya={direction:new Vector3,color:new Color};break;case"SpotLight":ya={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":ya={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":ya={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":ya={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ca[ga.id]=ya,ya}}}function ShadowUniformsCache(){var ca={};return{get:function(ga){if(ca[ga.id]!==void 0)return ca[ga.id];var ya;switch(ga.type){case"DirectionalLight":ya={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":ya={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":ya={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ca[ga.id]=ya,ya}}}var nextVersion=0;function shadowCastingLightsFirst(ca,ga){return(ga.castShadow?1:0)-(ca.castShadow?1:0)}function WebGLLights(){for(var ca=new UniformsCache,ga=ShadowUniformsCache(),ya={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},_a=0;_a<9;_a++)ya.probe.push(new Vector3);var _s=new Vector3,Ss=new Matrix4,Ms=new Matrix4;function Es(Cs,Ts,Bs){for(var Is=0,Ps=0,Rs=0,ks=0;ks<9;ks++)ya.probe[ks].set(0,0,0);var $s=0,Os=0,Ls=0,Ds=0,Fs=0,Ns=0,Vs=0,Gs=0,Us=Bs.matrixWorldInverse;Cs.sort(shadowCastingLightsFirst);for(var ks=0,zs=Cs.length;ks<zs;ks++){var Hs=Cs[ks],Qs=Hs.color,js=Hs.intensity,Zs=Hs.distance,Ks=Hs.shadow&&Hs.shadow.map?Hs.shadow.map.texture:null;if(Hs.isAmbientLight)Is+=Qs.r*js,Ps+=Qs.g*js,Rs+=Qs.b*js;else if(Hs.isLightProbe)for(var Ys=0;Ys<9;Ys++)ya.probe[Ys].addScaledVector(Hs.sh.coefficients[Ys],js);else if(Hs.isDirectionalLight){var qs=ca.get(Hs);if(qs.color.copy(Hs.color).multiplyScalar(Hs.intensity),qs.direction.setFromMatrixPosition(Hs.matrixWorld),_s.setFromMatrixPosition(Hs.target.matrixWorld),qs.direction.sub(_s),qs.direction.transformDirection(Us),Hs.castShadow){var eu=Hs.shadow,Js=ga.get(Hs);Js.shadowBias=eu.bias,Js.shadowRadius=eu.radius,Js.shadowMapSize=eu.mapSize,ya.directionalShadow[$s]=Js,ya.directionalShadowMap[$s]=Ks,ya.directionalShadowMatrix[$s]=Hs.shadow.matrix,Ns++}ya.directional[$s]=qs,$s++}else if(Hs.isSpotLight){var qs=ca.get(Hs);if(qs.position.setFromMatrixPosition(Hs.matrixWorld),qs.position.applyMatrix4(Us),qs.color.copy(Qs).multiplyScalar(js),qs.distance=Zs,qs.direction.setFromMatrixPosition(Hs.matrixWorld),_s.setFromMatrixPosition(Hs.target.matrixWorld),qs.direction.sub(_s),qs.direction.transformDirection(Us),qs.coneCos=Math.cos(Hs.angle),qs.penumbraCos=Math.cos(Hs.angle*(1-Hs.penumbra)),qs.decay=Hs.decay,Hs.castShadow){var eu=Hs.shadow,Js=ga.get(Hs);Js.shadowBias=eu.bias,Js.shadowRadius=eu.radius,Js.shadowMapSize=eu.mapSize,ya.spotShadow[Ls]=Js,ya.spotShadowMap[Ls]=Ks,ya.spotShadowMatrix[Ls]=Hs.shadow.matrix,Gs++}ya.spot[Ls]=qs,Ls++}else if(Hs.isRectAreaLight){var qs=ca.get(Hs);qs.color.copy(Qs).multiplyScalar(js),qs.position.setFromMatrixPosition(Hs.matrixWorld),qs.position.applyMatrix4(Us),Ms.identity(),Ss.copy(Hs.matrixWorld),Ss.premultiply(Us),Ms.extractRotation(Ss),qs.halfWidth.set(Hs.width*.5,0,0),qs.halfHeight.set(0,Hs.height*.5,0),qs.halfWidth.applyMatrix4(Ms),qs.halfHeight.applyMatrix4(Ms),ya.rectArea[Ds]=qs,Ds++}else if(Hs.isPointLight){var qs=ca.get(Hs);if(qs.position.setFromMatrixPosition(Hs.matrixWorld),qs.position.applyMatrix4(Us),qs.color.copy(Hs.color).multiplyScalar(Hs.intensity),qs.distance=Hs.distance,qs.decay=Hs.decay,Hs.castShadow){var eu=Hs.shadow,Js=ga.get(Hs);Js.shadowBias=eu.bias,Js.shadowRadius=eu.radius,Js.shadowMapSize=eu.mapSize,Js.shadowCameraNear=eu.camera.near,Js.shadowCameraFar=eu.camera.far,ya.pointShadow[Os]=Js,ya.pointShadowMap[Os]=Ks,ya.pointShadowMatrix[Os]=Hs.shadow.matrix,Vs++}ya.point[Os]=qs,Os++}else if(Hs.isHemisphereLight){var qs=ca.get(Hs);qs.direction.setFromMatrixPosition(Hs.matrixWorld),qs.direction.transformDirection(Us),qs.direction.normalize(),qs.skyColor.copy(Hs.color).multiplyScalar(js),qs.groundColor.copy(Hs.groundColor).multiplyScalar(js),ya.hemi[Fs]=qs,Fs++}}ya.ambient[0]=Is,ya.ambient[1]=Ps,ya.ambient[2]=Rs;var Xs=ya.hash;(Xs.directionalLength!==$s||Xs.pointLength!==Os||Xs.spotLength!==Ls||Xs.rectAreaLength!==Ds||Xs.hemiLength!==Fs||Xs.numDirectionalShadows!==Ns||Xs.numPointShadows!==Vs||Xs.numSpotShadows!==Gs)&&(ya.directional.length=$s,ya.spot.length=Ls,ya.rectArea.length=Ds,ya.point.length=Os,ya.hemi.length=Fs,ya.directionalShadow.length=Ns,ya.directionalShadowMap.length=Ns,ya.pointShadow.length=Vs,ya.pointShadowMap.length=Vs,ya.spotShadow.length=Gs,ya.spotShadowMap.length=Gs,ya.directionalShadowMatrix.length=Ns,ya.pointShadowMatrix.length=Vs,ya.spotShadowMatrix.length=Gs,Xs.directionalLength=$s,Xs.pointLength=Os,Xs.spotLength=Ls,Xs.rectAreaLength=Ds,Xs.hemiLength=Fs,Xs.numDirectionalShadows=Ns,Xs.numPointShadows=Vs,Xs.numSpotShadows=Gs,ya.version=nextVersion++)}return{setup:Es,state:ya}}function WebGLRenderState(){var ca=new WebGLLights,ga=[],ya=[];function _a(){ga.length=0,ya.length=0}function _s(Cs){ga.push(Cs)}function Ss(Cs){ya.push(Cs)}function Ms(Cs){ca.setup(ga,ya,Cs)}var Es={lightsArray:ga,shadowsArray:ya,lights:ca};return{init:_a,state:Es,setupLights:Ms,pushLight:_s,pushShadow:Ss}}function WebGLRenderStates(){var ca=new WeakMap;function ga(_s){var Ss=_s.target;Ss.removeEventListener("dispose",ga),ca.delete(Ss)}function ya(_s,Ss){var Ms;return ca.has(_s)===!1?(Ms=new WebGLRenderState,ca.set(_s,new WeakMap),ca.get(_s).set(Ss,Ms),_s.addEventListener("dispose",ga)):ca.get(_s).has(Ss)===!1?(Ms=new WebGLRenderState,ca.get(_s).set(Ss,Ms)):Ms=ca.get(_s).get(Ss),Ms}function _a(){ca=new WeakMap}return{get:ya,dispose:_a}}function MeshDepthMaterial(ca){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(ca)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.depthPacking=ca.depthPacking,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this};function MeshDistanceMaterial(ca){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(ca)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.referencePosition.copy(ca.referencePosition),this.nearDistance=ca.nearDistance,this.farDistance=ca.farDistance,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.map=ca.map,this.alphaMap=ca.alphaMap,this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(ca,ga,ya){var _a=new Frustum,_s=new Vector2,Ss=new Vector2,Ms=new Vector4,Es=[],Cs=[],Ts={},Bs={0:BackSide,1:FrontSide,2:DoubleSide},Is=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),Ps=Is.clone();Ps.defines.HORIZONAL_PASS=1;var Rs=new BufferGeometry;Rs.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var ks=new Mesh(Rs,Is),$s=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Vs,Gs,Us){if($s.enabled!==!1&&!($s.autoUpdate===!1&&$s.needsUpdate===!1)&&Vs.length!==0){var zs=ca.getRenderTarget(),Hs=ca.getActiveCubeFace(),Qs=ca.getActiveMipmapLevel(),js=ca.state;js.setBlending(NoBlending),js.buffers.color.setClear(1,1,1,1),js.buffers.depth.setTest(!0),js.setScissorTest(!1);for(var Zs=0,Ks=Vs.length;Zs<Ks;Zs++){var Ys=Vs[Zs],qs=Ys.shadow;if(qs===void 0){console.warn("THREE.WebGLShadowMap:",Ys,"has no shadow.");continue}_s.copy(qs.mapSize);var eu=qs.getFrameExtents();if(_s.multiply(eu),Ss.copy(qs.mapSize),(_s.x>ya||_s.y>ya)&&(_s.x>ya&&(Ss.x=Math.floor(ya/eu.x),_s.x=Ss.x*eu.x,qs.mapSize.x=Ss.x),_s.y>ya&&(Ss.y=Math.floor(ya/eu.y),_s.y=Ss.y*eu.y,qs.mapSize.y=Ss.y)),qs.map===null&&!qs.isPointLightShadow&&this.type===VSMShadowMap){var Js={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};qs.map=new WebGLRenderTarget(_s.x,_s.y,Js),qs.map.texture.name=Ys.name+".shadowMap",qs.mapPass=new WebGLRenderTarget(_s.x,_s.y,Js),qs.camera.updateProjectionMatrix()}if(qs.map===null){var Js={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};qs.map=new WebGLRenderTarget(_s.x,_s.y,Js),qs.map.texture.name=Ys.name+".shadowMap",qs.camera.updateProjectionMatrix()}ca.setRenderTarget(qs.map),ca.clear();for(var Xs=qs.getViewportCount(),ru=0;ru<Xs;ru++){var su=qs.getViewport(ru);Ms.set(Ss.x*su.x,Ss.y*su.y,Ss.x*su.z,Ss.y*su.w),js.viewport(Ms),qs.updateMatrices(Ys,ru),_a=qs.getFrustum(),Ns(Gs,Us,qs.camera,Ys,this.type)}!qs.isPointLightShadow&&this.type===VSMShadowMap&&Os(qs,Us)}$s.needsUpdate=!1,ca.setRenderTarget(zs,Hs,Qs)}};function Os(Vs,Gs){var Us=ga.update(ks);Is.uniforms.shadow_pass.value=Vs.map.texture,Is.uniforms.resolution.value=Vs.mapSize,Is.uniforms.radius.value=Vs.radius,ca.setRenderTarget(Vs.mapPass),ca.clear(),ca.renderBufferDirect(Gs,null,Us,Is,ks,null),Ps.uniforms.shadow_pass.value=Vs.mapPass.texture,Ps.uniforms.resolution.value=Vs.mapSize,Ps.uniforms.radius.value=Vs.radius,ca.setRenderTarget(Vs.map),ca.clear(),ca.renderBufferDirect(Gs,null,Us,Ps,ks,null)}function Ls(Vs,Gs,Us){var zs=Vs<<0|Gs<<1|Us<<2,Hs=Es[zs];return Hs===void 0&&(Hs=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:Vs,skinning:Gs}),Es[zs]=Hs),Hs}function Ds(Vs,Gs,Us){var zs=Vs<<0|Gs<<1|Us<<2,Hs=Cs[zs];return Hs===void 0&&(Hs=new MeshDistanceMaterial({morphTargets:Vs,skinning:Gs}),Cs[zs]=Hs),Hs}function Fs(Vs,Gs,Us,zs,Hs,Qs,js){var Zs=null,Ks=Ls,Ys=Vs.customDepthMaterial;if(zs.isPointLight===!0&&(Ks=Ds,Ys=Vs.customDistanceMaterial),Ys===void 0){var qs=!1;Us.morphTargets===!0&&(qs=Gs.morphAttributes&&Gs.morphAttributes.position&&Gs.morphAttributes.position.length>0);var eu=!1;Vs.isSkinnedMesh===!0&&(Us.skinning===!0?eu=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Vs));var Js=Vs.isInstancedMesh===!0;Zs=Ks(qs,eu,Js)}else Zs=Ys;if(ca.localClippingEnabled&&Us.clipShadows===!0&&Us.clippingPlanes.length!==0){var Xs=Zs.uuid,ru=Us.uuid,su=Ts[Xs];su===void 0&&(su={},Ts[Xs]=su);var lu=su[ru];lu===void 0&&(lu=Zs.clone(),su[ru]=lu),Zs=lu}return Zs.visible=Us.visible,Zs.wireframe=Us.wireframe,js===VSMShadowMap?Zs.side=Us.shadowSide!==null?Us.shadowSide:Us.side:Zs.side=Us.shadowSide!==null?Us.shadowSide:Bs[Us.side],Zs.clipShadows=Us.clipShadows,Zs.clippingPlanes=Us.clippingPlanes,Zs.clipIntersection=Us.clipIntersection,Zs.wireframeLinewidth=Us.wireframeLinewidth,Zs.linewidth=Us.linewidth,zs.isPointLight===!0&&Zs.isMeshDistanceMaterial===!0&&(Zs.referencePosition.setFromMatrixPosition(zs.matrixWorld),Zs.nearDistance=Hs,Zs.farDistance=Qs),Zs}function Ns(Vs,Gs,Us,zs,Hs){if(Vs.visible!==!1){var Qs=Vs.layers.test(Gs.layers);if(Qs&&(Vs.isMesh||Vs.isLine||Vs.isPoints)&&(Vs.castShadow||Vs.receiveShadow&&Hs===VSMShadowMap)&&(!Vs.frustumCulled||_a.intersectsObject(Vs))){Vs.modelViewMatrix.multiplyMatrices(Us.matrixWorldInverse,Vs.matrixWorld);var js=ga.update(Vs),Zs=Vs.material;if(Array.isArray(Zs))for(var Ks=js.groups,Ys=0,qs=Ks.length;Ys<qs;Ys++){var eu=Ks[Ys],Js=Zs[eu.materialIndex];if(Js&&Js.visible){var Xs=Fs(Vs,js,Js,zs,Us.near,Us.far,Hs);ca.renderBufferDirect(Us,null,js,Xs,Vs,eu)}}else if(Zs.visible){var Xs=Fs(Vs,js,Zs,zs,Us.near,Us.far,Hs);ca.renderBufferDirect(Us,null,js,Xs,Vs,null)}}for(var ru=Vs.children,su=0,lu=ru.length;su<lu;su++)Ns(ru[su],Gs,Us,zs,Hs)}}}function WebGLState(ca,ga,ya){var _a=ya.isWebGL2;function _s(){var uu=!1,$u=new Vector4,ku=null,Ju=new Vector4(0,0,0,0);return{setMask:function(Fu){ku!==Fu&&!uu&&(ca.colorMask(Fu,Fu,Fu,Fu),ku=Fu)},setLocked:function(Fu){uu=Fu},setClear:function(Fu,yl,xl,_l,Bl){Bl===!0&&(Fu*=_l,yl*=_l,xl*=_l),$u.set(Fu,yl,xl,_l),Ju.equals($u)===!1&&(ca.clearColor(Fu,yl,xl,_l),Ju.copy($u))},reset:function(){uu=!1,ku=null,Ju.set(-1,0,0,0)}}}function Ss(){var uu=!1,$u=null,ku=null,Ju=null;return{setTest:function(Fu){Fu?wu(2929):vu(2929)},setMask:function(Fu){$u!==Fu&&!uu&&(ca.depthMask(Fu),$u=Fu)},setFunc:function(Fu){if(ku!==Fu){if(Fu)switch(Fu){case NeverDepth:ca.depthFunc(512);break;case AlwaysDepth:ca.depthFunc(519);break;case LessDepth:ca.depthFunc(513);break;case LessEqualDepth:ca.depthFunc(515);break;case EqualDepth:ca.depthFunc(514);break;case GreaterEqualDepth:ca.depthFunc(518);break;case GreaterDepth:ca.depthFunc(516);break;case NotEqualDepth:ca.depthFunc(517);break;default:ca.depthFunc(515)}else ca.depthFunc(515);ku=Fu}},setLocked:function(Fu){uu=Fu},setClear:function(Fu){Ju!==Fu&&(ca.clearDepth(Fu),Ju=Fu)},reset:function(){uu=!1,$u=null,ku=null,Ju=null}}}function Ms(){var uu=!1,$u=null,ku=null,Ju=null,Fu=null,yl=null,xl=null,_l=null,Bl=null;return{setTest:function(Al){uu||(Al?wu(2960):vu(2960))},setMask:function(Al){$u!==Al&&!uu&&(ca.stencilMask(Al),$u=Al)},setFunc:function(Al,Cl,Il){(ku!==Al||Ju!==Cl||Fu!==Il)&&(ca.stencilFunc(Al,Cl,Il),ku=Al,Ju=Cl,Fu=Il)},setOp:function(Al,Cl,Il){(yl!==Al||xl!==Cl||_l!==Il)&&(ca.stencilOp(Al,Cl,Il),yl=Al,xl=Cl,_l=Il)},setLocked:function(Al){uu=Al},setClear:function(Al){Bl!==Al&&(ca.clearStencil(Al),Bl=Al)},reset:function(){uu=!1,$u=null,ku=null,Ju=null,Fu=null,yl=null,xl=null,_l=null,Bl=null}}}var Es=new _s,Cs=new Ss,Ts=new Ms,Bs=ca.getParameter(34921),Is=new Uint8Array(Bs),Ps=new Uint8Array(Bs),Rs=new Uint8Array(Bs),ks={},$s=null,Os=null,Ls=null,Ds=null,Fs=null,Ns=null,Vs=null,Gs=null,Us=null,zs=!1,Hs=null,Qs=null,js=null,Zs=null,Ks=null,Ys=ca.getParameter(35661),qs=!1,eu=0,Js=ca.getParameter(7938);Js.indexOf("WebGL")!==-1?(eu=parseFloat(/^WebGL\ ([0-9])/.exec(Js)[1]),qs=eu>=1):Js.indexOf("OpenGL ES")!==-1&&(eu=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(Js)[1]),qs=eu>=2);var Xs=null,ru={},su=new Vector4,lu=new Vector4;function cu(uu,$u,ku){var Ju=new Uint8Array(4),Fu=ca.createTexture();ca.bindTexture(uu,Fu),ca.texParameteri(uu,10241,9728),ca.texParameteri(uu,10240,9728);for(var yl=0;yl<ku;yl++)ca.texImage2D($u+yl,0,6408,1,1,0,6408,5121,Ju);return Fu}var xu={};xu[3553]=cu(3553,3553,1),xu[34067]=cu(34067,34069,6),Es.setClear(0,0,0,1),Cs.setClear(1),Ts.setClear(0),wu(2929),Cs.setFunc(LessEqualDepth),tu(!1),ou(CullFaceBack),wu(2884),Du(NoBlending);function bu(){for(var uu=0,$u=Is.length;uu<$u;uu++)Is[uu]=0}function yu(uu){fu(uu,0)}function fu(uu,$u){if(Is[uu]=1,Ps[uu]===0&&(ca.enableVertexAttribArray(uu),Ps[uu]=1),Rs[uu]!==$u){var ku=_a?ca:ga.get("ANGLE_instanced_arrays");ku[_a?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](uu,$u),Rs[uu]=$u}}function gu(){for(var uu=0,$u=Ps.length;uu!==$u;++uu)Ps[uu]!==Is[uu]&&(ca.disableVertexAttribArray(uu),Ps[uu]=0)}function Su(uu,$u,ku,Ju,Fu,yl){_a===!0&&(ku===5124||ku===5125)?ca.vertexAttribIPointer(uu,$u,ku,Ju,Fu,yl):ca.vertexAttribPointer(uu,$u,ku,Ju,Fu,yl)}function wu(uu){ks[uu]!==!0&&(ca.enable(uu),ks[uu]=!0)}function vu(uu){ks[uu]!==!1&&(ca.disable(uu),ks[uu]=!1)}function pu(uu){return $s!==uu?(ca.useProgram(uu),$s=uu,!0):!1}var Eu={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(_a)Eu[MinEquation]=32775,Eu[MaxEquation]=32776;else{var Tu=ga.get("EXT_blend_minmax");Tu!==null&&(Eu[MinEquation]=Tu.MIN_EXT,Eu[MaxEquation]=Tu.MAX_EXT)}var zu={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Du(uu,$u,ku,Ju,Fu,yl,xl,_l){if(uu===NoBlending){Os&&(vu(3042),Os=!1);return}if(Os||(wu(3042),Os=!0),uu!==CustomBlending){if(uu!==Ls||_l!==zs){if((Ds!==AddEquation||Vs!==AddEquation)&&(ca.blendEquation(32774),Ds=AddEquation,Vs=AddEquation),_l)switch(uu){case NormalBlending:ca.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ca.blendFunc(1,1);break;case SubtractiveBlending:ca.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:ca.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",uu);break}else switch(uu){case NormalBlending:ca.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ca.blendFunc(770,1);break;case SubtractiveBlending:ca.blendFunc(0,769);break;case MultiplyBlending:ca.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",uu);break}Fs=null,Ns=null,Gs=null,Us=null,Ls=uu,zs=_l}return}Fu=Fu||$u,yl=yl||ku,xl=xl||Ju,($u!==Ds||Fu!==Vs)&&(ca.blendEquationSeparate(Eu[$u],Eu[Fu]),Ds=$u,Vs=Fu),(ku!==Fs||Ju!==Ns||yl!==Gs||xl!==Us)&&(ca.blendFuncSeparate(zu[ku],zu[Ju],zu[yl],zu[xl]),Fs=ku,Ns=Ju,Gs=yl,Us=xl),Ls=uu,zs=null}function Gu(uu,$u){uu.side===DoubleSide?vu(2884):wu(2884);var ku=uu.side===BackSide;$u&&(ku=!ku),tu(ku),uu.blending===NormalBlending&&uu.transparent===!1?Du(NoBlending):Du(uu.blending,uu.blendEquation,uu.blendSrc,uu.blendDst,uu.blendEquationAlpha,uu.blendSrcAlpha,uu.blendDstAlpha,uu.premultipliedAlpha),Cs.setFunc(uu.depthFunc),Cs.setTest(uu.depthTest),Cs.setMask(uu.depthWrite),Es.setMask(uu.colorWrite);var Ju=uu.stencilWrite;Ts.setTest(Ju),Ju&&(Ts.setMask(uu.stencilWriteMask),Ts.setFunc(uu.stencilFunc,uu.stencilRef,uu.stencilFuncMask),Ts.setOp(uu.stencilFail,uu.stencilZFail,uu.stencilZPass)),Mu(uu.polygonOffset,uu.polygonOffsetFactor,uu.polygonOffsetUnits)}function tu(uu){Hs!==uu&&(uu?ca.frontFace(2304):ca.frontFace(2305),Hs=uu)}function ou(uu){uu!==CullFaceNone?(wu(2884),uu!==Qs&&(uu===CullFaceBack?ca.cullFace(1029):uu===CullFaceFront?ca.cullFace(1028):ca.cullFace(1032))):vu(2884),Qs=uu}function Cu(uu){uu!==js&&(qs&&ca.lineWidth(uu),js=uu)}function Mu(uu,$u,ku){uu?(wu(32823),(Zs!==$u||Ks!==ku)&&(ca.polygonOffset($u,ku),Zs=$u,Ks=ku)):vu(32823)}function Wu(uu){uu?wu(3089):vu(3089)}function Lu(uu){uu===void 0&&(uu=33984+Ys-1),Xs!==uu&&(ca.activeTexture(uu),Xs=uu)}function Bu(uu,$u){Xs===null&&Lu();var ku=ru[Xs];ku===void 0&&(ku={type:void 0,texture:void 0},ru[Xs]=ku),(ku.type!==uu||ku.texture!==$u)&&(ca.bindTexture(uu,$u||xu[uu]),ku.type=uu,ku.texture=$u)}function vl(){var uu=ru[Xs];uu!==void 0&&uu.type!==void 0&&(ca.bindTexture(uu.type,null),uu.type=void 0,uu.texture=void 0)}function Ku(){try{ca.compressedTexImage2D.apply(ca,arguments)}catch(uu){console.error("THREE.WebGLState:",uu)}}function ju(){try{ca.texImage2D.apply(ca,arguments)}catch(uu){console.error("THREE.WebGLState:",uu)}}function Pu(){try{ca.texImage3D.apply(ca,arguments)}catch(uu){console.error("THREE.WebGLState:",uu)}}function Ou(uu){su.equals(uu)===!1&&(ca.scissor(uu.x,uu.y,uu.z,uu.w),su.copy(uu))}function Ru(uu){lu.equals(uu)===!1&&(ca.viewport(uu.x,uu.y,uu.z,uu.w),lu.copy(uu))}function Nu(){for(var uu=0;uu<Ps.length;uu++)Ps[uu]===1&&(ca.disableVertexAttribArray(uu),Ps[uu]=0);ks={},Xs=null,ru={},$s=null,Ls=null,Hs=null,Qs=null,Es.reset(),Cs.reset(),Ts.reset()}return{buffers:{color:Es,depth:Cs,stencil:Ts},initAttributes:bu,enableAttribute:yu,enableAttributeAndDivisor:fu,disableUnusedAttributes:gu,vertexAttribPointer:Su,enable:wu,disable:vu,useProgram:pu,setBlending:Du,setMaterial:Gu,setFlipSided:tu,setCullFace:ou,setLineWidth:Cu,setPolygonOffset:Mu,setScissorTest:Wu,activeTexture:Lu,bindTexture:Bu,unbindTexture:vl,compressedTexImage2D:Ku,texImage2D:ju,texImage3D:Pu,scissor:Ou,viewport:Ru,reset:Nu}}function WebGLTextures(ca,ga,ya,_a,_s,Ss,Ms){var Es=_s.isWebGL2,Cs=_s.maxTextures,Ts=_s.maxCubemapSize,Bs=_s.maxTextureSize,Is=_s.maxSamples,Ps=new WeakMap,Rs,ks=!1;try{ks=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function $s(tu,ou){return ks?new OffscreenCanvas(tu,ou):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Os(tu,ou,Cu,Mu){var Wu=1;if((tu.width>Mu||tu.height>Mu)&&(Wu=Mu/Math.max(tu.width,tu.height)),Wu<1||ou===!0)if(typeof HTMLImageElement!="undefined"&&tu instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&tu instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&tu instanceof ImageBitmap){var Lu=ou?MathUtils.floorPowerOfTwo:Math.floor,Bu=Lu(Wu*tu.width),vl=Lu(Wu*tu.height);Rs===void 0&&(Rs=$s(Bu,vl));var Ku=Cu?$s(Bu,vl):Rs;Ku.width=Bu,Ku.height=vl;var ju=Ku.getContext("2d");return ju.drawImage(tu,0,0,Bu,vl),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+tu.width+"x"+tu.height+") to ("+Bu+"x"+vl+")."),Ku}else return"data"in tu&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+tu.width+"x"+tu.height+")."),tu;return tu}function Ls(tu){return MathUtils.isPowerOfTwo(tu.width)&&MathUtils.isPowerOfTwo(tu.height)}function Ds(tu){return Es?!1:tu.wrapS!==ClampToEdgeWrapping||tu.wrapT!==ClampToEdgeWrapping||tu.minFilter!==NearestFilter&&tu.minFilter!==LinearFilter}function Fs(tu,ou){return tu.generateMipmaps&&ou&&tu.minFilter!==NearestFilter&&tu.minFilter!==LinearFilter}function Ns(tu,ou,Cu,Mu){ca.generateMipmap(tu);var Wu=_a.get(ou);Wu.__maxMipLevel=Math.log(Math.max(Cu,Mu))*Math.LOG2E}function Vs(tu,ou,Cu){if(Es===!1)return ou;if(tu!==null){if(ca[tu]!==void 0)return ca[tu];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tu+"'")}var Mu=ou;return ou===6403&&(Cu===5126&&(Mu=33326),Cu===5131&&(Mu=33325),Cu===5121&&(Mu=33321)),ou===6407&&(Cu===5126&&(Mu=34837),Cu===5131&&(Mu=34843),Cu===5121&&(Mu=32849)),ou===6408&&(Cu===5126&&(Mu=34836),Cu===5131&&(Mu=34842),Cu===5121&&(Mu=32856)),(Mu===33325||Mu===33326||Mu===34842||Mu===34836)&&ga.get("EXT_color_buffer_float"),Mu}function Gs(tu){return tu===NearestFilter||tu===NearestMipmapNearestFilter||tu===NearestMipmapLinearFilter?9728:9729}function Us(tu){var ou=tu.target;ou.removeEventListener("dispose",Us),Hs(ou),ou.isVideoTexture&&Ps.delete(ou),Ms.memory.textures--}function zs(tu){var ou=tu.target;ou.removeEventListener("dispose",zs),Qs(ou),Ms.memory.textures--}function Hs(tu){var ou=_a.get(tu);ou.__webglInit!==void 0&&(ca.deleteTexture(ou.__webglTexture),_a.remove(tu))}function Qs(tu){var ou=_a.get(tu),Cu=_a.get(tu.texture);if(!!tu){if(Cu.__webglTexture!==void 0&&ca.deleteTexture(Cu.__webglTexture),tu.depthTexture&&tu.depthTexture.dispose(),tu.isWebGLCubeRenderTarget)for(var Mu=0;Mu<6;Mu++)ca.deleteFramebuffer(ou.__webglFramebuffer[Mu]),ou.__webglDepthbuffer&&ca.deleteRenderbuffer(ou.__webglDepthbuffer[Mu]);else ca.deleteFramebuffer(ou.__webglFramebuffer),ou.__webglDepthbuffer&&ca.deleteRenderbuffer(ou.__webglDepthbuffer),ou.__webglMultisampledFramebuffer&&ca.deleteFramebuffer(ou.__webglMultisampledFramebuffer),ou.__webglColorRenderbuffer&&ca.deleteRenderbuffer(ou.__webglColorRenderbuffer),ou.__webglDepthRenderbuffer&&ca.deleteRenderbuffer(ou.__webglDepthRenderbuffer);_a.remove(tu.texture),_a.remove(tu)}}var js=0;function Zs(){js=0}function Ks(){var tu=js;return tu>=Cs&&console.warn("THREE.WebGLTextures: Trying to use "+tu+" texture units while this GPU supports only "+Cs),js+=1,tu}function Ys(tu,ou){var Cu=_a.get(tu);if(tu.isVideoTexture&&Eu(tu),tu.version>0&&Cu.__version!==tu.version){var Mu=tu.image;if(Mu===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Mu.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xu(Cu,tu,ou);return}}ya.activeTexture(33984+ou),ya.bindTexture(3553,Cu.__webglTexture)}function qs(tu,ou){var Cu=_a.get(tu);if(tu.version>0&&Cu.__version!==tu.version){xu(Cu,tu,ou);return}ya.activeTexture(33984+ou),ya.bindTexture(35866,Cu.__webglTexture)}function eu(tu,ou){var Cu=_a.get(tu);if(tu.version>0&&Cu.__version!==tu.version){xu(Cu,tu,ou);return}ya.activeTexture(33984+ou),ya.bindTexture(32879,Cu.__webglTexture)}function Js(tu,ou){if(tu.image.length===6){var Cu=_a.get(tu);if(tu.version>0&&Cu.__version!==tu.version){cu(Cu,tu),ya.activeTexture(33984+ou),ya.bindTexture(34067,Cu.__webglTexture),ca.pixelStorei(37440,tu.flipY);for(var Mu=tu&&(tu.isCompressedTexture||tu.image[0].isCompressedTexture),Wu=tu.image[0]&&tu.image[0].isDataTexture,Lu=[],Bu=0;Bu<6;Bu++)!Mu&&!Wu?Lu[Bu]=Os(tu.image[Bu],!1,!0,Ts):Lu[Bu]=Wu?tu.image[Bu].image:tu.image[Bu];var vl=Lu[0],Ku=Ls(vl)||Es,ju=Ss.convert(tu.format),Pu=Ss.convert(tu.type),Ou=Vs(tu.internalFormat,ju,Pu);lu(34067,tu,Ku);var Ru;if(Mu){for(var Bu=0;Bu<6;Bu++){Ru=Lu[Bu].mipmaps;for(var Nu=0;Nu<Ru.length;Nu++){var uu=Ru[Nu];tu.format!==RGBAFormat&&tu.format!==RGBFormat?ju!==null?ya.compressedTexImage2D(34069+Bu,Nu,Ou,uu.width,uu.height,0,uu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ya.texImage2D(34069+Bu,Nu,Ou,uu.width,uu.height,0,ju,Pu,uu.data)}}Cu.__maxMipLevel=Ru.length-1}else{Ru=tu.mipmaps;for(var Bu=0;Bu<6;Bu++)if(Wu){ya.texImage2D(34069+Bu,0,Ou,Lu[Bu].width,Lu[Bu].height,0,ju,Pu,Lu[Bu].data);for(var Nu=0;Nu<Ru.length;Nu++){var uu=Ru[Nu],$u=uu.image[Bu].image;ya.texImage2D(34069+Bu,Nu+1,Ou,$u.width,$u.height,0,ju,Pu,$u.data)}}else{ya.texImage2D(34069+Bu,0,Ou,ju,Pu,Lu[Bu]);for(var Nu=0;Nu<Ru.length;Nu++){var uu=Ru[Nu];ya.texImage2D(34069+Bu,Nu+1,Ou,ju,Pu,uu.image[Bu])}}Cu.__maxMipLevel=Ru.length}Fs(tu,Ku)&&Ns(34067,tu,vl.width,vl.height),Cu.__version=tu.version,tu.onUpdate&&tu.onUpdate(tu)}else ya.activeTexture(33984+ou),ya.bindTexture(34067,Cu.__webglTexture)}}function Xs(tu,ou){ya.activeTexture(33984+ou),ya.bindTexture(34067,_a.get(tu).__webglTexture)}var ru={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},su={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function lu(tu,ou,Cu){Cu?(ca.texParameteri(tu,10242,ru[ou.wrapS]),ca.texParameteri(tu,10243,ru[ou.wrapT]),(tu===32879||tu===35866)&&ca.texParameteri(tu,32882,ru[ou.wrapR]),ca.texParameteri(tu,10240,su[ou.magFilter]),ca.texParameteri(tu,10241,su[ou.minFilter])):(ca.texParameteri(tu,10242,33071),ca.texParameteri(tu,10243,33071),(tu===32879||tu===35866)&&ca.texParameteri(tu,32882,33071),(ou.wrapS!==ClampToEdgeWrapping||ou.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ca.texParameteri(tu,10240,Gs(ou.magFilter)),ca.texParameteri(tu,10241,Gs(ou.minFilter)),ou.minFilter!==NearestFilter&&ou.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Mu=ga.get("EXT_texture_filter_anisotropic");if(Mu){if(ou.type===FloatType&&ga.get("OES_texture_float_linear")===null||ou.type===HalfFloatType&&(Es||ga.get("OES_texture_half_float_linear"))===null)return;(ou.anisotropy>1||_a.get(ou).__currentAnisotropy)&&(ca.texParameterf(tu,Mu.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ou.anisotropy,_s.getMaxAnisotropy())),_a.get(ou).__currentAnisotropy=ou.anisotropy)}}function cu(tu,ou){tu.__webglInit===void 0&&(tu.__webglInit=!0,ou.addEventListener("dispose",Us),tu.__webglTexture=ca.createTexture(),Ms.memory.textures++)}function xu(tu,ou,Cu){var Mu=3553;ou.isDataTexture2DArray&&(Mu=35866),ou.isDataTexture3D&&(Mu=32879),cu(tu,ou),ya.activeTexture(33984+Cu),ya.bindTexture(Mu,tu.__webglTexture),ca.pixelStorei(37440,ou.flipY),ca.pixelStorei(37441,ou.premultiplyAlpha),ca.pixelStorei(3317,ou.unpackAlignment);var Wu=Ds(ou)&&Ls(ou.image)===!1,Lu=Os(ou.image,Wu,!1,Bs),Bu=Ls(Lu)||Es,vl=Ss.convert(ou.format),Ku=Ss.convert(ou.type),ju=Vs(ou.internalFormat,vl,Ku);lu(Mu,ou,Bu);var Pu,Ou=ou.mipmaps;if(ou.isDepthTexture)ju=6402,Es?ou.type===FloatType?ju=36012:ou.type===UnsignedIntType?ju=33190:ou.type===UnsignedInt248Type?ju=35056:ju=33189:ou.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ou.format===DepthFormat&&ju===6402&&ou.type!==UnsignedShortType&&ou.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ou.type=UnsignedShortType,Ku=Ss.convert(ou.type)),ou.format===DepthStencilFormat&&ju===6402&&(ju=34041,ou.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ou.type=UnsignedInt248Type,Ku=Ss.convert(ou.type))),ya.texImage2D(3553,0,ju,Lu.width,Lu.height,0,vl,Ku,null);else if(ou.isDataTexture)if(Ou.length>0&&Bu){for(var Ru=0,Nu=Ou.length;Ru<Nu;Ru++)Pu=Ou[Ru],ya.texImage2D(3553,Ru,ju,Pu.width,Pu.height,0,vl,Ku,Pu.data);ou.generateMipmaps=!1,tu.__maxMipLevel=Ou.length-1}else ya.texImage2D(3553,0,ju,Lu.width,Lu.height,0,vl,Ku,Lu.data),tu.__maxMipLevel=0;else if(ou.isCompressedTexture){for(var Ru=0,Nu=Ou.length;Ru<Nu;Ru++)Pu=Ou[Ru],ou.format!==RGBAFormat&&ou.format!==RGBFormat?vl!==null?ya.compressedTexImage2D(3553,Ru,ju,Pu.width,Pu.height,0,Pu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ya.texImage2D(3553,Ru,ju,Pu.width,Pu.height,0,vl,Ku,Pu.data);tu.__maxMipLevel=Ou.length-1}else if(ou.isDataTexture2DArray)ya.texImage3D(35866,0,ju,Lu.width,Lu.height,Lu.depth,0,vl,Ku,Lu.data),tu.__maxMipLevel=0;else if(ou.isDataTexture3D)ya.texImage3D(32879,0,ju,Lu.width,Lu.height,Lu.depth,0,vl,Ku,Lu.data),tu.__maxMipLevel=0;else if(Ou.length>0&&Bu){for(var Ru=0,Nu=Ou.length;Ru<Nu;Ru++)Pu=Ou[Ru],ya.texImage2D(3553,Ru,ju,vl,Ku,Pu);ou.generateMipmaps=!1,tu.__maxMipLevel=Ou.length-1}else ya.texImage2D(3553,0,ju,vl,Ku,Lu),tu.__maxMipLevel=0;Fs(ou,Bu)&&Ns(Mu,ou,Lu.width,Lu.height),tu.__version=ou.version,ou.onUpdate&&ou.onUpdate(ou)}function bu(tu,ou,Cu,Mu){var Wu=Ss.convert(ou.texture.format),Lu=Ss.convert(ou.texture.type),Bu=Vs(ou.texture.internalFormat,Wu,Lu);ya.texImage2D(Mu,0,Bu,ou.width,ou.height,0,Wu,Lu,null),ca.bindFramebuffer(36160,tu),ca.framebufferTexture2D(36160,Cu,Mu,_a.get(ou.texture).__webglTexture,0),ca.bindFramebuffer(36160,null)}function yu(tu,ou,Cu){if(ca.bindRenderbuffer(36161,tu),ou.depthBuffer&&!ou.stencilBuffer){var Mu=33189;if(Cu){var Wu=ou.depthTexture;Wu&&Wu.isDepthTexture&&(Wu.type===FloatType?Mu=36012:Wu.type===UnsignedIntType&&(Mu=33190));var Lu=pu(ou);ca.renderbufferStorageMultisample(36161,Lu,Mu,ou.width,ou.height)}else ca.renderbufferStorage(36161,Mu,ou.width,ou.height);ca.framebufferRenderbuffer(36160,36096,36161,tu)}else if(ou.depthBuffer&&ou.stencilBuffer){if(Cu){var Lu=pu(ou);ca.renderbufferStorageMultisample(36161,Lu,35056,ou.width,ou.height)}else ca.renderbufferStorage(36161,34041,ou.width,ou.height);ca.framebufferRenderbuffer(36160,33306,36161,tu)}else{var Bu=Ss.convert(ou.texture.format),vl=Ss.convert(ou.texture.type),Mu=Vs(ou.texture.internalFormat,Bu,vl);if(Cu){var Lu=pu(ou);ca.renderbufferStorageMultisample(36161,Lu,Mu,ou.width,ou.height)}else ca.renderbufferStorage(36161,Mu,ou.width,ou.height)}ca.bindRenderbuffer(36161,null)}function fu(tu,ou){var Cu=ou&&ou.isWebGLCubeRenderTarget;if(Cu)throw new Error("Depth Texture with cube render targets is not supported");if(ca.bindFramebuffer(36160,tu),!(ou.depthTexture&&ou.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!_a.get(ou.depthTexture).__webglTexture||ou.depthTexture.image.width!==ou.width||ou.depthTexture.image.height!==ou.height)&&(ou.depthTexture.image.width=ou.width,ou.depthTexture.image.height=ou.height,ou.depthTexture.needsUpdate=!0),Ys(ou.depthTexture,0);var Mu=_a.get(ou.depthTexture).__webglTexture;if(ou.depthTexture.format===DepthFormat)ca.framebufferTexture2D(36160,36096,3553,Mu,0);else if(ou.depthTexture.format===DepthStencilFormat)ca.framebufferTexture2D(36160,33306,3553,Mu,0);else throw new Error("Unknown depthTexture format")}function gu(tu){var ou=_a.get(tu),Cu=tu.isWebGLCubeRenderTarget===!0;if(tu.depthTexture){if(Cu)throw new Error("target.depthTexture not supported in Cube render targets");fu(ou.__webglFramebuffer,tu)}else if(Cu){ou.__webglDepthbuffer=[];for(var Mu=0;Mu<6;Mu++)ca.bindFramebuffer(36160,ou.__webglFramebuffer[Mu]),ou.__webglDepthbuffer[Mu]=ca.createRenderbuffer(),yu(ou.__webglDepthbuffer[Mu],tu,!1)}else ca.bindFramebuffer(36160,ou.__webglFramebuffer),ou.__webglDepthbuffer=ca.createRenderbuffer(),yu(ou.__webglDepthbuffer,tu,!1);ca.bindFramebuffer(36160,null)}function Su(tu){var ou=_a.get(tu),Cu=_a.get(tu.texture);tu.addEventListener("dispose",zs),Cu.__webglTexture=ca.createTexture(),Ms.memory.textures++;var Mu=tu.isWebGLCubeRenderTarget===!0,Wu=tu.isWebGLMultisampleRenderTarget===!0,Lu=Ls(tu)||Es;if(Es&&tu.texture.format===RGBFormat&&(tu.texture.type===FloatType||tu.texture.type===HalfFloatType)&&(tu.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Mu){ou.__webglFramebuffer=[];for(var Bu=0;Bu<6;Bu++)ou.__webglFramebuffer[Bu]=ca.createFramebuffer()}else if(ou.__webglFramebuffer=ca.createFramebuffer(),Wu)if(Es){ou.__webglMultisampledFramebuffer=ca.createFramebuffer(),ou.__webglColorRenderbuffer=ca.createRenderbuffer(),ca.bindRenderbuffer(36161,ou.__webglColorRenderbuffer);var vl=Ss.convert(tu.texture.format),Ku=Ss.convert(tu.texture.type),ju=Vs(tu.texture.internalFormat,vl,Ku),Pu=pu(tu);ca.renderbufferStorageMultisample(36161,Pu,ju,tu.width,tu.height),ca.bindFramebuffer(36160,ou.__webglMultisampledFramebuffer),ca.framebufferRenderbuffer(36160,36064,36161,ou.__webglColorRenderbuffer),ca.bindRenderbuffer(36161,null),tu.depthBuffer&&(ou.__webglDepthRenderbuffer=ca.createRenderbuffer(),yu(ou.__webglDepthRenderbuffer,tu,!0)),ca.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Mu){ya.bindTexture(34067,Cu.__webglTexture),lu(34067,tu.texture,Lu);for(var Bu=0;Bu<6;Bu++)bu(ou.__webglFramebuffer[Bu],tu,36064,34069+Bu);Fs(tu.texture,Lu)&&Ns(34067,tu.texture,tu.width,tu.height),ya.bindTexture(34067,null)}else ya.bindTexture(3553,Cu.__webglTexture),lu(3553,tu.texture,Lu),bu(ou.__webglFramebuffer,tu,36064,3553),Fs(tu.texture,Lu)&&Ns(3553,tu.texture,tu.width,tu.height),ya.bindTexture(3553,null);tu.depthBuffer&&gu(tu)}function wu(tu){var ou=tu.texture,Cu=Ls(tu)||Es;if(Fs(ou,Cu)){var Mu=tu.isWebGLCubeRenderTarget?34067:3553,Wu=_a.get(ou).__webglTexture;ya.bindTexture(Mu,Wu),Ns(Mu,ou,tu.width,tu.height),ya.bindTexture(Mu,null)}}function vu(tu){if(tu.isWebGLMultisampleRenderTarget)if(Es){var ou=_a.get(tu);ca.bindFramebuffer(36008,ou.__webglMultisampledFramebuffer),ca.bindFramebuffer(36009,ou.__webglFramebuffer);var Cu=tu.width,Mu=tu.height,Wu=16384;tu.depthBuffer&&(Wu|=256),tu.stencilBuffer&&(Wu|=1024),ca.blitFramebuffer(0,0,Cu,Mu,0,0,Cu,Mu,Wu,9728),ca.bindFramebuffer(36160,ou.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function pu(tu){return Es&&tu.isWebGLMultisampleRenderTarget?Math.min(Is,tu.samples):0}function Eu(tu){var ou=Ms.render.frame;Ps.get(tu)!==ou&&(Ps.set(tu,ou),tu.update())}var Tu=!1,zu=!1;function Du(tu,ou){tu&&tu.isWebGLRenderTarget&&(Tu===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Tu=!0),tu=tu.texture),Ys(tu,ou)}function Gu(tu,ou){tu&&tu.isWebGLCubeRenderTarget&&(zu===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),zu=!0),tu=tu.texture),tu&&tu.isCubeTexture||Array.isArray(tu.image)&&tu.image.length===6?Js(tu,ou):Xs(tu,ou)}this.allocateTextureUnit=Ks,this.resetTextureUnits=Zs,this.setTexture2D=Ys,this.setTexture2DArray=qs,this.setTexture3D=eu,this.setTextureCube=Js,this.setTextureCubeDynamic=Xs,this.setupRenderTarget=Su,this.updateRenderTargetMipmap=wu,this.updateMultisampleRenderTarget=vu,this.safeSetTexture2D=Du,this.safeSetTextureCube=Gu}function WebGLUtils(ca,ga,ya){var _a=ya.isWebGL2;function _s(Ss){var Ms;if(Ss===UnsignedByteType)return 5121;if(Ss===UnsignedShort4444Type)return 32819;if(Ss===UnsignedShort5551Type)return 32820;if(Ss===UnsignedShort565Type)return 33635;if(Ss===ByteType)return 5120;if(Ss===ShortType)return 5122;if(Ss===UnsignedShortType)return 5123;if(Ss===IntType)return 5124;if(Ss===UnsignedIntType)return 5125;if(Ss===FloatType)return 5126;if(Ss===HalfFloatType)return _a?5131:(Ms=ga.get("OES_texture_half_float"),Ms!==null?Ms.HALF_FLOAT_OES:null);if(Ss===AlphaFormat)return 6406;if(Ss===RGBFormat)return 6407;if(Ss===RGBAFormat)return 6408;if(Ss===LuminanceFormat)return 6409;if(Ss===LuminanceAlphaFormat)return 6410;if(Ss===DepthFormat)return 6402;if(Ss===DepthStencilFormat)return 34041;if(Ss===RedFormat)return 6403;if(Ss===RedIntegerFormat)return 36244;if(Ss===RGFormat)return 33319;if(Ss===RGIntegerFormat)return 33320;if(Ss===RGBIntegerFormat)return 36248;if(Ss===RGBAIntegerFormat)return 36249;if(Ss===RGB_S3TC_DXT1_Format||Ss===RGBA_S3TC_DXT1_Format||Ss===RGBA_S3TC_DXT3_Format||Ss===RGBA_S3TC_DXT5_Format)if(Ms=ga.get("WEBGL_compressed_texture_s3tc"),Ms!==null){if(Ss===RGB_S3TC_DXT1_Format)return Ms.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ss===RGBA_S3TC_DXT1_Format)return Ms.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ss===RGBA_S3TC_DXT3_Format)return Ms.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ss===RGBA_S3TC_DXT5_Format)return Ms.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Ss===RGB_PVRTC_4BPPV1_Format||Ss===RGB_PVRTC_2BPPV1_Format||Ss===RGBA_PVRTC_4BPPV1_Format||Ss===RGBA_PVRTC_2BPPV1_Format)if(Ms=ga.get("WEBGL_compressed_texture_pvrtc"),Ms!==null){if(Ss===RGB_PVRTC_4BPPV1_Format)return Ms.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ss===RGB_PVRTC_2BPPV1_Format)return Ms.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ss===RGBA_PVRTC_4BPPV1_Format)return Ms.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ss===RGBA_PVRTC_2BPPV1_Format)return Ms.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Ss===RGB_ETC1_Format)return Ms=ga.get("WEBGL_compressed_texture_etc1"),Ms!==null?Ms.COMPRESSED_RGB_ETC1_WEBGL:null;if((Ss===RGB_ETC2_Format||Ss===RGBA_ETC2_EAC_Format)&&(Ms=ga.get("WEBGL_compressed_texture_etc"),Ms!==null)){if(Ss===RGB_ETC2_Format)return Ms.COMPRESSED_RGB8_ETC2;if(Ss===RGBA_ETC2_EAC_Format)return Ms.COMPRESSED_RGBA8_ETC2_EAC}if(Ss===RGBA_ASTC_4x4_Format||Ss===RGBA_ASTC_5x4_Format||Ss===RGBA_ASTC_5x5_Format||Ss===RGBA_ASTC_6x5_Format||Ss===RGBA_ASTC_6x6_Format||Ss===RGBA_ASTC_8x5_Format||Ss===RGBA_ASTC_8x6_Format||Ss===RGBA_ASTC_8x8_Format||Ss===RGBA_ASTC_10x5_Format||Ss===RGBA_ASTC_10x6_Format||Ss===RGBA_ASTC_10x8_Format||Ss===RGBA_ASTC_10x10_Format||Ss===RGBA_ASTC_12x10_Format||Ss===RGBA_ASTC_12x12_Format||Ss===SRGB8_ALPHA8_ASTC_4x4_Format||Ss===SRGB8_ALPHA8_ASTC_5x4_Format||Ss===SRGB8_ALPHA8_ASTC_5x5_Format||Ss===SRGB8_ALPHA8_ASTC_6x5_Format||Ss===SRGB8_ALPHA8_ASTC_6x6_Format||Ss===SRGB8_ALPHA8_ASTC_8x5_Format||Ss===SRGB8_ALPHA8_ASTC_8x6_Format||Ss===SRGB8_ALPHA8_ASTC_8x8_Format||Ss===SRGB8_ALPHA8_ASTC_10x5_Format||Ss===SRGB8_ALPHA8_ASTC_10x6_Format||Ss===SRGB8_ALPHA8_ASTC_10x8_Format||Ss===SRGB8_ALPHA8_ASTC_10x10_Format||Ss===SRGB8_ALPHA8_ASTC_12x10_Format||Ss===SRGB8_ALPHA8_ASTC_12x12_Format)return Ms=ga.get("WEBGL_compressed_texture_astc"),Ms!==null?Ss:null;if(Ss===RGBA_BPTC_Format)return Ms=ga.get("EXT_texture_compression_bptc"),Ms!==null?Ss:null;if(Ss===UnsignedInt248Type)return _a?34042:(Ms=ga.get("WEBGL_depth_texture"),Ms!==null?Ms.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:_s}}function ArrayCamera(ca){PerspectiveCamera.call(this),this.cameras=ca||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group(){Object3D.call(this),this.type="Group"}Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(ca){return this._targetRay!==null&&this._targetRay.dispatchEvent(ca),this._grip!==null&&this._grip.dispatchEvent(ca),this},disconnect:function(ca){return this.dispatchEvent({type:"disconnected",data:ca}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(ca,ga,ya){var _a=null,_s=null,Ss=this._targetRay,Ms=this._grip;return ca&&(Ss!==null&&(_a=ga.getPose(ca.targetRaySpace,ya),_a!==null&&(Ss.matrix.fromArray(_a.transform.matrix),Ss.matrix.decompose(Ss.position,Ss.rotation,Ss.scale))),Ms!==null&&ca.gripSpace&&(_s=ga.getPose(ca.gripSpace,ya),_s!==null&&(Ms.matrix.fromArray(_s.transform.matrix),Ms.matrix.decompose(Ms.position,Ms.rotation,Ms.scale)))),Ss!==null&&(Ss.visible=_a!==null),Ms!==null&&(Ms.visible=_s!==null),this}});function WebXRManager(ca,ga){var ya=this,_a=null,_s=1,Ss=null,Ms="local-floor",Es=null,Cs=[],Ts=new Map,Bs=new PerspectiveCamera;Bs.layers.enable(1),Bs.viewport=new Vector4;var Is=new PerspectiveCamera;Is.layers.enable(2),Is.viewport=new Vector4;var Ps=[Bs,Is],Rs=new ArrayCamera;Rs.layers.enable(1),Rs.layers.enable(2);var ks=null,$s=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(js){var Zs=Cs[js];return Zs===void 0&&(Zs=new WebXRController,Cs[js]=Zs),Zs.getTargetRaySpace()},this.getControllerGrip=function(js){var Zs=Cs[js];return Zs===void 0&&(Zs=new WebXRController,Cs[js]=Zs),Zs.getGripSpace()};function Os(js){var Zs=Ts.get(js.inputSource);Zs&&Zs.dispatchEvent({type:js.type})}function Ls(){Ts.forEach(function(js,Zs){js.disconnect(Zs)}),Ts.clear(),ca.setFramebuffer(null),ca.setRenderTarget(ca.getRenderTarget()),Qs.stop(),ya.isPresenting=!1,ya.dispatchEvent({type:"sessionend"})}function Ds(js){Ss=js,Qs.setContext(_a),Qs.start(),ya.isPresenting=!0,ya.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(js){_s=js,ya.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(js){Ms=js,ya.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ss},this.getSession=function(){return _a},this.setSession=function(js){if(_a=js,_a!==null){_a.addEventListener("select",Os),_a.addEventListener("selectstart",Os),_a.addEventListener("selectend",Os),_a.addEventListener("squeeze",Os),_a.addEventListener("squeezestart",Os),_a.addEventListener("squeezeend",Os),_a.addEventListener("end",Ls);var Zs=ga.getContextAttributes();Zs.xrCompatible!==!0&&ga.makeXRCompatible();var Ks={antialias:Zs.antialias,alpha:Zs.alpha,depth:Zs.depth,stencil:Zs.stencil,framebufferScaleFactor:_s},Ys=new XRWebGLLayer(_a,ga,Ks);_a.updateRenderState({baseLayer:Ys}),_a.requestReferenceSpace(Ms).then(Ds),_a.addEventListener("inputsourceschange",Fs)}};function Fs(js){for(var Zs=_a.inputSources,Ks=0;Ks<Cs.length;Ks++)Ts.set(Zs[Ks],Cs[Ks]);for(var Ks=0;Ks<js.removed.length;Ks++){var Ys=js.removed[Ks],qs=Ts.get(Ys);qs&&(qs.dispatchEvent({type:"disconnected",data:Ys}),Ts.delete(Ys))}for(var Ks=0;Ks<js.added.length;Ks++){var Ys=js.added[Ks],qs=Ts.get(Ys);qs&&qs.dispatchEvent({type:"connected",data:Ys})}}var Ns=new Vector3,Vs=new Vector3;function Gs(js,Zs,Ks){Ns.setFromMatrixPosition(Zs.matrixWorld),Vs.setFromMatrixPosition(Ks.matrixWorld);var Ys=Ns.distanceTo(Vs),qs=Zs.projectionMatrix.elements,eu=Ks.projectionMatrix.elements,Js=qs[14]/(qs[10]-1),Xs=qs[14]/(qs[10]+1),ru=(qs[9]+1)/qs[5],su=(qs[9]-1)/qs[5],lu=(qs[8]-1)/qs[0],cu=(eu[8]+1)/eu[0],xu=Js*lu,bu=Js*cu,yu=Ys/(-lu+cu),fu=yu*-lu;Zs.matrixWorld.decompose(js.position,js.quaternion,js.scale),js.translateX(fu),js.translateZ(yu),js.matrixWorld.compose(js.position,js.quaternion,js.scale),js.matrixWorldInverse.getInverse(js.matrixWorld);var gu=Js+yu,Su=Xs+yu,wu=xu-fu,vu=bu+(Ys-fu),pu=ru*Xs/Su*gu,Eu=su*Xs/Su*gu;js.projectionMatrix.makePerspective(wu,vu,pu,Eu,gu,Su)}function Us(js,Zs){Zs===null?js.matrixWorld.copy(js.matrix):js.matrixWorld.multiplyMatrices(Zs.matrixWorld,js.matrix),js.matrixWorldInverse.getInverse(js.matrixWorld)}this.getCamera=function(js){Rs.near=Is.near=Bs.near=js.near,Rs.far=Is.far=Bs.far=js.far,(ks!==Rs.near||$s!==Rs.far)&&(_a.updateRenderState({depthNear:Rs.near,depthFar:Rs.far}),ks=Rs.near,$s=Rs.far);var Zs=js.parent,Ks=Rs.cameras;Us(Rs,Zs);for(var Ys=0;Ys<Ks.length;Ys++)Us(Ks[Ys],Zs);js.matrixWorld.copy(Rs.matrixWorld);for(var qs=js.children,Ys=0,eu=qs.length;Ys<eu;Ys++)qs[Ys].updateMatrixWorld(!0);return Ks.length===2?Gs(Rs,Bs,Is):Rs.projectionMatrix.copy(Bs.projectionMatrix),Rs};var zs=null;function Hs(js,Zs){if(Es=Zs.getViewerPose(Ss),Es!==null){var Ks=Es.views,Ys=_a.renderState.baseLayer;ca.setFramebuffer(Ys.framebuffer);var qs=!1;Ks.length!==Rs.cameras.length&&(Rs.cameras.length=0,qs=!0);for(var eu=0;eu<Ks.length;eu++){var Js=Ks[eu],Xs=Ys.getViewport(Js),ru=Ps[eu];ru.matrix.fromArray(Js.transform.matrix),ru.projectionMatrix.fromArray(Js.projectionMatrix),ru.viewport.set(Xs.x,Xs.y,Xs.width,Xs.height),eu===0&&Rs.matrix.copy(ru.matrix),qs===!0&&Rs.cameras.push(ru)}}for(var su=_a.inputSources,eu=0;eu<Cs.length;eu++){var lu=Cs[eu],cu=su[eu];lu.update(cu,Zs,Ss)}zs&&zs(js,Zs)}var Qs=new WebGLAnimation;Qs.setAnimationLoop(Hs),this.setAnimationLoop=function(js){zs=js},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(ca){function ga(Ls,Ds){Ls.fogColor.value.copy(Ds.color),Ds.isFog?(Ls.fogNear.value=Ds.near,Ls.fogFar.value=Ds.far):Ds.isFogExp2&&(Ls.fogDensity.value=Ds.density)}function ya(Ls,Ds,Fs,Ns,Vs){Ds.isMeshBasicMaterial?_a(Ls,Ds):Ds.isMeshLambertMaterial?(_a(Ls,Ds),Cs(Ls,Ds)):Ds.isMeshToonMaterial?(_a(Ls,Ds),Bs(Ls,Ds)):Ds.isMeshPhongMaterial?(_a(Ls,Ds),Ts(Ls,Ds)):Ds.isMeshStandardMaterial?(_a(Ls,Ds,Fs),Ds.isMeshPhysicalMaterial?Ps(Ls,Ds,Fs):Is(Ls,Ds,Fs)):Ds.isMeshMatcapMaterial?(_a(Ls,Ds),Rs(Ls,Ds)):Ds.isMeshDepthMaterial?(_a(Ls,Ds),ks(Ls,Ds)):Ds.isMeshDistanceMaterial?(_a(Ls,Ds),$s(Ls,Ds)):Ds.isMeshNormalMaterial?(_a(Ls,Ds),Os(Ls,Ds)):Ds.isLineBasicMaterial?(_s(Ls,Ds),Ds.isLineDashedMaterial&&Ss(Ls,Ds)):Ds.isPointsMaterial?Ms(Ls,Ds,Ns,Vs):Ds.isSpriteMaterial?Es(Ls,Ds):Ds.isShadowMaterial?(Ls.color.value.copy(Ds.color),Ls.opacity.value=Ds.opacity):Ds.isShaderMaterial&&(Ds.uniformsNeedUpdate=!1)}function _a(Ls,Ds,Fs){Ls.opacity.value=Ds.opacity,Ds.color&&Ls.diffuse.value.copy(Ds.color),Ds.emissive&&Ls.emissive.value.copy(Ds.emissive).multiplyScalar(Ds.emissiveIntensity),Ds.map&&(Ls.map.value=Ds.map),Ds.alphaMap&&(Ls.alphaMap.value=Ds.alphaMap),Ds.specularMap&&(Ls.specularMap.value=Ds.specularMap);var Ns=Ds.envMap||Fs;Ns&&(Ls.envMap.value=Ns,Ls.flipEnvMap.value=Ns.isCubeTexture?-1:1,Ls.reflectivity.value=Ds.reflectivity,Ls.refractionRatio.value=Ds.refractionRatio,Ls.maxMipLevel.value=ca.get(Ns).__maxMipLevel),Ds.lightMap&&(Ls.lightMap.value=Ds.lightMap,Ls.lightMapIntensity.value=Ds.lightMapIntensity),Ds.aoMap&&(Ls.aoMap.value=Ds.aoMap,Ls.aoMapIntensity.value=Ds.aoMapIntensity);var Vs;Ds.map?Vs=Ds.map:Ds.specularMap?Vs=Ds.specularMap:Ds.displacementMap?Vs=Ds.displacementMap:Ds.normalMap?Vs=Ds.normalMap:Ds.bumpMap?Vs=Ds.bumpMap:Ds.roughnessMap?Vs=Ds.roughnessMap:Ds.metalnessMap?Vs=Ds.metalnessMap:Ds.alphaMap?Vs=Ds.alphaMap:Ds.emissiveMap&&(Vs=Ds.emissiveMap),Vs!==void 0&&(Vs.isWebGLRenderTarget&&(Vs=Vs.texture),Vs.matrixAutoUpdate===!0&&Vs.updateMatrix(),Ls.uvTransform.value.copy(Vs.matrix));var Gs;Ds.aoMap?Gs=Ds.aoMap:Ds.lightMap&&(Gs=Ds.lightMap),Gs!==void 0&&(Gs.isWebGLRenderTarget&&(Gs=Gs.texture),Gs.matrixAutoUpdate===!0&&Gs.updateMatrix(),Ls.uv2Transform.value.copy(Gs.matrix))}function _s(Ls,Ds){Ls.diffuse.value.copy(Ds.color),Ls.opacity.value=Ds.opacity}function Ss(Ls,Ds){Ls.dashSize.value=Ds.dashSize,Ls.totalSize.value=Ds.dashSize+Ds.gapSize,Ls.scale.value=Ds.scale}function Ms(Ls,Ds,Fs,Ns){Ls.diffuse.value.copy(Ds.color),Ls.opacity.value=Ds.opacity,Ls.size.value=Ds.size*Fs,Ls.scale.value=Ns*.5,Ds.map&&(Ls.map.value=Ds.map),Ds.alphaMap&&(Ls.alphaMap.value=Ds.alphaMap);var Vs;Ds.map?Vs=Ds.map:Ds.alphaMap&&(Vs=Ds.alphaMap),Vs!==void 0&&(Vs.matrixAutoUpdate===!0&&Vs.updateMatrix(),Ls.uvTransform.value.copy(Vs.matrix))}function Es(Ls,Ds){Ls.diffuse.value.copy(Ds.color),Ls.opacity.value=Ds.opacity,Ls.rotation.value=Ds.rotation,Ds.map&&(Ls.map.value=Ds.map),Ds.alphaMap&&(Ls.alphaMap.value=Ds.alphaMap);var Fs;Ds.map?Fs=Ds.map:Ds.alphaMap&&(Fs=Ds.alphaMap),Fs!==void 0&&(Fs.matrixAutoUpdate===!0&&Fs.updateMatrix(),Ls.uvTransform.value.copy(Fs.matrix))}function Cs(Ls,Ds){Ds.emissiveMap&&(Ls.emissiveMap.value=Ds.emissiveMap)}function Ts(Ls,Ds){Ls.specular.value.copy(Ds.specular),Ls.shininess.value=Math.max(Ds.shininess,1e-4),Ds.emissiveMap&&(Ls.emissiveMap.value=Ds.emissiveMap),Ds.bumpMap&&(Ls.bumpMap.value=Ds.bumpMap,Ls.bumpScale.value=Ds.bumpScale,Ds.side===BackSide&&(Ls.bumpScale.value*=-1)),Ds.normalMap&&(Ls.normalMap.value=Ds.normalMap,Ls.normalScale.value.copy(Ds.normalScale),Ds.side===BackSide&&Ls.normalScale.value.negate()),Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias)}function Bs(Ls,Ds){Ls.specular.value.copy(Ds.specular),Ls.shininess.value=Math.max(Ds.shininess,1e-4),Ds.gradientMap&&(Ls.gradientMap.value=Ds.gradientMap),Ds.emissiveMap&&(Ls.emissiveMap.value=Ds.emissiveMap),Ds.bumpMap&&(Ls.bumpMap.value=Ds.bumpMap,Ls.bumpScale.value=Ds.bumpScale,Ds.side===BackSide&&(Ls.bumpScale.value*=-1)),Ds.normalMap&&(Ls.normalMap.value=Ds.normalMap,Ls.normalScale.value.copy(Ds.normalScale),Ds.side===BackSide&&Ls.normalScale.value.negate()),Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias)}function Is(Ls,Ds,Fs){Ls.roughness.value=Ds.roughness,Ls.metalness.value=Ds.metalness,Ds.roughnessMap&&(Ls.roughnessMap.value=Ds.roughnessMap),Ds.metalnessMap&&(Ls.metalnessMap.value=Ds.metalnessMap),Ds.emissiveMap&&(Ls.emissiveMap.value=Ds.emissiveMap),Ds.bumpMap&&(Ls.bumpMap.value=Ds.bumpMap,Ls.bumpScale.value=Ds.bumpScale,Ds.side===BackSide&&(Ls.bumpScale.value*=-1)),Ds.normalMap&&(Ls.normalMap.value=Ds.normalMap,Ls.normalScale.value.copy(Ds.normalScale),Ds.side===BackSide&&Ls.normalScale.value.negate()),Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias),(Ds.envMap||Fs)&&(Ls.envMapIntensity.value=Ds.envMapIntensity)}function Ps(Ls,Ds,Fs){Is(Ls,Ds,Fs),Ls.reflectivity.value=Ds.reflectivity,Ls.clearcoat.value=Ds.clearcoat,Ls.clearcoatRoughness.value=Ds.clearcoatRoughness,Ds.sheen&&Ls.sheen.value.copy(Ds.sheen),Ds.clearcoatMap&&(Ls.clearcoatMap.value=Ds.clearcoatMap),Ds.clearcoatRoughnessMap&&(Ls.clearcoatRoughnessMap.value=Ds.clearcoatRoughnessMap),Ds.clearcoatNormalMap&&(Ls.clearcoatNormalScale.value.copy(Ds.clearcoatNormalScale),Ls.clearcoatNormalMap.value=Ds.clearcoatNormalMap,Ds.side===BackSide&&Ls.clearcoatNormalScale.value.negate()),Ls.transparency.value=Ds.transparency}function Rs(Ls,Ds){Ds.matcap&&(Ls.matcap.value=Ds.matcap),Ds.bumpMap&&(Ls.bumpMap.value=Ds.bumpMap,Ls.bumpScale.value=Ds.bumpScale,Ds.side===BackSide&&(Ls.bumpScale.value*=-1)),Ds.normalMap&&(Ls.normalMap.value=Ds.normalMap,Ls.normalScale.value.copy(Ds.normalScale),Ds.side===BackSide&&Ls.normalScale.value.negate()),Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias)}function ks(Ls,Ds){Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias)}function $s(Ls,Ds){Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias),Ls.referencePosition.value.copy(Ds.referencePosition),Ls.nearDistance.value=Ds.nearDistance,Ls.farDistance.value=Ds.farDistance}function Os(Ls,Ds){Ds.bumpMap&&(Ls.bumpMap.value=Ds.bumpMap,Ls.bumpScale.value=Ds.bumpScale,Ds.side===BackSide&&(Ls.bumpScale.value*=-1)),Ds.normalMap&&(Ls.normalMap.value=Ds.normalMap,Ls.normalScale.value.copy(Ds.normalScale),Ds.side===BackSide&&Ls.normalScale.value.negate()),Ds.displacementMap&&(Ls.displacementMap.value=Ds.displacementMap,Ls.displacementScale.value=Ds.displacementScale,Ls.displacementBias.value=Ds.displacementBias)}return{refreshFogUniforms:ga,refreshMaterialUniforms:ya}}function WebGLRenderer(ca){ca=ca||{};var ga=ca.canvas!==void 0?ca.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),ya=ca.context!==void 0?ca.context:null,_a=ca.alpha!==void 0?ca.alpha:!1,_s=ca.depth!==void 0?ca.depth:!0,Ss=ca.stencil!==void 0?ca.stencil:!0,Ms=ca.antialias!==void 0?ca.antialias:!1,Es=ca.premultipliedAlpha!==void 0?ca.premultipliedAlpha:!0,Cs=ca.preserveDrawingBuffer!==void 0?ca.preserveDrawingBuffer:!1,Ts=ca.powerPreference!==void 0?ca.powerPreference:"default",Bs=ca.failIfMajorPerformanceCaveat!==void 0?ca.failIfMajorPerformanceCaveat:!1,Is=null,Ps=null;this.domElement=ga,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Rs=this,ks=!1,$s=null,Os=0,Ls=0,Ds=null,Fs=null,Ns=-1,Vs={geometry:null,program:null,wireframe:!1},Gs=null,Us=null,zs=new Vector4,Hs=new Vector4,Qs=null,js=ga.width,Zs=ga.height,Ks=1,Ys=null,qs=null,eu=new Vector4(0,0,js,Zs),Js=new Vector4(0,0,js,Zs),Xs=!1,ru=new Frustum,su=new WebGLClipping,lu=!1,cu=!1,xu=new Matrix4,bu=new Vector3;function yu(){return Ds===null?Ks:1}var fu;try{var gu={alpha:_a,depth:_s,stencil:Ss,antialias:Ms,premultipliedAlpha:Es,preserveDrawingBuffer:Cs,powerPreference:Ts,failIfMajorPerformanceCaveat:Bs};if(ga.addEventListener("webglcontextlost",Ru,!1),ga.addEventListener("webglcontextrestored",Nu,!1),fu=ya||ga.getContext("webgl",gu)||ga.getContext("experimental-webgl",gu),fu===null)throw ga.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");fu.getShaderPrecisionFormat===void 0&&(fu.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(nu){throw console.error("THREE.WebGLRenderer: "+nu.message),nu}var Su,wu,vu,pu,Eu,Tu,zu,Du,Gu,tu,ou,Cu,Mu,Wu,Lu,Bu,vl,Ku;function ju(){Su=new WebGLExtensions(fu),wu=new WebGLCapabilities(fu,Su,ca),wu.isWebGL2===!1&&(Su.get("WEBGL_depth_texture"),Su.get("OES_texture_float"),Su.get("OES_texture_half_float"),Su.get("OES_texture_half_float_linear"),Su.get("OES_standard_derivatives"),Su.get("OES_element_index_uint"),Su.get("ANGLE_instanced_arrays")),Su.get("OES_texture_float_linear"),Ku=new WebGLUtils(fu,Su,wu),vu=new WebGLState(fu,Su,wu),vu.scissor(Hs.copy(Js).multiplyScalar(Ks).floor()),vu.viewport(zs.copy(eu).multiplyScalar(Ks).floor()),pu=new WebGLInfo(fu),Eu=new WebGLProperties,Tu=new WebGLTextures(fu,Su,vu,Eu,wu,Ku,pu),zu=new WebGLAttributes(fu,wu),Du=new WebGLGeometries(fu,zu,pu),Gu=new WebGLObjects(fu,Du,zu,pu),Lu=new WebGLMorphtargets(fu),tu=new WebGLPrograms(Rs,Su,wu),ou=new WebGLMaterials(Eu),Cu=new WebGLRenderLists,Mu=new WebGLRenderStates,Wu=new WebGLBackground(Rs,vu,Gu,Es),Bu=new WebGLBufferRenderer(fu,Su,pu,wu),vl=new WebGLIndexedBufferRenderer(fu,Su,pu,wu),pu.programs=tu.programs,Rs.capabilities=wu,Rs.extensions=Su,Rs.properties=Eu,Rs.renderLists=Cu,Rs.state=vu,Rs.info=pu}ju();var Pu=new WebXRManager(Rs,fu);this.xr=Pu;var Ou=new WebGLShadowMap(Rs,Gu,wu.maxTextureSize);this.shadowMap=Ou,this.getContext=function(){return fu},this.getContextAttributes=function(){return fu.getContextAttributes()},this.forceContextLoss=function(){var nu=Su.get("WEBGL_lose_context");nu&&nu.loseContext()},this.forceContextRestore=function(){var nu=Su.get("WEBGL_lose_context");nu&&nu.restoreContext()},this.getPixelRatio=function(){return Ks},this.setPixelRatio=function(nu){nu!==void 0&&(Ks=nu,this.setSize(js,Zs,!1))},this.getSize=function(nu){return nu===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),nu=new Vector2),nu.set(js,Zs)},this.setSize=function(nu,mu,du){if(Pu.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}js=nu,Zs=mu,ga.width=Math.floor(nu*Ks),ga.height=Math.floor(mu*Ks),du!==!1&&(ga.style.width=nu+"px",ga.style.height=mu+"px"),this.setViewport(0,0,nu,mu)},this.getDrawingBufferSize=function(nu){return nu===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),nu=new Vector2),nu.set(js*Ks,Zs*Ks).floor()},this.setDrawingBufferSize=function(nu,mu,du){js=nu,Zs=mu,Ks=du,ga.width=Math.floor(nu*du),ga.height=Math.floor(mu*du),this.setViewport(0,0,nu,mu)},this.getCurrentViewport=function(nu){return nu===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),nu=new Vector4),nu.copy(zs)},this.getViewport=function(nu){return nu.copy(eu)},this.setViewport=function(nu,mu,du,Au){nu.isVector4?eu.set(nu.x,nu.y,nu.z,nu.w):eu.set(nu,mu,du,Au),vu.viewport(zs.copy(eu).multiplyScalar(Ks).floor())},this.getScissor=function(nu){return nu.copy(Js)},this.setScissor=function(nu,mu,du,Au){nu.isVector4?Js.set(nu.x,nu.y,nu.z,nu.w):Js.set(nu,mu,du,Au),vu.scissor(Hs.copy(Js).multiplyScalar(Ks).floor())},this.getScissorTest=function(){return Xs},this.setScissorTest=function(nu){vu.setScissorTest(Xs=nu)},this.setOpaqueSort=function(nu){Ys=nu},this.setTransparentSort=function(nu){qs=nu},this.getClearColor=function(){return Wu.getClearColor()},this.setClearColor=function(){Wu.setClearColor.apply(Wu,arguments)},this.getClearAlpha=function(){return Wu.getClearAlpha()},this.setClearAlpha=function(){Wu.setClearAlpha.apply(Wu,arguments)},this.clear=function(nu,mu,du){var Au=0;(nu===void 0||nu)&&(Au|=16384),(mu===void 0||mu)&&(Au|=256),(du===void 0||du)&&(Au|=1024),fu.clear(Au)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ga.removeEventListener("webglcontextlost",Ru,!1),ga.removeEventListener("webglcontextrestored",Nu,!1),Cu.dispose(),Mu.dispose(),Eu.dispose(),Gu.dispose(),Pu.dispose(),Bl.stop()};function Ru(nu){nu.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ks=!0}function Nu(){console.log("THREE.WebGLRenderer: Context Restored."),ks=!1,ju()}function uu(nu){var mu=nu.target;mu.removeEventListener("dispose",uu),$u(mu)}function $u(nu){ku(nu),Eu.remove(nu)}function ku(nu){var mu=Eu.get(nu).program;nu.program=void 0,mu!==void 0&&tu.releaseProgram(mu)}function Ju(nu,mu){nu.render(function(du){Rs.renderBufferImmediate(du,mu)})}this.renderBufferImmediate=function(nu,mu){vu.initAttributes();var du=Eu.get(nu);nu.hasPositions&&!du.position&&(du.position=fu.createBuffer()),nu.hasNormals&&!du.normal&&(du.normal=fu.createBuffer()),nu.hasUvs&&!du.uv&&(du.uv=fu.createBuffer()),nu.hasColors&&!du.color&&(du.color=fu.createBuffer());var Au=mu.getAttributes();nu.hasPositions&&(fu.bindBuffer(34962,du.position),fu.bufferData(34962,nu.positionArray,35048),vu.enableAttribute(Au.position),fu.vertexAttribPointer(Au.position,3,5126,!1,0,0)),nu.hasNormals&&(fu.bindBuffer(34962,du.normal),fu.bufferData(34962,nu.normalArray,35048),vu.enableAttribute(Au.normal),fu.vertexAttribPointer(Au.normal,3,5126,!1,0,0)),nu.hasUvs&&(fu.bindBuffer(34962,du.uv),fu.bufferData(34962,nu.uvArray,35048),vu.enableAttribute(Au.uv),fu.vertexAttribPointer(Au.uv,2,5126,!1,0,0)),nu.hasColors&&(fu.bindBuffer(34962,du.color),fu.bufferData(34962,nu.colorArray,35048),vu.enableAttribute(Au.color),fu.vertexAttribPointer(Au.color,3,5126,!1,0,0)),vu.disableUnusedAttributes(),fu.drawArrays(4,0,nu.count),nu.count=0};var Fu=new Scene;this.renderBufferDirect=function(nu,mu,du,Au,Iu,Xu){mu===null&&(mu=Fu);var qu=Iu.isMesh&&Iu.matrixWorld.determinant()<0,Vu=Pl(nu,mu,Au,Iu);vu.setMaterial(Au,qu);var Qu=!1;(Vs.geometry!==du.id||Vs.program!==Vu.id||Vs.wireframe!==(Au.wireframe===!0))&&(Vs.geometry=du.id,Vs.program=Vu.id,Vs.wireframe=Au.wireframe===!0,Qu=!0),(Au.morphTargets||Au.morphNormals)&&(Lu.update(Iu,du,Au,Vu),Qu=!0),Iu.isInstancedMesh===!0&&(Qu=!0);var Zu=du.index,wl=du.attributes.position;if(Zu===null){if(wl===void 0||wl.count===0)return}else if(Zu.count===0)return;var Ws=1;Au.wireframe===!0&&(Zu=Du.getWireframeAttribute(du),Ws=2);var iu,au=Bu;Zu!==null&&(iu=zu.get(Zu),au=vl,au.setIndex(iu)),Qu&&(yl(Iu,du,Au,Vu),Zu!==null&&fu.bindBuffer(34963,iu.buffer));var hu=Zu!==null?Zu.count:wl.count,_u=du.drawRange.start*Ws,Hu=du.drawRange.count*Ws,Yu=Xu!==null?Xu.start*Ws:0,Sl=Xu!==null?Xu.count*Ws:1/0,Uu=Math.max(_u,Yu),Ml=Math.min(hu,_u+Hu,Yu+Sl)-1,Rl=Math.max(0,Ml-Uu+1);if(Rl!==0){if(Iu.isMesh)Au.wireframe===!0?(vu.setLineWidth(Au.wireframeLinewidth*yu()),au.setMode(1)):au.setMode(4);else if(Iu.isLine){var Ul=Au.linewidth;Ul===void 0&&(Ul=1),vu.setLineWidth(Ul*yu()),Iu.isLineSegments?au.setMode(1):Iu.isLineLoop?au.setMode(2):au.setMode(3)}else Iu.isPoints?au.setMode(0):Iu.isSprite&&au.setMode(4);if(Iu.isInstancedMesh)au.renderInstances(du,Uu,Rl,Iu.count);else if(du.isInstancedBufferGeometry){var Ql=Math.min(du.instanceCount,du._maxInstanceCount);au.renderInstances(du,Uu,Rl,Ql)}else au.render(Uu,Rl)}};function yl(nu,mu,du,Au){if(!(wu.isWebGL2===!1&&(nu.isInstancedMesh||mu.isInstancedBufferGeometry)&&Su.get("ANGLE_instanced_arrays")===null)){vu.initAttributes();var Iu=mu.attributes,Xu=Au.getAttributes(),qu=du.defaultAttributeValues;for(var Vu in Xu){var Qu=Xu[Vu];if(Qu>=0){var Zu=Iu[Vu];if(Zu!==void 0){var wl=Zu.normalized,Ws=Zu.itemSize,iu=zu.get(Zu);if(iu===void 0)continue;var au=iu.buffer,hu=iu.type,_u=iu.bytesPerElement;if(Zu.isInterleavedBufferAttribute){var Hu=Zu.data,Yu=Hu.stride,Sl=Zu.offset;Hu&&Hu.isInstancedInterleavedBuffer?(vu.enableAttributeAndDivisor(Qu,Hu.meshPerAttribute),mu._maxInstanceCount===void 0&&(mu._maxInstanceCount=Hu.meshPerAttribute*Hu.count)):vu.enableAttribute(Qu),fu.bindBuffer(34962,au),vu.vertexAttribPointer(Qu,Ws,hu,wl,Yu*_u,Sl*_u)}else Zu.isInstancedBufferAttribute?(vu.enableAttributeAndDivisor(Qu,Zu.meshPerAttribute),mu._maxInstanceCount===void 0&&(mu._maxInstanceCount=Zu.meshPerAttribute*Zu.count)):vu.enableAttribute(Qu),fu.bindBuffer(34962,au),vu.vertexAttribPointer(Qu,Ws,hu,wl,0,0)}else if(Vu==="instanceMatrix"){var iu=zu.get(nu.instanceMatrix);if(iu===void 0)continue;var au=iu.buffer,hu=iu.type;vu.enableAttributeAndDivisor(Qu+0,1),vu.enableAttributeAndDivisor(Qu+1,1),vu.enableAttributeAndDivisor(Qu+2,1),vu.enableAttributeAndDivisor(Qu+3,1),fu.bindBuffer(34962,au),fu.vertexAttribPointer(Qu+0,4,hu,!1,64,0),fu.vertexAttribPointer(Qu+1,4,hu,!1,64,16),fu.vertexAttribPointer(Qu+2,4,hu,!1,64,32),fu.vertexAttribPointer(Qu+3,4,hu,!1,64,48)}else if(qu!==void 0){var Uu=qu[Vu];if(Uu!==void 0)switch(Uu.length){case 2:fu.vertexAttrib2fv(Qu,Uu);break;case 3:fu.vertexAttrib3fv(Qu,Uu);break;case 4:fu.vertexAttrib4fv(Qu,Uu);break;default:fu.vertexAttrib1fv(Qu,Uu)}}}}vu.disableUnusedAttributes()}}this.compile=function(nu,mu){Ps=Mu.get(nu,mu),Ps.init(),nu.traverse(function(Au){Au.isLight&&(Ps.pushLight(Au),Au.castShadow&&Ps.pushShadow(Au))}),Ps.setupLights(mu);const du={};nu.traverse(function(Au){let Iu=Au.material;if(Iu)if(Array.isArray(Iu))for(let Xu=0;Xu<Iu.length;Xu++){let qu=Iu[Xu];qu.uuid in du||(Tl(qu,nu,Au),du[qu.uuid]=!0)}else Iu.uuid in du||(Tl(Iu,nu,Au),du[Iu.uuid]=!0)})};var xl=null;function _l(nu){Pu.isPresenting||xl&&xl(nu)}var Bl=new WebGLAnimation;Bl.setAnimationLoop(_l),typeof window!="undefined"&&Bl.setContext(window),this.setAnimationLoop=function(nu){xl=nu,Pu.setAnimationLoop(nu),Bl.start()},this.render=function(nu,mu){var du,Au;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),du=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Au=arguments[3]),!(mu&&mu.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!ks){Vs.geometry=null,Vs.program=null,Vs.wireframe=!1,Ns=-1,Gs=null,nu.autoUpdate===!0&&nu.updateMatrixWorld(),mu.parent===null&&mu.updateMatrixWorld(),Pu.enabled&&Pu.isPresenting&&(mu=Pu.getCamera(mu)),nu.onBeforeRender(Rs,nu,mu,du||Ds),Ps=Mu.get(nu,mu),Ps.init(),xu.multiplyMatrices(mu.projectionMatrix,mu.matrixWorldInverse),ru.setFromProjectionMatrix(xu),cu=this.localClippingEnabled,lu=su.init(this.clippingPlanes,cu,mu),Is=Cu.get(nu,mu),Is.init(),Al(nu,mu,0,Rs.sortObjects),Is.finish(),Rs.sortObjects===!0&&Is.sort(Ys,qs),lu&&su.beginShadows();var Iu=Ps.state.shadowsArray;Ou.render(Iu,nu,mu),Ps.setupLights(mu),lu&&su.endShadows(),this.info.autoReset&&this.info.reset(),du!==void 0&&this.setRenderTarget(du),Wu.render(Is,nu,mu,Au);var Xu=Is.opaque,qu=Is.transparent;if(nu.overrideMaterial){var Vu=nu.overrideMaterial;Xu.length&&Cl(Xu,nu,mu,Vu),qu.length&&Cl(qu,nu,mu,Vu)}else Xu.length&&Cl(Xu,nu,mu),qu.length&&Cl(qu,nu,mu);nu.onAfterRender(Rs,nu,mu),Ds!==null&&(Tu.updateRenderTargetMipmap(Ds),Tu.updateMultisampleRenderTarget(Ds)),vu.buffers.depth.setTest(!0),vu.buffers.depth.setMask(!0),vu.buffers.color.setMask(!0),vu.setPolygonOffset(!1),Is=null,Ps=null}};function Al(nu,mu,du,Au){if(nu.visible!==!1){var Iu=nu.layers.test(mu.layers);if(Iu){if(nu.isGroup)du=nu.renderOrder;else if(nu.isLOD)nu.autoUpdate===!0&&nu.update(mu);else if(nu.isLight)Ps.pushLight(nu),nu.castShadow&&Ps.pushShadow(nu);else if(nu.isSprite){if(!nu.frustumCulled||ru.intersectsSprite(nu)){Au&&bu.setFromMatrixPosition(nu.matrixWorld).applyMatrix4(xu);var Xu=Gu.update(nu),qu=nu.material;qu.visible&&Is.push(nu,Xu,qu,du,bu.z,null)}}else if(nu.isImmediateRenderObject)Au&&bu.setFromMatrixPosition(nu.matrixWorld).applyMatrix4(xu),Is.push(nu,null,nu.material,du,bu.z,null);else if((nu.isMesh||nu.isLine||nu.isPoints)&&(nu.isSkinnedMesh&&nu.skeleton.frame!==pu.render.frame&&(nu.skeleton.update(),nu.skeleton.frame=pu.render.frame),!nu.frustumCulled||ru.intersectsObject(nu))){Au&&bu.setFromMatrixPosition(nu.matrixWorld).applyMatrix4(xu);var Xu=Gu.update(nu),qu=nu.material;if(Array.isArray(qu))for(var Vu=Xu.groups,Qu=0,Zu=Vu.length;Qu<Zu;Qu++){var wl=Vu[Qu],Ws=qu[wl.materialIndex];Ws&&Ws.visible&&Is.push(nu,Xu,Ws,du,bu.z,wl)}else qu.visible&&Is.push(nu,Xu,qu,du,bu.z,null)}}for(var iu=nu.children,Qu=0,Zu=iu.length;Qu<Zu;Qu++)Al(iu[Qu],mu,du,Au)}}function Cl(nu,mu,du,Au){for(var Iu=0,Xu=nu.length;Iu<Xu;Iu++){var qu=nu[Iu],Vu=qu.object,Qu=qu.geometry,Zu=Au===void 0?qu.material:Au,wl=qu.group;if(du.isArrayCamera){Us=du;for(var Ws=du.cameras,iu=0,au=Ws.length;iu<au;iu++){var hu=Ws[iu];Vu.layers.test(hu.layers)&&(vu.viewport(zs.copy(hu.viewport)),Ps.setupLights(hu),Il(Vu,mu,hu,Qu,Zu,wl))}}else Us=null,Il(Vu,mu,du,Qu,Zu,wl)}}function Il(nu,mu,du,Au,Iu,Xu){if(nu.onBeforeRender(Rs,mu,du,Au,Iu,Xu),Ps=Mu.get(mu,Us||du),nu.modelViewMatrix.multiplyMatrices(du.matrixWorldInverse,nu.matrixWorld),nu.normalMatrix.getNormalMatrix(nu.modelViewMatrix),nu.isImmediateRenderObject){var qu=Pl(du,mu,Iu,nu);vu.setMaterial(Iu),Vs.geometry=null,Vs.program=null,Vs.wireframe=!1,Ju(nu,qu)}else Rs.renderBufferDirect(du,mu,Au,Iu,nu,Xu);nu.onAfterRender(Rs,mu,du,Au,Iu,Xu),Ps=Mu.get(mu,Us||du)}function Tl(nu,mu,du){var Au=Eu.get(nu),Iu=Ps.state.lights,Xu=Ps.state.shadowsArray,qu=Iu.state.version,Vu=tu.getParameters(nu,Iu.state,Xu,mu,su.numPlanes,su.numIntersection,du),Qu=tu.getProgramCacheKey(Vu),Zu=Au.program,wl=!0;if(Zu===void 0)nu.addEventListener("dispose",uu);else if(Zu.cacheKey!==Qu)ku(nu);else if(Au.lightsStateVersion!==qu)Au.lightsStateVersion=qu,wl=!1;else{if(Vu.shaderID!==void 0)return;wl=!1}wl&&(Zu=tu.acquireProgram(Vu,Qu),Au.program=Zu,Au.uniforms=Vu.uniforms,Au.outputEncoding=Vu.outputEncoding,nu.program=Zu);var Ws=Zu.getAttributes();if(nu.morphTargets){nu.numSupportedMorphTargets=0;for(var iu=0;iu<Rs.maxMorphTargets;iu++)Ws["morphTarget"+iu]>=0&&nu.numSupportedMorphTargets++}if(nu.morphNormals){nu.numSupportedMorphNormals=0;for(var iu=0;iu<Rs.maxMorphNormals;iu++)Ws["morphNormal"+iu]>=0&&nu.numSupportedMorphNormals++}var au=Au.uniforms;(!nu.isShaderMaterial&&!nu.isRawShaderMaterial||nu.clipping===!0)&&(Au.numClippingPlanes=su.numPlanes,Au.numIntersection=su.numIntersection,au.clippingPlanes=su.uniform),Au.environment=nu.isMeshStandardMaterial?mu.environment:null,Au.fog=mu.fog,Au.needsLights=Ol(nu),Au.lightsStateVersion=qu,Au.needsLights&&(au.ambientLightColor.value=Iu.state.ambient,au.lightProbe.value=Iu.state.probe,au.directionalLights.value=Iu.state.directional,au.directionalLightShadows.value=Iu.state.directionalShadow,au.spotLights.value=Iu.state.spot,au.spotLightShadows.value=Iu.state.spotShadow,au.rectAreaLights.value=Iu.state.rectArea,au.pointLights.value=Iu.state.point,au.pointLightShadows.value=Iu.state.pointShadow,au.hemisphereLights.value=Iu.state.hemi,au.directionalShadowMap.value=Iu.state.directionalShadowMap,au.directionalShadowMatrix.value=Iu.state.directionalShadowMatrix,au.spotShadowMap.value=Iu.state.spotShadowMap,au.spotShadowMatrix.value=Iu.state.spotShadowMatrix,au.pointShadowMap.value=Iu.state.pointShadowMap,au.pointShadowMatrix.value=Iu.state.pointShadowMatrix);var hu=Au.program.getUniforms(),_u=WebGLUniforms.seqWithValue(hu.seq,au);Au.uniformsList=_u}function Pl(nu,mu,du,Au){Tu.resetTextureUnits();var Iu=mu.fog,Xu=du.isMeshStandardMaterial?mu.environment:null,qu=Ds===null?Rs.outputEncoding:Ds.texture.encoding,Vu=Eu.get(du),Qu=Ps.state.lights;if(lu&&(cu||nu!==Gs)){var Zu=nu===Gs&&du.id===Ns;su.setState(du.clippingPlanes,du.clipIntersection,du.clipShadows,nu,Vu,Zu)}du.version===Vu.__version?(Vu.program===void 0||du.fog&&Vu.fog!==Iu||Vu.environment!==Xu||Vu.needsLights&&Vu.lightsStateVersion!==Qu.state.version||Vu.numClippingPlanes!==void 0&&(Vu.numClippingPlanes!==su.numPlanes||Vu.numIntersection!==su.numIntersection)||Vu.outputEncoding!==qu)&&Tl(du,mu,Au):(Tl(du,mu,Au),Vu.__version=du.version);var wl=!1,Ws=!1,iu=!1,au=Vu.program,hu=au.getUniforms(),_u=Vu.uniforms;if(vu.useProgram(au.program)&&(wl=!0,Ws=!0,iu=!0),du.id!==Ns&&(Ns=du.id,Ws=!0),wl||Gs!==nu){if(hu.setValue(fu,"projectionMatrix",nu.projectionMatrix),wu.logarithmicDepthBuffer&&hu.setValue(fu,"logDepthBufFC",2/(Math.log(nu.far+1)/Math.LN2)),Gs!==nu&&(Gs=nu,Ws=!0,iu=!0),du.isShaderMaterial||du.isMeshPhongMaterial||du.isMeshToonMaterial||du.isMeshStandardMaterial||du.envMap){var Hu=hu.map.cameraPosition;Hu!==void 0&&Hu.setValue(fu,bu.setFromMatrixPosition(nu.matrixWorld))}(du.isMeshPhongMaterial||du.isMeshToonMaterial||du.isMeshLambertMaterial||du.isMeshBasicMaterial||du.isMeshStandardMaterial||du.isShaderMaterial)&&hu.setValue(fu,"isOrthographic",nu.isOrthographicCamera===!0),(du.isMeshPhongMaterial||du.isMeshToonMaterial||du.isMeshLambertMaterial||du.isMeshBasicMaterial||du.isMeshStandardMaterial||du.isShaderMaterial||du.skinning)&&hu.setValue(fu,"viewMatrix",nu.matrixWorldInverse)}if(du.skinning){hu.setOptional(fu,Au,"bindMatrix"),hu.setOptional(fu,Au,"bindMatrixInverse");var Yu=Au.skeleton;if(Yu){var Sl=Yu.bones;if(wu.floatVertexTextures){if(Yu.boneTexture===void 0){var Uu=Math.sqrt(Sl.length*4);Uu=MathUtils.ceilPowerOfTwo(Uu),Uu=Math.max(Uu,4);var Ml=new Float32Array(Uu*Uu*4);Ml.set(Yu.boneMatrices);var Rl=new DataTexture(Ml,Uu,Uu,RGBAFormat,FloatType);Yu.boneMatrices=Ml,Yu.boneTexture=Rl,Yu.boneTextureSize=Uu}hu.setValue(fu,"boneTexture",Yu.boneTexture,Tu),hu.setValue(fu,"boneTextureSize",Yu.boneTextureSize)}else hu.setOptional(fu,Yu,"boneMatrices")}}return(Ws||Vu.receiveShadow!==Au.receiveShadow)&&(Vu.receiveShadow=Au.receiveShadow,hu.setValue(fu,"receiveShadow",Au.receiveShadow)),Ws&&(hu.setValue(fu,"toneMappingExposure",Rs.toneMappingExposure),hu.setValue(fu,"toneMappingWhitePoint",Rs.toneMappingWhitePoint),Vu.needsLights&&Fl(_u,iu),Iu&&du.fog&&ou.refreshFogUniforms(_u,Iu),ou.refreshMaterialUniforms(_u,du,Xu,Ks,Zs),_u.ltc_1!==void 0&&(_u.ltc_1.value=UniformsLib.LTC_1),_u.ltc_2!==void 0&&(_u.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(fu,Vu.uniformsList,_u,Tu)),du.isShaderMaterial&&du.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(fu,Vu.uniformsList,_u,Tu),du.uniformsNeedUpdate=!1),du.isSpriteMaterial&&hu.setValue(fu,"center",Au.center),hu.setValue(fu,"modelViewMatrix",Au.modelViewMatrix),hu.setValue(fu,"normalMatrix",Au.normalMatrix),hu.setValue(fu,"modelMatrix",Au.matrixWorld),au}function Fl(nu,mu){nu.ambientLightColor.needsUpdate=mu,nu.lightProbe.needsUpdate=mu,nu.directionalLights.needsUpdate=mu,nu.directionalLightShadows.needsUpdate=mu,nu.pointLights.needsUpdate=mu,nu.pointLightShadows.needsUpdate=mu,nu.spotLights.needsUpdate=mu,nu.spotLightShadows.needsUpdate=mu,nu.rectAreaLights.needsUpdate=mu,nu.hemisphereLights.needsUpdate=mu}function Ol(nu){return nu.isMeshLambertMaterial||nu.isMeshToonMaterial||nu.isMeshPhongMaterial||nu.isMeshStandardMaterial||nu.isShadowMaterial||nu.isShaderMaterial&&nu.lights===!0}this.setFramebuffer=function(nu){$s!==nu&&Ds===null&&fu.bindFramebuffer(36160,nu),$s=nu},this.getActiveCubeFace=function(){return Os},this.getActiveMipmapLevel=function(){return Ls},this.getRenderTarget=function(){return Ds},this.setRenderTarget=function(nu,mu,du){Ds=nu,Os=mu,Ls=du,nu&&Eu.get(nu).__webglFramebuffer===void 0&&Tu.setupRenderTarget(nu);var Au=$s,Iu=!1;if(nu){var Xu=Eu.get(nu).__webglFramebuffer;nu.isWebGLCubeRenderTarget?(Au=Xu[mu||0],Iu=!0):nu.isWebGLMultisampleRenderTarget?Au=Eu.get(nu).__webglMultisampledFramebuffer:Au=Xu,zs.copy(nu.viewport),Hs.copy(nu.scissor),Qs=nu.scissorTest}else zs.copy(eu).multiplyScalar(Ks).floor(),Hs.copy(Js).multiplyScalar(Ks).floor(),Qs=Xs;if(Fs!==Au&&(fu.bindFramebuffer(36160,Au),Fs=Au),vu.viewport(zs),vu.scissor(Hs),vu.setScissorTest(Qs),Iu){var qu=Eu.get(nu.texture);fu.framebufferTexture2D(36160,36064,34069+(mu||0),qu.__webglTexture,du||0)}},this.readRenderTargetPixels=function(nu,mu,du,Au,Iu,Xu,qu){if(!(nu&&nu.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Vu=Eu.get(nu).__webglFramebuffer;if(nu.isWebGLCubeRenderTarget&&qu!==void 0&&(Vu=Vu[qu]),Vu){var Qu=!1;Vu!==Fs&&(fu.bindFramebuffer(36160,Vu),Qu=!0);try{var Zu=nu.texture,wl=Zu.format,Ws=Zu.type;if(wl!==RGBAFormat&&Ku.convert(wl)!==fu.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ws!==UnsignedByteType&&Ku.convert(Ws)!==fu.getParameter(35738)&&!(Ws===FloatType&&(wu.isWebGL2||Su.get("OES_texture_float")||Su.get("WEBGL_color_buffer_float")))&&!(Ws===HalfFloatType&&(wu.isWebGL2?Su.get("EXT_color_buffer_float"):Su.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}fu.checkFramebufferStatus(36160)===36053?mu>=0&&mu<=nu.width-Au&&du>=0&&du<=nu.height-Iu&&fu.readPixels(mu,du,Au,Iu,Ku.convert(wl),Ku.convert(Ws),Xu):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Qu&&fu.bindFramebuffer(36160,Fs)}}},this.copyFramebufferToTexture=function(nu,mu,du){du===void 0&&(du=0);var Au=Math.pow(2,-du),Iu=Math.floor(mu.image.width*Au),Xu=Math.floor(mu.image.height*Au),qu=Ku.convert(mu.format);Tu.setTexture2D(mu,0),fu.copyTexImage2D(3553,du,qu,nu.x,nu.y,Iu,Xu,0),vu.unbindTexture()},this.copyTextureToTexture=function(nu,mu,du,Au){Au===void 0&&(Au=0);var Iu=mu.image.width,Xu=mu.image.height,qu=Ku.convert(du.format),Vu=Ku.convert(du.type);Tu.setTexture2D(du,0),mu.isDataTexture?fu.texSubImage2D(3553,Au,nu.x,nu.y,Iu,Xu,qu,Vu,mu.image.data):mu.isCompressedTexture?fu.compressedTexSubImage2D(3553,Au,nu.x,nu.y,mu.mipmaps[0].width,mu.mipmaps[0].height,qu,mu.mipmaps[0].data):fu.texSubImage2D(3553,Au,nu.x,nu.y,qu,Vu,mu.image),Au===0&&du.generateMipmaps&&fu.generateMipmap(3553),vu.unbindTexture()},this.initTexture=function(nu){Tu.setTexture2D(nu,0),vu.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(ca,ga){this.name="",this.color=new Color(ca),this.density=ga!==void 0?ga:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(ca,ga,ya){this.name="",this.color=new Color(ca),this.near=ga!==void 0?ga:1,this.far=ya!==void 0?ya:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(ca,ga){this.array=ca,this.stride=ga,this.count=ca!==void 0?ca.length/ga:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(ca){ca===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(ca){return this.usage=ca,this},copy:function(ca){return this.array=new ca.array.constructor(ca.array),this.count=ca.count,this.stride=ca.stride,this.usage=ca.usage,this},copyAt:function(ca,ga,ya){ca*=this.stride,ya*=ga.stride;for(var _a=0,_s=this.stride;_a<_s;_a++)this.array[ca+_a]=ga.array[ya+_a];return this},set:function(ca,ga){return ga===void 0&&(ga=0),this.array.set(ca,ga),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(ca){return this.onUploadCallback=ca,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(ca,ga,ya,_a){this.name="",this.data=ca,this.itemSize=ga,this.offset=ya,this.normalized=_a===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(ca){for(var ga=0,ya=this.data.count;ga<ya;ga++)_vector$6.x=this.getX(ga),_vector$6.y=this.getY(ga),_vector$6.z=this.getZ(ga),_vector$6.applyMatrix4(ca),this.setXYZ(ga,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset]=ga,this},setY:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+1]=ga,this},setZ:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+2]=ga,this},setW:function(ca,ga){return this.data.array[ca*this.data.stride+this.offset+3]=ga,this},getX:function(ca){return this.data.array[ca*this.data.stride+this.offset]},getY:function(ca){return this.data.array[ca*this.data.stride+this.offset+1]},getZ:function(ca){return this.data.array[ca*this.data.stride+this.offset+2]},getW:function(ca){return this.data.array[ca*this.data.stride+this.offset+3]},setXY:function(ca,ga,ya){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=ya,this},setXYZ:function(ca,ga,ya,_a){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=ya,this.data.array[ca+2]=_a,this},setXYZW:function(ca,ga,ya,_a,_s){return ca=ca*this.data.stride+this.offset,this.data.array[ca+0]=ga,this.data.array[ca+1]=ya,this.data.array[ca+2]=_a,this.data.array[ca+3]=_s,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var ya=ga*this.data.stride+this.offset,_a=0;_a<this.itemSize;_a++)ca.push(this.data.array[ya+_a]);return new BufferAttribute(new this.array.constructor(ca),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var ca=[],ga=0;ga<this.count;ga++)for(var ya=ga*this.data.stride+this.offset,_a=0;_a<this.itemSize;_a++)ca.push(this.data.array[ya+_a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:ca,normalized:this.normalized}}});function SpriteMaterial(ca){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(ca)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.rotation=ca.rotation,this.sizeAttenuation=ca.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(ca){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var ga=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),ya=new InterleavedBuffer(ga,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(ya,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(ya,2,3,!1))}this.geometry=_geometry,this.material=ca!==void 0?ca:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(ca,ga){ca.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(ca.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(ca.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),ca.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var ya=this.material.rotation,_a,_s;ya!==0&&(_s=Math.cos(ya),_a=Math.sin(ya));var Ss=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,Ss,_worldScale,_a,_s),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,Ss,_worldScale,_a,_s),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,Ss,_worldScale,_a,_s),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var Ms=ca.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(Ms===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,Ss,_worldScale,_a,_s),_uvB$1.set(0,1),Ms=ca.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),Ms===null))){var Es=ca.ray.origin.distanceTo(_intersectPoint);Es<ca.near||Es>ca.far||ga.push({distance:Es,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(ca){return Object3D.prototype.copy.call(this,ca),ca.center!==void 0&&this.center.copy(ca.center),this}});function transformVertex(ca,ga,ya,_a,_s,Ss){_alignedPosition.subVectors(ca,ya).addScalar(.5).multiply(_a),_s!==void 0?(_rotatedPosition.x=Ss*_alignedPosition.x-_s*_alignedPosition.y,_rotatedPosition.y=_s*_alignedPosition.x+Ss*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ca.copy(ga),ca.x+=_rotatedPosition.x,ca.y+=_rotatedPosition.y,ca.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(ca){Object3D.prototype.copy.call(this,ca,!1);for(var ga=ca.levels,ya=0,_a=ga.length;ya<_a;ya++){var _s=ga[ya];this.addLevel(_s.object.clone(),_s.distance)}return this.autoUpdate=ca.autoUpdate,this},addLevel:function(ca,ga){ga===void 0&&(ga=0),ga=Math.abs(ga);for(var ya=this.levels,_a=0;_a<ya.length&&!(ga<ya[_a].distance);_a++);return ya.splice(_a,0,{distance:ga,object:ca}),this.add(ca),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(ca){var ga=this.levels;if(ga.length>0){for(var ya=1,_a=ga.length;ya<_a&&!(ca<ga[ya].distance);ya++);return ga[ya-1].object}return null},raycast:function(ca,ga){var ya=this.levels;if(ya.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var _a=ca.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(_a).raycast(ca,ga)}},update:function(ca){var ga=this.levels;if(ga.length>1){_v1$4.setFromMatrixPosition(ca.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var ya=_v1$4.distanceTo(_v2$2)/ca.zoom;ga[0].object.visible=!0;for(var _a=1,_s=ga.length;_a<_s&&ya>=ga[_a].distance;_a++)ga[_a-1].object.visible=!1,ga[_a].object.visible=!0;for(this._currentLevel=_a-1;_a<_s;_a++)ga[_a].object.visible=!1}},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);this.autoUpdate===!1&&(ga.object.autoUpdate=!1),ga.object.levels=[];for(var ya=this.levels,_a=0,_s=ya.length;_a<_s;_a++){var Ss=ya[_a];ga.object.levels.push({object:Ss.object.uuid,distance:Ss.distance})}return ga}});function SkinnedMesh(ca,ga){ca&&ca.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,ca,ga),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(ca,ga){this.skeleton=ca,ga===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),ga=this.matrixWorld),this.bindMatrix.copy(ga),this.bindMatrixInverse.getInverse(ga)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var ca=new Vector4,ga=this.geometry.attributes.skinWeight,ya=0,_a=ga.count;ya<_a;ya++){ca.x=ga.getX(ya),ca.y=ga.getY(ya),ca.z=ga.getZ(ya),ca.w=ga.getW(ya);var _s=1/ca.manhattanLength();_s!==1/0?ca.multiplyScalar(_s):ca.set(1,0,0,0),ga.setXYZW(ya,ca.x,ca.y,ca.z,ca.w)}},updateMatrixWorld:function(ca){Mesh.prototype.updateMatrixWorld.call(this,ca),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var ca=new Vector3,ga=new Vector4,ya=new Vector4,_a=new Vector3,_s=new Matrix4;return function(Ss,Ms){var Es=this.skeleton,Cs=this.geometry;ga.fromBufferAttribute(Cs.attributes.skinIndex,Ss),ya.fromBufferAttribute(Cs.attributes.skinWeight,Ss),ca.fromBufferAttribute(Cs.attributes.position,Ss).applyMatrix4(this.bindMatrix),Ms.set(0,0,0);for(var Ts=0;Ts<4;Ts++){var Bs=ya.getComponent(Ts);if(Bs!==0){var Is=ga.getComponent(Ts);_s.multiplyMatrices(Es.bones[Is].matrixWorld,Es.boneInverses[Is]),Ms.addScaledVector(_a.copy(ca).applyMatrix4(_s),Bs)}}return Ms.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(ca,ga){if(ca=ca||[],this.bones=ca.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,ga===void 0)this.calculateInverses();else if(this.bones.length===ga.length)this.boneInverses=ga.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var ya=0,_a=this.bones.length;ya<_a;ya++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var ca=0,ga=this.bones.length;ca<ga;ca++){var ya=new Matrix4;this.bones[ca]&&ya.getInverse(this.bones[ca].matrixWorld),this.boneInverses.push(ya)}},pose:function(){var ca,ga,ya;for(ga=0,ya=this.bones.length;ga<ya;ga++)ca=this.bones[ga],ca&&ca.matrixWorld.getInverse(this.boneInverses[ga]);for(ga=0,ya=this.bones.length;ga<ya;ga++)ca=this.bones[ga],ca&&(ca.parent&&ca.parent.isBone?(ca.matrix.getInverse(ca.parent.matrixWorld),ca.matrix.multiply(ca.matrixWorld)):ca.matrix.copy(ca.matrixWorld),ca.matrix.decompose(ca.position,ca.quaternion,ca.scale))},update:function(){for(var ca=this.bones,ga=this.boneInverses,ya=this.boneMatrices,_a=this.boneTexture,_s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s]?ca[_s].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Ms,ga[_s]),_offsetMatrix.toArray(ya,_s*16)}_a!==void 0&&(_a.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(ca){for(var ga=0,ya=this.bones.length;ga<ya;ga++){var _a=this.bones[ga];if(_a.name===ca)return _a}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(ca,ga,ya){Mesh.call(this,ca,ga),this.instanceMatrix=new BufferAttribute(new Float32Array(ya*16),16),this.count=ya,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(ca,ga){ga.fromArray(this.instanceMatrix.array,ca*16)},raycast:function(ca,ga){var ya=this.matrixWorld,_a=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var _s=0;_s<_a;_s++){this.getMatrixAt(_s,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(ya,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(ca,_instanceIntersects);for(var Ss=0,Ms=_instanceIntersects.length;Ss<Ms;Ss++){var Es=_instanceIntersects[Ss];Es.instanceId=_s,Es.object=this,ga.push(Es)}_instanceIntersects.length=0}},setMatrixAt:function(ca,ga){ga.toArray(this.instanceMatrix.array,ca*16)},updateMorphTargets:function(){}});function LineBasicMaterial(ca){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(ca)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.linewidth=ca.linewidth,this.linecap=ca.linecap,this.linejoin=ca.linejoin,this.morphTargets=ca.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line(ca,ga,ya){ya===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new LineBasicMaterial,this.updateMorphTargets()}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,ya=[0],_a=1,_s=ga.count;_a<_s;_a++)_start.fromBufferAttribute(ga,_a-1),_end.fromBufferAttribute(ga,_a),ya[_a]=ya[_a-1],ya[_a]+=_start.distanceTo(_end);ca.setAttribute("lineDistance",new Float32BufferAttribute(ya,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry){var Ss=ca.vertices,ya=ca.lineDistances;ya[0]=0;for(var _a=1,_s=Ss.length;_a<_s;_a++)ya[_a]=ya[_a-1],ya[_a]+=Ss[_a-1].distanceTo(Ss[_a])}return this},raycast:function(ca,ga){var ya=this.geometry,_a=this.matrixWorld,_s=ca.params.Line.threshold;if(ya.boundingSphere===null&&ya.computeBoundingSphere(),_sphere$2.copy(ya.boundingSphere),_sphere$2.applyMatrix4(_a),_sphere$2.radius+=_s,ca.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(_a),_ray$1.copy(ca.ray).applyMatrix4(_inverseMatrix$1);var Ss=_s/((this.scale.x+this.scale.y+this.scale.z)/3),Ms=Ss*Ss,Es=new Vector3,Cs=new Vector3,Ts=new Vector3,Bs=new Vector3,Is=this&&this.isLineSegments?2:1;if(ya.isBufferGeometry){var Ps=ya.index,Rs=ya.attributes,ks=Rs.position.array;if(Ps!==null)for(var $s=Ps.array,Os=0,Ls=$s.length-1;Os<Ls;Os+=Is){var Ds=$s[Os],Fs=$s[Os+1];Es.fromArray(ks,Ds*3),Cs.fromArray(ks,Fs*3);var Ns=_ray$1.distanceSqToSegment(Es,Cs,Bs,Ts);if(!(Ns>Ms)){Bs.applyMatrix4(this.matrixWorld);var Vs=ca.ray.origin.distanceTo(Bs);Vs<ca.near||Vs>ca.far||ga.push({distance:Vs,point:Ts.clone().applyMatrix4(this.matrixWorld),index:Os,face:null,faceIndex:null,object:this})}}else for(var Os=0,Ls=ks.length/3-1;Os<Ls;Os+=Is){Es.fromArray(ks,3*Os),Cs.fromArray(ks,3*Os+3);var Ns=_ray$1.distanceSqToSegment(Es,Cs,Bs,Ts);if(!(Ns>Ms)){Bs.applyMatrix4(this.matrixWorld);var Vs=ca.ray.origin.distanceTo(Bs);Vs<ca.near||Vs>ca.far||ga.push({distance:Vs,point:Ts.clone().applyMatrix4(this.matrixWorld),index:Os,face:null,faceIndex:null,object:this})}}}else if(ya.isGeometry)for(var Gs=ya.vertices,Us=Gs.length,Os=0;Os<Us-1;Os+=Is){var Ns=_ray$1.distanceSqToSegment(Gs[Os],Gs[Os+1],Bs,Ts);if(!(Ns>Ms)){Bs.applyMatrix4(this.matrixWorld);var Vs=ca.ray.origin.distanceTo(Bs);Vs<ca.near||Vs>ca.far||ga.push({distance:Vs,point:Ts.clone().applyMatrix4(this.matrixWorld),index:Os,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var ca=this.geometry,ga,ya,_a;if(ca.isBufferGeometry){var _s=ca.morphAttributes,Ss=Object.keys(_s);if(Ss.length>0){var Ms=_s[Ss[0]];if(Ms!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,ya=Ms.length;ga<ya;ga++)_a=Ms[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[_a]=ga}}else{var Es=ca.morphTargets;Es!==void 0&&Es.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(ca,ga){Line.call(this,ca,ga),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var ca=this.geometry;if(ca.isBufferGeometry)if(ca.index===null){for(var ga=ca.attributes.position,ya=[],_a=0,_s=ga.count;_a<_s;_a+=2)_start$1.fromBufferAttribute(ga,_a),_end$1.fromBufferAttribute(ga,_a+1),ya[_a]=_a===0?0:ya[_a-1],ya[_a+1]=ya[_a]+_start$1.distanceTo(_end$1);ca.setAttribute("lineDistance",new Float32BufferAttribute(ya,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(ca.isGeometry)for(var Ss=ca.vertices,ya=ca.lineDistances,_a=0,_s=Ss.length;_a<_s;_a+=2)_start$1.copy(Ss[_a]),_end$1.copy(Ss[_a+1]),ya[_a]=_a===0?0:ya[_a-1],ya[_a+1]=ya[_a]+_start$1.distanceTo(_end$1);return this}});function LineLoop(ca,ga){Line.call(this,ca,ga),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(ca){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(ca)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.alphaMap=ca.alphaMap,this.size=ca.size,this.sizeAttenuation=ca.sizeAttenuation,this.morphTargets=ca.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(ca,ga){Object3D.call(this),this.type="Points",this.geometry=ca!==void 0?ca:new BufferGeometry,this.material=ga!==void 0?ga:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(ca,ga){var ya=this.geometry,_a=this.matrixWorld,_s=ca.params.Points.threshold;if(ya.boundingSphere===null&&ya.computeBoundingSphere(),_sphere$3.copy(ya.boundingSphere),_sphere$3.applyMatrix4(_a),_sphere$3.radius+=_s,ca.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(_a),_ray$2.copy(ca.ray).applyMatrix4(_inverseMatrix$2);var Ss=_s/((this.scale.x+this.scale.y+this.scale.z)/3),Ms=Ss*Ss;if(ya.isBufferGeometry){var Es=ya.index,Cs=ya.attributes,Ts=Cs.position.array;if(Es!==null)for(var Bs=Es.array,Is=0,Ps=Bs.length;Is<Ps;Is++){var Rs=Bs[Is];_position$1.fromArray(Ts,Rs*3),testPoint(_position$1,Rs,Ms,_a,ca,ga,this)}else for(var Is=0,ks=Ts.length/3;Is<ks;Is++)_position$1.fromArray(Ts,Is*3),testPoint(_position$1,Is,Ms,_a,ca,ga,this)}else for(var $s=ya.vertices,Is=0,ks=$s.length;Is<ks;Is++)testPoint($s[Is],Is,Ms,_a,ca,ga,this)}},updateMorphTargets:function(){var ca=this.geometry,ga,ya,_a;if(ca.isBufferGeometry){var _s=ca.morphAttributes,Ss=Object.keys(_s);if(Ss.length>0){var Ms=_s[Ss[0]];if(Ms!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},ga=0,ya=Ms.length;ga<ya;ga++)_a=Ms[ga].name||String(ga),this.morphTargetInfluences.push(0),this.morphTargetDictionary[_a]=ga}}else{var Es=ca.morphTargets;Es!==void 0&&Es.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(ca,ga,ya,_a,_s,Ss,Ms){var Es=_ray$2.distanceSqToPoint(ca);if(Es<ya){var Cs=new Vector3;_ray$2.closestPointToPoint(ca,Cs),Cs.applyMatrix4(_a);var Ts=_s.ray.origin.distanceTo(Cs);if(Ts<_s.near||Ts>_s.far)return;Ss.push({distance:Ts,distanceToRay:Math.sqrt(Es),point:Cs,index:ga,face:null,object:Ms})}}function VideoTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){Texture.call(this,ca,ga,ya,_a,_s,Ss,Ms,Es,Cs),this.format=Ms!==void 0?Ms:RGBFormat,this.minFilter=Ss!==void 0?Ss:LinearFilter,this.magFilter=_s!==void 0?_s:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var ca=this.image;ca.readyState>=ca.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is){Texture.call(this,null,Ss,Ms,Es,Cs,Ts,_a,_s,Bs,Is),this.image={width:ga,height:ya},this.mipmaps=ca,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){Texture.call(this,ca,ga,ya,_a,_s,Ss,Ms,Es,Cs),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts){if(Ts=Ts!==void 0?Ts:DepthFormat,Ts!==DepthFormat&&Ts!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ya===void 0&&Ts===DepthFormat&&(ya=UnsignedShortType),ya===void 0&&Ts===DepthStencilFormat&&(ya=UnsignedInt248Type),Texture.call(this,null,_a,_s,Ss,Ms,Es,Ts,ya,Cs),this.image={width:ca,height:ga},this.magFilter=Ms!==void 0?Ms:NearestFilter,this.minFilter=Es!==void 0?Es:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(ca){BufferGeometry.call(this),this.type="WireframeGeometry";var ga=[],ya,_a,_s,Ss,Ms,Es=[0,0],Cs={},Ts,Bs,Is,Ps,Rs=["a","b","c"],ks;if(ca&&ca.isGeometry){var $s=ca.faces;for(ya=0,_s=$s.length;ya<_s;ya++){var Os=$s[ya];for(_a=0;_a<3;_a++)Bs=Os[Rs[_a]],Is=Os[Rs[(_a+1)%3]],Es[0]=Math.min(Bs,Is),Es[1]=Math.max(Bs,Is),Ps=Es[0]+","+Es[1],Cs[Ps]===void 0&&(Cs[Ps]={index1:Es[0],index2:Es[1]})}for(Ps in Cs)Ts=Cs[Ps],ks=ca.vertices[Ts.index1],ga.push(ks.x,ks.y,ks.z),ks=ca.vertices[Ts.index2],ga.push(ks.x,ks.y,ks.z)}else if(ca&&ca.isBufferGeometry){var Ls,Ds,Fs,Ns,Vs,Gs,Us,zs;if(ks=new Vector3,ca.index!==null){for(Ls=ca.attributes.position,Ds=ca.index,Fs=ca.groups,Fs.length===0&&(Fs=[{start:0,count:Ds.count,materialIndex:0}]),Ss=0,Ms=Fs.length;Ss<Ms;++Ss)for(Ns=Fs[Ss],Vs=Ns.start,Gs=Ns.count,ya=Vs,_s=Vs+Gs;ya<_s;ya+=3)for(_a=0;_a<3;_a++)Bs=Ds.getX(ya+_a),Is=Ds.getX(ya+(_a+1)%3),Es[0]=Math.min(Bs,Is),Es[1]=Math.max(Bs,Is),Ps=Es[0]+","+Es[1],Cs[Ps]===void 0&&(Cs[Ps]={index1:Es[0],index2:Es[1]});for(Ps in Cs)Ts=Cs[Ps],ks.fromBufferAttribute(Ls,Ts.index1),ga.push(ks.x,ks.y,ks.z),ks.fromBufferAttribute(Ls,Ts.index2),ga.push(ks.x,ks.y,ks.z)}else for(Ls=ca.attributes.position,ya=0,_s=Ls.count/3;ya<_s;ya++)for(_a=0;_a<3;_a++)Us=3*ya+_a,ks.fromBufferAttribute(Ls,Us),ga.push(ks.x,ks.y,ks.z),zs=3*ya+(_a+1)%3,ks.fromBufferAttribute(Ls,zs),ga.push(ks.x,ks.y,ks.z)}this.setAttribute("position",new Float32BufferAttribute(ga,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(ca,ga,ya){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:ca,slices:ga,stacks:ya},this.fromBufferGeometry(new ParametricBufferGeometry(ca,ga,ya)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(ca,ga,ya){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:ca,slices:ga,stacks:ya};var _a=[],_s=[],Ss=[],Ms=[],Es=1e-5,Cs=new Vector3,Ts=new Vector3,Bs=new Vector3,Is=new Vector3,Ps=new Vector3,Rs,ks;ca.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var $s=ga+1;for(Rs=0;Rs<=ya;Rs++){var Os=Rs/ya;for(ks=0;ks<=ga;ks++){var Ls=ks/ga;ca(Ls,Os,Ts),_s.push(Ts.x,Ts.y,Ts.z),Ls-Es>=0?(ca(Ls-Es,Os,Bs),Is.subVectors(Ts,Bs)):(ca(Ls+Es,Os,Bs),Is.subVectors(Bs,Ts)),Os-Es>=0?(ca(Ls,Os-Es,Bs),Ps.subVectors(Ts,Bs)):(ca(Ls,Os+Es,Bs),Ps.subVectors(Bs,Ts)),Cs.crossVectors(Is,Ps).normalize(),Ss.push(Cs.x,Cs.y,Cs.z),Ms.push(Ls,Os)}}for(Rs=0;Rs<ya;Rs++)for(ks=0;ks<ga;ks++){var Ds=Rs*$s+ks,Fs=Rs*$s+ks+1,Ns=(Rs+1)*$s+ks+1,Vs=(Rs+1)*$s+ks;_a.push(Ds,Fs,Vs),_a.push(Fs,Ns,Vs)}this.setIndex(_a),this.setAttribute("position",new Float32BufferAttribute(_s,3)),this.setAttribute("normal",new Float32BufferAttribute(Ss,3)),this.setAttribute("uv",new Float32BufferAttribute(Ms,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(ca,ga,ya,_a){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:ca,indices:ga,radius:ya,detail:_a},this.fromBufferGeometry(new PolyhedronBufferGeometry(ca,ga,ya,_a)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(ca,ga,ya,_a){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:ca,indices:ga,radius:ya,detail:_a},ya=ya||1,_a=_a||0;var _s=[],Ss=[];Ms(_a),Cs(ya),Ts(),this.setAttribute("position",new Float32BufferAttribute(_s,3)),this.setAttribute("normal",new Float32BufferAttribute(_s.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ss,2)),_a===0?this.computeVertexNormals():this.normalizeNormals();function Ms(Ls){for(var Ds=new Vector3,Fs=new Vector3,Ns=new Vector3,Vs=0;Vs<ga.length;Vs+=3)Ps(ga[Vs+0],Ds),Ps(ga[Vs+1],Fs),Ps(ga[Vs+2],Ns),Es(Ds,Fs,Ns,Ls)}function Es(Ls,Ds,Fs,Ns){var Vs=Math.pow(2,Ns),Gs=[],Us,zs;for(Us=0;Us<=Vs;Us++){Gs[Us]=[];var Hs=Ls.clone().lerp(Fs,Us/Vs),Qs=Ds.clone().lerp(Fs,Us/Vs),js=Vs-Us;for(zs=0;zs<=js;zs++)zs===0&&Us===Vs?Gs[Us][zs]=Hs:Gs[Us][zs]=Hs.clone().lerp(Qs,zs/js)}for(Us=0;Us<Vs;Us++)for(zs=0;zs<2*(Vs-Us)-1;zs++){var Zs=Math.floor(zs/2);zs%2===0?(Is(Gs[Us][Zs+1]),Is(Gs[Us+1][Zs]),Is(Gs[Us][Zs])):(Is(Gs[Us][Zs+1]),Is(Gs[Us+1][Zs+1]),Is(Gs[Us+1][Zs]))}}function Cs(Ls){for(var Ds=new Vector3,Fs=0;Fs<_s.length;Fs+=3)Ds.x=_s[Fs+0],Ds.y=_s[Fs+1],Ds.z=_s[Fs+2],Ds.normalize().multiplyScalar(Ls),_s[Fs+0]=Ds.x,_s[Fs+1]=Ds.y,_s[Fs+2]=Ds.z}function Ts(){for(var Ls=new Vector3,Ds=0;Ds<_s.length;Ds+=3){Ls.x=_s[Ds+0],Ls.y=_s[Ds+1],Ls.z=_s[Ds+2];var Fs=$s(Ls)/2/Math.PI+.5,Ns=Os(Ls)/Math.PI+.5;Ss.push(Fs,1-Ns)}Rs(),Bs()}function Bs(){for(var Ls=0;Ls<Ss.length;Ls+=6){var Ds=Ss[Ls+0],Fs=Ss[Ls+2],Ns=Ss[Ls+4],Vs=Math.max(Ds,Fs,Ns),Gs=Math.min(Ds,Fs,Ns);Vs>.9&&Gs<.1&&(Ds<.2&&(Ss[Ls+0]+=1),Fs<.2&&(Ss[Ls+2]+=1),Ns<.2&&(Ss[Ls+4]+=1))}}function Is(Ls){_s.push(Ls.x,Ls.y,Ls.z)}function Ps(Ls,Ds){var Fs=Ls*3;Ds.x=ca[Fs+0],Ds.y=ca[Fs+1],Ds.z=ca[Fs+2]}function Rs(){for(var Ls=new Vector3,Ds=new Vector3,Fs=new Vector3,Ns=new Vector3,Vs=new Vector2,Gs=new Vector2,Us=new Vector2,zs=0,Hs=0;zs<_s.length;zs+=9,Hs+=6){Ls.set(_s[zs+0],_s[zs+1],_s[zs+2]),Ds.set(_s[zs+3],_s[zs+4],_s[zs+5]),Fs.set(_s[zs+6],_s[zs+7],_s[zs+8]),Vs.set(Ss[Hs+0],Ss[Hs+1]),Gs.set(Ss[Hs+2],Ss[Hs+3]),Us.set(Ss[Hs+4],Ss[Hs+5]),Ns.copy(Ls).add(Ds).add(Fs).divideScalar(3);var Qs=$s(Ns);ks(Vs,Hs+0,Ls,Qs),ks(Gs,Hs+2,Ds,Qs),ks(Us,Hs+4,Fs,Qs)}}function ks(Ls,Ds,Fs,Ns){Ns<0&&Ls.x===1&&(Ss[Ds]=Ls.x-1),Fs.x===0&&Fs.z===0&&(Ss[Ds]=Ns/2/Math.PI+.5)}function $s(Ls){return Math.atan2(Ls.z,-Ls.x)}function Os(Ls){return Math.atan2(-Ls.y,Math.sqrt(Ls.x*Ls.x+Ls.z*Ls.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(ca,ga){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new TetrahedronBufferGeometry(ca,ga)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(ca,ga){var ya=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],_a=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,ya,_a,ca,ga),this.type="TetrahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(ca,ga){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new OctahedronBufferGeometry(ca,ga)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(ca,ga){var ya=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],_a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,ya,_a,ca,ga),this.type="OctahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(ca,ga){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new IcosahedronBufferGeometry(ca,ga)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(ca,ga){var ya=(1+Math.sqrt(5))/2,_a=[-1,ya,0,1,ya,0,-1,-ya,0,1,-ya,0,0,-1,ya,0,1,ya,0,-1,-ya,0,1,-ya,ya,0,-1,ya,0,1,-ya,0,-1,-ya,0,1],_s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,_a,_s,ca,ga),this.type="IcosahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(ca,ga){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:ca,detail:ga},this.fromBufferGeometry(new DodecahedronBufferGeometry(ca,ga)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(ca,ga){var ya=(1+Math.sqrt(5))/2,_a=1/ya,_s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-_a,-ya,0,-_a,ya,0,_a,-ya,0,_a,ya,-_a,-ya,0,-_a,ya,0,_a,-ya,0,_a,ya,0,-ya,0,-_a,ya,0,-_a,-ya,0,_a,ya,0,_a],Ss=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,_s,Ss,ca,ga),this.type="DodecahedronBufferGeometry",this.parameters={radius:ca,detail:ga}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(ca,ga,ya,_a,_s,Ss){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:ca,tubularSegments:ga,radius:ya,radialSegments:_a,closed:_s},Ss!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var Ms=new TubeBufferGeometry(ca,ga,ya,_a,_s);this.tangents=Ms.tangents,this.normals=Ms.normals,this.binormals=Ms.binormals,this.fromBufferGeometry(Ms),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(ca,ga,ya,_a,_s){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:ca,tubularSegments:ga,radius:ya,radialSegments:_a,closed:_s},ga=ga||64,ya=ya||1,_a=_a||8,_s=_s||!1;var Ss=ca.computeFrenetFrames(ga,_s);this.tangents=Ss.tangents,this.normals=Ss.normals,this.binormals=Ss.binormals;var Ms=new Vector3,Es=new Vector3,Cs=new Vector2,Ts=new Vector3,Bs,Is,Ps=[],Rs=[],ks=[],$s=[];Os(),this.setIndex($s),this.setAttribute("position",new Float32BufferAttribute(Ps,3)),this.setAttribute("normal",new Float32BufferAttribute(Rs,3)),this.setAttribute("uv",new Float32BufferAttribute(ks,2));function Os(){for(Bs=0;Bs<ga;Bs++)Ls(Bs);Ls(_s===!1?ga:0),Fs(),Ds()}function Ls(Ns){Ts=ca.getPointAt(Ns/ga,Ts);var Vs=Ss.normals[Ns],Gs=Ss.binormals[Ns];for(Is=0;Is<=_a;Is++){var Us=Is/_a*Math.PI*2,zs=Math.sin(Us),Hs=-Math.cos(Us);Es.x=Hs*Vs.x+zs*Gs.x,Es.y=Hs*Vs.y+zs*Gs.y,Es.z=Hs*Vs.z+zs*Gs.z,Es.normalize(),Rs.push(Es.x,Es.y,Es.z),Ms.x=Ts.x+ya*Es.x,Ms.y=Ts.y+ya*Es.y,Ms.z=Ts.z+ya*Es.z,Ps.push(Ms.x,Ms.y,Ms.z)}}function Ds(){for(Is=1;Is<=ga;Is++)for(Bs=1;Bs<=_a;Bs++){var Ns=(_a+1)*(Is-1)+(Bs-1),Vs=(_a+1)*Is+(Bs-1),Gs=(_a+1)*Is+Bs,Us=(_a+1)*(Is-1)+Bs;$s.push(Ns,Vs,Us),$s.push(Vs,Gs,Us)}}function Fs(){for(Bs=0;Bs<=ga;Bs++)for(Is=0;Is<=_a;Is++)Cs.x=Bs/ga,Cs.y=Is/_a,ks.push(Cs.x,Cs.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.path=this.parameters.path.toJSON(),ca};function TorusKnotGeometry(ca,ga,ya,_a,_s,Ss,Ms){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:ya,radialSegments:_a,p:_s,q:Ss},Ms!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(ca,ga,ya,_a,_s,Ss)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(ca,ga,ya,_a,_s,Ss){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:ca,tube:ga,tubularSegments:ya,radialSegments:_a,p:_s,q:Ss},ca=ca||1,ga=ga||.4,ya=Math.floor(ya)||64,_a=Math.floor(_a)||8,_s=_s||2,Ss=Ss||3;var Ms=[],Es=[],Cs=[],Ts=[],Bs,Is,Ps=new Vector3,Rs=new Vector3,ks=new Vector3,$s=new Vector3,Os=new Vector3,Ls=new Vector3,Ds=new Vector3;for(Bs=0;Bs<=ya;++Bs){var Fs=Bs/ya*_s*Math.PI*2;for(js(Fs,_s,Ss,ca,ks),js(Fs+.01,_s,Ss,ca,$s),Ls.subVectors($s,ks),Ds.addVectors($s,ks),Os.crossVectors(Ls,Ds),Ds.crossVectors(Os,Ls),Os.normalize(),Ds.normalize(),Is=0;Is<=_a;++Is){var Ns=Is/_a*Math.PI*2,Vs=-ga*Math.cos(Ns),Gs=ga*Math.sin(Ns);Ps.x=ks.x+(Vs*Ds.x+Gs*Os.x),Ps.y=ks.y+(Vs*Ds.y+Gs*Os.y),Ps.z=ks.z+(Vs*Ds.z+Gs*Os.z),Es.push(Ps.x,Ps.y,Ps.z),Rs.subVectors(Ps,ks).normalize(),Cs.push(Rs.x,Rs.y,Rs.z),Ts.push(Bs/ya),Ts.push(Is/_a)}}for(Is=1;Is<=ya;Is++)for(Bs=1;Bs<=_a;Bs++){var Us=(_a+1)*(Is-1)+(Bs-1),zs=(_a+1)*Is+(Bs-1),Hs=(_a+1)*Is+Bs,Qs=(_a+1)*(Is-1)+Bs;Ms.push(Us,zs,Qs),Ms.push(zs,Hs,Qs)}this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Es,3)),this.setAttribute("normal",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2));function js(Zs,Ks,Ys,qs,eu){var Js=Math.cos(Zs),Xs=Math.sin(Zs),ru=Ys/Ks*Zs,su=Math.cos(ru);eu.x=qs*(2+su)*.5*Js,eu.y=qs*(2+su)*Xs*.5,eu.z=qs*Math.sin(ru)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(ca,ga,ya,_a,_s){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:ca,tube:ga,radialSegments:ya,tubularSegments:_a,arc:_s},this.fromBufferGeometry(new TorusBufferGeometry(ca,ga,ya,_a,_s)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(ca,ga,ya,_a,_s){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:ca,tube:ga,radialSegments:ya,tubularSegments:_a,arc:_s},ca=ca||1,ga=ga||.4,ya=Math.floor(ya)||8,_a=Math.floor(_a)||6,_s=_s||Math.PI*2;var Ss=[],Ms=[],Es=[],Cs=[],Ts=new Vector3,Bs=new Vector3,Is=new Vector3,Ps,Rs;for(Ps=0;Ps<=ya;Ps++)for(Rs=0;Rs<=_a;Rs++){var ks=Rs/_a*_s,$s=Ps/ya*Math.PI*2;Bs.x=(ca+ga*Math.cos($s))*Math.cos(ks),Bs.y=(ca+ga*Math.cos($s))*Math.sin(ks),Bs.z=ga*Math.sin($s),Ms.push(Bs.x,Bs.y,Bs.z),Ts.x=ca*Math.cos(ks),Ts.y=ca*Math.sin(ks),Is.subVectors(Bs,Ts).normalize(),Es.push(Is.x,Is.y,Is.z),Cs.push(Rs/_a),Cs.push(Ps/ya)}for(Ps=1;Ps<=ya;Ps++)for(Rs=1;Rs<=_a;Rs++){var Os=(_a+1)*Ps+Rs-1,Ls=(_a+1)*(Ps-1)+Rs-1,Ds=(_a+1)*(Ps-1)+Rs,Fs=(_a+1)*Ps+Rs;Ss.push(Os,Ls,Fs),Ss.push(Ls,Ds,Fs)}this.setIndex(Ss),this.setAttribute("position",new Float32BufferAttribute(Ms,3)),this.setAttribute("normal",new Float32BufferAttribute(Es,3)),this.setAttribute("uv",new Float32BufferAttribute(Cs,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(ca,ga,ya){ya=ya||2;var _a=ga&&ga.length,_s=_a?ga[0]*ya:ca.length,Ss=linkedList(ca,0,_s,ya,!0),Ms=[];if(!Ss||Ss.next===Ss.prev)return Ms;var Es,Cs,Ts,Bs,Is,Ps,Rs;if(_a&&(Ss=eliminateHoles(ca,ga,Ss,ya)),ca.length>80*ya){Es=Ts=ca[0],Cs=Bs=ca[1];for(var ks=ya;ks<_s;ks+=ya)Is=ca[ks],Ps=ca[ks+1],Is<Es&&(Es=Is),Ps<Cs&&(Cs=Ps),Is>Ts&&(Ts=Is),Ps>Bs&&(Bs=Ps);Rs=Math.max(Ts-Es,Bs-Cs),Rs=Rs!==0?1/Rs:0}return earcutLinked(Ss,Ms,ya,Es,Cs,Rs),Ms}};function linkedList(ca,ga,ya,_a,_s){var Ss,Ms;if(_s===signedArea(ca,ga,ya,_a)>0)for(Ss=ga;Ss<ya;Ss+=_a)Ms=insertNode(Ss,ca[Ss],ca[Ss+1],Ms);else for(Ss=ya-_a;Ss>=ga;Ss-=_a)Ms=insertNode(Ss,ca[Ss],ca[Ss+1],Ms);return Ms&&equals(Ms,Ms.next)&&(removeNode(Ms),Ms=Ms.next),Ms}function filterPoints(ca,ga){if(!ca)return ca;ga||(ga=ca);var ya=ca,_a;do if(_a=!1,!ya.steiner&&(equals(ya,ya.next)||area(ya.prev,ya,ya.next)===0)){if(removeNode(ya),ya=ga=ya.prev,ya===ya.next)break;_a=!0}else ya=ya.next;while(_a||ya!==ga);return ga}function earcutLinked(ca,ga,ya,_a,_s,Ss,Ms){if(!!ca){!Ms&&Ss&&indexCurve(ca,_a,_s,Ss);for(var Es=ca,Cs,Ts;ca.prev!==ca.next;){if(Cs=ca.prev,Ts=ca.next,Ss?isEarHashed(ca,_a,_s,Ss):isEar(ca)){ga.push(Cs.i/ya),ga.push(ca.i/ya),ga.push(Ts.i/ya),removeNode(ca),ca=Ts.next,Es=Ts.next;continue}if(ca=Ts,ca===Es){Ms?Ms===1?(ca=cureLocalIntersections(filterPoints(ca),ga,ya),earcutLinked(ca,ga,ya,_a,_s,Ss,2)):Ms===2&&splitEarcut(ca,ga,ya,_a,_s,Ss):earcutLinked(filterPoints(ca),ga,ya,_a,_s,Ss,1);break}}}}function isEar(ca){var ga=ca.prev,ya=ca,_a=ca.next;if(area(ga,ya,_a)>=0)return!1;for(var _s=ca.next.next;_s!==ca.prev;){if(pointInTriangle(ga.x,ga.y,ya.x,ya.y,_a.x,_a.y,_s.x,_s.y)&&area(_s.prev,_s,_s.next)>=0)return!1;_s=_s.next}return!0}function isEarHashed(ca,ga,ya,_a){var _s=ca.prev,Ss=ca,Ms=ca.next;if(area(_s,Ss,Ms)>=0)return!1;for(var Es=_s.x<Ss.x?_s.x<Ms.x?_s.x:Ms.x:Ss.x<Ms.x?Ss.x:Ms.x,Cs=_s.y<Ss.y?_s.y<Ms.y?_s.y:Ms.y:Ss.y<Ms.y?Ss.y:Ms.y,Ts=_s.x>Ss.x?_s.x>Ms.x?_s.x:Ms.x:Ss.x>Ms.x?Ss.x:Ms.x,Bs=_s.y>Ss.y?_s.y>Ms.y?_s.y:Ms.y:Ss.y>Ms.y?Ss.y:Ms.y,Is=zOrder(Es,Cs,ga,ya,_a),Ps=zOrder(Ts,Bs,ga,ya,_a),Rs=ca.prevZ,ks=ca.nextZ;Rs&&Rs.z>=Is&&ks&&ks.z<=Ps;){if(Rs!==ca.prev&&Rs!==ca.next&&pointInTriangle(_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y,Rs.x,Rs.y)&&area(Rs.prev,Rs,Rs.next)>=0||(Rs=Rs.prevZ,ks!==ca.prev&&ks!==ca.next&&pointInTriangle(_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y,ks.x,ks.y)&&area(ks.prev,ks,ks.next)>=0))return!1;ks=ks.nextZ}for(;Rs&&Rs.z>=Is;){if(Rs!==ca.prev&&Rs!==ca.next&&pointInTriangle(_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y,Rs.x,Rs.y)&&area(Rs.prev,Rs,Rs.next)>=0)return!1;Rs=Rs.prevZ}for(;ks&&ks.z<=Ps;){if(ks!==ca.prev&&ks!==ca.next&&pointInTriangle(_s.x,_s.y,Ss.x,Ss.y,Ms.x,Ms.y,ks.x,ks.y)&&area(ks.prev,ks,ks.next)>=0)return!1;ks=ks.nextZ}return!0}function cureLocalIntersections(ca,ga,ya){var _a=ca;do{var _s=_a.prev,Ss=_a.next.next;!equals(_s,Ss)&&intersects(_s,_a,_a.next,Ss)&&locallyInside(_s,Ss)&&locallyInside(Ss,_s)&&(ga.push(_s.i/ya),ga.push(_a.i/ya),ga.push(Ss.i/ya),removeNode(_a),removeNode(_a.next),_a=ca=Ss),_a=_a.next}while(_a!==ca);return filterPoints(_a)}function splitEarcut(ca,ga,ya,_a,_s,Ss){var Ms=ca;do{for(var Es=Ms.next.next;Es!==Ms.prev;){if(Ms.i!==Es.i&&isValidDiagonal(Ms,Es)){var Cs=splitPolygon(Ms,Es);Ms=filterPoints(Ms,Ms.next),Cs=filterPoints(Cs,Cs.next),earcutLinked(Ms,ga,ya,_a,_s,Ss),earcutLinked(Cs,ga,ya,_a,_s,Ss);return}Es=Es.next}Ms=Ms.next}while(Ms!==ca)}function eliminateHoles(ca,ga,ya,_a){var _s=[],Ss,Ms,Es,Cs,Ts;for(Ss=0,Ms=ga.length;Ss<Ms;Ss++)Es=ga[Ss]*_a,Cs=Ss<Ms-1?ga[Ss+1]*_a:ca.length,Ts=linkedList(ca,Es,Cs,_a,!1),Ts===Ts.next&&(Ts.steiner=!0),_s.push(getLeftmost(Ts));for(_s.sort(compareX),Ss=0;Ss<_s.length;Ss++)eliminateHole(_s[Ss],ya),ya=filterPoints(ya,ya.next);return ya}function compareX(ca,ga){return ca.x-ga.x}function eliminateHole(ca,ga){if(ga=findHoleBridge(ca,ga),ga){var ya=splitPolygon(ga,ca);filterPoints(ga,ga.next),filterPoints(ya,ya.next)}}function findHoleBridge(ca,ga){var ya=ga,_a=ca.x,_s=ca.y,Ss=-1/0,Ms;do{if(_s<=ya.y&&_s>=ya.next.y&&ya.next.y!==ya.y){var Es=ya.x+(_s-ya.y)*(ya.next.x-ya.x)/(ya.next.y-ya.y);if(Es<=_a&&Es>Ss){if(Ss=Es,Es===_a){if(_s===ya.y)return ya;if(_s===ya.next.y)return ya.next}Ms=ya.x<ya.next.x?ya:ya.next}}ya=ya.next}while(ya!==ga);if(!Ms)return null;if(_a===Ss)return Ms;var Cs=Ms,Ts=Ms.x,Bs=Ms.y,Is=1/0,Ps;ya=Ms;do _a>=ya.x&&ya.x>=Ts&&_a!==ya.x&&pointInTriangle(_s<Bs?_a:Ss,_s,Ts,Bs,_s<Bs?Ss:_a,_s,ya.x,ya.y)&&(Ps=Math.abs(_s-ya.y)/(_a-ya.x),locallyInside(ya,ca)&&(Ps<Is||Ps===Is&&(ya.x>Ms.x||ya.x===Ms.x&&sectorContainsSector(Ms,ya)))&&(Ms=ya,Is=Ps)),ya=ya.next;while(ya!==Cs);return Ms}function sectorContainsSector(ca,ga){return area(ca.prev,ca,ga.prev)<0&&area(ga.next,ca,ca.next)<0}function indexCurve(ca,ga,ya,_a){var _s=ca;do _s.z===null&&(_s.z=zOrder(_s.x,_s.y,ga,ya,_a)),_s.prevZ=_s.prev,_s.nextZ=_s.next,_s=_s.next;while(_s!==ca);_s.prevZ.nextZ=null,_s.prevZ=null,sortLinked(_s)}function sortLinked(ca){var ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts=1;do{for(ya=ca,ca=null,Ss=null,Ms=0;ya;){for(Ms++,_a=ya,Es=0,ga=0;ga<Ts&&(Es++,_a=_a.nextZ,!!_a);ga++);for(Cs=Ts;Es>0||Cs>0&&_a;)Es!==0&&(Cs===0||!_a||ya.z<=_a.z)?(_s=ya,ya=ya.nextZ,Es--):(_s=_a,_a=_a.nextZ,Cs--),Ss?Ss.nextZ=_s:ca=_s,_s.prevZ=Ss,Ss=_s;ya=_a}Ss.nextZ=null,Ts*=2}while(Ms>1);return ca}function zOrder(ca,ga,ya,_a,_s){return ca=32767*(ca-ya)*_s,ga=32767*(ga-_a)*_s,ca=(ca|ca<<8)&16711935,ca=(ca|ca<<4)&252645135,ca=(ca|ca<<2)&858993459,ca=(ca|ca<<1)&1431655765,ga=(ga|ga<<8)&16711935,ga=(ga|ga<<4)&252645135,ga=(ga|ga<<2)&858993459,ga=(ga|ga<<1)&1431655765,ca|ga<<1}function getLeftmost(ca){var ga=ca,ya=ca;do(ga.x<ya.x||ga.x===ya.x&&ga.y<ya.y)&&(ya=ga),ga=ga.next;while(ga!==ca);return ya}function pointInTriangle(ca,ga,ya,_a,_s,Ss,Ms,Es){return(_s-Ms)*(ga-Es)-(ca-Ms)*(Ss-Es)>=0&&(ca-Ms)*(_a-Es)-(ya-Ms)*(ga-Es)>=0&&(ya-Ms)*(Ss-Es)-(_s-Ms)*(_a-Es)>=0}function isValidDiagonal(ca,ga){return ca.next.i!==ga.i&&ca.prev.i!==ga.i&&!intersectsPolygon(ca,ga)&&(locallyInside(ca,ga)&&locallyInside(ga,ca)&&middleInside(ca,ga)&&(area(ca.prev,ca,ga.prev)||area(ca,ga.prev,ga))||equals(ca,ga)&&area(ca.prev,ca,ca.next)>0&&area(ga.prev,ga,ga.next)>0)}function area(ca,ga,ya){return(ga.y-ca.y)*(ya.x-ga.x)-(ga.x-ca.x)*(ya.y-ga.y)}function equals(ca,ga){return ca.x===ga.x&&ca.y===ga.y}function intersects(ca,ga,ya,_a){var _s=sign(area(ca,ga,ya)),Ss=sign(area(ca,ga,_a)),Ms=sign(area(ya,_a,ca)),Es=sign(area(ya,_a,ga));return!!(_s!==Ss&&Ms!==Es||_s===0&&onSegment(ca,ya,ga)||Ss===0&&onSegment(ca,_a,ga)||Ms===0&&onSegment(ya,ca,_a)||Es===0&&onSegment(ya,ga,_a))}function onSegment(ca,ga,ya){return ga.x<=Math.max(ca.x,ya.x)&&ga.x>=Math.min(ca.x,ya.x)&&ga.y<=Math.max(ca.y,ya.y)&&ga.y>=Math.min(ca.y,ya.y)}function sign(ca){return ca>0?1:ca<0?-1:0}function intersectsPolygon(ca,ga){var ya=ca;do{if(ya.i!==ca.i&&ya.next.i!==ca.i&&ya.i!==ga.i&&ya.next.i!==ga.i&&intersects(ya,ya.next,ca,ga))return!0;ya=ya.next}while(ya!==ca);return!1}function locallyInside(ca,ga){return area(ca.prev,ca,ca.next)<0?area(ca,ga,ca.next)>=0&&area(ca,ca.prev,ga)>=0:area(ca,ga,ca.prev)<0||area(ca,ca.next,ga)<0}function middleInside(ca,ga){var ya=ca,_a=!1,_s=(ca.x+ga.x)/2,Ss=(ca.y+ga.y)/2;do ya.y>Ss!=ya.next.y>Ss&&ya.next.y!==ya.y&&_s<(ya.next.x-ya.x)*(Ss-ya.y)/(ya.next.y-ya.y)+ya.x&&(_a=!_a),ya=ya.next;while(ya!==ca);return _a}function splitPolygon(ca,ga){var ya=new Node(ca.i,ca.x,ca.y),_a=new Node(ga.i,ga.x,ga.y),_s=ca.next,Ss=ga.prev;return ca.next=ga,ga.prev=ca,ya.next=_s,_s.prev=ya,_a.next=ya,ya.prev=_a,Ss.next=_a,_a.prev=Ss,_a}function insertNode(ca,ga,ya,_a){var _s=new Node(ca,ga,ya);return _a?(_s.next=_a.next,_s.prev=_a,_a.next.prev=_s,_a.next=_s):(_s.prev=_s,_s.next=_s),_s}function removeNode(ca){ca.next.prev=ca.prev,ca.prev.next=ca.next,ca.prevZ&&(ca.prevZ.nextZ=ca.nextZ),ca.nextZ&&(ca.nextZ.prevZ=ca.prevZ)}function Node(ca,ga,ya){this.i=ca,this.x=ga,this.y=ya,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ca,ga,ya,_a){for(var _s=0,Ss=ga,Ms=ya-_a;Ss<ya;Ss+=_a)_s+=(ca[Ms]-ca[Ss])*(ca[Ss+1]+ca[Ms+1]),Ms=Ss;return _s}var ShapeUtils={area:function(ca){for(var ga=ca.length,ya=0,_a=ga-1,_s=0;_s<ga;_a=_s++)ya+=ca[_a].x*ca[_s].y-ca[_s].x*ca[_a].y;return ya*.5},isClockWise:function(ca){return ShapeUtils.area(ca)<0},triangulateShape:function(ca,ga){var ya=[],_a=[],_s=[];removeDupEndPts(ca),addContour(ya,ca);var Ss=ca.length;ga.forEach(removeDupEndPts);for(var Ms=0;Ms<ga.length;Ms++)_a.push(Ss),Ss+=ga[Ms].length,addContour(ya,ga[Ms]);for(var Es=Earcut.triangulate(ya,_a),Ms=0;Ms<Es.length;Ms+=3)_s.push(Es.slice(Ms,Ms+3));return _s}};function removeDupEndPts(ca){var ga=ca.length;ga>2&&ca[ga-1].equals(ca[0])&&ca.pop()}function addContour(ca,ga){for(var ya=0;ya<ga.length;ya++)ca.push(ga[ya].x),ca.push(ga[ya].y)}function ExtrudeGeometry(ca,ga){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:ca,options:ga},this.fromBufferGeometry(new ExtrudeBufferGeometry(ca,ga)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes,ya=this.parameters.options;return toJSON(ga,ya,ca)};function ExtrudeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:ca,options:ga},ca=Array.isArray(ca)?ca:[ca];for(var ya=this,_a=[],_s=[],Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Es=ca[Ss];Cs(Es)}this.setAttribute("position",new Float32BufferAttribute(_a,3)),this.setAttribute("uv",new Float32BufferAttribute(_s,2)),this.computeVertexNormals();function Cs(Ts){var Bs=[],Is=ga.curveSegments!==void 0?ga.curveSegments:12,Ps=ga.steps!==void 0?ga.steps:1,Rs=ga.depth!==void 0?ga.depth:100,ks=ga.bevelEnabled!==void 0?ga.bevelEnabled:!0,$s=ga.bevelThickness!==void 0?ga.bevelThickness:6,Os=ga.bevelSize!==void 0?ga.bevelSize:$s-2,Ls=ga.bevelOffset!==void 0?ga.bevelOffset:0,Ds=ga.bevelSegments!==void 0?ga.bevelSegments:3,Fs=ga.extrudePath,Ns=ga.UVGenerator!==void 0?ga.UVGenerator:WorldUVGenerator;ga.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Rs=ga.amount);var Vs,Gs=!1,Us,zs,Hs,Qs;Fs&&(Vs=Fs.getSpacedPoints(Ps),Gs=!0,ks=!1,Us=Fs.computeFrenetFrames(Ps,!1),zs=new Vector3,Hs=new Vector3,Qs=new Vector3),ks||(Ds=0,$s=0,Os=0,Ls=0);var js,Zs,Ks,Ys=Ts.extractPoints(Is),qs=Ys.shape,eu=Ys.holes,Js=!ShapeUtils.isClockWise(qs);if(Js)for(qs=qs.reverse(),Zs=0,Ks=eu.length;Zs<Ks;Zs++)js=eu[Zs],ShapeUtils.isClockWise(js)&&(eu[Zs]=js.reverse());var Xs=ShapeUtils.triangulateShape(qs,eu),ru=qs;for(Zs=0,Ks=eu.length;Zs<Ks;Zs++)js=eu[Zs],qs=qs.concat(js);function su(Pu,Ou,Ru){return Ou||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ou.clone().multiplyScalar(Ru).add(Pu)}var lu,cu,xu,bu,yu,fu=qs.length,gu,Su=Xs.length;function wu(Pu,Ou,Ru){var Nu,uu,$u,ku=Pu.x-Ou.x,Ju=Pu.y-Ou.y,Fu=Ru.x-Pu.x,yl=Ru.y-Pu.y,xl=ku*ku+Ju*Ju,_l=ku*yl-Ju*Fu;if(Math.abs(_l)>Number.EPSILON){var Bl=Math.sqrt(xl),Al=Math.sqrt(Fu*Fu+yl*yl),Cl=Ou.x-Ju/Bl,Il=Ou.y+ku/Bl,Tl=Ru.x-yl/Al,Pl=Ru.y+Fu/Al,Fl=((Tl-Cl)*yl-(Pl-Il)*Fu)/(ku*yl-Ju*Fu);Nu=Cl+ku*Fl-Pu.x,uu=Il+Ju*Fl-Pu.y;var Ol=Nu*Nu+uu*uu;if(Ol<=2)return new Vector2(Nu,uu);$u=Math.sqrt(Ol/2)}else{var nu=!1;ku>Number.EPSILON?Fu>Number.EPSILON&&(nu=!0):ku<-Number.EPSILON?Fu<-Number.EPSILON&&(nu=!0):Math.sign(Ju)===Math.sign(yl)&&(nu=!0),nu?(Nu=-Ju,uu=ku,$u=Math.sqrt(xl)):(Nu=ku,uu=Ju,$u=Math.sqrt(xl/2))}return new Vector2(Nu/$u,uu/$u)}for(var vu=[],pu=0,Eu=ru.length,Tu=Eu-1,zu=pu+1;pu<Eu;pu++,Tu++,zu++)Tu===Eu&&(Tu=0),zu===Eu&&(zu=0),vu[pu]=wu(ru[pu],ru[Tu],ru[zu]);var Du=[],Gu,tu=vu.concat();for(Zs=0,Ks=eu.length;Zs<Ks;Zs++){for(js=eu[Zs],Gu=[],pu=0,Eu=js.length,Tu=Eu-1,zu=pu+1;pu<Eu;pu++,Tu++,zu++)Tu===Eu&&(Tu=0),zu===Eu&&(zu=0),Gu[pu]=wu(js[pu],js[Tu],js[zu]);Du.push(Gu),tu=tu.concat(Gu)}for(lu=0;lu<Ds;lu++){for(xu=lu/Ds,bu=$s*Math.cos(xu*Math.PI/2),cu=Os*Math.sin(xu*Math.PI/2)+Ls,pu=0,Eu=ru.length;pu<Eu;pu++)yu=su(ru[pu],vu[pu],cu),Lu(yu.x,yu.y,-bu);for(Zs=0,Ks=eu.length;Zs<Ks;Zs++)for(js=eu[Zs],Gu=Du[Zs],pu=0,Eu=js.length;pu<Eu;pu++)yu=su(js[pu],Gu[pu],cu),Lu(yu.x,yu.y,-bu)}for(cu=Os+Ls,pu=0;pu<fu;pu++)yu=ks?su(qs[pu],tu[pu],cu):qs[pu],Gs?(Hs.copy(Us.normals[0]).multiplyScalar(yu.x),zs.copy(Us.binormals[0]).multiplyScalar(yu.y),Qs.copy(Vs[0]).add(Hs).add(zs),Lu(Qs.x,Qs.y,Qs.z)):Lu(yu.x,yu.y,0);var ou;for(ou=1;ou<=Ps;ou++)for(pu=0;pu<fu;pu++)yu=ks?su(qs[pu],tu[pu],cu):qs[pu],Gs?(Hs.copy(Us.normals[ou]).multiplyScalar(yu.x),zs.copy(Us.binormals[ou]).multiplyScalar(yu.y),Qs.copy(Vs[ou]).add(Hs).add(zs),Lu(Qs.x,Qs.y,Qs.z)):Lu(yu.x,yu.y,Rs/Ps*ou);for(lu=Ds-1;lu>=0;lu--){for(xu=lu/Ds,bu=$s*Math.cos(xu*Math.PI/2),cu=Os*Math.sin(xu*Math.PI/2)+Ls,pu=0,Eu=ru.length;pu<Eu;pu++)yu=su(ru[pu],vu[pu],cu),Lu(yu.x,yu.y,Rs+bu);for(Zs=0,Ks=eu.length;Zs<Ks;Zs++)for(js=eu[Zs],Gu=Du[Zs],pu=0,Eu=js.length;pu<Eu;pu++)yu=su(js[pu],Gu[pu],cu),Gs?Lu(yu.x,yu.y+Vs[Ps-1].y,Vs[Ps-1].x+bu):Lu(yu.x,yu.y,Rs+bu)}Cu(),Mu();function Cu(){var Pu=_a.length/3;if(ks){var Ou=0,Ru=fu*Ou;for(pu=0;pu<Su;pu++)gu=Xs[pu],Bu(gu[2]+Ru,gu[1]+Ru,gu[0]+Ru);for(Ou=Ps+Ds*2,Ru=fu*Ou,pu=0;pu<Su;pu++)gu=Xs[pu],Bu(gu[0]+Ru,gu[1]+Ru,gu[2]+Ru)}else{for(pu=0;pu<Su;pu++)gu=Xs[pu],Bu(gu[2],gu[1],gu[0]);for(pu=0;pu<Su;pu++)gu=Xs[pu],Bu(gu[0]+fu*Ps,gu[1]+fu*Ps,gu[2]+fu*Ps)}ya.addGroup(Pu,_a.length/3-Pu,0)}function Mu(){var Pu=_a.length/3,Ou=0;for(Wu(ru,Ou),Ou+=ru.length,Zs=0,Ks=eu.length;Zs<Ks;Zs++)js=eu[Zs],Wu(js,Ou),Ou+=js.length;ya.addGroup(Pu,_a.length/3-Pu,1)}function Wu(Pu,Ou){var Ru,Nu;for(pu=Pu.length;--pu>=0;){Ru=pu,Nu=pu-1,Nu<0&&(Nu=Pu.length-1);var uu=0,$u=Ps+Ds*2;for(uu=0;uu<$u;uu++){var ku=fu*uu,Ju=fu*(uu+1),Fu=Ou+Ru+ku,yl=Ou+Nu+ku,xl=Ou+Nu+Ju,_l=Ou+Ru+Ju;vl(Fu,yl,xl,_l)}}}function Lu(Pu,Ou,Ru){Bs.push(Pu),Bs.push(Ou),Bs.push(Ru)}function Bu(Pu,Ou,Ru){Ku(Pu),Ku(Ou),Ku(Ru);var Nu=_a.length/3,uu=Ns.generateTopUV(ya,_a,Nu-3,Nu-2,Nu-1);ju(uu[0]),ju(uu[1]),ju(uu[2])}function vl(Pu,Ou,Ru,Nu){Ku(Pu),Ku(Ou),Ku(Nu),Ku(Ou),Ku(Ru),Ku(Nu);var uu=_a.length/3,$u=Ns.generateSideWallUV(ya,_a,uu-6,uu-3,uu-2,uu-1);ju($u[0]),ju($u[1]),ju($u[3]),ju($u[1]),ju($u[2]),ju($u[3])}function Ku(Pu){_a.push(Bs[Pu*3+0]),_a.push(Bs[Pu*3+1]),_a.push(Bs[Pu*3+2])}function ju(Pu){_s.push(Pu.x),_s.push(Pu.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes,ya=this.parameters.options;return toJSON(ga,ya,ca)};var WorldUVGenerator={generateTopUV:function(ca,ga,ya,_a,_s){var Ss=ga[ya*3],Ms=ga[ya*3+1],Es=ga[_a*3],Cs=ga[_a*3+1],Ts=ga[_s*3],Bs=ga[_s*3+1];return[new Vector2(Ss,Ms),new Vector2(Es,Cs),new Vector2(Ts,Bs)]},generateSideWallUV:function(ca,ga,ya,_a,_s,Ss){var Ms=ga[ya*3],Es=ga[ya*3+1],Cs=ga[ya*3+2],Ts=ga[_a*3],Bs=ga[_a*3+1],Is=ga[_a*3+2],Ps=ga[_s*3],Rs=ga[_s*3+1],ks=ga[_s*3+2],$s=ga[Ss*3],Os=ga[Ss*3+1],Ls=ga[Ss*3+2];return Math.abs(Es-Bs)<.01?[new Vector2(Ms,1-Cs),new Vector2(Ts,1-Is),new Vector2(Ps,1-ks),new Vector2($s,1-Ls)]:[new Vector2(Es,1-Cs),new Vector2(Bs,1-Is),new Vector2(Rs,1-ks),new Vector2(Os,1-Ls)]}};function toJSON(ca,ga,ya){if(ya.shapes=[],Array.isArray(ca))for(var _a=0,_s=ca.length;_a<_s;_a++){var Ss=ca[_a];ya.shapes.push(Ss.uuid)}else ya.shapes.push(ca.uuid);return ga.extrudePath!==void 0&&(ya.options.extrudePath=ga.extrudePath.toJSON()),ya}function TextGeometry(ca,ga){Geometry.call(this),this.type="TextGeometry",this.parameters={text:ca,parameters:ga},this.fromBufferGeometry(new TextBufferGeometry(ca,ga)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(ca,ga){ga=ga||{};var ya=ga.font;if(!(ya&&ya.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var _a=ya.generateShapes(ca,ga.size);ga.depth=ga.height!==void 0?ga.height:50,ga.bevelThickness===void 0&&(ga.bevelThickness=10),ga.bevelSize===void 0&&(ga.bevelSize=8),ga.bevelEnabled===void 0&&(ga.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,_a,ga),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(ca,ga,ya,_a,_s,Ss,Ms){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:ya,phiStart:_a,phiLength:_s,thetaStart:Ss,thetaLength:Ms},this.fromBufferGeometry(new SphereBufferGeometry(ca,ga,ya,_a,_s,Ss,Ms)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(ca,ga,ya,_a,_s,Ss,Ms){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:ca,widthSegments:ga,heightSegments:ya,phiStart:_a,phiLength:_s,thetaStart:Ss,thetaLength:Ms},ca=ca||1,ga=Math.max(3,Math.floor(ga)||8),ya=Math.max(2,Math.floor(ya)||6),_a=_a!==void 0?_a:0,_s=_s!==void 0?_s:Math.PI*2,Ss=Ss!==void 0?Ss:0,Ms=Ms!==void 0?Ms:Math.PI;var Es=Math.min(Ss+Ms,Math.PI),Cs,Ts,Bs=0,Is=[],Ps=new Vector3,Rs=new Vector3,ks=[],$s=[],Os=[],Ls=[];for(Ts=0;Ts<=ya;Ts++){var Ds=[],Fs=Ts/ya,Ns=0;for(Ts==0&&Ss==0?Ns=.5/ga:Ts==ya&&Es==Math.PI&&(Ns=-.5/ga),Cs=0;Cs<=ga;Cs++){var Vs=Cs/ga;Ps.x=-ca*Math.cos(_a+Vs*_s)*Math.sin(Ss+Fs*Ms),Ps.y=ca*Math.cos(Ss+Fs*Ms),Ps.z=ca*Math.sin(_a+Vs*_s)*Math.sin(Ss+Fs*Ms),$s.push(Ps.x,Ps.y,Ps.z),Rs.copy(Ps).normalize(),Os.push(Rs.x,Rs.y,Rs.z),Ls.push(Vs+Ns,1-Fs),Ds.push(Bs++)}Is.push(Ds)}for(Ts=0;Ts<ya;Ts++)for(Cs=0;Cs<ga;Cs++){var Gs=Is[Ts][Cs+1],Us=Is[Ts][Cs],zs=Is[Ts+1][Cs],Hs=Is[Ts+1][Cs+1];(Ts!==0||Ss>0)&&ks.push(Gs,Us,Hs),(Ts!==ya-1||Es<Math.PI)&&ks.push(Us,zs,Hs)}this.setIndex(ks),this.setAttribute("position",new Float32BufferAttribute($s,3)),this.setAttribute("normal",new Float32BufferAttribute(Os,3)),this.setAttribute("uv",new Float32BufferAttribute(Ls,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(ca,ga,ya,_a,_s,Ss){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:ya,phiSegments:_a,thetaStart:_s,thetaLength:Ss},this.fromBufferGeometry(new RingBufferGeometry(ca,ga,ya,_a,_s,Ss)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(ca,ga,ya,_a,_s,Ss){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:ca,outerRadius:ga,thetaSegments:ya,phiSegments:_a,thetaStart:_s,thetaLength:Ss},ca=ca||.5,ga=ga||1,_s=_s!==void 0?_s:0,Ss=Ss!==void 0?Ss:Math.PI*2,ya=ya!==void 0?Math.max(3,ya):8,_a=_a!==void 0?Math.max(1,_a):1;var Ms=[],Es=[],Cs=[],Ts=[],Bs,Is=ca,Ps=(ga-ca)/_a,Rs=new Vector3,ks=new Vector2,$s,Os;for($s=0;$s<=_a;$s++){for(Os=0;Os<=ya;Os++)Bs=_s+Os/ya*Ss,Rs.x=Is*Math.cos(Bs),Rs.y=Is*Math.sin(Bs),Es.push(Rs.x,Rs.y,Rs.z),Cs.push(0,0,1),ks.x=(Rs.x/ga+1)/2,ks.y=(Rs.y/ga+1)/2,Ts.push(ks.x,ks.y);Is+=Ps}for($s=0;$s<_a;$s++){var Ls=$s*(ya+1);for(Os=0;Os<ya;Os++){Bs=Os+Ls;var Ds=Bs,Fs=Bs+ya+1,Ns=Bs+ya+2,Vs=Bs+1;Ms.push(Ds,Fs,Vs),Ms.push(Fs,Ns,Vs)}}this.setIndex(Ms),this.setAttribute("position",new Float32BufferAttribute(Es,3)),this.setAttribute("normal",new Float32BufferAttribute(Cs,3)),this.setAttribute("uv",new Float32BufferAttribute(Ts,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(ca,ga,ya,_a){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:ca,segments:ga,phiStart:ya,phiLength:_a},this.fromBufferGeometry(new LatheBufferGeometry(ca,ga,ya,_a)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(ca,ga,ya,_a){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:ca,segments:ga,phiStart:ya,phiLength:_a},ga=Math.floor(ga)||12,ya=ya||0,_a=_a||Math.PI*2,_a=MathUtils.clamp(_a,0,Math.PI*2);var _s=[],Ss=[],Ms=[],Es,Cs=1/ga,Ts=new Vector3,Bs=new Vector2,Is,Ps;for(Is=0;Is<=ga;Is++){var Rs=ya+Is*Cs*_a,ks=Math.sin(Rs),$s=Math.cos(Rs);for(Ps=0;Ps<=ca.length-1;Ps++)Ts.x=ca[Ps].x*ks,Ts.y=ca[Ps].y,Ts.z=ca[Ps].x*$s,Ss.push(Ts.x,Ts.y,Ts.z),Bs.x=Is/ga,Bs.y=Ps/(ca.length-1),Ms.push(Bs.x,Bs.y)}for(Is=0;Is<ga;Is++)for(Ps=0;Ps<ca.length-1;Ps++){Es=Ps+Is*ca.length;var Os=Es,Ls=Es+ca.length,Ds=Es+ca.length+1,Fs=Es+1;_s.push(Os,Ls,Fs),_s.push(Ls,Ds,Fs)}if(this.setIndex(_s),this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("uv",new Float32BufferAttribute(Ms,2)),this.computeVertexNormals(),_a===Math.PI*2){var Ns=this.attributes.normal.array,Vs=new Vector3,Gs=new Vector3,Us=new Vector3;for(Es=ga*ca.length*3,Is=0,Ps=0;Is<ca.length;Is++,Ps+=3)Vs.x=Ns[Ps+0],Vs.y=Ns[Ps+1],Vs.z=Ns[Ps+2],Gs.x=Ns[Es+Ps+0],Gs.y=Ns[Es+Ps+1],Gs.z=Ns[Es+Ps+2],Us.addVectors(Vs,Gs).normalize(),Ns[Ps+0]=Ns[Es+Ps+0]=Us.x,Ns[Ps+1]=Ns[Es+Ps+1]=Us.y,Ns[Ps+2]=Ns[Es+Ps+2]=Us.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(ca,ga){Geometry.call(this),this.type="ShapeGeometry",typeof ga=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),ga=ga.curveSegments),this.parameters={shapes:ca,curveSegments:ga},this.fromBufferGeometry(new ShapeBufferGeometry(ca,ga)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var ca=Geometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function ShapeBufferGeometry(ca,ga){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:ca,curveSegments:ga},ga=ga||12;var ya=[],_a=[],_s=[],Ss=[],Ms=0,Es=0;if(Array.isArray(ca)===!1)Ts(ca);else for(var Cs=0;Cs<ca.length;Cs++)Ts(ca[Cs]),this.addGroup(Ms,Es,Cs),Ms+=Es,Es=0;this.setIndex(ya),this.setAttribute("position",new Float32BufferAttribute(_a,3)),this.setAttribute("normal",new Float32BufferAttribute(_s,3)),this.setAttribute("uv",new Float32BufferAttribute(Ss,2));function Ts(Bs){var Is,Ps,Rs,ks=_a.length/3,$s=Bs.extractPoints(ga),Os=$s.shape,Ls=$s.holes;for(ShapeUtils.isClockWise(Os)===!1&&(Os=Os.reverse()),Is=0,Ps=Ls.length;Is<Ps;Is++)Rs=Ls[Is],ShapeUtils.isClockWise(Rs)===!0&&(Ls[Is]=Rs.reverse());var Ds=ShapeUtils.triangulateShape(Os,Ls);for(Is=0,Ps=Ls.length;Is<Ps;Is++)Rs=Ls[Is],Os=Os.concat(Rs);for(Is=0,Ps=Os.length;Is<Ps;Is++){var Fs=Os[Is];_a.push(Fs.x,Fs.y,0),_s.push(0,0,1),Ss.push(Fs.x,Fs.y)}for(Is=0,Ps=Ds.length;Is<Ps;Is++){var Ns=Ds[Is],Vs=Ns[0]+ks,Gs=Ns[1]+ks,Us=Ns[2]+ks;ya.push(Vs,Gs,Us),Es+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var ca=BufferGeometry.prototype.toJSON.call(this),ga=this.parameters.shapes;return toJSON$1(ga,ca)};function toJSON$1(ca,ga){if(ga.shapes=[],Array.isArray(ca))for(var ya=0,_a=ca.length;ya<_a;ya++){var _s=ca[ya];ga.shapes.push(_s.uuid)}else ga.shapes.push(ca.uuid);return ga}function EdgesGeometry(ca,ga){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:ga},ga=ga!==void 0?ga:1;var ya=[],_a=Math.cos(MathUtils.DEG2RAD*ga),_s=[0,0],Ss={},Ms,Es,Cs,Ts=["a","b","c"],Bs;ca.isBufferGeometry?(Bs=new Geometry,Bs.fromBufferGeometry(ca)):Bs=ca.clone(),Bs.mergeVertices(),Bs.computeFaceNormals();for(var Is=Bs.vertices,Ps=Bs.faces,Rs=0,ks=Ps.length;Rs<ks;Rs++)for(var $s=Ps[Rs],Os=0;Os<3;Os++)Ms=$s[Ts[Os]],Es=$s[Ts[(Os+1)%3]],_s[0]=Math.min(Ms,Es),_s[1]=Math.max(Ms,Es),Cs=_s[0]+","+_s[1],Ss[Cs]===void 0?Ss[Cs]={index1:_s[0],index2:_s[1],face1:Rs,face2:void 0}:Ss[Cs].face2=Rs;for(Cs in Ss){var Ls=Ss[Cs];if(Ls.face2===void 0||Ps[Ls.face1].normal.dot(Ps[Ls.face2].normal)<=_a){var Ds=Is[Ls.index1];ya.push(Ds.x,Ds.y,Ds.z),Ds=Is[Ls.index2],ya.push(Ds.x,Ds.y,Ds.z)}}this.setAttribute("position",new Float32BufferAttribute(ya,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(ca,ga,ya,_a,_s,Ss,Ms,Es){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:ya,radialSegments:_a,heightSegments:_s,openEnded:Ss,thetaStart:Ms,thetaLength:Es},this.fromBufferGeometry(new CylinderBufferGeometry(ca,ga,ya,_a,_s,Ss,Ms,Es)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(ca,ga,ya,_a,_s,Ss,Ms,Es){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:ca,radiusBottom:ga,height:ya,radialSegments:_a,heightSegments:_s,openEnded:Ss,thetaStart:Ms,thetaLength:Es};var Cs=this;ca=ca!==void 0?ca:1,ga=ga!==void 0?ga:1,ya=ya||1,_a=Math.floor(_a)||8,_s=Math.floor(_s)||1,Ss=Ss!==void 0?Ss:!1,Ms=Ms!==void 0?Ms:0,Es=Es!==void 0?Es:Math.PI*2;var Ts=[],Bs=[],Is=[],Ps=[],Rs=0,ks=[],$s=ya/2,Os=0;Ls(),Ss===!1&&(ca>0&&Ds(!0),ga>0&&Ds(!1)),this.setIndex(Ts),this.setAttribute("position",new Float32BufferAttribute(Bs,3)),this.setAttribute("normal",new Float32BufferAttribute(Is,3)),this.setAttribute("uv",new Float32BufferAttribute(Ps,2));function Ls(){var Fs,Ns,Vs=new Vector3,Gs=new Vector3,Us=0,zs=(ga-ca)/ya;for(Ns=0;Ns<=_s;Ns++){var Hs=[],Qs=Ns/_s,js=Qs*(ga-ca)+ca;for(Fs=0;Fs<=_a;Fs++){var Zs=Fs/_a,Ks=Zs*Es+Ms,Ys=Math.sin(Ks),qs=Math.cos(Ks);Gs.x=js*Ys,Gs.y=-Qs*ya+$s,Gs.z=js*qs,Bs.push(Gs.x,Gs.y,Gs.z),Vs.set(Ys,zs,qs).normalize(),Is.push(Vs.x,Vs.y,Vs.z),Ps.push(Zs,1-Qs),Hs.push(Rs++)}ks.push(Hs)}for(Fs=0;Fs<_a;Fs++)for(Ns=0;Ns<_s;Ns++){var eu=ks[Ns][Fs],Js=ks[Ns+1][Fs],Xs=ks[Ns+1][Fs+1],ru=ks[Ns][Fs+1];Ts.push(eu,Js,ru),Ts.push(Js,Xs,ru),Us+=6}Cs.addGroup(Os,Us,0),Os+=Us}function Ds(Fs){var Ns,Vs,Gs,Us=new Vector2,zs=new Vector3,Hs=0,Qs=Fs===!0?ca:ga,js=Fs===!0?1:-1;for(Vs=Rs,Ns=1;Ns<=_a;Ns++)Bs.push(0,$s*js,0),Is.push(0,js,0),Ps.push(.5,.5),Rs++;for(Gs=Rs,Ns=0;Ns<=_a;Ns++){var Zs=Ns/_a,Ks=Zs*Es+Ms,Ys=Math.cos(Ks),qs=Math.sin(Ks);zs.x=Qs*qs,zs.y=$s*js,zs.z=Qs*Ys,Bs.push(zs.x,zs.y,zs.z),Is.push(0,js,0),Us.x=Ys*.5+.5,Us.y=qs*.5*js+.5,Ps.push(Us.x,Us.y),Rs++}for(Ns=0;Ns<_a;Ns++){var eu=Vs+Ns,Js=Gs+Ns;Fs===!0?Ts.push(Js,Js+1,eu):Ts.push(Js+1,Js,eu),Hs+=3}Cs.addGroup(Os,Hs,Fs===!0?1:2),Os+=Hs}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(ca,ga,ya,_a,_s,Ss,Ms){CylinderGeometry.call(this,0,ca,ga,ya,_a,_s,Ss,Ms),this.type="ConeGeometry",this.parameters={radius:ca,height:ga,radialSegments:ya,heightSegments:_a,openEnded:_s,thetaStart:Ss,thetaLength:Ms}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(ca,ga,ya,_a,_s,Ss,Ms){CylinderBufferGeometry.call(this,0,ca,ga,ya,_a,_s,Ss,Ms),this.type="ConeBufferGeometry",this.parameters={radius:ca,height:ga,radialSegments:ya,heightSegments:_a,openEnded:_s,thetaStart:Ss,thetaLength:Ms}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(ca,ga,ya,_a){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:ca,segments:ga,thetaStart:ya,thetaLength:_a},this.fromBufferGeometry(new CircleBufferGeometry(ca,ga,ya,_a)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(ca,ga,ya,_a){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:ca,segments:ga,thetaStart:ya,thetaLength:_a},ca=ca||1,ga=ga!==void 0?Math.max(3,ga):8,ya=ya!==void 0?ya:0,_a=_a!==void 0?_a:Math.PI*2;var _s=[],Ss=[],Ms=[],Es=[],Cs,Ts,Bs=new Vector3,Is=new Vector2;for(Ss.push(0,0,0),Ms.push(0,0,1),Es.push(.5,.5),Ts=0,Cs=3;Ts<=ga;Ts++,Cs+=3){var Ps=ya+Ts/ga*_a;Bs.x=ca*Math.cos(Ps),Bs.y=ca*Math.sin(Ps),Ss.push(Bs.x,Bs.y,Bs.z),Ms.push(0,0,1),Is.x=(Ss[Cs]/ca+1)/2,Is.y=(Ss[Cs+1]/ca+1)/2,Es.push(Is.x,Is.y)}for(Cs=1;Cs<=ga;Cs++)_s.push(Cs,Cs+1,0);this.setIndex(_s),this.setAttribute("position",new Float32BufferAttribute(Ss,3)),this.setAttribute("normal",new Float32BufferAttribute(Ms,3)),this.setAttribute("uv",new Float32BufferAttribute(Es,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(ca){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(ca)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this};function RawShaderMaterial(ca){ShaderMaterial.call(this,ca),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(ca){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(ca)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={STANDARD:""},this.color.copy(ca.color),this.roughness=ca.roughness,this.metalness=ca.metalness,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.roughnessMap=ca.roughnessMap,this.metalnessMap=ca.metalnessMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.envMapIntensity=ca.envMapIntensity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this.vertexTangents=ca.vertexTangents,this};function MeshPhysicalMaterial(ca){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(ca)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(ca){return MeshStandardMaterial.prototype.copy.call(this,ca),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=ca.clearcoat,this.clearcoatMap=ca.clearcoatMap,this.clearcoatRoughness=ca.clearcoatRoughness,this.clearcoatRoughnessMap=ca.clearcoatRoughnessMap,this.clearcoatNormalMap=ca.clearcoatNormalMap,this.clearcoatNormalScale.copy(ca.clearcoatNormalScale),this.reflectivity=ca.reflectivity,ca.sheen?this.sheen=(this.sheen||new Color).copy(ca.sheen):this.sheen=null,this.transparency=ca.transparency,this};function MeshPhongMaterial(ca){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshToonMaterial(ca){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.specular.copy(ca.specular),this.shininess=ca.shininess,this.map=ca.map,this.gradientMap=ca.gradientMap,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshNormalMaterial(ca){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshLambertMaterial(ca){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.color.copy(ca.color),this.map=ca.map,this.lightMap=ca.lightMap,this.lightMapIntensity=ca.lightMapIntensity,this.aoMap=ca.aoMap,this.aoMapIntensity=ca.aoMapIntensity,this.emissive.copy(ca.emissive),this.emissiveMap=ca.emissiveMap,this.emissiveIntensity=ca.emissiveIntensity,this.specularMap=ca.specularMap,this.alphaMap=ca.alphaMap,this.envMap=ca.envMap,this.combine=ca.combine,this.reflectivity=ca.reflectivity,this.refractionRatio=ca.refractionRatio,this.wireframe=ca.wireframe,this.wireframeLinewidth=ca.wireframeLinewidth,this.wireframeLinecap=ca.wireframeLinecap,this.wireframeLinejoin=ca.wireframeLinejoin,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function MeshMatcapMaterial(ca){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(ca)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(ca){return Material.prototype.copy.call(this,ca),this.defines={MATCAP:""},this.color.copy(ca.color),this.matcap=ca.matcap,this.map=ca.map,this.bumpMap=ca.bumpMap,this.bumpScale=ca.bumpScale,this.normalMap=ca.normalMap,this.normalMapType=ca.normalMapType,this.normalScale.copy(ca.normalScale),this.displacementMap=ca.displacementMap,this.displacementScale=ca.displacementScale,this.displacementBias=ca.displacementBias,this.alphaMap=ca.alphaMap,this.skinning=ca.skinning,this.morphTargets=ca.morphTargets,this.morphNormals=ca.morphNormals,this};function LineDashedMaterial(ca){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(ca)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(ca){return LineBasicMaterial.prototype.copy.call(this,ca),this.scale=ca.scale,this.dashSize=ca.dashSize,this.gapSize=ca.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(ca,ga,ya){return AnimationUtils.isTypedArray(ca)?new ca.constructor(ca.subarray(ga,ya!==void 0?ya:ca.length)):ca.slice(ga,ya)},convertArray:function(ca,ga,ya){return!ca||!ya&&ca.constructor===ga?ca:typeof ga.BYTES_PER_ELEMENT=="number"?new ga(ca):Array.prototype.slice.call(ca)},isTypedArray:function(ca){return ArrayBuffer.isView(ca)&&!(ca instanceof DataView)},getKeyframeOrder:function(ca){function ga(Ss,Ms){return ca[Ss]-ca[Ms]}for(var ya=ca.length,_a=new Array(ya),_s=0;_s!==ya;++_s)_a[_s]=_s;return _a.sort(ga),_a},sortedArray:function(ca,ga,ya){for(var _a=ca.length,_s=new ca.constructor(_a),Ss=0,Ms=0;Ms!==_a;++Ss)for(var Es=ya[Ss]*ga,Cs=0;Cs!==ga;++Cs)_s[Ms++]=ca[Es+Cs];return _s},flattenJSON:function(ca,ga,ya,_a){for(var _s=1,Ss=ca[0];Ss!==void 0&&Ss[_a]===void 0;)Ss=ca[_s++];if(Ss!==void 0){var Ms=Ss[_a];if(Ms!==void 0)if(Array.isArray(Ms))do Ms=Ss[_a],Ms!==void 0&&(ga.push(Ss.time),ya.push.apply(ya,Ms)),Ss=ca[_s++];while(Ss!==void 0);else if(Ms.toArray!==void 0)do Ms=Ss[_a],Ms!==void 0&&(ga.push(Ss.time),Ms.toArray(ya,ya.length)),Ss=ca[_s++];while(Ss!==void 0);else do Ms=Ss[_a],Ms!==void 0&&(ga.push(Ss.time),ya.push(Ms)),Ss=ca[_s++];while(Ss!==void 0)}},subclip:function(ca,ga,ya,_a,_s){_s=_s||30;var Ss=ca.clone();Ss.name=ga;for(var Ms=[],Es=0;Es<Ss.tracks.length;++Es){for(var Cs=Ss.tracks[Es],Ts=Cs.getValueSize(),Bs=[],Is=[],Ps=0;Ps<Cs.times.length;++Ps){var Rs=Cs.times[Ps]*_s;if(!(Rs<ya||Rs>=_a)){Bs.push(Cs.times[Ps]);for(var ks=0;ks<Ts;++ks)Is.push(Cs.values[Ps*Ts+ks])}}Bs.length!==0&&(Cs.times=AnimationUtils.convertArray(Bs,Cs.times.constructor),Cs.values=AnimationUtils.convertArray(Is,Cs.values.constructor),Ms.push(Cs))}Ss.tracks=Ms;for(var $s=1/0,Es=0;Es<Ss.tracks.length;++Es)$s>Ss.tracks[Es].times[0]&&($s=Ss.tracks[Es].times[0]);for(var Es=0;Es<Ss.tracks.length;++Es)Ss.tracks[Es].shift(-1*$s);return Ss.resetDuration(),Ss},makeClipAdditive:function(ca,ga,ya,_a){ga===void 0&&(ga=0),ya===void 0&&(ya=ca),(_a===void 0||_a<=0)&&(_a=30);for(var _s=ca.tracks.length,Ss=ga/_a,Ms=0;Ms<_s;++Ms){var Es=ya.tracks[Ms],Cs=Es.ValueTypeName;if(!(Cs==="bool"||Cs==="string")){var Ts=ca.tracks.find(function(Ns){return Ns.name===Es.name&&Ns.ValueTypeName===Cs});if(Ts!==void 0){var Bs=Es.getValueSize(),Is=Es.times.length-1,Ps;if(Ss<=Es.times[0])Ps=AnimationUtils.arraySlice(Es.values,0,Es.valueSize);else if(Ss>=Es.times[Is]){var Rs=Is*Bs;Ps=AnimationUtils.arraySlice(Es.values,Rs)}else{var ks=Es.createInterpolant();ks.evaluate(Ss),Ps=ks.resultBuffer}if(Cs==="quaternion"){var $s=new Quaternion(Ps[0],Ps[1],Ps[2],Ps[3]).normalize().conjugate();$s.toArray(Ps)}for(var Os=Ts.times.length,Ls=0;Ls<Os;++Ls){var Ds=Ls*Bs;if(Cs==="quaternion")Quaternion.multiplyQuaternionsFlat(Ts.values,Ds,Ps,0,Ts.values,Ds);else for(var Fs=0;Fs<Bs;++Fs)Ts.values[Ds+Fs]-=Ps[Fs]}}}}return ca.blendMode=AdditiveAnimationBlendMode,ca}};function Interpolant(ca,ga,ya,_a){this.parameterPositions=ca,this._cachedIndex=0,this.resultBuffer=_a!==void 0?_a:new ga.constructor(ya),this.sampleValues=ga,this.valueSize=ya}Object.assign(Interpolant.prototype,{evaluate:function(ca){var ga=this.parameterPositions,ya=this._cachedIndex,_a=ga[ya],_s=ga[ya-1];e:{t:{var Ss;r:{n:if(!(ca<_a)){for(var Ms=ya+2;;){if(_a===void 0){if(ca<_s)break n;return ya=ga.length,this._cachedIndex=ya,this.afterEnd_(ya-1,ca,_s)}if(ya===Ms)break;if(_s=_a,_a=ga[++ya],ca<_a)break t}Ss=ga.length;break r}if(!(ca>=_s)){var Es=ga[1];ca<Es&&(ya=2,_s=Es);for(var Ms=ya-2;;){if(_s===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,_a);if(ya===Ms)break;if(_a=_s,_s=ga[--ya-1],ca>=_s)break t}Ss=ya,ya=0;break r}break e}for(;ya<Ss;){var Cs=ya+Ss>>>1;ca<ga[Cs]?Ss=Cs:ya=Cs+1}if(_a=ga[ya],_s=ga[ya-1],_s===void 0)return this._cachedIndex=0,this.beforeStart_(0,ca,_a);if(_a===void 0)return ya=ga.length,this._cachedIndex=ya,this.afterEnd_(ya-1,_s,ca)}this._cachedIndex=ya,this.intervalChanged_(ya,_s,_a)}return this.interpolate_(ya,_s,ca,_a)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(ca){for(var ga=this.resultBuffer,ya=this.sampleValues,_a=this.valueSize,_s=ca*_a,Ss=0;Ss!==_a;++Ss)ga[Ss]=ya[_s+Ss];return ga},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(ca,ga,ya,_a){Interpolant.call(this,ca,ga,ya,_a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(ca,ga,ya){var _a=this.parameterPositions,_s=ca-2,Ss=ca+1,Ms=_a[_s],Es=_a[Ss];if(Ms===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:_s=ca,Ms=2*ga-ya;break;case WrapAroundEnding:_s=_a.length-2,Ms=ga+_a[_s]-_a[_s+1];break;default:_s=ca,Ms=ya}if(Es===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ss=ca,Es=2*ya-ga;break;case WrapAroundEnding:Ss=1,Es=ya+_a[1]-_a[0];break;default:Ss=ca-1,Es=ga}var Cs=(ya-ga)*.5,Ts=this.valueSize;this._weightPrev=Cs/(ga-Ms),this._weightNext=Cs/(Es-ya),this._offsetPrev=_s*Ts,this._offsetNext=Ss*Ts},interpolate_:function(ca,ga,ya,_a){for(var _s=this.resultBuffer,Ss=this.sampleValues,Ms=this.valueSize,Es=ca*Ms,Cs=Es-Ms,Ts=this._offsetPrev,Bs=this._offsetNext,Is=this._weightPrev,Ps=this._weightNext,Rs=(ya-ga)/(_a-ga),ks=Rs*Rs,$s=ks*Rs,Os=-Is*$s+2*Is*ks-Is*Rs,Ls=(1+Is)*$s+(-1.5-2*Is)*ks+(-.5+Is)*Rs+1,Ds=(-1-Ps)*$s+(1.5+Ps)*ks+.5*Rs,Fs=Ps*$s-Ps*ks,Ns=0;Ns!==Ms;++Ns)_s[Ns]=Os*Ss[Ts+Ns]+Ls*Ss[Cs+Ns]+Ds*Ss[Es+Ns]+Fs*Ss[Bs+Ns];return _s}});function LinearInterpolant(ca,ga,ya,_a){Interpolant.call(this,ca,ga,ya,_a)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(ca,ga,ya,_a){for(var _s=this.resultBuffer,Ss=this.sampleValues,Ms=this.valueSize,Es=ca*Ms,Cs=Es-Ms,Ts=(ya-ga)/(_a-ga),Bs=1-Ts,Is=0;Is!==Ms;++Is)_s[Is]=Ss[Cs+Is]*Bs+Ss[Es+Is]*Ts;return _s}});function DiscreteInterpolant(ca,ga,ya,_a){Interpolant.call(this,ca,ga,ya,_a)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(ca){return this.copySampleValue_(ca-1)}});function KeyframeTrack(ca,ga,ya,_a){if(ca===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(ga===void 0||ga.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+ca);this.name=ca,this.times=AnimationUtils.convertArray(ga,this.TimeBufferType),this.values=AnimationUtils.convertArray(ya,this.ValueBufferType),this.setInterpolation(_a||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(ca){var ga=ca.constructor,ya;if(ga.toJSON!==void 0)ya=ga.toJSON(ca);else{ya={name:ca.name,times:AnimationUtils.convertArray(ca.times,Array),values:AnimationUtils.convertArray(ca.values,Array)};var _a=ca.getInterpolation();_a!==ca.DefaultInterpolation&&(ya.interpolation=_a)}return ya.type=ca.ValueTypeName,ya}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(ca){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodLinear:function(ca){return new LinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:function(ca){return new CubicInterpolant(this.times,this.values,this.getValueSize(),ca)},setInterpolation:function(ca){var ga;switch(ca){case InterpolateDiscrete:ga=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:ga=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:ga=this.InterpolantFactoryMethodSmooth;break}if(ga===void 0){var ya="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(ca!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(ya);return console.warn("THREE.KeyframeTrack:",ya),this}return this.createInterpolant=ga,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(ca){if(ca!==0)for(var ga=this.times,ya=0,_a=ga.length;ya!==_a;++ya)ga[ya]+=ca;return this},scale:function(ca){if(ca!==1)for(var ga=this.times,ya=0,_a=ga.length;ya!==_a;++ya)ga[ya]*=ca;return this},trim:function(ca,ga){for(var ya=this.times,_a=ya.length,_s=0,Ss=_a-1;_s!==_a&&ya[_s]<ca;)++_s;for(;Ss!==-1&&ya[Ss]>ga;)--Ss;if(++Ss,_s!==0||Ss!==_a){_s>=Ss&&(Ss=Math.max(Ss,1),_s=Ss-1);var Ms=this.getValueSize();this.times=AnimationUtils.arraySlice(ya,_s,Ss),this.values=AnimationUtils.arraySlice(this.values,_s*Ms,Ss*Ms)}return this},validate:function(){var ca=!0,ga=this.getValueSize();ga-Math.floor(ga)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),ca=!1);var ya=this.times,_a=this.values,_s=ya.length;_s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),ca=!1);for(var Ss=null,Ms=0;Ms!==_s;Ms++){var Es=ya[Ms];if(typeof Es=="number"&&isNaN(Es)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Ms,Es),ca=!1;break}if(Ss!==null&&Ss>Es){console.error("THREE.KeyframeTrack: Out of order keys.",this,Ms,Es,Ss),ca=!1;break}Ss=Es}if(_a!==void 0&&AnimationUtils.isTypedArray(_a))for(var Ms=0,Cs=_a.length;Ms!==Cs;++Ms){var Ts=_a[Ms];if(isNaN(Ts)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Ms,Ts),ca=!1;break}}return ca},optimize:function(){for(var ca=AnimationUtils.arraySlice(this.times),ga=AnimationUtils.arraySlice(this.values),ya=this.getValueSize(),_a=this.getInterpolation()===InterpolateSmooth,_s=1,Ss=ca.length-1,Ms=1;Ms<Ss;++Ms){var Es=!1,Cs=ca[Ms],Ts=ca[Ms+1];if(Cs!==Ts&&(Ms!==1||Cs!==Cs[0]))if(_a)Es=!0;else for(var Bs=Ms*ya,Is=Bs-ya,Ps=Bs+ya,Rs=0;Rs!==ya;++Rs){var ks=ga[Bs+Rs];if(ks!==ga[Is+Rs]||ks!==ga[Ps+Rs]){Es=!0;break}}if(Es){if(Ms!==_s){ca[_s]=ca[Ms];for(var $s=Ms*ya,Os=_s*ya,Rs=0;Rs!==ya;++Rs)ga[Os+Rs]=ga[$s+Rs]}++_s}}if(Ss>0){ca[_s]=ca[Ss];for(var $s=Ss*ya,Os=_s*ya,Rs=0;Rs!==ya;++Rs)ga[Os+Rs]=ga[$s+Rs];++_s}return _s!==ca.length?(this.times=AnimationUtils.arraySlice(ca,0,_s),this.values=AnimationUtils.arraySlice(ga,0,_s*ya)):(this.times=ca,this.values=ga),this},clone:function(){var ca=AnimationUtils.arraySlice(this.times,0),ga=AnimationUtils.arraySlice(this.values,0),ya=this.constructor,_a=new ya(this.name,ca,ga);return _a.createInterpolant=this.createInterpolant,_a}});function BooleanKeyframeTrack(ca,ga,ya){KeyframeTrack.call(this,ca,ga,ya)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(ca,ga,ya,_a){KeyframeTrack.call(this,ca,ga,ya,_a)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(ca,ga,ya,_a){KeyframeTrack.call(this,ca,ga,ya,_a)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(ca,ga,ya,_a){Interpolant.call(this,ca,ga,ya,_a)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(ca,ga,ya,_a){for(var _s=this.resultBuffer,Ss=this.sampleValues,Ms=this.valueSize,Es=ca*Ms,Cs=(ya-ga)/(_a-ga),Ts=Es+Ms;Es!==Ts;Es+=4)Quaternion.slerpFlat(_s,0,Ss,Es-Ms,Ss,Es,Cs);return _s}});function QuaternionKeyframeTrack(ca,ga,ya,_a){KeyframeTrack.call(this,ca,ga,ya,_a)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(ca){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),ca)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(ca,ga,ya,_a){KeyframeTrack.call(this,ca,ga,ya,_a)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(ca,ga,ya,_a){KeyframeTrack.call(this,ca,ga,ya,_a)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(ca,ga,ya,_a){this.name=ca,this.tracks=ya,this.duration=ga!==void 0?ga:-1,this.blendMode=_a!==void 0?_a:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(ca){switch(ca.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ca)}function parseKeyframeTrack(ca){if(ca.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var ga=getTrackTypeForValueTypeName(ca.type);if(ca.times===void 0){var ya=[],_a=[];AnimationUtils.flattenJSON(ca.keys,ya,_a,"value"),ca.times=ya,ca.values=_a}return ga.parse!==void 0?ga.parse(ca):new ga(ca.name,ca.times,ca.values,ca.interpolation)}Object.assign(AnimationClip,{parse:function(ca){for(var ga=[],ya=ca.tracks,_a=1/(ca.fps||1),_s=0,Ss=ya.length;_s!==Ss;++_s)ga.push(parseKeyframeTrack(ya[_s]).scale(_a));return new AnimationClip(ca.name,ca.duration,ga,ca.blendMode)},toJSON:function(ca){for(var ga=[],ya=ca.tracks,_a={name:ca.name,duration:ca.duration,tracks:ga,uuid:ca.uuid,blendMode:ca.blendMode},_s=0,Ss=ya.length;_s!==Ss;++_s)ga.push(KeyframeTrack.toJSON(ya[_s]));return _a},CreateFromMorphTargetSequence:function(ca,ga,ya,_a){for(var _s=ga.length,Ss=[],Ms=0;Ms<_s;Ms++){var Es=[],Cs=[];Es.push((Ms+_s-1)%_s,Ms,(Ms+1)%_s),Cs.push(0,1,0);var Ts=AnimationUtils.getKeyframeOrder(Es);Es=AnimationUtils.sortedArray(Es,1,Ts),Cs=AnimationUtils.sortedArray(Cs,1,Ts),!_a&&Es[0]===0&&(Es.push(_s),Cs.push(Cs[0])),Ss.push(new NumberKeyframeTrack(".morphTargetInfluences["+ga[Ms].name+"]",Es,Cs).scale(1/ya))}return new AnimationClip(ca,-1,Ss)},findByName:function(ca,ga){var ya=ca;if(!Array.isArray(ca)){var _a=ca;ya=_a.geometry&&_a.geometry.animations||_a.animations}for(var _s=0;_s<ya.length;_s++)if(ya[_s].name===ga)return ya[_s];return null},CreateClipsFromMorphTargetSequences:function(ca,ga,ya){for(var _a={},_s=/^([\w-]*?)([\d]+)$/,Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Es=ca[Ss],Cs=Es.name.match(_s);if(Cs&&Cs.length>1){var Ts=Cs[1],Bs=_a[Ts];Bs||(_a[Ts]=Bs=[]),Bs.push(Es)}}var Is=[];for(var Ts in _a)Is.push(AnimationClip.CreateFromMorphTargetSequence(Ts,_a[Ts],ga,ya));return Is},parseAnimation:function(ca,ga){if(!ca)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var ya=function(Ns,Vs,Gs,Us,zs){if(Gs.length!==0){var Hs=[],Qs=[];AnimationUtils.flattenJSON(Gs,Hs,Qs,Us),Hs.length!==0&&zs.push(new Ns(Vs,Hs,Qs))}},_a=[],_s=ca.name||"default",Ss=ca.length||-1,Ms=ca.fps||30,Es=ca.blendMode,Cs=ca.hierarchy||[],Ts=0;Ts<Cs.length;Ts++){var Bs=Cs[Ts].keys;if(!(!Bs||Bs.length===0))if(Bs[0].morphTargets){for(var Is={},Ps=0;Ps<Bs.length;Ps++)if(Bs[Ps].morphTargets)for(var Rs=0;Rs<Bs[Ps].morphTargets.length;Rs++)Is[Bs[Ps].morphTargets[Rs]]=-1;for(var ks in Is){for(var $s=[],Os=[],Rs=0;Rs!==Bs[Ps].morphTargets.length;++Rs){var Ls=Bs[Ps];$s.push(Ls.time),Os.push(Ls.morphTarget===ks?1:0)}_a.push(new NumberKeyframeTrack(".morphTargetInfluence["+ks+"]",$s,Os))}Ss=Is.length*(Ms||1)}else{var Ds=".bones["+ga[Ts].name+"]";ya(VectorKeyframeTrack,Ds+".position",Bs,"pos",_a),ya(QuaternionKeyframeTrack,Ds+".quaternion",Bs,"rot",_a),ya(VectorKeyframeTrack,Ds+".scale",Bs,"scl",_a)}}if(_a.length===0)return null;var Fs=new AnimationClip(_s,Ss,_a,Es);return Fs}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var ca=this.tracks,ga=0,ya=0,_a=ca.length;ya!==_a;++ya){var _s=this.tracks[ya];ga=Math.max(ga,_s.times[_s.times.length-1])}return this.duration=ga,this},trim:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].trim(0,this.duration);return this},validate:function(){for(var ca=!0,ga=0;ga<this.tracks.length;ga++)ca=ca&&this.tracks[ga].validate();return ca},optimize:function(){for(var ca=0;ca<this.tracks.length;ca++)this.tracks[ca].optimize();return this},clone:function(){for(var ca=[],ga=0;ga<this.tracks.length;ga++)ca.push(this.tracks[ga].clone());return new AnimationClip(this.name,this.duration,ca,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(ca,ga){this.enabled!==!1&&(this.files[ca]=ga)},get:function(ca){if(this.enabled!==!1)return this.files[ca]},remove:function(ca){delete this.files[ca]},clear:function(){this.files={}}};function LoadingManager(ca,ga,ya){var _a=this,_s=!1,Ss=0,Ms=0,Es=void 0,Cs=[];this.onStart=void 0,this.onLoad=ca,this.onProgress=ga,this.onError=ya,this.itemStart=function(Ts){Ms++,_s===!1&&_a.onStart!==void 0&&_a.onStart(Ts,Ss,Ms),_s=!0},this.itemEnd=function(Ts){Ss++,_a.onProgress!==void 0&&_a.onProgress(Ts,Ss,Ms),Ss===Ms&&(_s=!1,_a.onLoad!==void 0&&_a.onLoad())},this.itemError=function(Ts){_a.onError!==void 0&&_a.onError(Ts)},this.resolveURL=function(Ts){return Es?Es(Ts):Ts},this.setURLModifier=function(Ts){return Es=Ts,this},this.addHandler=function(Ts,Bs){return Cs.push(Ts,Bs),this},this.removeHandler=function(Ts){var Bs=Cs.indexOf(Ts);return Bs!==-1&&Cs.splice(Bs,2),this},this.getHandler=function(Ts){for(var Bs=0,Is=Cs.length;Bs<Is;Bs+=2){var Ps=Cs[Bs],Rs=Cs[Bs+1];if(Ps.global&&(Ps.lastIndex=0),Ps.test(Ts))return Rs}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(ca){this.manager=ca!==void 0?ca:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(ca,ga){var ya=this;return new Promise(function(_a,_s){ya.load(ca,_a,ga,_s)})},parse:function(){},setCrossOrigin:function(ca){return this.crossOrigin=ca,this},setPath:function(ca){return this.path=ca,this},setResourcePath:function(ca){return this.resourcePath=ca,this},setRequestHeader:function(ca){return this.requestHeader=ca,this}});var loading={};function FileLoader(ca){Loader.call(this,ca)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(ca,ga,ya,_a){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var _s=this,Ss=Cache.get(ca);if(Ss!==void 0)return _s.manager.itemStart(ca),setTimeout(function(){ga&&ga(Ss),_s.manager.itemEnd(ca)},0),Ss;if(loading[ca]!==void 0){loading[ca].push({onLoad:ga,onProgress:ya,onError:_a});return}var Ms=/^data:(.*?)(;base64)?,(.*)$/,Es=ca.match(Ms);if(Es){var Cs=Es[1],Ts=!!Es[2],Bs=Es[3];Bs=decodeURIComponent(Bs),Ts&&(Bs=atob(Bs));try{var Is,Ps=(this.responseType||"").toLowerCase();switch(Ps){case"arraybuffer":case"blob":for(var Rs=new Uint8Array(Bs.length),ks=0;ks<Bs.length;ks++)Rs[ks]=Bs.charCodeAt(ks);Ps==="blob"?Is=new Blob([Rs.buffer],{type:Cs}):Is=Rs.buffer;break;case"document":var $s=new DOMParser;Is=$s.parseFromString(Bs,Cs);break;case"json":Is=JSON.parse(Bs);break;default:Is=Bs;break}setTimeout(function(){ga&&ga(Is),_s.manager.itemEnd(ca)},0)}catch(Ds){setTimeout(function(){_a&&_a(Ds),_s.manager.itemError(ca),_s.manager.itemEnd(ca)},0)}}else{loading[ca]=[],loading[ca].push({onLoad:ga,onProgress:ya,onError:_a});var Os=new XMLHttpRequest;Os.open("GET",ca,!0),Os.addEventListener("load",function(Ds){var Fs=this.response,Ns=loading[ca];if(delete loading[ca],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(ca,Fs);for(var Vs=0,Gs=Ns.length;Vs<Gs;Vs++){var Us=Ns[Vs];Us.onLoad&&Us.onLoad(Fs)}_s.manager.itemEnd(ca)}else{for(var Vs=0,Gs=Ns.length;Vs<Gs;Vs++){var Us=Ns[Vs];Us.onError&&Us.onError(Ds)}_s.manager.itemError(ca),_s.manager.itemEnd(ca)}},!1),Os.addEventListener("progress",function(Ds){for(var Fs=loading[ca],Ns=0,Vs=Fs.length;Ns<Vs;Ns++){var Gs=Fs[Ns];Gs.onProgress&&Gs.onProgress(Ds)}},!1),Os.addEventListener("error",function(Ds){var Fs=loading[ca];delete loading[ca];for(var Ns=0,Vs=Fs.length;Ns<Vs;Ns++){var Gs=Fs[Ns];Gs.onError&&Gs.onError(Ds)}_s.manager.itemError(ca),_s.manager.itemEnd(ca)},!1),Os.addEventListener("abort",function(Ds){var Fs=loading[ca];delete loading[ca];for(var Ns=0,Vs=Fs.length;Ns<Vs;Ns++){var Gs=Fs[Ns];Gs.onError&&Gs.onError(Ds)}_s.manager.itemError(ca),_s.manager.itemEnd(ca)},!1),this.responseType!==void 0&&(Os.responseType=this.responseType),this.withCredentials!==void 0&&(Os.withCredentials=this.withCredentials),Os.overrideMimeType&&Os.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var Ls in this.requestHeader)Os.setRequestHeader(Ls,this.requestHeader[Ls]);Os.send(null)}return _s.manager.itemStart(ca),Os},setResponseType:function(ca){return this.responseType=ca,this},setWithCredentials:function(ca){return this.withCredentials=ca,this},setMimeType:function(ca){return this.mimeType=ca,this}});function AnimationLoader(ca){Loader.call(this,ca)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new FileLoader(_s.manager);Ss.setPath(_s.path),Ss.load(ca,function(Ms){try{ga(_s.parse(JSON.parse(Ms)))}catch(Es){_a?_a(Es):console.error(Es),_s.manager.itemError(ca)}},ya,_a)},parse:function(ca){for(var ga=[],ya=0;ya<ca.length;ya++){var _a=AnimationClip.parse(ca[ya]);ga.push(_a)}return ga}});function CompressedTextureLoader(ca){Loader.call(this,ca)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=[],Ms=new CompressedTexture;Ms.image=Ss;var Es=new FileLoader(this.manager);Es.setPath(this.path),Es.setResponseType("arraybuffer");function Cs(Ps){Es.load(ca[Ps],function(Rs){var ks=_s.parse(Rs,!0);Ss[Ps]={width:ks.width,height:ks.height,format:ks.format,mipmaps:ks.mipmaps},Ts+=1,Ts===6&&(ks.mipmapCount===1&&(Ms.minFilter=LinearFilter),Ms.format=ks.format,Ms.needsUpdate=!0,ga&&ga(Ms))},ya,_a)}if(Array.isArray(ca))for(var Ts=0,Bs=0,Is=ca.length;Bs<Is;++Bs)Cs(Bs);else Es.load(ca,function(Ps){var Rs=_s.parse(Ps,!0);if(Rs.isCubemap)for(var ks=Rs.mipmaps.length/Rs.mipmapCount,$s=0;$s<ks;$s++){Ss[$s]={mipmaps:[]};for(var Os=0;Os<Rs.mipmapCount;Os++)Ss[$s].mipmaps.push(Rs.mipmaps[$s*Rs.mipmapCount+Os]),Ss[$s].format=Rs.format,Ss[$s].width=Rs.width,Ss[$s].height=Rs.height}else Ms.image.width=Rs.width,Ms.image.height=Rs.height,Ms.mipmaps=Rs.mipmaps;Rs.mipmapCount===1&&(Ms.minFilter=LinearFilter),Ms.format=Rs.format,Ms.needsUpdate=!0,ga&&ga(Ms)},ya,_a);return Ms}});function DataTextureLoader(ca){Loader.call(this,ca)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new DataTexture,Ms=new FileLoader(this.manager);return Ms.setResponseType("arraybuffer"),Ms.setPath(this.path),Ms.load(ca,function(Es){var Cs=_s.parse(Es);!Cs||(Cs.image!==void 0?Ss.image=Cs.image:Cs.data!==void 0&&(Ss.image.width=Cs.width,Ss.image.height=Cs.height,Ss.image.data=Cs.data),Ss.wrapS=Cs.wrapS!==void 0?Cs.wrapS:ClampToEdgeWrapping,Ss.wrapT=Cs.wrapT!==void 0?Cs.wrapT:ClampToEdgeWrapping,Ss.magFilter=Cs.magFilter!==void 0?Cs.magFilter:LinearFilter,Ss.minFilter=Cs.minFilter!==void 0?Cs.minFilter:LinearFilter,Ss.anisotropy=Cs.anisotropy!==void 0?Cs.anisotropy:1,Cs.format!==void 0&&(Ss.format=Cs.format),Cs.type!==void 0&&(Ss.type=Cs.type),Cs.mipmaps!==void 0&&(Ss.mipmaps=Cs.mipmaps,Ss.minFilter=LinearMipmapLinearFilter),Cs.mipmapCount===1&&(Ss.minFilter=LinearFilter),Ss.needsUpdate=!0,ga&&ga(Ss,Cs))},ya,_a),Ss}});function ImageLoader(ca){Loader.call(this,ca)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(ca,ga,ya,_a){this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var _s=this,Ss=Cache.get(ca);if(Ss!==void 0)return _s.manager.itemStart(ca),setTimeout(function(){ga&&ga(Ss),_s.manager.itemEnd(ca)},0),Ss;var Ms=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Es(){Ms.removeEventListener("load",Es,!1),Ms.removeEventListener("error",Cs,!1),Cache.add(ca,this),ga&&ga(this),_s.manager.itemEnd(ca)}function Cs(Ts){Ms.removeEventListener("load",Es,!1),Ms.removeEventListener("error",Cs,!1),_a&&_a(Ts),_s.manager.itemError(ca),_s.manager.itemEnd(ca)}return Ms.addEventListener("load",Es,!1),Ms.addEventListener("error",Cs,!1),ca.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Ms.crossOrigin=this.crossOrigin),_s.manager.itemStart(ca),Ms.src=ca,Ms}});function CubeTextureLoader(ca){Loader.call(this,ca)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(ca,ga,ya,_a){var _s=new CubeTexture,Ss=new ImageLoader(this.manager);Ss.setCrossOrigin(this.crossOrigin),Ss.setPath(this.path);var Ms=0;function Es(Ts){Ss.load(ca[Ts],function(Bs){_s.images[Ts]=Bs,Ms++,Ms===6&&(_s.needsUpdate=!0,ga&&ga(_s))},void 0,_a)}for(var Cs=0;Cs<ca.length;++Cs)Es(Cs);return _s}});function TextureLoader(ca){Loader.call(this,ca)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(ca,ga,ya,_a){var _s=new Texture,Ss=new ImageLoader(this.manager);return Ss.setCrossOrigin(this.crossOrigin),Ss.setPath(this.path),Ss.load(ca,function(Ms){_s.image=Ms;var Es=ca.search(/\.jpe?g($|\?)/i)>0||ca.search(/^data\:image\/jpeg/)===0;_s.format=Es?RGBFormat:RGBAFormat,_s.needsUpdate=!0,ga!==void 0&&ga(_s)},ya,_a),_s}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(ca,ga){var ya=this.getUtoTmapping(ca);return this.getPoint(ya,ga)},getPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],ya=0;ya<=ca;ya++)ga.push(this.getPoint(ya/ca));return ga},getSpacedPoints:function(ca){ca===void 0&&(ca=5);for(var ga=[],ya=0;ya<=ca;ya++)ga.push(this.getPointAt(ya/ca));return ga},getLength:function(){var ca=this.getLengths();return ca[ca.length-1]},getLengths:function(ca){if(ca===void 0&&(ca=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===ca+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var ga=[],ya,_a=this.getPoint(0),_s,Ss=0;for(ga.push(0),_s=1;_s<=ca;_s++)ya=this.getPoint(_s/ca),Ss+=ya.distanceTo(_a),ga.push(Ss),_a=ya;return this.cacheArcLengths=ga,ga},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(ca,ga){var ya=this.getLengths(),_a=0,_s=ya.length,Ss;ga?Ss=ga:Ss=ca*ya[_s-1];for(var Ms=0,Es=_s-1,Cs;Ms<=Es;)if(_a=Math.floor(Ms+(Es-Ms)/2),Cs=ya[_a]-Ss,Cs<0)Ms=_a+1;else if(Cs>0)Es=_a-1;else{Es=_a;break}if(_a=Es,ya[_a]===Ss)return _a/(_s-1);var Ts=ya[_a],Bs=ya[_a+1],Is=Bs-Ts,Ps=(Ss-Ts)/Is,Rs=(_a+Ps)/(_s-1);return Rs},getTangent:function(ca,ga){var ya=1e-4,_a=ca-ya,_s=ca+ya;_a<0&&(_a=0),_s>1&&(_s=1);var Ss=this.getPoint(_a),Ms=this.getPoint(_s),Es=ga||(Ss.isVector2?new Vector2:new Vector3);return Es.copy(Ms).sub(Ss).normalize(),Es},getTangentAt:function(ca,ga){var ya=this.getUtoTmapping(ca);return this.getTangent(ya,ga)},computeFrenetFrames:function(ca,ga){var ya=new Vector3,_a=[],_s=[],Ss=[],Ms=new Vector3,Es=new Matrix4,Cs,Ts,Bs;for(Cs=0;Cs<=ca;Cs++)Ts=Cs/ca,_a[Cs]=this.getTangentAt(Ts,new Vector3),_a[Cs].normalize();_s[0]=new Vector3,Ss[0]=new Vector3;var Is=Number.MAX_VALUE,Ps=Math.abs(_a[0].x),Rs=Math.abs(_a[0].y),ks=Math.abs(_a[0].z);for(Ps<=Is&&(Is=Ps,ya.set(1,0,0)),Rs<=Is&&(Is=Rs,ya.set(0,1,0)),ks<=Is&&ya.set(0,0,1),Ms.crossVectors(_a[0],ya).normalize(),_s[0].crossVectors(_a[0],Ms),Ss[0].crossVectors(_a[0],_s[0]),Cs=1;Cs<=ca;Cs++)_s[Cs]=_s[Cs-1].clone(),Ss[Cs]=Ss[Cs-1].clone(),Ms.crossVectors(_a[Cs-1],_a[Cs]),Ms.length()>Number.EPSILON&&(Ms.normalize(),Bs=Math.acos(MathUtils.clamp(_a[Cs-1].dot(_a[Cs]),-1,1)),_s[Cs].applyMatrix4(Es.makeRotationAxis(Ms,Bs))),Ss[Cs].crossVectors(_a[Cs],_s[Cs]);if(ga===!0)for(Bs=Math.acos(MathUtils.clamp(_s[0].dot(_s[ca]),-1,1)),Bs/=ca,_a[0].dot(Ms.crossVectors(_s[0],_s[ca]))>0&&(Bs=-Bs),Cs=1;Cs<=ca;Cs++)_s[Cs].applyMatrix4(Es.makeRotationAxis(_a[Cs],Bs*Cs)),Ss[Cs].crossVectors(_a[Cs],_s[Cs]);return{tangents:_a,normals:_s,binormals:Ss}},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this},toJSON:function(){var ca={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return ca.arcLengthDivisions=this.arcLengthDivisions,ca.type=this.type,ca},fromJSON:function(ca){return this.arcLengthDivisions=ca.arcLengthDivisions,this}});function EllipseCurve(ca,ga,ya,_a,_s,Ss,Ms,Es){Curve.call(this),this.type="EllipseCurve",this.aX=ca||0,this.aY=ga||0,this.xRadius=ya||1,this.yRadius=_a||1,this.aStartAngle=_s||0,this.aEndAngle=Ss||2*Math.PI,this.aClockwise=Ms||!1,this.aRotation=Es||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(ca,ga){for(var ya=ga||new Vector2,_a=Math.PI*2,_s=this.aEndAngle-this.aStartAngle,Ss=Math.abs(_s)<Number.EPSILON;_s<0;)_s+=_a;for(;_s>_a;)_s-=_a;_s<Number.EPSILON&&(Ss?_s=0:_s=_a),this.aClockwise===!0&&!Ss&&(_s===_a?_s=-_a:_s=_s-_a);var Ms=this.aStartAngle+ca*_s,Es=this.aX+this.xRadius*Math.cos(Ms),Cs=this.aY+this.yRadius*Math.sin(Ms);if(this.aRotation!==0){var Ts=Math.cos(this.aRotation),Bs=Math.sin(this.aRotation),Is=Es-this.aX,Ps=Cs-this.aY;Es=Is*Ts-Ps*Bs+this.aX,Cs=Is*Bs+Ps*Ts+this.aY}return ya.set(Es,Cs)};EllipseCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};EllipseCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.aX=this.aX,ca.aY=this.aY,ca.xRadius=this.xRadius,ca.yRadius=this.yRadius,ca.aStartAngle=this.aStartAngle,ca.aEndAngle=this.aEndAngle,ca.aClockwise=this.aClockwise,ca.aRotation=this.aRotation,ca};EllipseCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.aX=ca.aX,this.aY=ca.aY,this.xRadius=ca.xRadius,this.yRadius=ca.yRadius,this.aStartAngle=ca.aStartAngle,this.aEndAngle=ca.aEndAngle,this.aClockwise=ca.aClockwise,this.aRotation=ca.aRotation,this};function ArcCurve(ca,ga,ya,_a,_s,Ss){EllipseCurve.call(this,ca,ga,ya,ya,_a,_s,Ss),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var ca=0,ga=0,ya=0,_a=0;function _s(Ss,Ms,Es,Cs){ca=Ss,ga=Es,ya=-3*Ss+3*Ms-2*Es-Cs,_a=2*Ss-2*Ms+Es+Cs}return{initCatmullRom:function(Ss,Ms,Es,Cs,Ts){_s(Ms,Es,Ts*(Es-Ss),Ts*(Cs-Ms))},initNonuniformCatmullRom:function(Ss,Ms,Es,Cs,Ts,Bs,Is){var Ps=(Ms-Ss)/Ts-(Es-Ss)/(Ts+Bs)+(Es-Ms)/Bs,Rs=(Es-Ms)/Bs-(Cs-Ms)/(Bs+Is)+(Cs-Es)/Is;Ps*=Bs,Rs*=Bs,_s(Ms,Es,Ps,Rs)},calc:function(Ss){var Ms=Ss*Ss,Es=Ms*Ss;return ca+ga*Ss+ya*Ms+_a*Es}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(ca,ga,ya,_a){Curve.call(this),this.type="CatmullRomCurve3",this.points=ca||[],this.closed=ga||!1,this.curveType=ya||"centripetal",this.tension=_a||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(ca,ga){var ya=ga||new Vector3,_a=this.points,_s=_a.length,Ss=(_s-(this.closed?0:1))*ca,Ms=Math.floor(Ss),Es=Ss-Ms;this.closed?Ms+=Ms>0?0:(Math.floor(Math.abs(Ms)/_s)+1)*_s:Es===0&&Ms===_s-1&&(Ms=_s-2,Es=1);var Cs,Ts,Bs,Is;if(this.closed||Ms>0?Cs=_a[(Ms-1)%_s]:(tmp.subVectors(_a[0],_a[1]).add(_a[0]),Cs=tmp),Ts=_a[Ms%_s],Bs=_a[(Ms+1)%_s],this.closed||Ms+2<_s?Is=_a[(Ms+2)%_s]:(tmp.subVectors(_a[_s-1],_a[_s-2]).add(_a[_s-1]),Is=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var Ps=this.curveType==="chordal"?.5:.25,Rs=Math.pow(Cs.distanceToSquared(Ts),Ps),ks=Math.pow(Ts.distanceToSquared(Bs),Ps),$s=Math.pow(Bs.distanceToSquared(Is),Ps);ks<1e-4&&(ks=1),Rs<1e-4&&(Rs=ks),$s<1e-4&&($s=ks),px.initNonuniformCatmullRom(Cs.x,Ts.x,Bs.x,Is.x,Rs,ks,$s),py.initNonuniformCatmullRom(Cs.y,Ts.y,Bs.y,Is.y,Rs,ks,$s),pz.initNonuniformCatmullRom(Cs.z,Ts.z,Bs.z,Is.z,Rs,ks,$s)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Cs.x,Ts.x,Bs.x,Is.x,this.tension),py.initCatmullRom(Cs.y,Ts.y,Bs.y,Is.y,this.tension),pz.initCatmullRom(Cs.z,Ts.z,Bs.z,Is.z,this.tension));return ya.set(px.calc(Es),py.calc(Es),pz.calc(Es)),ya};CatmullRomCurve3.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,ya=ca.points.length;ga<ya;ga++){var _a=ca.points[ga];this.points.push(_a.clone())}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,ya=this.points.length;ga<ya;ga++){var _a=this.points[ga];ca.points.push(_a.toArray())}return ca.closed=this.closed,ca.curveType=this.curveType,ca.tension=this.tension,ca};CatmullRomCurve3.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,ya=ca.points.length;ga<ya;ga++){var _a=ca.points[ga];this.points.push(new Vector3().fromArray(_a))}return this.closed=ca.closed,this.curveType=ca.curveType,this.tension=ca.tension,this};function CatmullRom(ca,ga,ya,_a,_s){var Ss=(_a-ga)*.5,Ms=(_s-ya)*.5,Es=ca*ca,Cs=ca*Es;return(2*ya-2*_a+Ss+Ms)*Cs+(-3*ya+3*_a-2*Ss-Ms)*Es+Ss*ca+ya}function QuadraticBezierP0(ca,ga){var ya=1-ca;return ya*ya*ga}function QuadraticBezierP1(ca,ga){return 2*(1-ca)*ca*ga}function QuadraticBezierP2(ca,ga){return ca*ca*ga}function QuadraticBezier(ca,ga,ya,_a){return QuadraticBezierP0(ca,ga)+QuadraticBezierP1(ca,ya)+QuadraticBezierP2(ca,_a)}function CubicBezierP0(ca,ga){var ya=1-ca;return ya*ya*ya*ga}function CubicBezierP1(ca,ga){var ya=1-ca;return 3*ya*ya*ca*ga}function CubicBezierP2(ca,ga){return 3*(1-ca)*ca*ca*ga}function CubicBezierP3(ca,ga){return ca*ca*ca*ga}function CubicBezier(ca,ga,ya,_a,_s){return CubicBezierP0(ca,ga)+CubicBezierP1(ca,ya)+CubicBezierP2(ca,_a)+CubicBezierP3(ca,_s)}function CubicBezierCurve(ca,ga,ya,_a){Curve.call(this),this.type="CubicBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=ya||new Vector2,this.v3=_a||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(ca,ga){var ya=ga||new Vector2,_a=this.v0,_s=this.v1,Ss=this.v2,Ms=this.v3;return ya.set(CubicBezier(ca,_a.x,_s.x,Ss.x,Ms.x),CubicBezier(ca,_a.y,_s.y,Ss.y,Ms.y)),ya};CubicBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function CubicBezierCurve3(ca,ga,ya,_a){Curve.call(this),this.type="CubicBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=ya||new Vector3,this.v3=_a||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(ca,ga){var ya=ga||new Vector3,_a=this.v0,_s=this.v1,Ss=this.v2,Ms=this.v3;return ya.set(CubicBezier(ca,_a.x,_s.x,Ss.x,Ms.x),CubicBezier(ca,_a.y,_s.y,Ss.y,Ms.y),CubicBezier(ca,_a.z,_s.z,Ss.z,Ms.z)),ya};CubicBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this.v3.copy(ca.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca.v3=this.v3.toArray(),ca};CubicBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this.v3.fromArray(ca.v3),this};function LineCurve(ca,ga){Curve.call(this),this.type="LineCurve",this.v1=ca||new Vector2,this.v2=ga||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(ca,ga){var ya=ga||new Vector2;return ca===1?ya.copy(this.v2):(ya.copy(this.v2).sub(this.v1),ya.multiplyScalar(ca).add(this.v1)),ya};LineCurve.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve.prototype.getTangent=function(ca,ga){var ya=ga||new Vector2,ya=ya.copy(this.v2).sub(this.v1).normalize();return ya};LineCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function LineCurve3(ca,ga){Curve.call(this),this.type="LineCurve3",this.v1=ca||new Vector3,this.v2=ga||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(ca,ga){var ya=ga||new Vector3;return ca===1?ya.copy(this.v2):(ya.copy(this.v2).sub(this.v1),ya.multiplyScalar(ca).add(this.v1)),ya};LineCurve3.prototype.getPointAt=function(ca,ga){return this.getPoint(ca,ga)};LineCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};LineCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};LineCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve(ca,ga,ya){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=ca||new Vector2,this.v1=ga||new Vector2,this.v2=ya||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(ca,ga){var ya=ga||new Vector2,_a=this.v0,_s=this.v1,Ss=this.v2;return ya.set(QuadraticBezier(ca,_a.x,_s.x,Ss.x),QuadraticBezier(ca,_a.y,_s.y,Ss.y)),ya};QuadraticBezierCurve.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function QuadraticBezierCurve3(ca,ga,ya){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=ca||new Vector3,this.v1=ga||new Vector3,this.v2=ya||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(ca,ga){var ya=ga||new Vector3,_a=this.v0,_s=this.v1,Ss=this.v2;return ya.set(QuadraticBezier(ca,_a.x,_s.x,Ss.x),QuadraticBezier(ca,_a.y,_s.y,Ss.y),QuadraticBezier(ca,_a.z,_s.z,Ss.z)),ya};QuadraticBezierCurve3.prototype.copy=function(ca){return Curve.prototype.copy.call(this,ca),this.v0.copy(ca.v0),this.v1.copy(ca.v1),this.v2.copy(ca.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);return ca.v0=this.v0.toArray(),ca.v1=this.v1.toArray(),ca.v2=this.v2.toArray(),ca};QuadraticBezierCurve3.prototype.fromJSON=function(ca){return Curve.prototype.fromJSON.call(this,ca),this.v0.fromArray(ca.v0),this.v1.fromArray(ca.v1),this.v2.fromArray(ca.v2),this};function SplineCurve(ca){Curve.call(this),this.type="SplineCurve",this.points=ca||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(ca,ga){var ya=ga||new Vector2,_a=this.points,_s=(_a.length-1)*ca,Ss=Math.floor(_s),Ms=_s-Ss,Es=_a[Ss===0?Ss:Ss-1],Cs=_a[Ss],Ts=_a[Ss>_a.length-2?_a.length-1:Ss+1],Bs=_a[Ss>_a.length-3?_a.length-1:Ss+2];return ya.set(CatmullRom(Ms,Es.x,Cs.x,Ts.x,Bs.x),CatmullRom(Ms,Es.y,Cs.y,Ts.y,Bs.y)),ya};SplineCurve.prototype.copy=function(ca){Curve.prototype.copy.call(this,ca),this.points=[];for(var ga=0,ya=ca.points.length;ga<ya;ga++){var _a=ca.points[ga];this.points.push(_a.clone())}return this};SplineCurve.prototype.toJSON=function(){var ca=Curve.prototype.toJSON.call(this);ca.points=[];for(var ga=0,ya=this.points.length;ga<ya;ga++){var _a=this.points[ga];ca.points.push(_a.toArray())}return ca};SplineCurve.prototype.fromJSON=function(ca){Curve.prototype.fromJSON.call(this,ca),this.points=[];for(var ga=0,ya=ca.points.length;ga<ya;ga++){var _a=ca.points[ga];this.points.push(new Vector2().fromArray(_a))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(ca){this.curves.push(ca)},closePath:function(){var ca=this.curves[0].getPoint(0),ga=this.curves[this.curves.length-1].getPoint(1);ca.equals(ga)||this.curves.push(new LineCurve(ga,ca))},getPoint:function(ca){for(var ga=ca*this.getLength(),ya=this.getCurveLengths(),_a=0;_a<ya.length;){if(ya[_a]>=ga){var _s=ya[_a]-ga,Ss=this.curves[_a],Ms=Ss.getLength(),Es=Ms===0?0:1-_s/Ms;return Ss.getPointAt(Es)}_a++}return null},getLength:function(){var ca=this.getCurveLengths();return ca[ca.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var ca=[],ga=0,ya=0,_a=this.curves.length;ya<_a;ya++)ga+=this.curves[ya].getLength(),ca.push(ga);return this.cacheLengths=ca,ca},getSpacedPoints:function(ca){ca===void 0&&(ca=40);for(var ga=[],ya=0;ya<=ca;ya++)ga.push(this.getPoint(ya/ca));return this.autoClose&&ga.push(ga[0]),ga},getPoints:function(ca){ca=ca||12;for(var ga=[],ya,_a=0,_s=this.curves;_a<_s.length;_a++)for(var Ss=_s[_a],Ms=Ss&&Ss.isEllipseCurve?ca*2:Ss&&(Ss.isLineCurve||Ss.isLineCurve3)?1:Ss&&Ss.isSplineCurve?ca*Ss.points.length:ca,Es=Ss.getPoints(Ms),Cs=0;Cs<Es.length;Cs++){var Ts=Es[Cs];ya&&ya.equals(Ts)||(ga.push(Ts),ya=Ts)}return this.autoClose&&ga.length>1&&!ga[ga.length-1].equals(ga[0])&&ga.push(ga[0]),ga},copy:function(ca){Curve.prototype.copy.call(this,ca),this.curves=[];for(var ga=0,ya=ca.curves.length;ga<ya;ga++){var _a=ca.curves[ga];this.curves.push(_a.clone())}return this.autoClose=ca.autoClose,this},toJSON:function(){var ca=Curve.prototype.toJSON.call(this);ca.autoClose=this.autoClose,ca.curves=[];for(var ga=0,ya=this.curves.length;ga<ya;ga++){var _a=this.curves[ga];ca.curves.push(_a.toJSON())}return ca},fromJSON:function(ca){Curve.prototype.fromJSON.call(this,ca),this.autoClose=ca.autoClose,this.curves=[];for(var ga=0,ya=ca.curves.length;ga<ya;ga++){var _a=ca.curves[ga];this.curves.push(new Curves[_a.type]().fromJSON(_a))}return this}});function Path(ca){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,ca&&this.setFromPoints(ca)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(ca){this.moveTo(ca[0].x,ca[0].y);for(var ga=1,ya=ca.length;ga<ya;ga++)this.lineTo(ca[ga].x,ca[ga].y);return this},moveTo:function(ca,ga){return this.currentPoint.set(ca,ga),this},lineTo:function(ca,ga){var ya=new LineCurve(this.currentPoint.clone(),new Vector2(ca,ga));return this.curves.push(ya),this.currentPoint.set(ca,ga),this},quadraticCurveTo:function(ca,ga,ya,_a){var _s=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(ya,_a));return this.curves.push(_s),this.currentPoint.set(ya,_a),this},bezierCurveTo:function(ca,ga,ya,_a,_s,Ss){var Ms=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(ca,ga),new Vector2(ya,_a),new Vector2(_s,Ss));return this.curves.push(Ms),this.currentPoint.set(_s,Ss),this},splineThru:function(ca){var ga=[this.currentPoint.clone()].concat(ca),ya=new SplineCurve(ga);return this.curves.push(ya),this.currentPoint.copy(ca[ca.length-1]),this},arc:function(ca,ga,ya,_a,_s,Ss){var Ms=this.currentPoint.x,Es=this.currentPoint.y;return this.absarc(ca+Ms,ga+Es,ya,_a,_s,Ss),this},absarc:function(ca,ga,ya,_a,_s,Ss){return this.absellipse(ca,ga,ya,ya,_a,_s,Ss),this},ellipse:function(ca,ga,ya,_a,_s,Ss,Ms,Es){var Cs=this.currentPoint.x,Ts=this.currentPoint.y;return this.absellipse(ca+Cs,ga+Ts,ya,_a,_s,Ss,Ms,Es),this},absellipse:function(ca,ga,ya,_a,_s,Ss,Ms,Es){var Cs=new EllipseCurve(ca,ga,ya,_a,_s,Ss,Ms,Es);if(this.curves.length>0){var Ts=Cs.getPoint(0);Ts.equals(this.currentPoint)||this.lineTo(Ts.x,Ts.y)}this.curves.push(Cs);var Bs=Cs.getPoint(1);return this.currentPoint.copy(Bs),this},copy:function(ca){return CurvePath.prototype.copy.call(this,ca),this.currentPoint.copy(ca.currentPoint),this},toJSON:function(){var ca=CurvePath.prototype.toJSON.call(this);return ca.currentPoint=this.currentPoint.toArray(),ca},fromJSON:function(ca){return CurvePath.prototype.fromJSON.call(this,ca),this.currentPoint.fromArray(ca.currentPoint),this}});function Shape(ca){Path.call(this,ca),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(ca){for(var ga=[],ya=0,_a=this.holes.length;ya<_a;ya++)ga[ya]=this.holes[ya].getPoints(ca);return ga},extractPoints:function(ca){return{shape:this.getPoints(ca),holes:this.getPointsHoles(ca)}},copy:function(ca){Path.prototype.copy.call(this,ca),this.holes=[];for(var ga=0,ya=ca.holes.length;ga<ya;ga++){var _a=ca.holes[ga];this.holes.push(_a.clone())}return this},toJSON:function(){var ca=Path.prototype.toJSON.call(this);ca.uuid=this.uuid,ca.holes=[];for(var ga=0,ya=this.holes.length;ga<ya;ga++){var _a=this.holes[ga];ca.holes.push(_a.toJSON())}return ca},fromJSON:function(ca){Path.prototype.fromJSON.call(this,ca),this.uuid=ca.uuid,this.holes=[];for(var ga=0,ya=ca.holes.length;ga<ya;ga++){var _a=ca.holes[ga];this.holes.push(new Path().fromJSON(_a))}return this}});function Light(ca,ga){Object3D.call(this),this.type="Light",this.color=new Color(ca),this.intensity=ga!==void 0?ga:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(ca){return Object3D.prototype.copy.call(this,ca),this.color.copy(ca.color),this.intensity=ca.intensity,this},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.color=this.color.getHex(),ga.object.intensity=this.intensity,this.groundColor!==void 0&&(ga.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(ga.object.distance=this.distance),this.angle!==void 0&&(ga.object.angle=this.angle),this.decay!==void 0&&(ga.object.decay=this.decay),this.penumbra!==void 0&&(ga.object.penumbra=this.penumbra),this.shadow!==void 0&&(ga.object.shadow=this.shadow.toJSON()),ga}});function HemisphereLight(ca,ga,ya){Light.call(this,ca,ya),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(ga)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.groundColor.copy(ca.groundColor),this}});function LightShadow(ca){this.camera=ca,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(ca){var ga=this.camera,ya=this.matrix,_a=this._projScreenMatrix,_s=this._lookTarget,Ss=this._lightPositionWorld;Ss.setFromMatrixPosition(ca.matrixWorld),ga.position.copy(Ss),_s.setFromMatrixPosition(ca.target.matrixWorld),ga.lookAt(_s),ga.updateMatrixWorld(),_a.multiplyMatrices(ga.projectionMatrix,ga.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_a),ya.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ya.multiply(ga.projectionMatrix),ya.multiply(ga.matrixWorldInverse)},getViewport:function(ca){return this._viewports[ca]},getFrameExtents:function(){return this._frameExtents},copy:function(ca){return this.camera=ca.camera.clone(),this.bias=ca.bias,this.radius=ca.radius,this.mapSize.copy(ca.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca={};return this.bias!==0&&(ca.bias=this.bias),this.radius!==1&&(ca.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(ca.mapSize=this.mapSize.toArray()),ca.camera=this.camera.toJSON(!1).object,delete ca.camera.matrix,ca}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(ca){var ga=this.camera,ya=MathUtils.RAD2DEG*2*ca.angle,_a=this.mapSize.width/this.mapSize.height,_s=ca.distance||ga.far;(ya!==ga.fov||_a!==ga.aspect||_s!==ga.far)&&(ga.fov=ya,ga.aspect=_a,ga.far=_s,ga.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,ca)}});function SpotLight(ca,ga,ya,_a,_s,Ss){Light.call(this,ca,ga),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ms){this.intensity=Ms/Math.PI}}),this.distance=ya!==void 0?ya:0,this.angle=_a!==void 0?_a:Math.PI/3,this.penumbra=_s!==void 0?_s:0,this.decay=Ss!==void 0?Ss:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.angle=ca.angle,this.penumbra=ca.penumbra,this.decay=ca.decay,this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(ca,ga){ga===void 0&&(ga=0);var ya=this.camera,_a=this.matrix,_s=this._lightPositionWorld,Ss=this._lookTarget,Ms=this._projScreenMatrix;_s.setFromMatrixPosition(ca.matrixWorld),ya.position.copy(_s),Ss.copy(ya.position),Ss.add(this._cubeDirections[ga]),ya.up.copy(this._cubeUps[ga]),ya.lookAt(Ss),ya.updateMatrixWorld(),_a.makeTranslation(-_s.x,-_s.y,-_s.z),Ms.multiplyMatrices(ya.projectionMatrix,ya.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ms)}});function PointLight(ca,ga,ya,_a){Light.call(this,ca,ga),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(_s){this.intensity=_s/(4*Math.PI)}}),this.distance=ya!==void 0?ya:0,this.decay=_a!==void 0?_a:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.distance=ca.distance,this.decay=ca.decay,this.shadow=ca.shadow.clone(),this}});function OrthographicCamera(ca,ga,ya,_a,_s,Ss){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=ca!==void 0?ca:-1,this.right=ga!==void 0?ga:1,this.top=ya!==void 0?ya:1,this.bottom=_a!==void 0?_a:-1,this.near=_s!==void 0?_s:.1,this.far=Ss!==void 0?Ss:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(ca,ga){return Camera.prototype.copy.call(this,ca,ga),this.left=ca.left,this.right=ca.right,this.top=ca.top,this.bottom=ca.bottom,this.near=ca.near,this.far=ca.far,this.zoom=ca.zoom,this.view=ca.view===null?null:Object.assign({},ca.view),this},setViewOffset:function(ca,ga,ya,_a,_s,Ss){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=ca,this.view.fullHeight=ga,this.view.offsetX=ya,this.view.offsetY=_a,this.view.width=_s,this.view.height=Ss,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var ca=(this.right-this.left)/(2*this.zoom),ga=(this.top-this.bottom)/(2*this.zoom),ya=(this.right+this.left)/2,_a=(this.top+this.bottom)/2,_s=ya-ca,Ss=ya+ca,Ms=_a+ga,Es=_a-ga;if(this.view!==null&&this.view.enabled){var Cs=(this.right-this.left)/this.view.fullWidth/this.zoom,Ts=(this.top-this.bottom)/this.view.fullHeight/this.zoom;_s+=Cs*this.view.offsetX,Ss=_s+Cs*this.view.width,Ms-=Ts*this.view.offsetY,Es=Ms-Ts*this.view.height}this.projectionMatrix.makeOrthographic(_s,Ss,Ms,Es,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(ca){var ga=Object3D.prototype.toJSON.call(this,ca);return ga.object.zoom=this.zoom,ga.object.left=this.left,ga.object.right=this.right,ga.object.top=this.top,ga.object.bottom=this.bottom,ga.object.near=this.near,ga.object.far=this.far,this.view!==null&&(ga.object.view=Object.assign({},this.view)),ga}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(ca){LightShadow.prototype.updateMatrices.call(this,ca)}});function DirectionalLight(ca,ga){Light.call(this,ca,ga),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.target=ca.target.clone(),this.shadow=ca.shadow.clone(),this}});function AmbientLight(ca,ga){Light.call(this,ca,ga),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(ca,ga,ya,_a){Light.call(this,ca,ga),this.type="RectAreaLight",this.width=ya!==void 0?ya:10,this.height=_a!==void 0?_a:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.width=ca.width,this.height=ca.height,this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.width=this.width,ga.object.height=this.height,ga}});function SphericalHarmonics3(){this.coefficients=[];for(var ca=0;ca<9;ca++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].copy(ca[ga]);return this},zero:function(){for(var ca=0;ca<9;ca++)this.coefficients[ca].set(0,0,0);return this},getAt:function(ca,ga){var ya=ca.x,_a=ca.y,_s=ca.z,Ss=this.coefficients;return ga.copy(Ss[0]).multiplyScalar(.282095),ga.addScaledVector(Ss[1],.488603*_a),ga.addScaledVector(Ss[2],.488603*_s),ga.addScaledVector(Ss[3],.488603*ya),ga.addScaledVector(Ss[4],1.092548*(ya*_a)),ga.addScaledVector(Ss[5],1.092548*(_a*_s)),ga.addScaledVector(Ss[6],.315392*(3*_s*_s-1)),ga.addScaledVector(Ss[7],1.092548*(ya*_s)),ga.addScaledVector(Ss[8],.546274*(ya*ya-_a*_a)),ga},getIrradianceAt:function(ca,ga){var ya=ca.x,_a=ca.y,_s=ca.z,Ss=this.coefficients;return ga.copy(Ss[0]).multiplyScalar(.886227),ga.addScaledVector(Ss[1],2*.511664*_a),ga.addScaledVector(Ss[2],2*.511664*_s),ga.addScaledVector(Ss[3],2*.511664*ya),ga.addScaledVector(Ss[4],2*.429043*ya*_a),ga.addScaledVector(Ss[5],2*.429043*_a*_s),ga.addScaledVector(Ss[6],.743125*_s*_s-.247708),ga.addScaledVector(Ss[7],2*.429043*ya*_s),ga.addScaledVector(Ss[8],.429043*(ya*ya-_a*_a)),ga},add:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].add(ca.coefficients[ga]);return this},addScaledSH:function(ca,ga){for(var ya=0;ya<9;ya++)this.coefficients[ya].addScaledVector(ca.coefficients[ya],ga);return this},scale:function(ca){for(var ga=0;ga<9;ga++)this.coefficients[ga].multiplyScalar(ca);return this},lerp:function(ca,ga){for(var ya=0;ya<9;ya++)this.coefficients[ya].lerp(ca.coefficients[ya],ga);return this},equals:function(ca){for(var ga=0;ga<9;ga++)if(!this.coefficients[ga].equals(ca.coefficients[ga]))return!1;return!0},copy:function(ca){return this.set(ca.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(ca,ga){ga===void 0&&(ga=0);for(var ya=this.coefficients,_a=0;_a<9;_a++)ya[_a].fromArray(ca,ga+_a*3);return this},toArray:function(ca,ga){ca===void 0&&(ca=[]),ga===void 0&&(ga=0);for(var ya=this.coefficients,_a=0;_a<9;_a++)ya[_a].toArray(ca,ga+_a*3);return ca}});Object.assign(SphericalHarmonics3,{getBasisAt:function(ca,ga){var ya=ca.x,_a=ca.y,_s=ca.z;ga[0]=.282095,ga[1]=.488603*_a,ga[2]=.488603*_s,ga[3]=.488603*ya,ga[4]=1.092548*ya*_a,ga[5]=1.092548*_a*_s,ga[6]=.315392*(3*_s*_s-1),ga[7]=1.092548*ya*_s,ga[8]=.546274*(ya*ya-_a*_a)}});function LightProbe(ca,ga){Light.call(this,void 0,ga),this.type="LightProbe",this.sh=ca!==void 0?ca:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(ca){return Light.prototype.copy.call(this,ca),this.sh.copy(ca.sh),this},fromJSON:function(ca){return this.intensity=ca.intensity,this.sh.fromArray(ca.sh),this},toJSON:function(ca){var ga=Light.prototype.toJSON.call(this,ca);return ga.object.sh=this.sh.toArray(),ga}});function MaterialLoader(ca){Loader.call(this,ca),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new FileLoader(_s.manager);Ss.setPath(_s.path),Ss.load(ca,function(Ms){try{ga(_s.parse(JSON.parse(Ms)))}catch(Es){_a?_a(Es):console.error(Es),_s.manager.itemError(ca)}},ya,_a)},parse:function(ca){var ga=this.textures;function ya(Cs){return ga[Cs]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Cs),ga[Cs]}var _a=new Materials[ca.type];if(ca.uuid!==void 0&&(_a.uuid=ca.uuid),ca.name!==void 0&&(_a.name=ca.name),ca.color!==void 0&&_a.color.setHex(ca.color),ca.roughness!==void 0&&(_a.roughness=ca.roughness),ca.metalness!==void 0&&(_a.metalness=ca.metalness),ca.sheen!==void 0&&(_a.sheen=new Color().setHex(ca.sheen)),ca.emissive!==void 0&&_a.emissive.setHex(ca.emissive),ca.specular!==void 0&&_a.specular.setHex(ca.specular),ca.shininess!==void 0&&(_a.shininess=ca.shininess),ca.clearcoat!==void 0&&(_a.clearcoat=ca.clearcoat),ca.clearcoatRoughness!==void 0&&(_a.clearcoatRoughness=ca.clearcoatRoughness),ca.fog!==void 0&&(_a.fog=ca.fog),ca.flatShading!==void 0&&(_a.flatShading=ca.flatShading),ca.blending!==void 0&&(_a.blending=ca.blending),ca.combine!==void 0&&(_a.combine=ca.combine),ca.side!==void 0&&(_a.side=ca.side),ca.opacity!==void 0&&(_a.opacity=ca.opacity),ca.transparent!==void 0&&(_a.transparent=ca.transparent),ca.alphaTest!==void 0&&(_a.alphaTest=ca.alphaTest),ca.depthTest!==void 0&&(_a.depthTest=ca.depthTest),ca.depthWrite!==void 0&&(_a.depthWrite=ca.depthWrite),ca.colorWrite!==void 0&&(_a.colorWrite=ca.colorWrite),ca.stencilWrite!==void 0&&(_a.stencilWrite=ca.stencilWrite),ca.stencilWriteMask!==void 0&&(_a.stencilWriteMask=ca.stencilWriteMask),ca.stencilFunc!==void 0&&(_a.stencilFunc=ca.stencilFunc),ca.stencilRef!==void 0&&(_a.stencilRef=ca.stencilRef),ca.stencilFuncMask!==void 0&&(_a.stencilFuncMask=ca.stencilFuncMask),ca.stencilFail!==void 0&&(_a.stencilFail=ca.stencilFail),ca.stencilZFail!==void 0&&(_a.stencilZFail=ca.stencilZFail),ca.stencilZPass!==void 0&&(_a.stencilZPass=ca.stencilZPass),ca.wireframe!==void 0&&(_a.wireframe=ca.wireframe),ca.wireframeLinewidth!==void 0&&(_a.wireframeLinewidth=ca.wireframeLinewidth),ca.wireframeLinecap!==void 0&&(_a.wireframeLinecap=ca.wireframeLinecap),ca.wireframeLinejoin!==void 0&&(_a.wireframeLinejoin=ca.wireframeLinejoin),ca.rotation!==void 0&&(_a.rotation=ca.rotation),ca.linewidth!==1&&(_a.linewidth=ca.linewidth),ca.dashSize!==void 0&&(_a.dashSize=ca.dashSize),ca.gapSize!==void 0&&(_a.gapSize=ca.gapSize),ca.scale!==void 0&&(_a.scale=ca.scale),ca.polygonOffset!==void 0&&(_a.polygonOffset=ca.polygonOffset),ca.polygonOffsetFactor!==void 0&&(_a.polygonOffsetFactor=ca.polygonOffsetFactor),ca.polygonOffsetUnits!==void 0&&(_a.polygonOffsetUnits=ca.polygonOffsetUnits),ca.skinning!==void 0&&(_a.skinning=ca.skinning),ca.morphTargets!==void 0&&(_a.morphTargets=ca.morphTargets),ca.morphNormals!==void 0&&(_a.morphNormals=ca.morphNormals),ca.dithering!==void 0&&(_a.dithering=ca.dithering),ca.vertexTangents!==void 0&&(_a.vertexTangents=ca.vertexTangents),ca.visible!==void 0&&(_a.visible=ca.visible),ca.toneMapped!==void 0&&(_a.toneMapped=ca.toneMapped),ca.userData!==void 0&&(_a.userData=ca.userData),ca.vertexColors!==void 0&&(typeof ca.vertexColors=="number"?_a.vertexColors=ca.vertexColors>0:_a.vertexColors=ca.vertexColors),ca.uniforms!==void 0)for(var _s in ca.uniforms){var Ss=ca.uniforms[_s];switch(_a.uniforms[_s]={},Ss.type){case"t":_a.uniforms[_s].value=ya(Ss.value);break;case"c":_a.uniforms[_s].value=new Color().setHex(Ss.value);break;case"v2":_a.uniforms[_s].value=new Vector2().fromArray(Ss.value);break;case"v3":_a.uniforms[_s].value=new Vector3().fromArray(Ss.value);break;case"v4":_a.uniforms[_s].value=new Vector4().fromArray(Ss.value);break;case"m3":_a.uniforms[_s].value=new Matrix3().fromArray(Ss.value);case"m4":_a.uniforms[_s].value=new Matrix4().fromArray(Ss.value);break;default:_a.uniforms[_s].value=Ss.value}}if(ca.defines!==void 0&&(_a.defines=ca.defines),ca.vertexShader!==void 0&&(_a.vertexShader=ca.vertexShader),ca.fragmentShader!==void 0&&(_a.fragmentShader=ca.fragmentShader),ca.extensions!==void 0)for(var Ms in ca.extensions)_a.extensions[Ms]=ca.extensions[Ms];if(ca.shading!==void 0&&(_a.flatShading=ca.shading===1),ca.size!==void 0&&(_a.size=ca.size),ca.sizeAttenuation!==void 0&&(_a.sizeAttenuation=ca.sizeAttenuation),ca.map!==void 0&&(_a.map=ya(ca.map)),ca.matcap!==void 0&&(_a.matcap=ya(ca.matcap)),ca.alphaMap!==void 0&&(_a.alphaMap=ya(ca.alphaMap)),ca.bumpMap!==void 0&&(_a.bumpMap=ya(ca.bumpMap)),ca.bumpScale!==void 0&&(_a.bumpScale=ca.bumpScale),ca.normalMap!==void 0&&(_a.normalMap=ya(ca.normalMap)),ca.normalMapType!==void 0&&(_a.normalMapType=ca.normalMapType),ca.normalScale!==void 0){var Es=ca.normalScale;Array.isArray(Es)===!1&&(Es=[Es,Es]),_a.normalScale=new Vector2().fromArray(Es)}return ca.displacementMap!==void 0&&(_a.displacementMap=ya(ca.displacementMap)),ca.displacementScale!==void 0&&(_a.displacementScale=ca.displacementScale),ca.displacementBias!==void 0&&(_a.displacementBias=ca.displacementBias),ca.roughnessMap!==void 0&&(_a.roughnessMap=ya(ca.roughnessMap)),ca.metalnessMap!==void 0&&(_a.metalnessMap=ya(ca.metalnessMap)),ca.emissiveMap!==void 0&&(_a.emissiveMap=ya(ca.emissiveMap)),ca.emissiveIntensity!==void 0&&(_a.emissiveIntensity=ca.emissiveIntensity),ca.specularMap!==void 0&&(_a.specularMap=ya(ca.specularMap)),ca.envMap!==void 0&&(_a.envMap=ya(ca.envMap)),ca.envMapIntensity!==void 0&&(_a.envMapIntensity=ca.envMapIntensity),ca.reflectivity!==void 0&&(_a.reflectivity=ca.reflectivity),ca.refractionRatio!==void 0&&(_a.refractionRatio=ca.refractionRatio),ca.lightMap!==void 0&&(_a.lightMap=ya(ca.lightMap)),ca.lightMapIntensity!==void 0&&(_a.lightMapIntensity=ca.lightMapIntensity),ca.aoMap!==void 0&&(_a.aoMap=ya(ca.aoMap)),ca.aoMapIntensity!==void 0&&(_a.aoMapIntensity=ca.aoMapIntensity),ca.gradientMap!==void 0&&(_a.gradientMap=ya(ca.gradientMap)),ca.clearcoatMap!==void 0&&(_a.clearcoatMap=ya(ca.clearcoatMap)),ca.clearcoatRoughnessMap!==void 0&&(_a.clearcoatRoughnessMap=ya(ca.clearcoatRoughnessMap)),ca.clearcoatNormalMap!==void 0&&(_a.clearcoatNormalMap=ya(ca.clearcoatNormalMap)),ca.clearcoatNormalScale!==void 0&&(_a.clearcoatNormalScale=new Vector2().fromArray(ca.clearcoatNormalScale)),_a},setTextures:function(ca){return this.textures=ca,this}});var LoaderUtils={decodeText:function(ca){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(ca);for(var ga="",ya=0,_a=ca.length;ya<_a;ya++)ga+=String.fromCharCode(ca[ya]);try{return decodeURIComponent(escape(ga))}catch{return ga}},extractUrlBase:function(ca){var ga=ca.lastIndexOf("/");return ga===-1?"./":ca.substr(0,ga+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(ca){return BufferGeometry.prototype.copy.call(this,ca),this.instanceCount=ca.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var ca=BufferGeometry.prototype.toJSON.call(this);return ca.instanceCount=this.instanceCount,ca.isInstancedBufferGeometry=!0,ca}});function InstancedBufferAttribute(ca,ga,ya,_a){typeof ya=="number"&&(_a=ya,ya=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,ca,ga,ya),this.meshPerAttribute=_a||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(ca){return BufferAttribute.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this},toJSON:function(){var ca=BufferAttribute.prototype.toJSON.call(this);return ca.meshPerAttribute=this.meshPerAttribute,ca.isInstancedBufferAttribute=!0,ca}});function BufferGeometryLoader(ca){Loader.call(this,ca)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new FileLoader(_s.manager);Ss.setPath(_s.path),Ss.load(ca,function(Ms){try{ga(_s.parse(JSON.parse(Ms)))}catch(Es){_a?_a(Es):console.error(Es),_s.manager.itemError(ca)}},ya,_a)},parse:function(ca){var ga=ca.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ya=ca.data.index;if(ya!==void 0){var _a=new TYPED_ARRAYS[ya.type](ya.array);ga.setIndex(new BufferAttribute(_a,1))}var _s=ca.data.attributes;for(var Ss in _s){var Ms=_s[Ss],_a=new TYPED_ARRAYS[Ms.type](Ms.array),Es=Ms.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,Cs=new Es(_a,Ms.itemSize,Ms.normalized);Ms.name!==void 0&&(Cs.name=Ms.name),ga.setAttribute(Ss,Cs)}var Ts=ca.data.morphAttributes;if(Ts)for(var Ss in Ts){for(var Bs=Ts[Ss],Is=[],Ps=0,Rs=Bs.length;Ps<Rs;Ps++){var Ms=Bs[Ps],_a=new TYPED_ARRAYS[Ms.type](Ms.array),Cs=new BufferAttribute(_a,Ms.itemSize,Ms.normalized);Ms.name!==void 0&&(Cs.name=Ms.name),Is.push(Cs)}ga.morphAttributes[Ss]=Is}var ks=ca.data.morphTargetsRelative;ks&&(ga.morphTargetsRelative=!0);var $s=ca.data.groups||ca.data.drawcalls||ca.data.offsets;if($s!==void 0)for(var Ps=0,Os=$s.length;Ps!==Os;++Ps){var Ls=$s[Ps];ga.addGroup(Ls.start,Ls.count,Ls.materialIndex)}var Ds=ca.data.boundingSphere;if(Ds!==void 0){var Fs=new Vector3;Ds.center!==void 0&&Fs.fromArray(Ds.center),ga.boundingSphere=new Sphere(Fs,Ds.radius)}return ca.name&&(ga.name=ca.name),ca.userData&&(ga.userData=ca.userData),ga}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(ca){Loader.call(this,ca)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=this.path===""?LoaderUtils.extractUrlBase(ca):this.path;this.resourcePath=this.resourcePath||Ss;var Ms=new FileLoader(_s.manager);Ms.setPath(this.path),Ms.load(ca,function(Es){var Cs=null;try{Cs=JSON.parse(Es)}catch(Bs){_a!==void 0&&_a(Bs),console.error("THREE:ObjectLoader: Can't parse "+ca+".",Bs.message);return}var Ts=Cs.metadata;if(Ts===void 0||Ts.type===void 0||Ts.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+ca);return}_s.parse(Cs,ga)},ya,_a)},parse:function(ca,ga){var ya=this.parseShape(ca.shapes),_a=this.parseGeometries(ca.geometries,ya),_s=this.parseImages(ca.images,function(){ga!==void 0&&ga(Es)}),Ss=this.parseTextures(ca.textures,_s),Ms=this.parseMaterials(ca.materials,Ss),Es=this.parseObject(ca.object,_a,Ms);return ca.animations&&(Es.animations=this.parseAnimations(ca.animations)),(ca.images===void 0||ca.images.length===0)&&ga!==void 0&&ga(Es),Es},parseShape:function(ca){var ga={};if(ca!==void 0)for(var ya=0,_a=ca.length;ya<_a;ya++){var _s=new Shape().fromJSON(ca[ya]);ga[_s.uuid]=_s}return ga},parseGeometries:function(ca,ga){var ya={};if(ca!==void 0)for(var _a=new BufferGeometryLoader,_s=0,Ss=ca.length;_s<Ss;_s++){var Ms,Es=ca[_s];switch(Es.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ms=new Geometries[Es.type](Es.width,Es.height,Es.widthSegments,Es.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ms=new Geometries[Es.type](Es.width,Es.height,Es.depth,Es.widthSegments,Es.heightSegments,Es.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.segments,Es.thetaStart,Es.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ms=new Geometries[Es.type](Es.radiusTop,Es.radiusBottom,Es.height,Es.radialSegments,Es.heightSegments,Es.openEnded,Es.thetaStart,Es.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.height,Es.radialSegments,Es.heightSegments,Es.openEnded,Es.thetaStart,Es.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.widthSegments,Es.heightSegments,Es.phiStart,Es.phiLength,Es.thetaStart,Es.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.detail);break;case"RingGeometry":case"RingBufferGeometry":Ms=new Geometries[Es.type](Es.innerRadius,Es.outerRadius,Es.thetaSegments,Es.phiSegments,Es.thetaStart,Es.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.tube,Es.radialSegments,Es.tubularSegments,Es.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ms=new Geometries[Es.type](Es.radius,Es.tube,Es.tubularSegments,Es.radialSegments,Es.p,Es.q);break;case"TubeGeometry":case"TubeBufferGeometry":Ms=new Geometries[Es.type](new Curves[Es.path.type]().fromJSON(Es.path),Es.tubularSegments,Es.radius,Es.radialSegments,Es.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Ms=new Geometries[Es.type](Es.points,Es.segments,Es.phiStart,Es.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Ms=new Geometries[Es.type](Es.vertices,Es.indices,Es.radius,Es.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var Is=[],Cs=0,Ts=Es.shapes.length;Cs<Ts;Cs++){var Bs=ga[Es.shapes[Cs]];Is.push(Bs)}Ms=new Geometries[Es.type](Is,Es.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var Is=[],Cs=0,Ts=Es.shapes.length;Cs<Ts;Cs++){var Bs=ga[Es.shapes[Cs]];Is.push(Bs)}var Ps=Es.options.extrudePath;Ps!==void 0&&(Es.options.extrudePath=new Curves[Ps.type]().fromJSON(Ps)),Ms=new Geometries[Es.type](Is,Es.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Ms=_a.parse(Es);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+Es.type+'"');continue}Ms.uuid=Es.uuid,Es.name!==void 0&&(Ms.name=Es.name),Ms.isBufferGeometry===!0&&Es.userData!==void 0&&(Ms.userData=Es.userData),ya[Es.uuid]=Ms}return ya},parseMaterials:function(ca,ga){var ya={},_a={};if(ca!==void 0){var _s=new MaterialLoader;_s.setTextures(ga);for(var Ss=0,Ms=ca.length;Ss<Ms;Ss++){var Es=ca[Ss];if(Es.type==="MultiMaterial"){for(var Cs=[],Ts=0;Ts<Es.materials.length;Ts++){var Bs=Es.materials[Ts];ya[Bs.uuid]===void 0&&(ya[Bs.uuid]=_s.parse(Bs)),Cs.push(ya[Bs.uuid])}_a[Es.uuid]=Cs}else ya[Es.uuid]===void 0&&(ya[Es.uuid]=_s.parse(Es)),_a[Es.uuid]=ya[Es.uuid]}}return _a},parseAnimations:function(ca){for(var ga=[],ya=0;ya<ca.length;ya++){var _a=ca[ya],_s=AnimationClip.parse(_a);_a.uuid!==void 0&&(_s.uuid=_a.uuid),ga.push(_s)}return ga},parseImages:function(ca,ga){var ya=this,_a={};function _s($s){return ya.manager.itemStart($s),Ms.load($s,function(){ya.manager.itemEnd($s)},void 0,function(){ya.manager.itemError($s),ya.manager.itemEnd($s)})}if(ca!==void 0&&ca.length>0){var Ss=new LoadingManager(ga),Ms=new ImageLoader(Ss);Ms.setCrossOrigin(this.crossOrigin);for(var Es=0,Cs=ca.length;Es<Cs;Es++){var Ts=ca[Es],Bs=Ts.url;if(Array.isArray(Bs)){_a[Ts.uuid]=[];for(var Is=0,Ps=Bs.length;Is<Ps;Is++){var Rs=Bs[Is],ks=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Rs)?Rs:ya.resourcePath+Rs;_a[Ts.uuid].push(_s(ks))}}else{var ks=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Ts.url)?Ts.url:ya.resourcePath+Ts.url;_a[Ts.uuid]=_s(ks)}}}return _a},parseTextures:function(ca,ga){function ya(Cs,Ts){return typeof Cs=="number"?Cs:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Cs),Ts[Cs])}var _a={};if(ca!==void 0)for(var _s=0,Ss=ca.length;_s<Ss;_s++){var Ms=ca[_s];Ms.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Ms.uuid),ga[Ms.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Ms.image);var Es;Array.isArray(ga[Ms.image])?Es=new CubeTexture(ga[Ms.image]):Es=new Texture(ga[Ms.image]),Es.needsUpdate=!0,Es.uuid=Ms.uuid,Ms.name!==void 0&&(Es.name=Ms.name),Ms.mapping!==void 0&&(Es.mapping=ya(Ms.mapping,TEXTURE_MAPPING)),Ms.offset!==void 0&&Es.offset.fromArray(Ms.offset),Ms.repeat!==void 0&&Es.repeat.fromArray(Ms.repeat),Ms.center!==void 0&&Es.center.fromArray(Ms.center),Ms.rotation!==void 0&&(Es.rotation=Ms.rotation),Ms.wrap!==void 0&&(Es.wrapS=ya(Ms.wrap[0],TEXTURE_WRAPPING),Es.wrapT=ya(Ms.wrap[1],TEXTURE_WRAPPING)),Ms.format!==void 0&&(Es.format=Ms.format),Ms.type!==void 0&&(Es.type=Ms.type),Ms.encoding!==void 0&&(Es.encoding=Ms.encoding),Ms.minFilter!==void 0&&(Es.minFilter=ya(Ms.minFilter,TEXTURE_FILTER)),Ms.magFilter!==void 0&&(Es.magFilter=ya(Ms.magFilter,TEXTURE_FILTER)),Ms.anisotropy!==void 0&&(Es.anisotropy=Ms.anisotropy),Ms.flipY!==void 0&&(Es.flipY=Ms.flipY),Ms.premultiplyAlpha!==void 0&&(Es.premultiplyAlpha=Ms.premultiplyAlpha),Ms.unpackAlignment!==void 0&&(Es.unpackAlignment=Ms.unpackAlignment),_a[Ms.uuid]=Es}return _a},parseObject:function(ca,ga,ya){var _a;function _s(Os){return ga[Os]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Os),ga[Os]}function Ss(Os){if(Os!==void 0){if(Array.isArray(Os)){for(var Ls=[],Ds=0,Fs=Os.length;Ds<Fs;Ds++){var Ns=Os[Ds];ya[Ns]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ns),Ls.push(ya[Ns])}return Ls}return ya[Os]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Os),ya[Os]}}switch(ca.type){case"Scene":_a=new Scene,ca.background!==void 0&&Number.isInteger(ca.background)&&(_a.background=new Color(ca.background)),ca.fog!==void 0&&(ca.fog.type==="Fog"?_a.fog=new Fog(ca.fog.color,ca.fog.near,ca.fog.far):ca.fog.type==="FogExp2"&&(_a.fog=new FogExp2(ca.fog.color,ca.fog.density)));break;case"PerspectiveCamera":_a=new PerspectiveCamera(ca.fov,ca.aspect,ca.near,ca.far),ca.focus!==void 0&&(_a.focus=ca.focus),ca.zoom!==void 0&&(_a.zoom=ca.zoom),ca.filmGauge!==void 0&&(_a.filmGauge=ca.filmGauge),ca.filmOffset!==void 0&&(_a.filmOffset=ca.filmOffset),ca.view!==void 0&&(_a.view=Object.assign({},ca.view));break;case"OrthographicCamera":_a=new OrthographicCamera(ca.left,ca.right,ca.top,ca.bottom,ca.near,ca.far),ca.zoom!==void 0&&(_a.zoom=ca.zoom),ca.view!==void 0&&(_a.view=Object.assign({},ca.view));break;case"AmbientLight":_a=new AmbientLight(ca.color,ca.intensity);break;case"DirectionalLight":_a=new DirectionalLight(ca.color,ca.intensity);break;case"PointLight":_a=new PointLight(ca.color,ca.intensity,ca.distance,ca.decay);break;case"RectAreaLight":_a=new RectAreaLight(ca.color,ca.intensity,ca.width,ca.height);break;case"SpotLight":_a=new SpotLight(ca.color,ca.intensity,ca.distance,ca.angle,ca.penumbra,ca.decay);break;case"HemisphereLight":_a=new HemisphereLight(ca.color,ca.groundColor,ca.intensity);break;case"LightProbe":_a=new LightProbe().fromJSON(ca);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var Ms=_s(ca.geometry),Es=Ss(ca.material);_a=new Mesh(Ms,Es);break;case"InstancedMesh":var Ms=_s(ca.geometry),Es=Ss(ca.material),Cs=ca.count,Ts=ca.instanceMatrix;_a=new InstancedMesh(Ms,Es,Cs),_a.instanceMatrix=new BufferAttribute(new Float32Array(Ts.array),16);break;case"LOD":_a=new LOD;break;case"Line":_a=new Line(_s(ca.geometry),Ss(ca.material),ca.mode);break;case"LineLoop":_a=new LineLoop(_s(ca.geometry),Ss(ca.material));break;case"LineSegments":_a=new LineSegments(_s(ca.geometry),Ss(ca.material));break;case"PointCloud":case"Points":_a=new Points(_s(ca.geometry),Ss(ca.material));break;case"Sprite":_a=new Sprite(Ss(ca.material));break;case"Group":_a=new Group;break;default:_a=new Object3D}if(_a.uuid=ca.uuid,ca.name!==void 0&&(_a.name=ca.name),ca.matrix!==void 0?(_a.matrix.fromArray(ca.matrix),ca.matrixAutoUpdate!==void 0&&(_a.matrixAutoUpdate=ca.matrixAutoUpdate),_a.matrixAutoUpdate&&_a.matrix.decompose(_a.position,_a.quaternion,_a.scale)):(ca.position!==void 0&&_a.position.fromArray(ca.position),ca.rotation!==void 0&&_a.rotation.fromArray(ca.rotation),ca.quaternion!==void 0&&_a.quaternion.fromArray(ca.quaternion),ca.scale!==void 0&&_a.scale.fromArray(ca.scale)),ca.castShadow!==void 0&&(_a.castShadow=ca.castShadow),ca.receiveShadow!==void 0&&(_a.receiveShadow=ca.receiveShadow),ca.shadow&&(ca.shadow.bias!==void 0&&(_a.shadow.bias=ca.shadow.bias),ca.shadow.radius!==void 0&&(_a.shadow.radius=ca.shadow.radius),ca.shadow.mapSize!==void 0&&_a.shadow.mapSize.fromArray(ca.shadow.mapSize),ca.shadow.camera!==void 0&&(_a.shadow.camera=this.parseObject(ca.shadow.camera))),ca.visible!==void 0&&(_a.visible=ca.visible),ca.frustumCulled!==void 0&&(_a.frustumCulled=ca.frustumCulled),ca.renderOrder!==void 0&&(_a.renderOrder=ca.renderOrder),ca.userData!==void 0&&(_a.userData=ca.userData),ca.layers!==void 0&&(_a.layers.mask=ca.layers),ca.children!==void 0)for(var Bs=ca.children,Is=0;Is<Bs.length;Is++)_a.add(this.parseObject(Bs[Is],ga,ya));if(ca.type==="LOD"){ca.autoUpdate!==void 0&&(_a.autoUpdate=ca.autoUpdate);for(var Ps=ca.levels,Rs=0;Rs<Ps.length;Rs++){var ks=Ps[Rs],$s=_a.getObjectByProperty("uuid",ks.object);$s!==void 0&&_a.addLevel($s,ks.distance)}}return _a}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(ca){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,ca),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(ga){return this.options=ga,this},load:function(ca,ga,ya,_a){ca===void 0&&(ca=""),this.path!==void 0&&(ca=this.path+ca),ca=this.manager.resolveURL(ca);var _s=this,Ss=Cache.get(ca);if(Ss!==void 0)return _s.manager.itemStart(ca),setTimeout(function(){ga&&ga(Ss),_s.manager.itemEnd(ca)},0),Ss;fetch(ca).then(function(Ms){return Ms.blob()}).then(function(Ms){return _s.options===void 0?createImageBitmap(Ms):createImageBitmap(Ms,_s.options)}).then(function(Ms){Cache.add(ca,Ms),ga&&ga(Ms),_s.manager.itemEnd(ca)}).catch(function(Ms){_a&&_a(Ms),_s.manager.itemError(ca),_s.manager.itemEnd(ca)}),_s.manager.itemStart(ca)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(ca,ga){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(ca,ga),this},lineTo:function(ca,ga){return this.currentPath.lineTo(ca,ga),this},quadraticCurveTo:function(ca,ga,ya,_a){return this.currentPath.quadraticCurveTo(ca,ga,ya,_a),this},bezierCurveTo:function(ca,ga,ya,_a,_s,Ss){return this.currentPath.bezierCurveTo(ca,ga,ya,_a,_s,Ss),this},splineThru:function(ca){return this.currentPath.splineThru(ca),this},toShapes:function(ca,ga){function ya(qs){for(var eu=[],Js=0,Xs=qs.length;Js<Xs;Js++){var ru=qs[Js],su=new Shape;su.curves=ru.curves,eu.push(su)}return eu}function _a(qs,eu){for(var Js=eu.length,Xs=!1,ru=Js-1,su=0;su<Js;ru=su++){var lu=eu[ru],cu=eu[su],xu=cu.x-lu.x,bu=cu.y-lu.y;if(Math.abs(bu)>Number.EPSILON){if(bu<0&&(lu=eu[su],xu=-xu,cu=eu[ru],bu=-bu),qs.y<lu.y||qs.y>cu.y)continue;if(qs.y===lu.y){if(qs.x===lu.x)return!0}else{var yu=bu*(qs.x-lu.x)-xu*(qs.y-lu.y);if(yu===0)return!0;if(yu<0)continue;Xs=!Xs}}else{if(qs.y!==lu.y)continue;if(cu.x<=qs.x&&qs.x<=lu.x||lu.x<=qs.x&&qs.x<=cu.x)return!0}}return Xs}var _s=ShapeUtils.isClockWise,Ss=this.subPaths;if(Ss.length===0)return[];if(ga===!0)return ya(Ss);var Ms,Es,Cs,Ts=[];if(Ss.length===1)return Es=Ss[0],Cs=new Shape,Cs.curves=Es.curves,Ts.push(Cs),Ts;var Bs=!_s(Ss[0].getPoints());Bs=ca?!Bs:Bs;var Is=[],Ps=[],Rs=[],ks=0,$s;Ps[ks]=void 0,Rs[ks]=[];for(var Os=0,Ls=Ss.length;Os<Ls;Os++)Es=Ss[Os],$s=Es.getPoints(),Ms=_s($s),Ms=ca?!Ms:Ms,Ms?(!Bs&&Ps[ks]&&ks++,Ps[ks]={s:new Shape,p:$s},Ps[ks].s.curves=Es.curves,Bs&&ks++,Rs[ks]=[]):Rs[ks].push({h:Es,p:$s[0]});if(!Ps[0])return ya(Ss);if(Ps.length>1){for(var Ds=!1,Fs=[],Ns=0,Vs=Ps.length;Ns<Vs;Ns++)Is[Ns]=[];for(var Ns=0,Vs=Ps.length;Ns<Vs;Ns++)for(var Gs=Rs[Ns],Us=0;Us<Gs.length;Us++){for(var zs=Gs[Us],Hs=!0,Qs=0;Qs<Ps.length;Qs++)_a(zs.p,Ps[Qs].p)&&(Ns!==Qs&&Fs.push({froms:Ns,tos:Qs,hole:Us}),Hs?(Hs=!1,Is[Qs].push(zs)):Ds=!0);Hs&&Is[Ns].push(zs)}Fs.length>0&&(Ds||(Rs=Is))}for(var js,Os=0,Zs=Ps.length;Os<Zs;Os++){Cs=Ps[Os].s,Ts.push(Cs),js=Rs[Os];for(var Ks=0,Ys=js.length;Ks<Ys;Ks++)Cs.holes.push(js[Ks].h)}return Ts}});function Font(ca){this.type="Font",this.data=ca}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(ca,ga){ga===void 0&&(ga=100);for(var ya=[],_a=createPaths(ca,ga,this.data),_s=0,Ss=_a.length;_s<Ss;_s++)Array.prototype.push.apply(ya,_a[_s].toShapes());return ya}});function createPaths(ca,ga,ya){for(var _a=Array.from?Array.from(ca):String(ca).split(""),_s=ga/ya.resolution,Ss=(ya.boundingBox.yMax-ya.boundingBox.yMin+ya.underlineThickness)*_s,Ms=[],Es=0,Cs=0,Ts=0;Ts<_a.length;Ts++){var Bs=_a[Ts];if(Bs===`
`)Es=0,Cs-=Ss;else{var Is=createPath(Bs,_s,Es,Cs,ya);Es+=Is.offsetX,Ms.push(Is.path)}}return Ms}function createPath(ca,ga,ya,_a,_s){var Ss=_s.glyphs[ca]||_s.glyphs["?"];if(!Ss){console.error('THREE.Font: character "'+ca+'" does not exists in font family '+_s.familyName+".");return}var Ms=new ShapePath,Es,Cs,Ts,Bs,Is,Ps,Rs,ks;if(Ss.o)for(var $s=Ss._cachedOutline||(Ss._cachedOutline=Ss.o.split(" ")),Os=0,Ls=$s.length;Os<Ls;){var Ds=$s[Os++];switch(Ds){case"m":Es=$s[Os++]*ga+ya,Cs=$s[Os++]*ga+_a,Ms.moveTo(Es,Cs);break;case"l":Es=$s[Os++]*ga+ya,Cs=$s[Os++]*ga+_a,Ms.lineTo(Es,Cs);break;case"q":Ts=$s[Os++]*ga+ya,Bs=$s[Os++]*ga+_a,Is=$s[Os++]*ga+ya,Ps=$s[Os++]*ga+_a,Ms.quadraticCurveTo(Is,Ps,Ts,Bs);break;case"b":Ts=$s[Os++]*ga+ya,Bs=$s[Os++]*ga+_a,Is=$s[Os++]*ga+ya,Ps=$s[Os++]*ga+_a,Rs=$s[Os++]*ga+ya,ks=$s[Os++]*ga+_a,Ms.bezierCurveTo(Is,Ps,Rs,ks,Ts,Bs);break}}return{offsetX:Ss.ha*ga,path:Ms}}function FontLoader(ca){Loader.call(this,ca)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new FileLoader(this.manager);Ss.setPath(this.path),Ss.load(ca,function(Ms){var Es;try{Es=JSON.parse(Ms)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Es=JSON.parse(Ms.substring(65,Ms.length-2))}var Cs=_s.parse(Es);ga&&ga(Cs)},ya,_a)},parse:function(ca){return new Font(ca)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(ca){_context=ca}};function AudioLoader(ca){Loader.call(this,ca)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(ca,ga,ya,_a){var _s=this,Ss=new FileLoader(_s.manager);Ss.setResponseType("arraybuffer"),Ss.setPath(_s.path),Ss.load(ca,function(Ms){try{var Es=Ms.slice(0),Cs=AudioContext.getContext();Cs.decodeAudioData(Es,function(Ts){ga(Ts)})}catch(Ts){_a?_a(Ts):console.error(Ts),_s.manager.itemError(ca)}},ya,_a)}});function HemisphereLightProbe(ca,ga,ya){LightProbe.call(this,void 0,ya);var _a=new Color().set(ca),_s=new Color().set(ga),Ss=new Vector3(_a.r,_a.g,_a.b),Ms=new Vector3(_s.r,_s.g,_s.b),Es=Math.sqrt(Math.PI),Cs=Es*Math.sqrt(.75);this.sh.coefficients[0].copy(Ss).add(Ms).multiplyScalar(Es),this.sh.coefficients[1].copy(Ss).sub(Ms).multiplyScalar(Cs)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});function AmbientLightProbe(ca,ga){LightProbe.call(this,void 0,ga);var ya=new Color().set(ca);this.sh.coefficients[0].set(ya.r,ya.g,ya.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(ca){return LightProbe.prototype.copy.call(this,ca),this},toJSON:function(ca){var ga=LightProbe.prototype.toJSON.call(this,ca);return ga}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(ca){var ga=this._cache,ya=ga.focus!==ca.focus||ga.fov!==ca.fov||ga.aspect!==ca.aspect*this.aspect||ga.near!==ca.near||ga.far!==ca.far||ga.zoom!==ca.zoom||ga.eyeSep!==this.eyeSep;if(ya){ga.focus=ca.focus,ga.fov=ca.fov,ga.aspect=ca.aspect*this.aspect,ga.near=ca.near,ga.far=ca.far,ga.zoom=ca.zoom,ga.eyeSep=this.eyeSep;var _a=ca.projectionMatrix.clone(),_s=ga.eyeSep/2,Ss=_s*ga.near/ga.focus,Ms=ga.near*Math.tan(MathUtils.DEG2RAD*ga.fov*.5)/ga.zoom,Es,Cs;_eyeLeft.elements[12]=-_s,_eyeRight.elements[12]=_s,Es=-Ms*ga.aspect+Ss,Cs=Ms*ga.aspect+Ss,_a.elements[0]=2*ga.near/(Cs-Es),_a.elements[8]=(Cs+Es)/(Cs-Es),this.cameraL.projectionMatrix.copy(_a),Es=-Ms*ga.aspect-Ss,Cs=Ms*ga.aspect-Ss,_a.elements[0]=2*ga.near/(Cs-Es),_a.elements[8]=(Cs+Es)/(Cs-Es),this.cameraR.projectionMatrix.copy(_a)}this.cameraL.matrixWorld.copy(ca.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(ca.matrixWorld).multiply(_eyeRight)}});function Clock(ca){this.autoStart=ca!==void 0?ca:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var ca=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var ga=(typeof performance=="undefined"?Date:performance).now();ca=(ga-this.oldTime)/1e3,this.oldTime=ga,this.elapsedTime+=ca}return ca}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(ca){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=ca,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this},updateMatrixWorld:function(ca){Object3D.prototype.updateMatrixWorld.call(this,ca);var ga=this.context.listener,ya=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),ga.positionX){var _a=this.context.currentTime+this.timeDelta;ga.positionX.linearRampToValueAtTime(_position$2.x,_a),ga.positionY.linearRampToValueAtTime(_position$2.y,_a),ga.positionZ.linearRampToValueAtTime(_position$2.z,_a),ga.forwardX.linearRampToValueAtTime(_orientation.x,_a),ga.forwardY.linearRampToValueAtTime(_orientation.y,_a),ga.forwardZ.linearRampToValueAtTime(_orientation.z,_a),ga.upX.linearRampToValueAtTime(ya.x,_a),ga.upY.linearRampToValueAtTime(ya.y,_a),ga.upZ.linearRampToValueAtTime(ya.z,_a)}else ga.setPosition(_position$2.x,_position$2.y,_position$2.z),ga.setOrientation(_orientation.x,_orientation.y,_orientation.z,ya.x,ya.y,ya.z)}});function Audio(ca){Object3D.call(this),this.type="Audio",this.listener=ca,this.context=ca.context,this.gain=this.context.createGain(),this.gain.connect(ca.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=ca,this.connect(),this},setMediaElementSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(ca),this.connect(),this},setMediaStreamSource:function(ca){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(ca),this.connect(),this},setBuffer:function(ca){return this.buffer=ca,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(ca){if(ca===void 0&&(ca=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+ca;var ga=this.context.createBufferSource();return ga.buffer=this.buffer,ga.loop=this.loop,ga.loopStart=this.loopStart,ga.loopEnd=this.loopEnd,ga.onended=this.onEnded.bind(this),ga.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=ga,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].connect(this.filters[ca]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var ca=1,ga=this.filters.length;ca<ga;ca++)this.filters[ca-1].disconnect(this.filters[ca]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(ca){return ca||(ca=[]),this.isPlaying===!0?(this.disconnect(),this.filters=ca,this.connect()):this.filters=ca,this},setDetune:function(ca){if(this.detune=ca,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(ca){return this.setFilters(ca?[ca]:[])},setPlaybackRate:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=ca,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(ca){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=ca,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(ca){return this.loopStart=ca,this},setLoopEnd:function(ca){return this.loopEnd=ca,this},getVolume:function(){return this.gain.gain.value},setVolume:function(ca){return this.gain.gain.setTargetAtTime(ca,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(ca){Audio.call(this,ca),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(ca){return this.panner.refDistance=ca,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(ca){return this.panner.rolloffFactor=ca,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(ca){return this.panner.distanceModel=ca,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(ca){return this.panner.maxDistance=ca,this},setDirectionalCone:function(ca,ga,ya){return this.panner.coneInnerAngle=ca,this.panner.coneOuterAngle=ga,this.panner.coneOuterGain=ya,this},updateMatrixWorld:function(ca){if(Object3D.prototype.updateMatrixWorld.call(this,ca),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var ga=this.panner;if(ga.positionX){var ya=this.context.currentTime+this.listener.timeDelta;ga.positionX.linearRampToValueAtTime(_position$3.x,ya),ga.positionY.linearRampToValueAtTime(_position$3.y,ya),ga.positionZ.linearRampToValueAtTime(_position$3.z,ya),ga.orientationX.linearRampToValueAtTime(_orientation$1.x,ya),ga.orientationY.linearRampToValueAtTime(_orientation$1.y,ya),ga.orientationZ.linearRampToValueAtTime(_orientation$1.z,ya)}else ga.setPosition(_position$3.x,_position$3.y,_position$3.z),ga.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(ca,ga){this.analyser=ca.context.createAnalyser(),this.analyser.fftSize=ga!==void 0?ga:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),ca.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var ca=0,ga=this.getFrequencyData(),ya=0;ya<ga.length;ya++)ca+=ga[ya];return ca/ga.length}});function PropertyMixer(ca,ga,ya){this.binding=ca,this.valueSize=ya;var _a,_s,Ss;switch(ga){case"quaternion":_a=this._slerp,_s=this._slerpAdditive,Ss=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(ya*6),this._workIndex=5;break;case"string":case"bool":_a=this._select,_s=this._select,Ss=this._setAdditiveIdentityOther,this.buffer=new Array(ya*5);break;default:_a=this._lerp,_s=this._lerpAdditive,Ss=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(ya*5)}this._mixBufferRegion=_a,this._mixBufferRegionAdditive=_s,this._setIdentity=Ss,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(ca,ga){var ya=this.buffer,_a=this.valueSize,_s=ca*_a+_a,Ss=this.cumulativeWeight;if(Ss===0){for(var Ms=0;Ms!==_a;++Ms)ya[_s+Ms]=ya[Ms];Ss=ga}else{Ss+=ga;var Es=ga/Ss;this._mixBufferRegion(ya,_s,0,Es,_a)}this.cumulativeWeight=Ss},accumulateAdditive:function(ca){var ga=this.buffer,ya=this.valueSize,_a=ya*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(ga,_a,0,ca,ya),this.cumulativeWeightAdditive+=ca},apply:function(ca){var ga=this.valueSize,ya=this.buffer,_a=ca*ga+ga,_s=this.cumulativeWeight,Ss=this.cumulativeWeightAdditive,Ms=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,_s<1){var Es=ga*this._origIndex;this._mixBufferRegion(ya,_a,Es,1-_s,ga)}Ss>0&&this._mixBufferRegionAdditive(ya,_a,this._addIndex*ga,1,ga);for(var Cs=ga,Ts=ga+ga;Cs!==Ts;++Cs)if(ya[Cs]!==ya[Cs+ga]){Ms.setValue(ya,_a);break}},saveOriginalState:function(){var ca=this.binding,ga=this.buffer,ya=this.valueSize,_a=ya*this._origIndex;ca.getValue(ga,_a);for(var _s=ya,Ss=_a;_s!==Ss;++_s)ga[_s]=ga[_a+_s%ya];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var ca=this.valueSize*3;this.binding.setValue(this.buffer,ca)},_setAdditiveIdentityNumeric:function(){for(var ca=this._addIndex*this.valueSize,ga=ca+this.valueSize,ya=ca;ya<ga;ya++)this.buffer[ya]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var ca=this._origIndex*this.valueSize,ga=this._addIndex*this.valueSize,ya=0;ya<this.valueSize;ya++)this.buffer[ga+ya]=this.buffer[ca+ya]},_select:function(ca,ga,ya,_a,_s){if(_a>=.5)for(var Ss=0;Ss!==_s;++Ss)ca[ga+Ss]=ca[ya+Ss]},_slerp:function(ca,ga,ya,_a){Quaternion.slerpFlat(ca,ga,ca,ga,ca,ya,_a)},_slerpAdditive:function(ca,ga,ya,_a,_s){var Ss=this._workIndex*_s;Quaternion.multiplyQuaternionsFlat(ca,Ss,ca,ga,ca,ya),Quaternion.slerpFlat(ca,ga,ca,ga,ca,Ss,_a)},_lerp:function(ca,ga,ya,_a,_s){for(var Ss=1-_a,Ms=0;Ms!==_s;++Ms){var Es=ga+Ms;ca[Es]=ca[Es]*Ss+ca[ya+Ms]*_a}},_lerpAdditive:function(ca,ga,ya,_a,_s){for(var Ss=0;Ss!==_s;++Ss){var Ms=ga+Ss;ca[Ms]=ca[Ms]+ca[ya+Ss]*_a}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(ca,ga,ya){var _a=ya||PropertyBinding.parseTrackName(ga);this._targetGroup=ca,this._bindings=ca.subscribe_(ga,_a)}Object.assign(Composite.prototype,{getValue:function(ca,ga){this.bind();var ya=this._targetGroup.nCachedObjects_,_a=this._bindings[ya];_a!==void 0&&_a.getValue(ca,ga)},setValue:function(ca,ga){for(var ya=this._bindings,_a=this._targetGroup.nCachedObjects_,_s=ya.length;_a!==_s;++_a)ya[_a].setValue(ca,ga)},bind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,ya=ca.length;ga!==ya;++ga)ca[ga].bind()},unbind:function(){for(var ca=this._bindings,ga=this._targetGroup.nCachedObjects_,ya=ca.length;ga!==ya;++ga)ca[ga].unbind()}});function PropertyBinding(ca,ga,ya){this.path=ga,this.parsedPath=ya||PropertyBinding.parseTrackName(ga),this.node=PropertyBinding.findNode(ca,this.parsedPath.nodeName)||ca,this.rootNode=ca}Object.assign(PropertyBinding,{Composite,create:function(ca,ga,ya){return ca&&ca.isAnimationObjectGroup?new PropertyBinding.Composite(ca,ga,ya):new PropertyBinding(ca,ga,ya)},sanitizeNodeName:function(ca){return ca.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(ca){var ga=_trackRe.exec(ca);if(!ga)throw new Error("PropertyBinding: Cannot parse trackName: "+ca);var ya={nodeName:ga[2],objectName:ga[3],objectIndex:ga[4],propertyName:ga[5],propertyIndex:ga[6]},_a=ya.nodeName&&ya.nodeName.lastIndexOf(".");if(_a!==void 0&&_a!==-1){var _s=ya.nodeName.substring(_a+1);_supportedObjectNames.indexOf(_s)!==-1&&(ya.nodeName=ya.nodeName.substring(0,_a),ya.objectName=_s)}if(ya.propertyName===null||ya.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+ca);return ya},findNode:function(ca,ga){if(!ga||ga===""||ga==="."||ga===-1||ga===ca.name||ga===ca.uuid)return ca;if(ca.skeleton){var ya=ca.skeleton.getBoneByName(ga);if(ya!==void 0)return ya}if(ca.children){var _a=function(Ss){for(var Ms=0;Ms<Ss.length;Ms++){var Es=Ss[Ms];if(Es.name===ga||Es.uuid===ga)return Es;var Cs=_a(Es.children);if(Cs)return Cs}return null},_s=_a(ca.children);if(_s)return _s}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(ga,ya){ga[ya]=this.node[this.propertyName]},function(ga,ya){for(var _a=this.resolvedProperty,_s=0,Ss=_a.length;_s!==Ss;++_s)ga[ya++]=_a[_s]},function(ga,ya){ga[ya]=this.resolvedProperty[this.propertyIndex]},function(ga,ya){this.resolvedProperty.toArray(ga,ya)}],SetterByBindingTypeAndVersioning:[[function(ga,ya){this.targetObject[this.propertyName]=ga[ya]},function(ga,ya){this.targetObject[this.propertyName]=ga[ya],this.targetObject.needsUpdate=!0},function(ga,ya){this.targetObject[this.propertyName]=ga[ya],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,ya){for(var _a=this.resolvedProperty,_s=0,Ss=_a.length;_s!==Ss;++_s)_a[_s]=ga[ya++]},function(ga,ya){for(var _a=this.resolvedProperty,_s=0,Ss=_a.length;_s!==Ss;++_s)_a[_s]=ga[ya++];this.targetObject.needsUpdate=!0},function(ga,ya){for(var _a=this.resolvedProperty,_s=0,Ss=_a.length;_s!==Ss;++_s)_a[_s]=ga[ya++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,ya){this.resolvedProperty[this.propertyIndex]=ga[ya]},function(ga,ya){this.resolvedProperty[this.propertyIndex]=ga[ya],this.targetObject.needsUpdate=!0},function(ga,ya){this.resolvedProperty[this.propertyIndex]=ga[ya],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(ga,ya){this.resolvedProperty.fromArray(ga,ya)},function(ga,ya){this.resolvedProperty.fromArray(ga,ya),this.targetObject.needsUpdate=!0},function(ga,ya){this.resolvedProperty.fromArray(ga,ya),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(ga,ya){this.bind(),this.getValue(ga,ya)},setValue:function(ga,ya){this.bind(),this.setValue(ga,ya)},bind:function(){var ca=this.node,ga=this.parsedPath,ya=ga.objectName,_a=ga.propertyName,_s=ga.propertyIndex;if(ca||(ca=PropertyBinding.findNode(this.rootNode,ga.nodeName)||this.rootNode,this.node=ca),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!ca){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(ya){var Ss=ga.objectIndex;switch(ya){case"materials":if(!ca.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!ca.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}ca=ca.material.materials;break;case"bones":if(!ca.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}ca=ca.skeleton.bones;for(var Ms=0;Ms<ca.length;Ms++)if(ca[Ms].name===Ss){Ss=Ms;break}break;default:if(ca[ya]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}ca=ca[ya]}if(Ss!==void 0){if(ca[Ss]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,ca);return}ca=ca[Ss]}}var Es=ca[_a];if(Es===void 0){var Cs=ga.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Cs+"."+_a+" but it wasn't found.",ca);return}var Ts=this.Versioning.None;this.targetObject=ca,ca.needsUpdate!==void 0?Ts=this.Versioning.NeedsUpdate:ca.matrixWorldNeedsUpdate!==void 0&&(Ts=this.Versioning.MatrixWorldNeedsUpdate);var Bs=this.BindingType.Direct;if(_s!==void 0){if(_a==="morphTargetInfluences"){if(!ca.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(ca.geometry.isBufferGeometry){if(!ca.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}ca.morphTargetDictionary[_s]!==void 0&&(_s=ca.morphTargetDictionary[_s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}Bs=this.BindingType.ArrayElement,this.resolvedProperty=Es,this.propertyIndex=_s}else Es.fromArray!==void 0&&Es.toArray!==void 0?(Bs=this.BindingType.HasFromToArray,this.resolvedProperty=Es):Array.isArray(Es)?(Bs=this.BindingType.EntireArray,this.resolvedProperty=Es):this.propertyName=_a;this.getValue=this.GetterByBindingType[Bs],this.setValue=this.SetterByBindingTypeAndVersioning[Bs][Ts]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var ca={};this._indicesByUUID=ca;for(var ga=0,ya=arguments.length;ga!==ya;++ga)ca[arguments[ga].uuid]=ga;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var _a=this;this.stats={objects:{get total(){return _a._objects.length},get inUse(){return this.total-_a.nCachedObjects_}},get bindingsPerObject(){return _a._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var ca=this._objects,ga=ca.length,ya=this.nCachedObjects_,_a=this._indicesByUUID,_s=this._paths,Ss=this._parsedPaths,Ms=this._bindings,Es=Ms.length,Cs=void 0,Ts=0,Bs=arguments.length;Ts!==Bs;++Ts){var Is=arguments[Ts],Ps=Is.uuid,Rs=_a[Ps];if(Rs===void 0){Rs=ga++,_a[Ps]=Rs,ca.push(Is);for(var ks=0,$s=Es;ks!==$s;++ks)Ms[ks].push(new PropertyBinding(Is,_s[ks],Ss[ks]))}else if(Rs<ya){Cs=ca[Rs];var Os=--ya,Ls=ca[Os];_a[Ls.uuid]=Rs,ca[Rs]=Ls,_a[Ps]=Os,ca[Os]=Is;for(var ks=0,$s=Es;ks!==$s;++ks){var Ds=Ms[ks],Fs=Ds[Os],Ns=Ds[Rs];Ds[Rs]=Fs,Ns===void 0&&(Ns=new PropertyBinding(Is,_s[ks],Ss[ks])),Ds[Os]=Ns}}else ca[Rs]!==Cs&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=ya},remove:function(){for(var ca=this._objects,ga=this.nCachedObjects_,ya=this._indicesByUUID,_a=this._bindings,_s=_a.length,Ss=0,Ms=arguments.length;Ss!==Ms;++Ss){var Es=arguments[Ss],Cs=Es.uuid,Ts=ya[Cs];if(Ts!==void 0&&Ts>=ga){var Bs=ga++,Is=ca[Bs];ya[Is.uuid]=Ts,ca[Ts]=Is,ya[Cs]=Bs,ca[Bs]=Es;for(var Ps=0,Rs=_s;Ps!==Rs;++Ps){var ks=_a[Ps],$s=ks[Bs],Os=ks[Ts];ks[Ts]=$s,ks[Bs]=Os}}}this.nCachedObjects_=ga},uncache:function(){for(var ca=this._objects,ga=ca.length,ya=this.nCachedObjects_,_a=this._indicesByUUID,_s=this._bindings,Ss=_s.length,Ms=0,Es=arguments.length;Ms!==Es;++Ms){var Cs=arguments[Ms],Ts=Cs.uuid,Bs=_a[Ts];if(Bs!==void 0)if(delete _a[Ts],Bs<ya){var Is=--ya,Ps=ca[Is],Rs=--ga,ks=ca[Rs];_a[Ps.uuid]=Bs,ca[Bs]=Ps,_a[ks.uuid]=Is,ca[Is]=ks,ca.pop();for(var $s=0,Os=Ss;$s!==Os;++$s){var Ls=_s[$s],Ds=Ls[Is],Fs=Ls[Rs];Ls[Bs]=Ds,Ls[Is]=Fs,Ls.pop()}}else{var Rs=--ga,ks=ca[Rs];_a[ks.uuid]=Bs,ca[Bs]=ks,ca.pop();for(var $s=0,Os=Ss;$s!==Os;++$s){var Ls=_s[$s];Ls[Bs]=Ls[Rs],Ls.pop()}}}this.nCachedObjects_=ya},subscribe_:function(ca,ga){var ya=this._bindingsIndicesByPath,_a=ya[ca],_s=this._bindings;if(_a!==void 0)return _s[_a];var Ss=this._paths,Ms=this._parsedPaths,Es=this._objects,Cs=Es.length,Ts=this.nCachedObjects_,Bs=new Array(Cs);_a=_s.length,ya[ca]=_a,Ss.push(ca),Ms.push(ga),_s.push(Bs);for(var Is=Ts,Ps=Es.length;Is!==Ps;++Is){var Rs=Es[Is];Bs[Is]=new PropertyBinding(Rs,ca,ga)}return Bs},unsubscribe_:function(ca){var ga=this._bindingsIndicesByPath,ya=ga[ca];if(ya!==void 0){var _a=this._paths,_s=this._parsedPaths,Ss=this._bindings,Ms=Ss.length-1,Es=Ss[Ms],Cs=ca[Ms];ga[Cs]=ya,Ss[ya]=Es,Ss.pop(),_s[ya]=_s[Ms],_s.pop(),_a[ya]=_a[Ms],_a.pop()}}});function AnimationAction(ca,ga,ya,_a){this._mixer=ca,this._clip=ga,this._localRoot=ya||null,this.blendMode=_a||ga.blendMode;for(var _s=ga.tracks,Ss=_s.length,Ms=new Array(Ss),Es={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},Cs=0;Cs!==Ss;++Cs){var Ts=_s[Cs].createInterpolant(null);Ms[Cs]=Ts,Ts.settings=Es}this._interpolantSettings=Es,this._interpolants=Ms,this._propertyBindings=new Array(Ss),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(ca){return this._startTime=ca,this},setLoop:function(ca,ga){return this.loop=ca,this.repetitions=ga,this},setEffectiveWeight:function(ca){return this.weight=ca,this._effectiveWeight=this.enabled?ca:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(ca){return this._scheduleFading(ca,0,1)},fadeOut:function(ca){return this._scheduleFading(ca,1,0)},crossFadeFrom:function(ca,ga,ya){if(ca.fadeOut(ga),this.fadeIn(ga),ya){var _a=this._clip.duration,_s=ca._clip.duration,Ss=_s/_a,Ms=_a/_s;ca.warp(1,Ss,ga),this.warp(Ms,1,ga)}return this},crossFadeTo:function(ca,ga,ya){return ca.crossFadeFrom(this,ga,ya)},stopFading:function(){var ca=this._weightInterpolant;return ca!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},setEffectiveTimeScale:function(ca){return this.timeScale=ca,this._effectiveTimeScale=this.paused?0:ca,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(ca){return this.timeScale=this._clip.duration/ca,this.stopWarping()},syncWith:function(ca){return this.time=ca.time,this.timeScale=ca.timeScale,this.stopWarping()},halt:function(ca){return this.warp(this._effectiveTimeScale,0,ca)},warp:function(ca,ga,ya){var _a=this._mixer,_s=_a.time,Ss=this._timeScaleInterpolant,Ms=this.timeScale;Ss===null&&(Ss=_a._lendControlInterpolant(),this._timeScaleInterpolant=Ss);var Es=Ss.parameterPositions,Cs=Ss.sampleValues;return Es[0]=_s,Es[1]=_s+ya,Cs[0]=ca/Ms,Cs[1]=ga/Ms,this},stopWarping:function(){var ca=this._timeScaleInterpolant;return ca!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(ca)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(ca,ga,ya,_a){if(!this.enabled){this._updateWeight(ca);return}var _s=this._startTime;if(_s!==null){var Ss=(ca-_s)*ya;if(Ss<0||ya===0)return;this._startTime=null,ga=ya*Ss}ga*=this._updateTimeScale(ca);var Ms=this._updateTime(ga),Es=this._updateWeight(ca);if(Es>0){var Cs=this._interpolants,Ts=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var Bs=0,Is=Cs.length;Bs!==Is;++Bs)Cs[Bs].evaluate(Ms),Ts[Bs].accumulateAdditive(Es);break;case NormalAnimationBlendMode:default:for(var Bs=0,Is=Cs.length;Bs!==Is;++Bs)Cs[Bs].evaluate(Ms),Ts[Bs].accumulate(_a,Es)}}},_updateWeight:function(ca){var ga=0;if(this.enabled){ga=this.weight;var ya=this._weightInterpolant;if(ya!==null){var _a=ya.evaluate(ca)[0];ga*=_a,ca>ya.parameterPositions[1]&&(this.stopFading(),_a===0&&(this.enabled=!1))}}return this._effectiveWeight=ga,ga},_updateTimeScale:function(ca){var ga=0;if(!this.paused){ga=this.timeScale;var ya=this._timeScaleInterpolant;if(ya!==null){var _a=ya.evaluate(ca)[0];ga*=_a,ca>ya.parameterPositions[1]&&(this.stopWarping(),ga===0?this.paused=!0:this.timeScale=ga)}}return this._effectiveTimeScale=ga,ga},_updateTime:function(ca){var ga=this.time+ca,ya=this._clip.duration,_a=this.loop,_s=this._loopCount,Ss=_a===LoopPingPong;if(ca===0)return _s===-1?ga:Ss&&(_s&1)===1?ya-ga:ga;if(_a===LoopOnce){_s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ga>=ya)ga=ya;else if(ga<0)ga=0;else{this.time=ga;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca<0?-1:1})}}else{if(_s===-1&&(ca>=0?(_s=0,this._setEndings(!0,this.repetitions===0,Ss)):this._setEndings(this.repetitions===0,!0,Ss)),ga>=ya||ga<0){var Ms=Math.floor(ga/ya);ga-=ya*Ms,_s+=Math.abs(Ms);var Es=this.repetitions-_s;if(Es<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ga=ca>0?ya:0,this.time=ga,this._mixer.dispatchEvent({type:"finished",action:this,direction:ca>0?1:-1});else{if(Es===1){var Cs=ca<0;this._setEndings(Cs,!Cs,Ss)}else this._setEndings(!1,!1,Ss);this._loopCount=_s,this.time=ga,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ms})}}else this.time=ga;if(Ss&&(_s&1)===1)return ya-ga}return ga},_setEndings:function(ca,ga,ya){var _a=this._interpolantSettings;ya?(_a.endingStart=ZeroSlopeEnding,_a.endingEnd=ZeroSlopeEnding):(ca?_a.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:_a.endingStart=WrapAroundEnding,ga?_a.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:_a.endingEnd=WrapAroundEnding)},_scheduleFading:function(ca,ga,ya){var _a=this._mixer,_s=_a.time,Ss=this._weightInterpolant;Ss===null&&(Ss=_a._lendControlInterpolant(),this._weightInterpolant=Ss);var Ms=Ss.parameterPositions,Es=Ss.sampleValues;return Ms[0]=_s,Es[0]=ga,Ms[1]=_s+ca,Es[1]=ya,this}});function AnimationMixer(ca){this._root=ca,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(ca,ga){var ya=ca._localRoot||this._root,_a=ca._clip.tracks,_s=_a.length,Ss=ca._propertyBindings,Ms=ca._interpolants,Es=ya.uuid,Cs=this._bindingsByRootAndName,Ts=Cs[Es];Ts===void 0&&(Ts={},Cs[Es]=Ts);for(var Bs=0;Bs!==_s;++Bs){var Is=_a[Bs],Ps=Is.name,Rs=Ts[Ps];if(Rs!==void 0)Ss[Bs]=Rs;else{if(Rs=Ss[Bs],Rs!==void 0){Rs._cacheIndex===null&&(++Rs.referenceCount,this._addInactiveBinding(Rs,Es,Ps));continue}var ks=ga&&ga._propertyBindings[Bs].binding.parsedPath;Rs=new PropertyMixer(PropertyBinding.create(ya,Ps,ks),Is.ValueTypeName,Is.getValueSize()),++Rs.referenceCount,this._addInactiveBinding(Rs,Es,Ps),Ss[Bs]=Rs}Ms[Bs].resultBuffer=Rs.buffer}},_activateAction:function(ca){if(!this._isActiveAction(ca)){if(ca._cacheIndex===null){var ga=(ca._localRoot||this._root).uuid,ya=ca._clip.uuid,_a=this._actionsByClip[ya];this._bindAction(ca,_a&&_a.knownActions[0]),this._addInactiveAction(ca,ya,ga)}for(var _s=ca._propertyBindings,Ss=0,Ms=_s.length;Ss!==Ms;++Ss){var Es=_s[Ss];Es.useCount++===0&&(this._lendBinding(Es),Es.saveOriginalState())}this._lendAction(ca)}},_deactivateAction:function(ca){if(this._isActiveAction(ca)){for(var ga=ca._propertyBindings,ya=0,_a=ga.length;ya!==_a;++ya){var _s=ga[ya];--_s.useCount===0&&(_s.restoreOriginalState(),this._takeBackBinding(_s))}this._takeBackAction(ca)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var ca=this;this.stats={actions:{get total(){return ca._actions.length},get inUse(){return ca._nActiveActions}},bindings:{get total(){return ca._bindings.length},get inUse(){return ca._nActiveBindings}},controlInterpolants:{get total(){return ca._controlInterpolants.length},get inUse(){return ca._nActiveControlInterpolants}}}},_isActiveAction:function(ca){var ga=ca._cacheIndex;return ga!==null&&ga<this._nActiveActions},_addInactiveAction:function(ca,ga,ya){var _a=this._actions,_s=this._actionsByClip,Ss=_s[ga];if(Ss===void 0)Ss={knownActions:[ca],actionByRoot:{}},ca._byClipCacheIndex=0,_s[ga]=Ss;else{var Ms=Ss.knownActions;ca._byClipCacheIndex=Ms.length,Ms.push(ca)}ca._cacheIndex=_a.length,_a.push(ca),Ss.actionByRoot[ya]=ca},_removeInactiveAction:function(ca){var ga=this._actions,ya=ga[ga.length-1],_a=ca._cacheIndex;ya._cacheIndex=_a,ga[_a]=ya,ga.pop(),ca._cacheIndex=null;var _s=ca._clip.uuid,Ss=this._actionsByClip,Ms=Ss[_s],Es=Ms.knownActions,Cs=Es[Es.length-1],Ts=ca._byClipCacheIndex;Cs._byClipCacheIndex=Ts,Es[Ts]=Cs,Es.pop(),ca._byClipCacheIndex=null;var Bs=Ms.actionByRoot,Is=(ca._localRoot||this._root).uuid;delete Bs[Is],Es.length===0&&delete Ss[_s],this._removeInactiveBindingsForAction(ca)},_removeInactiveBindingsForAction:function(ca){for(var ga=ca._propertyBindings,ya=0,_a=ga.length;ya!==_a;++ya){var _s=ga[ya];--_s.referenceCount===0&&this._removeInactiveBinding(_s)}},_lendAction:function(ca){var ga=this._actions,ya=ca._cacheIndex,_a=this._nActiveActions++,_s=ga[_a];ca._cacheIndex=_a,ga[_a]=ca,_s._cacheIndex=ya,ga[ya]=_s},_takeBackAction:function(ca){var ga=this._actions,ya=ca._cacheIndex,_a=--this._nActiveActions,_s=ga[_a];ca._cacheIndex=_a,ga[_a]=ca,_s._cacheIndex=ya,ga[ya]=_s},_addInactiveBinding:function(ca,ga,ya){var _a=this._bindingsByRootAndName,_s=_a[ga],Ss=this._bindings;_s===void 0&&(_s={},_a[ga]=_s),_s[ya]=ca,ca._cacheIndex=Ss.length,Ss.push(ca)},_removeInactiveBinding:function(ca){var ga=this._bindings,ya=ca.binding,_a=ya.rootNode.uuid,_s=ya.path,Ss=this._bindingsByRootAndName,Ms=Ss[_a],Es=ga[ga.length-1],Cs=ca._cacheIndex;Es._cacheIndex=Cs,ga[Cs]=Es,ga.pop(),delete Ms[_s],Object.keys(Ms).length===0&&delete Ss[_a]},_lendBinding:function(ca){var ga=this._bindings,ya=ca._cacheIndex,_a=this._nActiveBindings++,_s=ga[_a];ca._cacheIndex=_a,ga[_a]=ca,_s._cacheIndex=ya,ga[ya]=_s},_takeBackBinding:function(ca){var ga=this._bindings,ya=ca._cacheIndex,_a=--this._nActiveBindings,_s=ga[_a];ca._cacheIndex=_a,ga[_a]=ca,_s._cacheIndex=ya,ga[ya]=_s},_lendControlInterpolant:function(){var ca=this._controlInterpolants,ga=this._nActiveControlInterpolants++,ya=ca[ga];return ya===void 0&&(ya=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),ya.__cacheIndex=ga,ca[ga]=ya),ya},_takeBackControlInterpolant:function(ca){var ga=this._controlInterpolants,ya=ca.__cacheIndex,_a=--this._nActiveControlInterpolants,_s=ga[_a];ca.__cacheIndex=_a,ga[_a]=ca,_s.__cacheIndex=ya,ga[ya]=_s},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(ca,ga,ya){var _a=ga||this._root,_s=_a.uuid,Ss=typeof ca=="string"?AnimationClip.findByName(_a,ca):ca,Ms=Ss!==null?Ss.uuid:ca,Es=this._actionsByClip[Ms],Cs=null;if(ya===void 0&&(Ss!==null?ya=Ss.blendMode:ya=NormalAnimationBlendMode),Es!==void 0){var Ts=Es.actionByRoot[_s];if(Ts!==void 0&&Ts.blendMode===ya)return Ts;Cs=Es.knownActions[0],Ss===null&&(Ss=Cs._clip)}if(Ss===null)return null;var Bs=new AnimationAction(this,Ss,ga,ya);return this._bindAction(Bs,Cs),this._addInactiveAction(Bs,Ms,_s),Bs},existingAction:function(ca,ga){var ya=ga||this._root,_a=ya.uuid,_s=typeof ca=="string"?AnimationClip.findByName(ya,ca):ca,Ss=_s?_s.uuid:ca,Ms=this._actionsByClip[Ss];return Ms!==void 0&&Ms.actionByRoot[_a]||null},stopAllAction:function(){for(var ca=this._actions,ga=this._nActiveActions,ya=ga-1;ya>=0;--ya)ca[ya].stop();return this},update:function(ca){ca*=this.timeScale;for(var ga=this._actions,ya=this._nActiveActions,_a=this.time+=ca,_s=Math.sign(ca),Ss=this._accuIndex^=1,Ms=0;Ms!==ya;++Ms){var Es=ga[Ms];Es._update(_a,ca,_s,Ss)}for(var Cs=this._bindings,Ts=this._nActiveBindings,Ms=0;Ms!==Ts;++Ms)Cs[Ms].apply(Ss);return this},setTime:function(ca){this.time=0;for(var ga=0;ga<this._actions.length;ga++)this._actions[ga].time=0;return this.update(ca)},getRoot:function(){return this._root},uncacheClip:function(ca){var ga=this._actions,ya=ca.uuid,_a=this._actionsByClip,_s=_a[ya];if(_s!==void 0){for(var Ss=_s.knownActions,Ms=0,Es=Ss.length;Ms!==Es;++Ms){var Cs=Ss[Ms];this._deactivateAction(Cs);var Ts=Cs._cacheIndex,Bs=ga[ga.length-1];Cs._cacheIndex=null,Cs._byClipCacheIndex=null,Bs._cacheIndex=Ts,ga[Ts]=Bs,ga.pop(),this._removeInactiveBindingsForAction(Cs)}delete _a[ya]}},uncacheRoot:function(ca){var ga=ca.uuid,ya=this._actionsByClip;for(var _a in ya){var _s=ya[_a].actionByRoot,Ss=_s[ga];Ss!==void 0&&(this._deactivateAction(Ss),this._removeInactiveAction(Ss))}var Ms=this._bindingsByRootAndName,Es=Ms[ga];if(Es!==void 0)for(var Cs in Es){var Ts=Es[Cs];Ts.restoreOriginalState(),this._removeInactiveBinding(Ts)}},uncacheAction:function(ca,ga){var ya=this.existingAction(ca,ga);ya!==null&&(this._deactivateAction(ya),this._removeInactiveAction(ya))}});function Uniform(ca){typeof ca=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),ca=arguments[1]),this.value=ca}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(ca,ga,ya){InterleavedBuffer.call(this,ca,ga),this.meshPerAttribute=ya||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(ca){return InterleavedBuffer.prototype.copy.call(this,ca),this.meshPerAttribute=ca.meshPerAttribute,this}});function Raycaster(ca,ga,ya,_a){this.ray=new Ray(ca,ga),this.near=ya||0,this.far=_a||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(ca,ga){return ca.distance-ga.distance}function intersectObject(ca,ga,ya,_a){if(ca.layers.test(ga.layers)&&ca.raycast(ga,ya),_a===!0)for(var _s=ca.children,Ss=0,Ms=_s.length;Ss<Ms;Ss++)intersectObject(_s[Ss],ga,ya,!0)}Object.assign(Raycaster.prototype,{set:function(ca,ga){this.ray.set(ca,ga)},setFromCamera:function(ca,ga){ga&&ga.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(ga.matrixWorld),this.ray.direction.set(ca.x,ca.y,.5).unproject(ga).sub(this.ray.origin).normalize(),this.camera=ga):ga&&ga.isOrthographicCamera?(this.ray.origin.set(ca.x,ca.y,(ga.near+ga.far)/(ga.near-ga.far)).unproject(ga),this.ray.direction.set(0,0,-1).transformDirection(ga.matrixWorld),this.camera=ga):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(ca,ga,ya){var _a=ya||[];return intersectObject(ca,this,_a,ga),_a.sort(ascSort),_a},intersectObjects:function(ca,ga,ya){var _a=ya||[];if(Array.isArray(ca)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),_a;for(var _s=0,Ss=ca.length;_s<Ss;_s++)intersectObject(ca[_s],this,_a,ga);return _a.sort(ascSort),_a}});function Spherical(ca,ga,ya){return this.radius=ca!==void 0?ca:1,this.phi=ga!==void 0?ga:0,this.theta=ya!==void 0?ya:0,this}Object.assign(Spherical.prototype,{set:function(ca,ga,ya){return this.radius=ca,this.phi=ga,this.theta=ya,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.phi=ca.phi,this.theta=ca.theta,this},makeSafe:function(){var ca=1e-6;return this.phi=Math.max(ca,Math.min(Math.PI-ca,this.phi)),this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,ya){return this.radius=Math.sqrt(ca*ca+ga*ga+ya*ya),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(ca,ya),this.phi=Math.acos(MathUtils.clamp(ga/this.radius,-1,1))),this}});function Cylindrical(ca,ga,ya){return this.radius=ca!==void 0?ca:1,this.theta=ga!==void 0?ga:0,this.y=ya!==void 0?ya:0,this}Object.assign(Cylindrical.prototype,{set:function(ca,ga,ya){return this.radius=ca,this.theta=ga,this.y=ya,this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.radius=ca.radius,this.theta=ca.theta,this.y=ca.y,this},setFromVector3:function(ca){return this.setFromCartesianCoords(ca.x,ca.y,ca.z)},setFromCartesianCoords:function(ca,ga,ya){return this.radius=Math.sqrt(ca*ca+ya*ya),this.theta=Math.atan2(ca,ya),this.y=ga,this}});var _vector$7=new Vector2;function Box2(ca,ga){this.min=ca!==void 0?ca:new Vector2(1/0,1/0),this.max=ga!==void 0?ga:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(ca,ga){return this.min.copy(ca),this.max.copy(ga),this},setFromPoints:function(ca){this.makeEmpty();for(var ga=0,ya=ca.length;ga<ya;ga++)this.expandByPoint(ca[ga]);return this},setFromCenterAndSize:function(ca,ga){var ya=_vector$7.copy(ga).multiplyScalar(.5);return this.min.copy(ca).sub(ya),this.max.copy(ca).add(ya),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.min.copy(ca.min),this.max.copy(ca.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(ca){return ca===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),ca=new Vector2),this.isEmpty()?ca.set(0,0):ca.subVectors(this.max,this.min)},expandByPoint:function(ca){return this.min.min(ca),this.max.max(ca),this},expandByVector:function(ca){return this.min.sub(ca),this.max.add(ca),this},expandByScalar:function(ca){return this.min.addScalar(-ca),this.max.addScalar(ca),this},containsPoint:function(ca){return!(ca.x<this.min.x||ca.x>this.max.x||ca.y<this.min.y||ca.y>this.max.y)},containsBox:function(ca){return this.min.x<=ca.min.x&&ca.max.x<=this.max.x&&this.min.y<=ca.min.y&&ca.max.y<=this.max.y},getParameter:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),ga=new Vector2),ga.set((ca.x-this.min.x)/(this.max.x-this.min.x),(ca.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(ca){return!(ca.max.x<this.min.x||ca.min.x>this.max.x||ca.max.y<this.min.y||ca.min.y>this.max.y)},clampPoint:function(ca,ga){return ga===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),ga=new Vector2),ga.copy(ca).clamp(this.min,this.max)},distanceToPoint:function(ca){var ga=_vector$7.copy(ca).clamp(this.min,this.max);return ga.sub(ca).length()},intersect:function(ca){return this.min.max(ca.min),this.max.min(ca.max),this},union:function(ca){return this.min.min(ca.min),this.max.max(ca.max),this},translate:function(ca){return this.min.add(ca),this.max.add(ca),this},equals:function(ca){return ca.min.equals(this.min)&&ca.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(ca,ga){this.start=ca!==void 0?ca:new Vector3,this.end=ga!==void 0?ga:new Vector3}Object.assign(Line3.prototype,{set:function(ca,ga){return this.start.copy(ca),this.end.copy(ga),this},clone:function(){return new this.constructor().copy(this)},copy:function(ca){return this.start.copy(ca.start),this.end.copy(ca.end),this},getCenter:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),ca=new Vector3),ca.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(ca){return ca===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),ca=new Vector3),ca.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(ca,ga){return ga===void 0&&(console.warn("THREE.Line3: .at() target is now required"),ga=new Vector3),this.delta(ga).multiplyScalar(ca).add(this.start)},closestPointToPointParameter:function(ca,ga){_startP.subVectors(ca,this.start),_startEnd.subVectors(this.end,this.start);var ya=_startEnd.dot(_startEnd),_a=_startEnd.dot(_startP),_s=_a/ya;return ga&&(_s=MathUtils.clamp(_s,0,1)),_s},closestPointToPoint:function(ca,ga,ya){var _a=this.closestPointToPointParameter(ca,ga);return ya===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),ya=new Vector3),this.delta(ya).multiplyScalar(_a).add(this.start)},applyMatrix4:function(ca){return this.start.applyMatrix4(ca),this.end.applyMatrix4(ca),this},equals:function(ca){return ca.start.equals(this.start)&&ca.end.equals(this.end)}});function ImmediateRenderObject(ca){Object3D.call(this),this.material=ca,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(ca,ga){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=ga;for(var ya=new BufferGeometry,_a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],_s=0,Ss=1,Ms=32;_s<Ms;_s++,Ss++){var Es=_s/Ms*Math.PI*2,Cs=Ss/Ms*Math.PI*2;_a.push(Math.cos(Es),Math.sin(Es),1,Math.cos(Cs),Math.sin(Cs),1)}ya.setAttribute("position",new Float32BufferAttribute(_a,3));var Ts=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(ya,Ts),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var ca=this.light.distance?this.light.distance:1e3,ga=ca*Math.tan(this.light.angle);this.cone.scale.set(ga,ga,ca),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(ca){var ga=[];ca&&ca.isBone&&ga.push(ca);for(var ya=0;ya<ca.children.length;ya++)ga.push.apply(ga,getBoneList(ca.children[ya]));return ga}function SkeletonHelper(ca){for(var ga=getBoneList(ca),ya=new BufferGeometry,_a=[],_s=[],Ss=new Color(0,0,1),Ms=new Color(0,1,0),Es=0;Es<ga.length;Es++){var Cs=ga[Es];Cs.parent&&Cs.parent.isBone&&(_a.push(0,0,0),_a.push(0,0,0),_s.push(Ss.r,Ss.g,Ss.b),_s.push(Ms.r,Ms.g,Ms.b))}ya.setAttribute("position",new Float32BufferAttribute(_a,3)),ya.setAttribute("color",new Float32BufferAttribute(_s,3));var Ts=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,ya,Ts),this.type="SkeletonHelper",this.root=ca,this.bones=ga,this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(ca){var ga=this.bones,ya=this.geometry,_a=ya.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var _s=0,Ss=0;_s<ga.length;_s++){var Ms=ga[_s];Ms.parent&&Ms.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Ms.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),_a.setXYZ(Ss,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Ms.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),_a.setXYZ(Ss+1,_vector$9.x,_vector$9.y,_vector$9.z),Ss+=2)}ya.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,ca)};function PointLightHelper(ca,ga,ya){this.light=ca,this.light.updateMatrixWorld(),this.color=ya;var _a=new SphereBufferGeometry(ga,4,2),_s=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,_a,_s),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(ca,ga,ya){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=ya;var _a=new OctahedronBufferGeometry(ga);_a.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var _s=_a.getAttribute("position"),Ss=new Float32Array(_s.count*3);_a.setAttribute("color",new BufferAttribute(Ss,3)),this.add(new Mesh(_a,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var ca=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var ga=ca.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var ya=0,_a=ga.count;ya<_a;ya++){var _s=ya<_a/2?_color1:_color2;ga.setXYZ(ya,_s.r,_s.g,_s.b)}ga.needsUpdate=!0}ca.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(ca,ga,ya,_a){ca=ca||10,ga=ga||10,ya=new Color(ya!==void 0?ya:4473924),_a=new Color(_a!==void 0?_a:8947848);for(var _s=ga/2,Ss=ca/ga,Ms=ca/2,Es=[],Cs=[],Ts=0,Bs=0,Is=-Ms;Ts<=ga;Ts++,Is+=Ss){Es.push(-Ms,0,Is,Ms,0,Is),Es.push(Is,0,-Ms,Is,0,Ms);var Ps=Ts===_s?ya:_a;Ps.toArray(Cs,Bs),Bs+=3,Ps.toArray(Cs,Bs),Bs+=3,Ps.toArray(Cs,Bs),Bs+=3,Ps.toArray(Cs,Bs),Bs+=3}var Rs=new BufferGeometry;Rs.setAttribute("position",new Float32BufferAttribute(Es,3)),Rs.setAttribute("color",new Float32BufferAttribute(Cs,3));var ks=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,Rs,ks),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(ca){return LineSegments.prototype.copy.call(this,ca),this.geometry.copy(ca.geometry),this.material.copy(ca.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(ca,ga,ya,_a,_s,Ss){ca=ca||10,ga=ga||16,ya=ya||8,_a=_a||64,_s=new Color(_s!==void 0?_s:4473924),Ss=new Color(Ss!==void 0?Ss:8947848);var Ms=[],Es=[],Cs,Ts,Bs,Is,Ps,Rs,ks;for(Is=0;Is<=ga;Is++)Bs=Is/ga*(Math.PI*2),Cs=Math.sin(Bs)*ca,Ts=Math.cos(Bs)*ca,Ms.push(0,0,0),Ms.push(Cs,0,Ts),ks=Is&1?_s:Ss,Es.push(ks.r,ks.g,ks.b),Es.push(ks.r,ks.g,ks.b);for(Is=0;Is<=ya;Is++)for(ks=Is&1?_s:Ss,Rs=ca-ca/ya*Is,Ps=0;Ps<_a;Ps++)Bs=Ps/_a*(Math.PI*2),Cs=Math.sin(Bs)*Rs,Ts=Math.cos(Bs)*Rs,Ms.push(Cs,0,Ts),Es.push(ks.r,ks.g,ks.b),Bs=(Ps+1)/_a*(Math.PI*2),Cs=Math.sin(Bs)*Rs,Ts=Math.cos(Bs)*Rs,Ms.push(Cs,0,Ts),Es.push(ks.r,ks.g,ks.b);var $s=new BufferGeometry;$s.setAttribute("position",new Float32BufferAttribute(Ms,3)),$s.setAttribute("color",new Float32BufferAttribute(Es,3));var Os=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,$s,Os),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(ca,ga,ya){Object3D.call(this),this.light=ca,this.light.updateMatrixWorld(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.color=ya,ga===void 0&&(ga=1);var _a=new BufferGeometry;_a.setAttribute("position",new Float32BufferAttribute([-ga,ga,0,ga,ga,0,ga,-ga,0,-ga,-ga,0,-ga,ga,0],3));var _s=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(_a,_s),this.add(this.lightPlane),_a=new BufferGeometry,_a.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(_a,_s),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(ca){var ga=new BufferGeometry,ya=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),_a=[],_s=[],Ss={},Ms=new Color(16755200),Es=new Color(16711680),Cs=new Color(43775),Ts=new Color(16777215),Bs=new Color(3355443);Is("n1","n2",Ms),Is("n2","n4",Ms),Is("n4","n3",Ms),Is("n3","n1",Ms),Is("f1","f2",Ms),Is("f2","f4",Ms),Is("f4","f3",Ms),Is("f3","f1",Ms),Is("n1","f1",Ms),Is("n2","f2",Ms),Is("n3","f3",Ms),Is("n4","f4",Ms),Is("p","n1",Es),Is("p","n2",Es),Is("p","n3",Es),Is("p","n4",Es),Is("u1","u2",Cs),Is("u2","u3",Cs),Is("u3","u1",Cs),Is("c","t",Ts),Is("p","c",Bs),Is("cn1","cn2",Bs),Is("cn3","cn4",Bs),Is("cf1","cf2",Bs),Is("cf3","cf4",Bs);function Is(Rs,ks,$s){Ps(Rs,$s),Ps(ks,$s)}function Ps(Rs,ks){_a.push(0,0,0),_s.push(ks.r,ks.g,ks.b),Ss[Rs]===void 0&&(Ss[Rs]=[]),Ss[Rs].push(_a.length/3-1)}ga.setAttribute("position",new Float32BufferAttribute(_a,3)),ga.setAttribute("color",new Float32BufferAttribute(_s,3)),LineSegments.call(this,ga,ya),this.type="CameraHelper",this.camera=ca,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=ca.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ss,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var ca=this.geometry,ga=this.pointMap,ya=1,_a=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",ga,ca,_camera,0,0,-1),setPoint("t",ga,ca,_camera,0,0,1),setPoint("n1",ga,ca,_camera,-ya,-_a,-1),setPoint("n2",ga,ca,_camera,ya,-_a,-1),setPoint("n3",ga,ca,_camera,-ya,_a,-1),setPoint("n4",ga,ca,_camera,ya,_a,-1),setPoint("f1",ga,ca,_camera,-ya,-_a,1),setPoint("f2",ga,ca,_camera,ya,-_a,1),setPoint("f3",ga,ca,_camera,-ya,_a,1),setPoint("f4",ga,ca,_camera,ya,_a,1),setPoint("u1",ga,ca,_camera,ya*.7,_a*1.1,-1),setPoint("u2",ga,ca,_camera,-ya*.7,_a*1.1,-1),setPoint("u3",ga,ca,_camera,0,_a*2,-1),setPoint("cf1",ga,ca,_camera,-ya,0,1),setPoint("cf2",ga,ca,_camera,ya,0,1),setPoint("cf3",ga,ca,_camera,0,-_a,1),setPoint("cf4",ga,ca,_camera,0,_a,1),setPoint("cn1",ga,ca,_camera,-ya,0,-1),setPoint("cn2",ga,ca,_camera,ya,0,-1),setPoint("cn3",ga,ca,_camera,0,-_a,-1),setPoint("cn4",ga,ca,_camera,0,_a,-1),ca.getAttribute("position").needsUpdate=!0};function setPoint(ca,ga,ya,_a,_s,Ss,Ms){_vector$b.set(_s,Ss,Ms).unproject(_a);var Es=ga[ca];if(Es!==void 0)for(var Cs=ya.getAttribute("position"),Ts=0,Bs=Es.length;Ts<Bs;Ts++)Cs.setXYZ(Es[Ts],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(ca,ga){this.object=ca,ga===void 0&&(ga=16776960);var ya=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),_a=new Float32Array(8*3),_s=new BufferGeometry;_s.setIndex(new BufferAttribute(ya,1)),_s.setAttribute("position",new BufferAttribute(_a,3)),LineSegments.call(this,_s,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(ca){if(ca!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var ga=_box$3.min,ya=_box$3.max,_a=this.geometry.attributes.position,_s=_a.array;_s[0]=ya.x,_s[1]=ya.y,_s[2]=ya.z,_s[3]=ga.x,_s[4]=ya.y,_s[5]=ya.z,_s[6]=ga.x,_s[7]=ga.y,_s[8]=ya.z,_s[9]=ya.x,_s[10]=ga.y,_s[11]=ya.z,_s[12]=ya.x,_s[13]=ya.y,_s[14]=ga.z,_s[15]=ga.x,_s[16]=ya.y,_s[17]=ga.z,_s[18]=ga.x,_s[19]=ga.y,_s[20]=ga.z,_s[21]=ya.x,_s[22]=ga.y,_s[23]=ga.z,_a.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(ca){return this.object=ca,this.update(),this};BoxHelper.prototype.copy=function(ca){return LineSegments.prototype.copy.call(this,ca),this.object=ca.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(ca,ga){this.type="Box3Helper",this.box=ca,ga=ga||16776960;var ya=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),_a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],_s=new BufferGeometry;_s.setIndex(new BufferAttribute(ya,1)),_s.setAttribute("position",new Float32BufferAttribute(_a,3)),LineSegments.call(this,_s,new LineBasicMaterial({color:ga,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(ca){var ga=this.box;ga.isEmpty()||(ga.getCenter(this.position),ga.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,ca))};function PlaneHelper(ca,ga,ya){this.plane=ca,this.size=ga===void 0?1:ga;var _a=ya!==void 0?ya:16776960,_s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],Ss=new BufferGeometry;Ss.setAttribute("position",new Float32BufferAttribute(_s,3)),Ss.computeBoundingSphere(),Line.call(this,Ss,new LineBasicMaterial({color:_a,toneMapped:!1})),this.type="PlaneHelper";var Ms=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],Es=new BufferGeometry;Es.setAttribute("position",new Float32BufferAttribute(Ms,3)),Es.computeBoundingSphere(),this.add(new Mesh(Es,new MeshBasicMaterial({color:_a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(ca){var ga=-this.plane.constant;Math.abs(ga)<1e-8&&(ga=1e-8),this.scale.set(.5*this.size,.5*this.size,ga),this.children[0].material.side=ga<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,ca)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(ca,ga,ya,_a,_s,Ss){Object3D.call(this),this.type="ArrowHelper",ca===void 0&&(ca=new Vector3(0,0,1)),ga===void 0&&(ga=new Vector3(0,0,0)),ya===void 0&&(ya=1),_a===void 0&&(_a=16776960),_s===void 0&&(_s=.2*ya),Ss===void 0&&(Ss=.2*_s),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(ga),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:_a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:_a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(ca),this.setLength(ya,_s,Ss)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(ca){if(ca.y>.99999)this.quaternion.set(0,0,0,1);else if(ca.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(ca.z,0,-ca.x).normalize();var ga=Math.acos(ca.y);this.quaternion.setFromAxisAngle(_axis,ga)}};ArrowHelper.prototype.setLength=function(ca,ga,ya){ga===void 0&&(ga=.2*ca),ya===void 0&&(ya=.2*ga),this.line.scale.set(1,Math.max(1e-4,ca-ga),1),this.line.updateMatrix(),this.cone.scale.set(ya,ga,ya),this.cone.position.y=ca,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(ca){this.line.material.color.set(ca),this.cone.material.color.set(ca)};ArrowHelper.prototype.copy=function(ca){return Object3D.prototype.copy.call(this,ca,!1),this.line.copy(ca.line),this.cone.copy(ca.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(ca){ca=ca||1;var ga=[0,0,0,ca,0,0,0,0,0,0,ca,0,0,0,0,0,0,ca],ya=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],_a=new BufferGeometry;_a.setAttribute("position",new Float32BufferAttribute(ga,3)),_a.setAttribute("color",new Float32BufferAttribute(ya,3));var _s=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,_a,_s),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(ca){this._renderer=ca,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(ca,ga=0,ya=.1,_a=100){_oldTarget=this._renderer.getRenderTarget();var _s=this._allocateTargets();return this._sceneToCubeUV(ca,ya,_a,_s),ga>0&&this._blur(_s,0,0,ga),this._applyPMREM(_s),this._cleanup(_s),_s},fromEquirectangular:function(ca){return ca.magFilter=NearestFilter,ca.minFilter=NearestFilter,ca.generateMipmaps=!1,this.fromCubemap(ca)},fromCubemap:function(ca){_oldTarget=this._renderer.getRenderTarget();var ga=this._allocateTargets(ca);return this._textureToCubeUV(ca,ga),this._applyPMREM(ga),this._cleanup(ga),ga},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var ca=0;ca<_lodPlanes.length;ca++)_lodPlanes[ca].dispose()},_cleanup:function(ca){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),ca.scissorTest=!1,ca.setSize(ca.width,ca.height)},_allocateTargets:function(ca){var ga={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(ca)?ca.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},ya=_createRenderTarget(ga);return ya.depthBuffer=!ca,this._pingPongRenderTarget=_createRenderTarget(ga),ya},_compileMaterial:function(ca){var ga=new Mesh(_lodPlanes[0],ca);this._renderer.compile(ga,_flatCamera)},_sceneToCubeUV:function(ca,ga,ya,_a){var _s=90,Ss=1,Ms=new PerspectiveCamera(_s,Ss,ga,ya),Es=[1,-1,1,1,1,1],Cs=[1,1,1,-1,-1,-1],Ts=this._renderer,Bs=Ts.outputEncoding,Is=Ts.toneMapping,Ps=Ts.toneMappingExposure,Rs=Ts.getClearColor(),ks=Ts.getClearAlpha();Ts.toneMapping=LinearToneMapping,Ts.toneMappingExposure=1,Ts.outputEncoding=LinearEncoding;var $s=ca.background;if($s&&$s.isColor){$s.convertSRGBToLinear();var Os=Math.max($s.r,$s.g,$s.b),Ls=Math.min(Math.max(Math.ceil(Math.log2(Os)),-128),127);$s=$s.multiplyScalar(Math.pow(2,-Ls));var Ds=(Ls+128)/255;Ts.setClearColor($s,Ds),ca.background=null}for(var Fs=0;Fs<6;Fs++){var Ns=Fs%3;Ns==0?(Ms.up.set(0,Es[Fs],0),Ms.lookAt(Cs[Fs],0,0)):Ns==1?(Ms.up.set(0,0,Es[Fs]),Ms.lookAt(0,Cs[Fs],0)):(Ms.up.set(0,Es[Fs],0),Ms.lookAt(0,0,Cs[Fs])),_setViewport(_a,Ns*SIZE_MAX,Fs>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),Ts.setRenderTarget(_a),Ts.render(ca,Ms)}Ts.toneMapping=Is,Ts.toneMappingExposure=Ps,Ts.outputEncoding=Bs,Ts.setClearColor(Rs,ks)},_textureToCubeUV:function(ca,ga){var ya=this._renderer;ca.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var _a=ca.isCubeTexture?this._cubemapShader:this._equirectShader,_s=new Mesh(_lodPlanes[0],_a),Ss=_a.uniforms;Ss.envMap.value=ca,ca.isCubeTexture||Ss.texelSize.value.set(1/ca.image.width,1/ca.image.height),Ss.inputEncoding.value=ENCODINGS[ca.encoding],Ss.outputEncoding.value=ENCODINGS[ga.texture.encoding],_setViewport(ga,0,0,3*SIZE_MAX,2*SIZE_MAX),ya.setRenderTarget(ga),ya.render(_s,_flatCamera)},_applyPMREM:function(ca){var ga=this._renderer,ya=ga.autoClear;ga.autoClear=!1;for(var _a=1;_a<TOTAL_LODS;_a++){var _s=Math.sqrt(_sigmas[_a]*_sigmas[_a]-_sigmas[_a-1]*_sigmas[_a-1]),Ss=_axisDirections[(_a-1)%_axisDirections.length];this._blur(ca,_a-1,_a,_s,Ss)}ga.autoClear=ya},_blur:function(ca,ga,ya,_a,_s){var Ss=this._pingPongRenderTarget;this._halfBlur(ca,Ss,ga,ya,_a,"latitudinal",_s),this._halfBlur(Ss,ca,ya,ya,_a,"longitudinal",_s)},_halfBlur:function(ca,ga,ya,_a,_s,Ss,Ms){var Es=this._renderer,Cs=this._blurMaterial;Ss!=="latitudinal"&&Ss!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var Ts=3,Bs=new Mesh(_lodPlanes[_a],Cs),Is=Cs.uniforms,Ps=_sizeLods[ya]-1,Rs=isFinite(_s)?Math.PI/(2*Ps):2*Math.PI/(2*MAX_SAMPLES-1),ks=_s/Rs,$s=isFinite(_s)?1+Math.floor(Ts*ks):MAX_SAMPLES;$s>MAX_SAMPLES&&console.warn(`sigmaRadians, ${_s}, is too large and will clip, as it requested ${$s} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Os=[],Ls=0,Ds=0;Ds<MAX_SAMPLES;++Ds){var Vs=Ds/ks,Fs=Math.exp(-Vs*Vs/2);Os.push(Fs),Ds==0?Ls+=Fs:Ds<$s&&(Ls+=2*Fs)}for(var Ds=0;Ds<Os.length;Ds++)Os[Ds]=Os[Ds]/Ls;Is.envMap.value=ca.texture,Is.samples.value=$s,Is.weights.value=Os,Is.latitudinal.value=Ss==="latitudinal",Ms&&(Is.poleAxis.value=Ms),Is.dTheta.value=Rs,Is.mipInt.value=LOD_MAX-ya,Is.inputEncoding.value=ENCODINGS[ca.texture.encoding],Is.outputEncoding.value=ENCODINGS[ca.texture.encoding];var Ns=_sizeLods[_a],Vs=3*Math.max(0,SIZE_MAX-2*Ns),Gs=(_a===0?0:2*SIZE_MAX)+2*Ns*(_a>LOD_MAX-LOD_MIN?_a-LOD_MAX+LOD_MIN:0);_setViewport(ga,Vs,Gs,3*Ns,2*Ns),Es.setRenderTarget(ga),Es.render(Bs,_flatCamera)}};function _isLDR(ca){return ca===void 0||ca.type!==UnsignedByteType?!1:ca.encoding===LinearEncoding||ca.encoding===sRGBEncoding||ca.encoding===GammaEncoding}function _createPlanes(){for(var ca=[],ga=[],ya=[],_a=LOD_MAX,_s=0;_s<TOTAL_LODS;_s++){var Ss=Math.pow(2,_a);ga.push(Ss);var Ms=1/Ss;_s>LOD_MAX-LOD_MIN?Ms=EXTRA_LOD_SIGMA[_s-LOD_MAX+LOD_MIN-1]:_s==0&&(Ms=0),ya.push(Ms);for(var Es=1/(Ss-1),Cs=-Es/2,Ts=1+Es/2,Bs=[Cs,Cs,Ts,Cs,Ts,Ts,Cs,Cs,Ts,Ts,Cs,Ts],Is=6,Ps=6,Rs=3,ks=2,$s=1,Os=new Float32Array(Rs*Ps*Is),Ls=new Float32Array(ks*Ps*Is),Ds=new Float32Array($s*Ps*Is),Fs=0;Fs<Is;Fs++){var Ns=Fs%3*2/3-1,Vs=Fs>2?0:-1,Gs=[Ns,Vs,0,Ns+2/3,Vs,0,Ns+2/3,Vs+1,0,Ns,Vs,0,Ns+2/3,Vs+1,0,Ns,Vs+1,0];Os.set(Gs,Rs*Ps*Fs),Ls.set(Bs,ks*Ps*Fs);var Us=[Fs,Fs,Fs,Fs,Fs,Fs];Ds.set(Us,$s*Ps*Fs)}var zs=new BufferGeometry;zs.setAttribute("position",new BufferAttribute(Os,Rs)),zs.setAttribute("uv",new BufferAttribute(Ls,ks)),zs.setAttribute("faceIndex",new BufferAttribute(Ds,$s)),ca.push(zs),_a>LOD_MIN&&_a--}return{_lodPlanes:ca,_sizeLods:ga,_sigmas:ya}}function _createRenderTarget(ca){var ga=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,ca);return ga.texture.mapping=CubeUVReflectionMapping,ga.texture.name="PMREM.cubeUv",ga.scissorTest=!0,ga}function _setViewport(ca,ga,ya,_a,_s){ca.viewport.set(ga,ya,_a,_s),ca.scissor.set(ga,ya,_a,_s)}function _getBlurShader(ca){var ga=new Float32Array(ca),ya=new Vector3(0,1,0),_a=new RawShaderMaterial({defines:{n:ca},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ga},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:ya},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return _a.type="SphericalGaussianBlur",_a}function _getEquirectShader(){var ca=new Vector2(1,1),ga=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:ca},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ga.type="EquirectangularToCubeUV",ga}function _getCubemapShader(){var ca=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return ca.type="CubemapToCubeUV",ca}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(ca,ga,ya,_a,_s,Ss,Ms){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(ca,ga,ya,_s,Ss,Ms)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(ca){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),ca}function MultiMaterial(ca){return ca===void 0&&(ca=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),ca.isMultiMaterial=!0,ca.materials=ca,ca.clone=function(){return ca.slice()},ca}function PointCloud(ca,ga){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(ca,ga)}function Particle(ca){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(ca)}function ParticleSystem(ca,ga){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(ca,ga)}function PointCloudMaterial(ca){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleBasicMaterial(ca){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function ParticleSystemMaterial(ca){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(ca)}function Vertex(ca,ga,ya){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(ca,ga,ya)}function DynamicBufferAttribute(ca,ga){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(ca,ga).setUsage(DynamicDrawUsage)}function Int8Attribute(ca,ga){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(ca,ga)}function Uint8Attribute(ca,ga){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(ca,ga)}function Uint8ClampedAttribute(ca,ga){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(ca,ga)}function Int16Attribute(ca,ga){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(ca,ga)}function Uint16Attribute(ca,ga){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(ca,ga)}function Int32Attribute(ca,ga){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(ca,ga)}function Uint32Attribute(ca,ga){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(ca,ga)}function Float32Attribute(ca,ga){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(ca,ga)}function Float64Attribute(ca,ga){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(ca,ga)}Curve.create=function(ca,ga){return console.log("THREE.Curve.create() has been deprecated"),ca.prototype=Object.create(Curve.prototype),ca.prototype.constructor=ca,ca.prototype.getPoint=ga,ca};Object.assign(CurvePath.prototype,{createPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getPoints(ca);return this.createGeometry(ga)},createSpacedPointsGeometry:function(ca){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var ga=this.getSpacedPoints(ca);return this.createGeometry(ga)},createGeometry:function(ca){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var ga=new Geometry,ya=0,_a=ca.length;ya<_a;ya++){var _s=ca[ya];ga.vertices.push(new Vector3(_s.x,_s.y,_s.z||0))}return ga}});Object.assign(Path.prototype,{fromPoints:function(ca){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(ca)}});function ClosedSplineCurve3(ca){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(ca){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(ca){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,ca),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(ca){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(ca)}function BoundingBoxHelper(ca,ga){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(ca,ga)}function EdgesHelper(ca,ga){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(ca,ga){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(ca.geometry),new LineBasicMaterial({color:ga!==void 0?ga:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(ca){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(ca)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(ca){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(ca)}function BinaryTextureLoader(ca){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(ca)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(ca){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(ca)}});Object.assign(Box2.prototype,{center:function(ca){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},size:function(ca){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Box3.prototype,{center:function(ca){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(ca)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(ca){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)},size:function(ca){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(ca)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(ca){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(ca)};Line3.prototype.center=function(ca){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(ca)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(ca){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(ca)},nextPowerOfTwo:function(ca){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(ca)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},multiplyVector3:function(ca){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),ca.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(ca){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(ca)},flattenToArrayOffset:function(ca,ga){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(ca,ga)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(ca){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(ca)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(ca){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector4:function(ca){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(ca){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),ca.transformDirection(this)},crossVector:function(ca){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(ca){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),ca.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(ca,ga,ya,_a,_s,Ss){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(ca,ga,_a,ya,_s,Ss)}});Plane.prototype.isIntersectionLine=function(ca){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(ca)};Quaternion.prototype.multiplyVector3=function(ca){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),ca.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(ca){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(ca)},isIntersectionPlane:function(ca){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(ca)},isIntersectionSphere:function(ca){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(ca)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(ca,ga){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(ca,ga)},midpoint:function(ca){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(ca)},normal:function(ca){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(ca)},plane:function(ca){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(ca)}});Object.assign(Triangle,{barycoordFromPoint:function(ca,ga,ya,_a,_s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(ca,ga,ya,_a,_s)},normal:function(ca,ga,ya,_a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(ca,ga,ya,_a)}});Object.assign(Shape.prototype,{extractAllPoints:function(ca){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(ca)},extrude:function(ca){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,ca)},makeGeometry:function(ca){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,ca)}});Object.assign(Vector2.prototype,{fromAttribute:function(ca,ga,ya){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,ya)},distanceToManhattan:function(ca){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(ca){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(ca)},getScaleFromMatrix:function(ca){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(ca)},getColumnFromMatrix:function(ca,ga){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(ga,ca)},applyProjection:function(ca){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(ca)},fromAttribute:function(ca,ga,ya){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,ya)},distanceToManhattan:function(ca){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(ca)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(ca,ga,ya){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(ca,ga,ya)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(ca){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.assign(Object3D.prototype,{getChildByName:function(ca){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(ca)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(ca,ga){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(ga,ca)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(ca){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(ca){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=ca}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(ca){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=ca}});PerspectiveCamera.prototype.setLens=function(ca,ga){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),ga!==void 0&&(this.filmGauge=ga),this.setFocalLength(ca)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(ca){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=ca}},shadowCameraLeft:{set:function(ca){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=ca}},shadowCameraRight:{set:function(ca){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=ca}},shadowCameraTop:{set:function(ca){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=ca}},shadowCameraBottom:{set:function(ca){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=ca}},shadowCameraNear:{set:function(ca){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=ca}},shadowCameraFar:{set:function(ca){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=ca}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(ca){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=ca}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(ca){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=ca}},shadowMapHeight:{set:function(ca){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=ca}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(ca){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(ca){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(ca)},addAttribute:function(ca,ga){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(ga&&ga.isBufferAttribute)&&!(ga&&ga.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(ca,new BufferAttribute(arguments[1],arguments[2]))):ca==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(ga),this):this.setAttribute(ca,ga)},addDrawCall:function(ca,ga,ya){ya!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(ca,ga)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(ca){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(ca)},applyMatrix:function(ca){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(ca)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(ca){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=ca}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(ca){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=ca}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(ca){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(ca)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(ca){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(ca===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(ca){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ca===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(ca){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=ca}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(ca){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=ca}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(ca,ga,ya,_a){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(ca),this.clear(ga,ya,_a)},animate:function(ca){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(ca)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(ca){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(ca)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=ca}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(ca){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=ca}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(ca){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=ca===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(ca,ga,ya){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(ca,ya)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=ca}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(ca){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=ca}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=ca}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(ca){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=ca}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(ca){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=ca}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(ca){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=ca}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(ca){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=ca}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(ca){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=ca}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(ca){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=ca}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(ca){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=ca}}});Object.defineProperties(Audio.prototype,{load:{value:function(ca){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var ga=this,ya=new AudioLoader;return ya.load(ca,function(_a){ga.setBuffer(_a)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(ca,ga){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(ca,ga)};var GeometryUtils={merge:function(ca,ga,ya){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var _a;ga.isMesh&&(ga.matrixAutoUpdate&&ga.updateMatrix(),_a=ga.matrix,ga=ga.geometry),ca.merge(ga,_a,ya)},center:function(ca){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),ca.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(ca,ga,ya,_a){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var _s=new TextureLoader;_s.setCrossOrigin(this.crossOrigin);var Ss=_s.load(ca,ya,void 0,_a);return ga&&(Ss.mapping=ga),Ss};ImageUtils.loadTextureCube=function(ca,ga,ya,_a){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var _s=new CubeTextureLoader;_s.setCrossOrigin(this.crossOrigin);var Ss=_s.load(ca,ya,void 0,_a);return ga&&(Ss.mapping=ga),Ss};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(three_module),tslib={exports:{}};(function(ca){var ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps,Rs,ks,$s,Os,Ls,Ds,Fs,Ns,Vs,Gs,Us,zs,Hs;(function(Qs){var js=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};Qs(Zs(js,Zs(ca.exports)));function Zs(Ks,Ys){return Ks!==js&&(typeof Object.create=="function"?Object.defineProperty(Ks,"__esModule",{value:!0}):Ks.__esModule=!0),function(qs,eu){return Ks[qs]=Ys?Ys(qs,eu):eu}}})(function(Qs){var js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ks,Ys){Ks.__proto__=Ys}||function(Ks,Ys){for(var qs in Ys)Object.prototype.hasOwnProperty.call(Ys,qs)&&(Ks[qs]=Ys[qs])};ga=function(Ks,Ys){if(typeof Ys!="function"&&Ys!==null)throw new TypeError("Class extends value "+String(Ys)+" is not a constructor or null");js(Ks,Ys);function qs(){this.constructor=Ks}Ks.prototype=Ys===null?Object.create(Ys):(qs.prototype=Ys.prototype,new qs)},ya=Object.assign||function(Ks){for(var Ys,qs=1,eu=arguments.length;qs<eu;qs++){Ys=arguments[qs];for(var Js in Ys)Object.prototype.hasOwnProperty.call(Ys,Js)&&(Ks[Js]=Ys[Js])}return Ks},_a=function(Ks,Ys){var qs={};for(var eu in Ks)Object.prototype.hasOwnProperty.call(Ks,eu)&&Ys.indexOf(eu)<0&&(qs[eu]=Ks[eu]);if(Ks!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Js=0,eu=Object.getOwnPropertySymbols(Ks);Js<eu.length;Js++)Ys.indexOf(eu[Js])<0&&Object.prototype.propertyIsEnumerable.call(Ks,eu[Js])&&(qs[eu[Js]]=Ks[eu[Js]]);return qs},_s=function(Ks,Ys,qs,eu){var Js=arguments.length,Xs=Js<3?Ys:eu===null?eu=Object.getOwnPropertyDescriptor(Ys,qs):eu,ru;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xs=Reflect.decorate(Ks,Ys,qs,eu);else for(var su=Ks.length-1;su>=0;su--)(ru=Ks[su])&&(Xs=(Js<3?ru(Xs):Js>3?ru(Ys,qs,Xs):ru(Ys,qs))||Xs);return Js>3&&Xs&&Object.defineProperty(Ys,qs,Xs),Xs},Ss=function(Ks,Ys){return function(qs,eu){Ys(qs,eu,Ks)}},Ms=function(Ks,Ys){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ks,Ys)},Es=function(Ks,Ys,qs,eu){function Js(Xs){return Xs instanceof qs?Xs:new qs(function(ru){ru(Xs)})}return new(qs||(qs=Promise))(function(Xs,ru){function su(xu){try{cu(eu.next(xu))}catch(bu){ru(bu)}}function lu(xu){try{cu(eu.throw(xu))}catch(bu){ru(bu)}}function cu(xu){xu.done?Xs(xu.value):Js(xu.value).then(su,lu)}cu((eu=eu.apply(Ks,Ys||[])).next())})},Cs=function(Ks,Ys){var qs={label:0,sent:function(){if(Xs[0]&1)throw Xs[1];return Xs[1]},trys:[],ops:[]},eu,Js,Xs,ru;return ru={next:su(0),throw:su(1),return:su(2)},typeof Symbol=="function"&&(ru[Symbol.iterator]=function(){return this}),ru;function su(cu){return function(xu){return lu([cu,xu])}}function lu(cu){if(eu)throw new TypeError("Generator is already executing.");for(;qs;)try{if(eu=1,Js&&(Xs=cu[0]&2?Js.return:cu[0]?Js.throw||((Xs=Js.return)&&Xs.call(Js),0):Js.next)&&!(Xs=Xs.call(Js,cu[1])).done)return Xs;switch(Js=0,Xs&&(cu=[cu[0]&2,Xs.value]),cu[0]){case 0:case 1:Xs=cu;break;case 4:return qs.label++,{value:cu[1],done:!1};case 5:qs.label++,Js=cu[1],cu=[0];continue;case 7:cu=qs.ops.pop(),qs.trys.pop();continue;default:if(Xs=qs.trys,!(Xs=Xs.length>0&&Xs[Xs.length-1])&&(cu[0]===6||cu[0]===2)){qs=0;continue}if(cu[0]===3&&(!Xs||cu[1]>Xs[0]&&cu[1]<Xs[3])){qs.label=cu[1];break}if(cu[0]===6&&qs.label<Xs[1]){qs.label=Xs[1],Xs=cu;break}if(Xs&&qs.label<Xs[2]){qs.label=Xs[2],qs.ops.push(cu);break}Xs[2]&&qs.ops.pop(),qs.trys.pop();continue}cu=Ys.call(Ks,qs)}catch(xu){cu=[6,xu],Js=0}finally{eu=Xs=0}if(cu[0]&5)throw cu[1];return{value:cu[0]?cu[1]:void 0,done:!0}}},Ts=function(Ks,Ys){for(var qs in Ks)qs!=="default"&&!Object.prototype.hasOwnProperty.call(Ys,qs)&&Hs(Ys,Ks,qs)},Hs=Object.create?function(Ks,Ys,qs,eu){eu===void 0&&(eu=qs);var Js=Object.getOwnPropertyDescriptor(Ys,qs);(!Js||("get"in Js?!Ys.__esModule:Js.writable||Js.configurable))&&(Js={enumerable:!0,get:function(){return Ys[qs]}}),Object.defineProperty(Ks,eu,Js)}:function(Ks,Ys,qs,eu){eu===void 0&&(eu=qs),Ks[eu]=Ys[qs]},Bs=function(Ks){var Ys=typeof Symbol=="function"&&Symbol.iterator,qs=Ys&&Ks[Ys],eu=0;if(qs)return qs.call(Ks);if(Ks&&typeof Ks.length=="number")return{next:function(){return Ks&&eu>=Ks.length&&(Ks=void 0),{value:Ks&&Ks[eu++],done:!Ks}}};throw new TypeError(Ys?"Object is not iterable.":"Symbol.iterator is not defined.")},Is=function(Ks,Ys){var qs=typeof Symbol=="function"&&Ks[Symbol.iterator];if(!qs)return Ks;var eu=qs.call(Ks),Js,Xs=[],ru;try{for(;(Ys===void 0||Ys-- >0)&&!(Js=eu.next()).done;)Xs.push(Js.value)}catch(su){ru={error:su}}finally{try{Js&&!Js.done&&(qs=eu.return)&&qs.call(eu)}finally{if(ru)throw ru.error}}return Xs},Ps=function(){for(var Ks=[],Ys=0;Ys<arguments.length;Ys++)Ks=Ks.concat(Is(arguments[Ys]));return Ks},Rs=function(){for(var Ks=0,Ys=0,qs=arguments.length;Ys<qs;Ys++)Ks+=arguments[Ys].length;for(var eu=Array(Ks),Js=0,Ys=0;Ys<qs;Ys++)for(var Xs=arguments[Ys],ru=0,su=Xs.length;ru<su;ru++,Js++)eu[Js]=Xs[ru];return eu},ks=function(Ks,Ys,qs){if(qs||arguments.length===2)for(var eu=0,Js=Ys.length,Xs;eu<Js;eu++)(Xs||!(eu in Ys))&&(Xs||(Xs=Array.prototype.slice.call(Ys,0,eu)),Xs[eu]=Ys[eu]);return Ks.concat(Xs||Array.prototype.slice.call(Ys))},$s=function(Ks){return this instanceof $s?(this.v=Ks,this):new $s(Ks)},Os=function(Ks,Ys,qs){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var eu=qs.apply(Ks,Ys||[]),Js,Xs=[];return Js={},ru("next"),ru("throw"),ru("return"),Js[Symbol.asyncIterator]=function(){return this},Js;function ru(yu){eu[yu]&&(Js[yu]=function(fu){return new Promise(function(gu,Su){Xs.push([yu,fu,gu,Su])>1||su(yu,fu)})})}function su(yu,fu){try{lu(eu[yu](fu))}catch(gu){bu(Xs[0][3],gu)}}function lu(yu){yu.value instanceof $s?Promise.resolve(yu.value.v).then(cu,xu):bu(Xs[0][2],yu)}function cu(yu){su("next",yu)}function xu(yu){su("throw",yu)}function bu(yu,fu){yu(fu),Xs.shift(),Xs.length&&su(Xs[0][0],Xs[0][1])}},Ls=function(Ks){var Ys,qs;return Ys={},eu("next"),eu("throw",function(Js){throw Js}),eu("return"),Ys[Symbol.iterator]=function(){return this},Ys;function eu(Js,Xs){Ys[Js]=Ks[Js]?function(ru){return(qs=!qs)?{value:$s(Ks[Js](ru)),done:Js==="return"}:Xs?Xs(ru):ru}:Xs}},Ds=function(Ks){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ys=Ks[Symbol.asyncIterator],qs;return Ys?Ys.call(Ks):(Ks=typeof Bs=="function"?Bs(Ks):Ks[Symbol.iterator](),qs={},eu("next"),eu("throw"),eu("return"),qs[Symbol.asyncIterator]=function(){return this},qs);function eu(Xs){qs[Xs]=Ks[Xs]&&function(ru){return new Promise(function(su,lu){ru=Ks[Xs](ru),Js(su,lu,ru.done,ru.value)})}}function Js(Xs,ru,su,lu){Promise.resolve(lu).then(function(cu){Xs({value:cu,done:su})},ru)}},Fs=function(Ks,Ys){return Object.defineProperty?Object.defineProperty(Ks,"raw",{value:Ys}):Ks.raw=Ys,Ks};var Zs=Object.create?function(Ks,Ys){Object.defineProperty(Ks,"default",{enumerable:!0,value:Ys})}:function(Ks,Ys){Ks.default=Ys};Ns=function(Ks){if(Ks&&Ks.__esModule)return Ks;var Ys={};if(Ks!=null)for(var qs in Ks)qs!=="default"&&Object.prototype.hasOwnProperty.call(Ks,qs)&&Hs(Ys,Ks,qs);return Zs(Ys,Ks),Ys},Vs=function(Ks){return Ks&&Ks.__esModule?Ks:{default:Ks}},Gs=function(Ks,Ys,qs,eu){if(qs==="a"&&!eu)throw new TypeError("Private accessor was defined without a getter");if(typeof Ys=="function"?Ks!==Ys||!eu:!Ys.has(Ks))throw new TypeError("Cannot read private member from an object whose class did not declare it");return qs==="m"?eu:qs==="a"?eu.call(Ks):eu?eu.value:Ys.get(Ks)},Us=function(Ks,Ys,qs,eu,Js){if(eu==="m")throw new TypeError("Private method is not writable");if(eu==="a"&&!Js)throw new TypeError("Private accessor was defined without a setter");if(typeof Ys=="function"?Ks!==Ys||!Js:!Ys.has(Ks))throw new TypeError("Cannot write private member to an object whose class did not declare it");return eu==="a"?Js.call(Ks,qs):Js?Js.value=qs:Ys.set(Ks,qs),qs},zs=function(Ks,Ys){if(Ys===null||typeof Ys!="object"&&typeof Ys!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ks=="function"?Ys===Ks:Ks.has(Ys)},Qs("__extends",ga),Qs("__assign",ya),Qs("__rest",_a),Qs("__decorate",_s),Qs("__param",Ss),Qs("__metadata",Ms),Qs("__awaiter",Es),Qs("__generator",Cs),Qs("__exportStar",Ts),Qs("__createBinding",Hs),Qs("__values",Bs),Qs("__read",Is),Qs("__spread",Ps),Qs("__spreadArrays",Rs),Qs("__spreadArray",ks),Qs("__await",$s),Qs("__asyncGenerator",Os),Qs("__asyncDelegator",Ls),Qs("__asyncValues",Ds),Qs("__makeTemplateObject",Fs),Qs("__importStar",Ns),Qs("__importDefault",Vs),Qs("__classPrivateFieldGet",Gs),Qs("__classPrivateFieldSet",Us),Qs("__classPrivateFieldIn",zs)})})(tslib);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(ca,ga){for(var ya=new Array(arguments.length-1),_a=0,_s=2,Ss=!0;_s<arguments.length;)ya[_a++]=arguments[_s++];return new Promise(function(Es,Cs){ya[_a]=function(Bs){if(Ss)if(Ss=!1,Bs)Cs(Bs);else{for(var Is=new Array(arguments.length-1),Ps=0;Ps<Is.length;)Is[Ps++]=arguments[Ps];Es.apply(null,Is)}};try{ca.apply(ga||null,ya)}catch(Ts){Ss&&(Ss=!1,Cs(Ts))}})}var base64$1={};(function(ca){var ga=ca;ga.length=function(Es){var Cs=Es.length;if(!Cs)return 0;for(var Ts=0;--Cs%4>1&&Es.charAt(Cs)==="=";)++Ts;return Math.ceil(Es.length*3)/4-Ts};for(var ya=new Array(64),_a=new Array(123),_s=0;_s<64;)_a[ya[_s]=_s<26?_s+65:_s<52?_s+71:_s<62?_s-4:_s-59|43]=_s++;ga.encode=function(Es,Cs,Ts){for(var Bs=null,Is=[],Ps=0,Rs=0,ks;Cs<Ts;){var $s=Es[Cs++];switch(Rs){case 0:Is[Ps++]=ya[$s>>2],ks=($s&3)<<4,Rs=1;break;case 1:Is[Ps++]=ya[ks|$s>>4],ks=($s&15)<<2,Rs=2;break;case 2:Is[Ps++]=ya[ks|$s>>6],Is[Ps++]=ya[$s&63],Rs=0;break}Ps>8191&&((Bs||(Bs=[])).push(String.fromCharCode.apply(String,Is)),Ps=0)}return Rs&&(Is[Ps++]=ya[ks],Is[Ps++]=61,Rs===1&&(Is[Ps++]=61)),Bs?(Ps&&Bs.push(String.fromCharCode.apply(String,Is.slice(0,Ps))),Bs.join("")):String.fromCharCode.apply(String,Is.slice(0,Ps))};var Ss="invalid encoding";ga.decode=function(Es,Cs,Ts){for(var Bs=Ts,Is=0,Ps,Rs=0;Rs<Es.length;){var ks=Es.charCodeAt(Rs++);if(ks===61&&Is>1)break;if((ks=_a[ks])===void 0)throw Error(Ss);switch(Is){case 0:Ps=ks,Is=1;break;case 1:Cs[Ts++]=Ps<<2|(ks&48)>>4,Ps=ks,Is=2;break;case 2:Cs[Ts++]=(Ps&15)<<4|(ks&60)>>2,Ps=ks,Is=3;break;case 3:Cs[Ts++]=(Ps&3)<<6|ks,Is=0;break}}if(Is===1)throw Error(Ss);return Ts-Bs},ga.test=function(Es){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Es)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(ga,ya,_a){return(this._listeners[ga]||(this._listeners[ga]=[])).push({fn:ya,ctx:_a||this}),this};EventEmitter.prototype.off=function(ga,ya){if(ga===void 0)this._listeners={};else if(ya===void 0)this._listeners[ga]=[];else for(var _a=this._listeners[ga],_s=0;_s<_a.length;)_a[_s].fn===ya?_a.splice(_s,1):++_s;return this};EventEmitter.prototype.emit=function(ga){var ya=this._listeners[ga];if(ya){for(var _a=[],_s=1;_s<arguments.length;)_a.push(arguments[_s++]);for(_s=0;_s<ya.length;)ya[_s].fn.apply(ya[_s++].ctx,_a)}return this};var float=factory(factory);function factory(ca){return typeof Float32Array!="undefined"?function(){var ga=new Float32Array([-0]),ya=new Uint8Array(ga.buffer),_a=ya[3]===128;function _s(Cs,Ts,Bs){ga[0]=Cs,Ts[Bs]=ya[0],Ts[Bs+1]=ya[1],Ts[Bs+2]=ya[2],Ts[Bs+3]=ya[3]}function Ss(Cs,Ts,Bs){ga[0]=Cs,Ts[Bs]=ya[3],Ts[Bs+1]=ya[2],Ts[Bs+2]=ya[1],Ts[Bs+3]=ya[0]}ca.writeFloatLE=_a?_s:Ss,ca.writeFloatBE=_a?Ss:_s;function Ms(Cs,Ts){return ya[0]=Cs[Ts],ya[1]=Cs[Ts+1],ya[2]=Cs[Ts+2],ya[3]=Cs[Ts+3],ga[0]}function Es(Cs,Ts){return ya[3]=Cs[Ts],ya[2]=Cs[Ts+1],ya[1]=Cs[Ts+2],ya[0]=Cs[Ts+3],ga[0]}ca.readFloatLE=_a?Ms:Es,ca.readFloatBE=_a?Es:Ms}():function(){function ga(_a,_s,Ss,Ms){var Es=_s<0?1:0;if(Es&&(_s=-_s),_s===0)_a(1/_s>0?0:2147483648,Ss,Ms);else if(isNaN(_s))_a(2143289344,Ss,Ms);else if(_s>34028234663852886e22)_a((Es<<31|2139095040)>>>0,Ss,Ms);else if(_s<11754943508222875e-54)_a((Es<<31|Math.round(_s/1401298464324817e-60))>>>0,Ss,Ms);else{var Cs=Math.floor(Math.log(_s)/Math.LN2),Ts=Math.round(_s*Math.pow(2,-Cs)*8388608)&8388607;_a((Es<<31|Cs+127<<23|Ts)>>>0,Ss,Ms)}}ca.writeFloatLE=ga.bind(null,writeUintLE),ca.writeFloatBE=ga.bind(null,writeUintBE);function ya(_a,_s,Ss){var Ms=_a(_s,Ss),Es=(Ms>>31)*2+1,Cs=Ms>>>23&255,Ts=Ms&8388607;return Cs===255?Ts?NaN:Es*(1/0):Cs===0?Es*1401298464324817e-60*Ts:Es*Math.pow(2,Cs-150)*(Ts+8388608)}ca.readFloatLE=ya.bind(null,readUintLE),ca.readFloatBE=ya.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var ga=new Float64Array([-0]),ya=new Uint8Array(ga.buffer),_a=ya[7]===128;function _s(Cs,Ts,Bs){ga[0]=Cs,Ts[Bs]=ya[0],Ts[Bs+1]=ya[1],Ts[Bs+2]=ya[2],Ts[Bs+3]=ya[3],Ts[Bs+4]=ya[4],Ts[Bs+5]=ya[5],Ts[Bs+6]=ya[6],Ts[Bs+7]=ya[7]}function Ss(Cs,Ts,Bs){ga[0]=Cs,Ts[Bs]=ya[7],Ts[Bs+1]=ya[6],Ts[Bs+2]=ya[5],Ts[Bs+3]=ya[4],Ts[Bs+4]=ya[3],Ts[Bs+5]=ya[2],Ts[Bs+6]=ya[1],Ts[Bs+7]=ya[0]}ca.writeDoubleLE=_a?_s:Ss,ca.writeDoubleBE=_a?Ss:_s;function Ms(Cs,Ts){return ya[0]=Cs[Ts],ya[1]=Cs[Ts+1],ya[2]=Cs[Ts+2],ya[3]=Cs[Ts+3],ya[4]=Cs[Ts+4],ya[5]=Cs[Ts+5],ya[6]=Cs[Ts+6],ya[7]=Cs[Ts+7],ga[0]}function Es(Cs,Ts){return ya[7]=Cs[Ts],ya[6]=Cs[Ts+1],ya[5]=Cs[Ts+2],ya[4]=Cs[Ts+3],ya[3]=Cs[Ts+4],ya[2]=Cs[Ts+5],ya[1]=Cs[Ts+6],ya[0]=Cs[Ts+7],ga[0]}ca.readDoubleLE=_a?Ms:Es,ca.readDoubleBE=_a?Es:Ms}():function(){function ga(_a,_s,Ss,Ms,Es,Cs){var Ts=Ms<0?1:0;if(Ts&&(Ms=-Ms),Ms===0)_a(0,Es,Cs+_s),_a(1/Ms>0?0:2147483648,Es,Cs+Ss);else if(isNaN(Ms))_a(0,Es,Cs+_s),_a(2146959360,Es,Cs+Ss);else if(Ms>17976931348623157e292)_a(0,Es,Cs+_s),_a((Ts<<31|2146435072)>>>0,Es,Cs+Ss);else{var Bs;if(Ms<22250738585072014e-324)Bs=Ms/5e-324,_a(Bs>>>0,Es,Cs+_s),_a((Ts<<31|Bs/4294967296)>>>0,Es,Cs+Ss);else{var Is=Math.floor(Math.log(Ms)/Math.LN2);Is===1024&&(Is=1023),Bs=Ms*Math.pow(2,-Is),_a(Bs*4503599627370496>>>0,Es,Cs+_s),_a((Ts<<31|Is+1023<<20|Bs*1048576&1048575)>>>0,Es,Cs+Ss)}}}ca.writeDoubleLE=ga.bind(null,writeUintLE,0,4),ca.writeDoubleBE=ga.bind(null,writeUintBE,4,0);function ya(_a,_s,Ss,Ms,Es){var Cs=_a(Ms,Es+_s),Ts=_a(Ms,Es+Ss),Bs=(Ts>>31)*2+1,Is=Ts>>>20&2047,Ps=4294967296*(Ts&1048575)+Cs;return Is===2047?Ps?NaN:Bs*(1/0):Is===0?Bs*5e-324*Ps:Bs*Math.pow(2,Is-1075)*(Ps+4503599627370496)}ca.readDoubleLE=ya.bind(null,readUintLE,0,4),ca.readDoubleBE=ya.bind(null,readUintBE,4,0)}(),ca}function writeUintLE(ca,ga,ya){ga[ya]=ca&255,ga[ya+1]=ca>>>8&255,ga[ya+2]=ca>>>16&255,ga[ya+3]=ca>>>24}function writeUintBE(ca,ga,ya){ga[ya]=ca>>>24,ga[ya+1]=ca>>>16&255,ga[ya+2]=ca>>>8&255,ga[ya+3]=ca&255}function readUintLE(ca,ga){return(ca[ga]|ca[ga+1]<<8|ca[ga+2]<<16|ca[ga+3]<<24)>>>0}function readUintBE(ca,ga){return(ca[ga]<<24|ca[ga+1]<<16|ca[ga+2]<<8|ca[ga+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(ca){}return null}var utf8$2={};(function(ca){var ga=ca;ga.length=function(_a){for(var _s=0,Ss=0,Ms=0;Ms<_a.length;++Ms)Ss=_a.charCodeAt(Ms),Ss<128?_s+=1:Ss<2048?_s+=2:(Ss&64512)===55296&&(_a.charCodeAt(Ms+1)&64512)===56320?(++Ms,_s+=4):_s+=3;return _s},ga.read=function(_a,_s,Ss){var Ms=Ss-_s;if(Ms<1)return"";for(var Es=null,Cs=[],Ts=0,Bs;_s<Ss;)Bs=_a[_s++],Bs<128?Cs[Ts++]=Bs:Bs>191&&Bs<224?Cs[Ts++]=(Bs&31)<<6|_a[_s++]&63:Bs>239&&Bs<365?(Bs=((Bs&7)<<18|(_a[_s++]&63)<<12|(_a[_s++]&63)<<6|_a[_s++]&63)-65536,Cs[Ts++]=55296+(Bs>>10),Cs[Ts++]=56320+(Bs&1023)):Cs[Ts++]=(Bs&15)<<12|(_a[_s++]&63)<<6|_a[_s++]&63,Ts>8191&&((Es||(Es=[])).push(String.fromCharCode.apply(String,Cs)),Ts=0);return Es?(Ts&&Es.push(String.fromCharCode.apply(String,Cs.slice(0,Ts))),Es.join("")):String.fromCharCode.apply(String,Cs.slice(0,Ts))},ga.write=function(_a,_s,Ss){for(var Ms=Ss,Es,Cs,Ts=0;Ts<_a.length;++Ts)Es=_a.charCodeAt(Ts),Es<128?_s[Ss++]=Es:Es<2048?(_s[Ss++]=Es>>6|192,_s[Ss++]=Es&63|128):(Es&64512)===55296&&((Cs=_a.charCodeAt(Ts+1))&64512)===56320?(Es=65536+((Es&1023)<<10)+(Cs&1023),++Ts,_s[Ss++]=Es>>18|240,_s[Ss++]=Es>>12&63|128,_s[Ss++]=Es>>6&63|128,_s[Ss++]=Es&63|128):(_s[Ss++]=Es>>12|224,_s[Ss++]=Es>>6&63|128,_s[Ss++]=Es&63|128);return Ss-Ms}})(utf8$2);var pool_1=pool;function pool(ca,ga,ya){var _a=ya||8192,_s=_a>>>1,Ss=null,Ms=_a;return function(Cs){if(Cs<1||Cs>_s)return ca(Cs);Ms+Cs>_a&&(Ss=ca(_a),Ms=0);var Ts=ga.call(Ss,Ms,Ms+=Cs);return Ms&7&&(Ms=(Ms|7)+1),Ts}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(ca,ga){this.lo=ca>>>0,this.hi=ga>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function ca(ga){if(ga===0)return zero;var ya=ga<0;ya&&(ga=-ga);var _a=ga>>>0,_s=(ga-_a)/4294967296>>>0;return ya&&(_s=~_s>>>0,_a=~_a>>>0,++_a>4294967295&&(_a=0,++_s>4294967295&&(_s=0))),new LongBits$2(_a,_s)};LongBits$2.from=function ca(ga){if(typeof ga=="number")return LongBits$2.fromNumber(ga);if(util$5.isString(ga))if(util$5.Long)ga=util$5.Long.fromString(ga);else return LongBits$2.fromNumber(parseInt(ga,10));return ga.low||ga.high?new LongBits$2(ga.low>>>0,ga.high>>>0):zero};LongBits$2.prototype.toNumber=function ca(ga){if(!ga&&this.hi>>>31){var ya=~this.lo+1>>>0,_a=~this.hi>>>0;return ya||(_a=_a+1>>>0),-(ya+_a*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function ca(ga){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(ga)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(ga)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function ca(ga){return ga===zeroHash?zero:new LongBits$2((charCodeAt.call(ga,0)|charCodeAt.call(ga,1)<<8|charCodeAt.call(ga,2)<<16|charCodeAt.call(ga,3)<<24)>>>0,(charCodeAt.call(ga,4)|charCodeAt.call(ga,5)<<8|charCodeAt.call(ga,6)<<16|charCodeAt.call(ga,7)<<24)>>>0)};LongBits$2.prototype.toHash=function ca(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function ca(){var ga=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ga)>>>0,this.lo=(this.lo<<1^ga)>>>0,this};LongBits$2.prototype.zzDecode=function ca(){var ga=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ga)>>>0,this.hi=(this.hi>>>1^ga)>>>0,this};LongBits$2.prototype.length=function ca(){var ga=this.lo,ya=(this.lo>>>28|this.hi<<4)>>>0,_a=this.hi>>>24;return _a===0?ya===0?ga<16384?ga<128?1:2:ga<2097152?3:4:ya<16384?ya<128?5:6:ya<2097152?7:8:_a<128?9:10};(function(ca){var ga=ca;ga.asPromise=aspromise,ga.base64=base64$1,ga.EventEmitter=eventemitter,ga.float=float,ga.inquire=inquire_1,ga.utf8=utf8$2,ga.pool=pool_1,ga.LongBits=longbits,ga.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),ga.global=ga.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,ga.emptyArray=Object.freeze?Object.freeze([]):[],ga.emptyObject=Object.freeze?Object.freeze({}):{},ga.isInteger=Number.isInteger||function(Ss){return typeof Ss=="number"&&isFinite(Ss)&&Math.floor(Ss)===Ss},ga.isString=function(Ss){return typeof Ss=="string"||Ss instanceof String},ga.isObject=function(Ss){return Ss&&typeof Ss=="object"},ga.isset=ga.isSet=function(Ss,Ms){var Es=Ss[Ms];return Es!=null&&Ss.hasOwnProperty(Ms)?typeof Es!="object"||(Array.isArray(Es)?Es.length:Object.keys(Es).length)>0:!1},ga.Buffer=function(){try{var _s=ga.inquire("buffer").Buffer;return _s.prototype.utf8Write?_s:null}catch{return null}}(),ga._Buffer_from=null,ga._Buffer_allocUnsafe=null,ga.newBuffer=function(Ss){return typeof Ss=="number"?ga.Buffer?ga._Buffer_allocUnsafe(Ss):new ga.Array(Ss):ga.Buffer?ga._Buffer_from(Ss):typeof Uint8Array=="undefined"?Ss:new Uint8Array(Ss)},ga.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,ga.Long=ga.global.dcodeIO&&ga.global.dcodeIO.Long||ga.global.Long||ga.inquire("long"),ga.key2Re=/^true|false|0|1$/,ga.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ga.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ga.longToHash=function(Ss){return Ss?ga.LongBits.from(Ss).toHash():ga.LongBits.zeroHash},ga.longFromHash=function(Ss,Ms){var Es=ga.LongBits.fromHash(Ss);return ga.Long?ga.Long.fromBits(Es.lo,Es.hi,Ms):Es.toNumber(Boolean(Ms))};function ya(_s,Ss,Ms){for(var Es=Object.keys(Ss),Cs=0;Cs<Es.length;++Cs)(_s[Es[Cs]]===void 0||!Ms)&&(_s[Es[Cs]]=Ss[Es[Cs]]);return _s}ga.merge=ya,ga.lcFirst=function(Ss){return Ss.charAt(0).toLowerCase()+Ss.substring(1)};function _a(_s){function Ss(Ms,Es){if(!(this instanceof Ss))return new Ss(Ms,Es);Object.defineProperty(this,"message",{get:function(){return Ms}}),Error.captureStackTrace?Error.captureStackTrace(this,Ss):Object.defineProperty(this,"stack",{value:new Error().stack||""}),Es&&ya(this,Es)}return(Ss.prototype=Object.create(Error.prototype)).constructor=Ss,Object.defineProperty(Ss.prototype,"name",{get:function(){return _s}}),Ss.prototype.toString=function(){return this.name+": "+this.message},Ss}ga.newError=_a,ga.ProtocolError=_a("ProtocolError"),ga.oneOfGetter=function(Ss){for(var Ms={},Es=0;Es<Ss.length;++Es)Ms[Ss[Es]]=1;return function(){for(var Cs=Object.keys(this),Ts=Cs.length-1;Ts>-1;--Ts)if(Ms[Cs[Ts]]===1&&this[Cs[Ts]]!==void 0&&this[Cs[Ts]]!==null)return Cs[Ts]}},ga.oneOfSetter=function(Ss){return function(Ms){for(var Es=0;Es<Ss.length;++Es)Ss[Es]!==Ms&&delete this[Ss[Es]]}},ga.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ga._configure=function(){var _s=ga.Buffer;if(!_s){ga._Buffer_from=ga._Buffer_allocUnsafe=null;return}ga._Buffer_from=_s.from!==Uint8Array.from&&_s.from||function(Ms,Es){return new _s(Ms,Es)},ga._Buffer_allocUnsafe=_s.allocUnsafe||function(Ms){return new _s(Ms)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(ca,ga,ya){this.fn=ca,this.len=ga,this.next=void 0,this.val=ya}function noop(){}function State(ca){this.head=ca.head,this.tail=ca.tail,this.len=ca.len,this.next=ca.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function ca(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function ca(ga){return new util$4.Array(ga)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function ca(ga,ya,_a){return this.tail=this.tail.next=new Op(ga,ya,_a),this.len+=ya,this};function writeByte(ca,ga,ya){ga[ya]=ca&255}function writeVarint32(ca,ga,ya){for(;ca>127;)ga[ya++]=ca&127|128,ca>>>=7;ga[ya]=ca}function VarintOp(ca,ga){this.len=ca,this.next=void 0,this.val=ga}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function ca(ga){return this.len+=(this.tail=this.tail.next=new VarintOp((ga=ga>>>0)<128?1:ga<16384?2:ga<2097152?3:ga<268435456?4:5,ga)).len,this};Writer$1.prototype.int32=function ca(ga){return ga<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ga)):this.uint32(ga)};Writer$1.prototype.sint32=function ca(ga){return this.uint32((ga<<1^ga>>31)>>>0)};function writeVarint64(ca,ga,ya){for(;ca.hi;)ga[ya++]=ca.lo&127|128,ca.lo=(ca.lo>>>7|ca.hi<<25)>>>0,ca.hi>>>=7;for(;ca.lo>127;)ga[ya++]=ca.lo&127|128,ca.lo=ca.lo>>>7;ga[ya++]=ca.lo}Writer$1.prototype.uint64=function ca(ga){var ya=LongBits$1.from(ga);return this._push(writeVarint64,ya.length(),ya)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function ca(ga){var ya=LongBits$1.from(ga).zzEncode();return this._push(writeVarint64,ya.length(),ya)};Writer$1.prototype.bool=function ca(ga){return this._push(writeByte,1,ga?1:0)};function writeFixed32(ca,ga,ya){ga[ya]=ca&255,ga[ya+1]=ca>>>8&255,ga[ya+2]=ca>>>16&255,ga[ya+3]=ca>>>24}Writer$1.prototype.fixed32=function ca(ga){return this._push(writeFixed32,4,ga>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function ca(ga){var ya=LongBits$1.from(ga);return this._push(writeFixed32,4,ya.lo)._push(writeFixed32,4,ya.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function ca(ga){return this._push(util$4.float.writeFloatLE,4,ga)};Writer$1.prototype.double=function ca(ga){return this._push(util$4.float.writeDoubleLE,8,ga)};var writeBytes=util$4.Array.prototype.set?function ca(ga,ya,_a){ya.set(ga,_a)}:function ca(ga,ya,_a){for(var _s=0;_s<ga.length;++_s)ya[_a+_s]=ga[_s]};Writer$1.prototype.bytes=function ca(ga){var ya=ga.length>>>0;if(!ya)return this._push(writeByte,1,0);if(util$4.isString(ga)){var _a=Writer$1.alloc(ya=base64.length(ga));base64.decode(ga,_a,0),ga=_a}return this.uint32(ya)._push(writeBytes,ya,ga)};Writer$1.prototype.string=function ca(ga){var ya=utf8$1.length(ga);return ya?this.uint32(ya)._push(utf8$1.write,ya,ga):this._push(writeByte,1,0)};Writer$1.prototype.fork=function ca(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function ca(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function ca(){var ga=this.head,ya=this.tail,_a=this.len;return this.reset().uint32(_a),_a&&(this.tail.next=ga.next,this.tail=ya,this.len+=_a),this};Writer$1.prototype.finish=function ca(){for(var ga=this.head.next,ya=this.constructor.alloc(this.len),_a=0;ga;)ga.fn(ga.val,ya,_a),_a+=ga.len,ga=ga.next;return ya};Writer$1._configure=function(ca){BufferWriter$1=ca,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(ga,ya,_a){ya.set(ga,_a)}:function(ga,ya,_a){if(ga.copy)ga.copy(ya,_a,0,ga.length);else for(var _s=0;_s<ga.length;)ya[_a++]=ga[_s++]}};BufferWriter.prototype.bytes=function ca(ga){util$3.isString(ga)&&(ga=util$3._Buffer_from(ga,"base64"));var ya=ga.length>>>0;return this.uint32(ya),ya&&this._push(BufferWriter.writeBytesBuffer,ya,ga),this};function writeStringBuffer(ca,ga,ya){ca.length<40?util$3.utf8.write(ca,ga,ya):ga.utf8Write?ga.utf8Write(ca,ya):ga.write(ca,ya)}BufferWriter.prototype.string=function ca(ga){var ya=util$3.Buffer.byteLength(ga);return this.uint32(ya),ya&&this._push(writeStringBuffer,ya,ga),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(ca,ga){return RangeError("index out of range: "+ca.pos+" + "+(ga||1)+" > "+ca.len)}function Reader$1(ca){this.buf=ca,this.pos=0,this.len=ca.length}var create_array=typeof Uint8Array!="undefined"?function ca(ga){if(ga instanceof Uint8Array||Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")}:function ca(ga){if(Array.isArray(ga))return new Reader$1(ga);throw Error("illegal buffer")},create=function ca(){return util$2.Buffer?function(ya){return(Reader$1.create=function(_s){return util$2.Buffer.isBuffer(_s)?new BufferReader$1(_s):create_array(_s)})(ya)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function ca(){var ga=4294967295;return function(){if(ga=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ga=(ga|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ga=(ga|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ga;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ga}}();Reader$1.prototype.int32=function ca(){return this.uint32()|0};Reader$1.prototype.sint32=function ca(){var ga=this.uint32();return ga>>>1^-(ga&1)|0};function readLongVarint(){var ca=new LongBits(0,0),ga=0;if(this.len-this.pos>4){for(;ga<4;++ga)if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca;if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<28)>>>0,ca.hi=(ca.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return ca;ga=0}else{for(;ga<3;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.lo=(ca.lo|(this.buf[this.pos]&127)<<ga*7)>>>0,this.buf[this.pos++]<128)return ca}return ca.lo=(ca.lo|(this.buf[this.pos++]&127)<<ga*7)>>>0,ca}if(this.len-this.pos>4){for(;ga<5;++ga)if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}else for(;ga<5;++ga){if(this.pos>=this.len)throw indexOutOfRange(this);if(ca.hi=(ca.hi|(this.buf[this.pos]&127)<<ga*7+3)>>>0,this.buf[this.pos++]<128)return ca}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function ca(){return this.uint32()!==0};function readFixed32_end(ca,ga){return(ca[ga-4]|ca[ga-3]<<8|ca[ga-2]<<16|ca[ga-1]<<24)>>>0}Reader$1.prototype.fixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function ca(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ga};Reader$1.prototype.double=function ca(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ga=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ga};Reader$1.prototype.bytes=function ca(){var ga=this.uint32(),ya=this.pos,_a=this.pos+ga;if(_a>this.len)throw indexOutOfRange(this,ga);return this.pos+=ga,Array.isArray(this.buf)?this.buf.slice(ya,_a):ya===_a?new this.buf.constructor(0):this._slice.call(this.buf,ya,_a)};Reader$1.prototype.string=function ca(){var ga=this.bytes();return utf8.read(ga,0,ga.length)};Reader$1.prototype.skip=function ca(ga){if(typeof ga=="number"){if(this.pos+ga>this.len)throw indexOutOfRange(this,ga);this.pos+=ga}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(ca){switch(ca){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ca=this.uint32()&7)!==4;)this.skipType(ca);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ca+" at offset "+this.pos)}return this};Reader$1._configure=function(ca){BufferReader$1=ca,Reader$1.create=create(),BufferReader$1._configure();var ga=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ga](!1)},uint64:function(){return readLongVarint.call(this)[ga](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ga](!1)},fixed64:function(){return readFixed64.call(this)[ga](!0)},sfixed64:function(){return readFixed64.call(this)[ga](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(ca){Reader.call(this,ca)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function ca(){var ga=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ga,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ga,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(ca,ga,ya){if(typeof ca!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=ca,this.requestDelimited=Boolean(ga),this.responseDelimited=Boolean(ya)}Service.prototype.rpcCall=function ca(ga,ya,_a,_s,Ss){if(!_s)throw TypeError("request must be specified");var Ms=this;if(!Ss)return util.asPromise(ca,Ms,ga,ya,_a,_s);if(!Ms.rpcImpl){setTimeout(function(){Ss(Error("already ended"))},0);return}try{return Ms.rpcImpl(ga,ya[Ms.requestDelimited?"encodeDelimited":"encode"](_s).finish(),function(Cs,Ts){if(Cs)return Ms.emit("error",Cs,ga),Ss(Cs);if(Ts===null){Ms.end(!0);return}if(!(Ts instanceof _a))try{Ts=_a[Ms.responseDelimited?"decodeDelimited":"decode"](Ts)}catch(Bs){return Ms.emit("error",Bs,ga),Ss(Bs)}return Ms.emit("data",Ts,ga),Ss(null,Ts)})}catch(Es){Ms.emit("error",Es,ga),setTimeout(function(){Ss(Es)},0);return}};Service.prototype.end=function ca(ga){return this.rpcImpl&&(ga||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(ca){var ga=ca;ga.Service=service})(rpc);var roots={};(function(ca){var ga=ca;ga.build="minimal",ga.Writer=writer,ga.BufferWriter=writer_buffer,ga.Reader=reader,ga.BufferReader=reader_buffer,ga.util=minimal$1,ga.rpc=rpc,ga.roots=roots,ga.configure=ya;function ya(){ga.util._configure(),ga.Writer._configure(ga.BufferWriter),ga.Reader._configure(ga.BufferReader)}ya()})(indexMinimal);var minimal=indexMinimal,parseWork,Five;Object.defineProperty(five,"__esModule",{value:!0});var t$1=require$$2$1,e$1=tslib.exports,i$1=minimal;function n$2(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(ya){if(ya!=="default"){var _a=Object.getOwnPropertyDescriptor(ca,ya);Object.defineProperty(ga,ya,_a.get?_a:{enumerable:!0,get:function(){return ca[ya]}})}}),ga.default=ca,Object.freeze(ga)}var r$1=n$2(t$1),o$1=n$2(i$1),s$1=Number(r$1.REVISION);if(s$1<115||s$1>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$1,u$1={},l$2={},h$1=h$1||function(ca,ga){var ya={},_a=ya.lib={},_s=_a.Base=function(){function Ps(){}return{extend:function(Rs){Ps.prototype=this;var ks=new Ps;return Rs&&ks.mixIn(Rs),ks.hasOwnProperty("init")||(ks.init=function(){ks.$super.init.apply(this,arguments)}),ks.init.prototype=ks,ks.$super=this,ks},create:function(){var Rs=this.extend();return Rs.init.apply(Rs,arguments),Rs},init:function(){},mixIn:function(Rs){for(var ks in Rs)Rs.hasOwnProperty(ks)&&(this[ks]=Rs[ks]);Rs.hasOwnProperty("toString")&&(this.toString=Rs.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ss=_a.WordArray=_s.extend({init:function(Ps,Rs){Ps=this.words=Ps||[],this.sigBytes=Rs!=null?Rs:4*Ps.length},toString:function(Ps){return(Ps||Es).stringify(this)},concat:function(Ps){var Rs=this.words,ks=Ps.words,$s=this.sigBytes,Os=Ps.sigBytes;if(this.clamp(),$s%4)for(var Ls=0;Ls<Os;Ls++){var Ds=ks[Ls>>>2]>>>24-Ls%4*8&255;Rs[$s+Ls>>>2]|=Ds<<24-($s+Ls)%4*8}else for(Ls=0;Ls<Os;Ls+=4)Rs[$s+Ls>>>2]=ks[Ls>>>2];return this.sigBytes+=Os,this},clamp:function(){var Ps=this.words,Rs=this.sigBytes;Ps[Rs>>>2]&=4294967295<<32-Rs%4*8,Ps.length=ca.ceil(Rs/4)},clone:function(){var Ps=_s.clone.call(this);return Ps.words=this.words.slice(0),Ps},random:function(Ps){for(var Rs=[],ks=0;ks<Ps;ks+=4)Rs.push(4294967296*ca.random()|0);return new Ss.init(Rs,Ps)}}),Ms=ya.enc={},Es=Ms.Hex={stringify:function(Ps){for(var Rs=Ps.words,ks=Ps.sigBytes,$s=[],Os=0;Os<ks;Os++){var Ls=Rs[Os>>>2]>>>24-Os%4*8&255;$s.push((Ls>>>4).toString(16)),$s.push((15&Ls).toString(16))}return $s.join("")},parse:function(Ps){for(var Rs=Ps.length,ks=[],$s=0;$s<Rs;$s+=2)ks[$s>>>3]|=parseInt(Ps.substr($s,2),16)<<24-$s%8*4;return new Ss.init(ks,Rs/2)}},Cs=Ms.Latin1={stringify:function(Ps){for(var Rs=Ps.words,ks=Ps.sigBytes,$s=[],Os=0;Os<ks;Os++){var Ls=Rs[Os>>>2]>>>24-Os%4*8&255;$s.push(String.fromCharCode(Ls))}return $s.join("")},parse:function(Ps){for(var Rs=Ps.length,ks=[],$s=0;$s<Rs;$s++)ks[$s>>>2]|=(255&Ps.charCodeAt($s))<<24-$s%4*8;return new Ss.init(ks,Rs)}},Ts=Ms.Utf8={stringify:function(Ps){try{return decodeURIComponent(escape(Cs.stringify(Ps)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ps){return Cs.parse(unescape(encodeURIComponent(Ps)))}},Bs=_a.BufferedBlockAlgorithm=_s.extend({reset:function(){this._data=new Ss.init,this._nDataBytes=0},_append:function(Ps){typeof Ps=="string"&&(Ps=Ts.parse(Ps)),this._data.concat(Ps),this._nDataBytes+=Ps.sigBytes},_process:function(Ps){var Rs=this._data,ks=Rs.words,$s=Rs.sigBytes,Os=this.blockSize,Ls=$s/(4*Os),Ds=(Ls=Ps?ca.ceil(Ls):ca.max((0|Ls)-this._minBufferSize,0))*Os,Fs=ca.min(4*Ds,$s);if(Ds){for(var Ns=0;Ns<Ds;Ns+=Os)this._doProcessBlock(ks,Ns);var Vs=ks.splice(0,Ds);Rs.sigBytes-=Fs}return new Ss.init(Vs,Fs)},clone:function(){var Ps=_s.clone.call(this);return Ps._data=this._data.clone(),Ps},_minBufferSize:0});_a.Hasher=Bs.extend({cfg:_s.extend(),init:function(Ps){this.cfg=this.cfg.extend(Ps),this.reset()},reset:function(){Bs.reset.call(this),this._doReset()},update:function(Ps){return this._append(Ps),this._process(),this},finalize:function(Ps){return Ps&&this._append(Ps),this._doFinalize()},blockSize:16,_createHelper:function(Ps){return function(Rs,ks){return new Ps.init(ks).finalize(Rs)}},_createHmacHelper:function(Ps){return function(Rs,ks){return new Is.HMAC.init(Ps,ks).finalize(Rs)}}});var Is=ya.algo={};return ya}(Math);function c$1(ca,ga,ya){ca!=null&&(typeof ca=="number"?this.fromNumber(ca,ga,ya):ga==null&&typeof ca!="string"?this.fromString(ca,256):this.fromString(ca,ga))}function d$1(){return new c$1(null)}(function(ca){for(var ga=h$1,ya=(_s=ga.lib).WordArray,_a=_s.Hasher,_s=ga.algo,Ss=[],Ms=[],Es=function(ks){return 4294967296*(ks-(0|ks))|0},Cs=2,Ts=0;64>Ts;){var Bs;e:{Bs=Cs;for(var Is=ca.sqrt(Bs),Ps=2;Ps<=Is;Ps++)if(!(Bs%Ps)){Bs=!1;break e}Bs=!0}Bs&&(8>Ts&&(Ss[Ts]=Es(ca.pow(Cs,.5))),Ms[Ts]=Es(ca.pow(Cs,1/3)),Ts++),Cs++}var Rs=[];_s=_s.SHA256=_a.extend({_doReset:function(){this._hash=new ya.init(Ss.slice(0))},_doProcessBlock:function(ks,$s){for(var Os=this._hash.words,Ls=Os[0],Ds=Os[1],Fs=Os[2],Ns=Os[3],Vs=Os[4],Gs=Os[5],Us=Os[6],zs=Os[7],Hs=0;64>Hs;Hs++){if(16>Hs)Rs[Hs]=0|ks[$s+Hs];else{var Qs=Rs[Hs-15],js=Rs[Hs-2];Rs[Hs]=((Qs<<25|Qs>>>7)^(Qs<<14|Qs>>>18)^Qs>>>3)+Rs[Hs-7]+((js<<15|js>>>17)^(js<<13|js>>>19)^js>>>10)+Rs[Hs-16]}Qs=zs+((Vs<<26|Vs>>>6)^(Vs<<21|Vs>>>11)^(Vs<<7|Vs>>>25))+(Vs&Gs^~Vs&Us)+Ms[Hs]+Rs[Hs],js=((Ls<<30|Ls>>>2)^(Ls<<19|Ls>>>13)^(Ls<<10|Ls>>>22))+(Ls&Ds^Ls&Fs^Ds&Fs),zs=Us,Us=Gs,Gs=Vs,Vs=Ns+Qs|0,Ns=Fs,Fs=Ds,Ds=Ls,Ls=Qs+js|0}Os[0]=Os[0]+Ls|0,Os[1]=Os[1]+Ds|0,Os[2]=Os[2]+Fs|0,Os[3]=Os[3]+Ns|0,Os[4]=Os[4]+Vs|0,Os[5]=Os[5]+Gs|0,Os[6]=Os[6]+Us|0,Os[7]=Os[7]+zs|0},_doFinalize:function(){var ks=this._data,$s=ks.words,Os=8*this._nDataBytes,Ls=8*ks.sigBytes;return $s[Ls>>>5]|=128<<24-Ls%32,$s[14+(Ls+64>>>9<<4)]=ca.floor(Os/4294967296),$s[15+(Ls+64>>>9<<4)]=Os,ks.sigBytes=4*$s.length,this._process(),this._hash},clone:function(){var ks=_a.clone.call(this);return ks._hash=this._hash.clone(),ks}}),ga.SHA256=_a._createHelper(_s),ga.HmacSHA256=_a._createHmacHelper(_s)})(Math),h$1.lib.Cipher||function(ca){var ga=(Rs=h$1).lib,ya=ga.Base,_a=ga.WordArray,_s=ga.BufferedBlockAlgorithm,Ss=Rs.enc.Base64,Ms=Rs.algo.EvpKDF,Es=ga.Cipher=_s.extend({cfg:ya.extend(),createEncryptor:function($s,Os){return this.create(this._ENC_XFORM_MODE,$s,Os)},createDecryptor:function($s,Os){return this.create(this._DEC_XFORM_MODE,$s,Os)},init:function($s,Os,Ls){this.cfg=this.cfg.extend(Ls),this._xformMode=$s,this._key=Os,this.reset()},reset:function(){_s.reset.call(this),this._doReset()},process:function($s){return this._append($s),this._process()},finalize:function($s){return $s&&this._append($s),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function($s){return{encrypt:function(Os,Ls,Ds){return(typeof Ls=="string"?ks:Ps).encrypt($s,Os,Ls,Ds)},decrypt:function(Os,Ls,Ds){return(typeof Ls=="string"?ks:Ps).decrypt($s,Os,Ls,Ds)}}}});ga.StreamCipher=Es.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Cs=Rs.mode={},Ts=function($s,Os,Ls){var Ds=this._iv;Ds?this._iv=void 0:Ds=this._prevBlock;for(var Fs=0;Fs<Ls;Fs++)$s[Os+Fs]^=Ds[Fs]},Bs=(ga.BlockCipherMode=ya.extend({createEncryptor:function($s,Os){return this.Encryptor.create($s,Os)},createDecryptor:function($s,Os){return this.Decryptor.create($s,Os)},init:function($s,Os){this._cipher=$s,this._iv=Os}})).extend();Bs.Encryptor=Bs.extend({processBlock:function($s,Os){var Ls=this._cipher,Ds=Ls.blockSize;Ts.call(this,$s,Os,Ds),Ls.encryptBlock($s,Os),this._prevBlock=$s.slice(Os,Os+Ds)}}),Bs.Decryptor=Bs.extend({processBlock:function($s,Os){var Ls=this._cipher,Ds=Ls.blockSize,Fs=$s.slice(Os,Os+Ds);Ls.decryptBlock($s,Os),Ts.call(this,$s,Os,Ds),this._prevBlock=Fs}}),Cs=Cs.CBC=Bs,Bs=(Rs.pad={}).Pkcs7={pad:function($s,Os){for(var Ls,Ds=(Ls=(Ls=4*Os)-$s.sigBytes%Ls)<<24|Ls<<16|Ls<<8|Ls,Fs=[],Ns=0;Ns<Ls;Ns+=4)Fs.push(Ds);Ls=_a.create(Fs,Ls),$s.concat(Ls)},unpad:function($s){$s.sigBytes-=255&$s.words[$s.sigBytes-1>>>2]}},ga.BlockCipher=Es.extend({cfg:Es.cfg.extend({mode:Cs,padding:Bs}),reset:function(){Es.reset.call(this);var $s=(Os=this.cfg).iv,Os=Os.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Ls=Os.createEncryptor;else Ls=Os.createDecryptor,this._minBufferSize=1;this._mode=Ls.call(Os,this,$s&&$s.words)},_doProcessBlock:function($s,Os){this._mode.processBlock($s,Os)},_doFinalize:function(){var $s=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){$s.pad(this._data,this.blockSize);var Os=this._process(!0)}else Os=this._process(!0),$s.unpad(Os);return Os},blockSize:4});var Is=ga.CipherParams=ya.extend({init:function($s){this.mixIn($s)},toString:function($s){return($s||this.formatter).stringify(this)}}),Ps=(Cs=(Rs.format={}).OpenSSL={stringify:function($s){var Os=$s.ciphertext;return(($s=$s.salt)?_a.create([1398893684,1701076831]).concat($s).concat(Os):Os).toString(Ss)},parse:function($s){var Os=($s=Ss.parse($s)).words;if(Os[0]==1398893684&&Os[1]==1701076831){var Ls=_a.create(Os.slice(2,4));Os.splice(0,4),$s.sigBytes-=16}return Is.create({ciphertext:$s,salt:Ls})}},ga.SerializableCipher=ya.extend({cfg:ya.extend({format:Cs}),encrypt:function($s,Os,Ls,Ds){Ds=this.cfg.extend(Ds);var Fs=$s.createEncryptor(Ls,Ds);return Os=Fs.finalize(Os),Fs=Fs.cfg,Is.create({ciphertext:Os,key:Ls,iv:Fs.iv,algorithm:$s,mode:Fs.mode,padding:Fs.padding,blockSize:$s.blockSize,formatter:Ds.format})},decrypt:function($s,Os,Ls,Ds){return Ds=this.cfg.extend(Ds),Os=this._parse(Os,Ds.format),$s.createDecryptor(Ls,Ds).finalize(Os.ciphertext)},_parse:function($s,Os){return typeof $s=="string"?Os.parse($s,this):$s}})),Rs=(Rs.kdf={}).OpenSSL={execute:function($s,Os,Ls,Ds){return Ds||(Ds=_a.random(8)),$s=Ms.create({keySize:Os+Ls}).compute($s,Ds),Ls=_a.create($s.words.slice(Os),4*Ls),$s.sigBytes=4*Os,Is.create({key:$s,iv:Ls,salt:Ds})}},ks=ga.PasswordBasedCipher=Ps.extend({cfg:Ps.cfg.extend({kdf:Rs}),encrypt:function($s,Os,Ls,Ds){return Ls=(Ds=this.cfg.extend(Ds)).kdf.execute(Ls,$s.keySize,$s.ivSize),Ds.iv=Ls.iv,($s=Ps.encrypt.call(this,$s,Os,Ls.key,Ds)).mixIn(Ls),$s},decrypt:function($s,Os,Ls,Ds){return Ds=this.cfg.extend(Ds),Os=this._parse(Os,Ds.format),Ls=Ds.kdf.execute(Ls,$s.keySize,$s.ivSize,Os.salt),Ds.iv=Ls.iv,Ps.decrypt.call(this,$s,Os,Ls.key,Ds)}})}(),function(){for(var ca=h$1,ga=ca.lib.BlockCipher,ya=ca.algo,_a=[],_s=[],Ss=[],Ms=[],Es=[],Cs=[],Ts=[],Bs=[],Is=[],Ps=[],Rs=[],ks=0;256>ks;ks++)Rs[ks]=128>ks?ks<<1:ks<<1^283;var $s=0,Os=0;for(ks=0;256>ks;ks++){var Ls=(Ls=Os^Os<<1^Os<<2^Os<<3^Os<<4)>>>8^255&Ls^99;_a[$s]=Ls,_s[Ls]=$s;var Ds=Rs[$s],Fs=Rs[Ds],Ns=Rs[Fs],Vs=257*Rs[Ls]^16843008*Ls;Ss[$s]=Vs<<24|Vs>>>8,Ms[$s]=Vs<<16|Vs>>>16,Es[$s]=Vs<<8|Vs>>>24,Cs[$s]=Vs,Vs=16843009*Ns^65537*Fs^257*Ds^16843008*$s,Ts[Ls]=Vs<<24|Vs>>>8,Bs[Ls]=Vs<<16|Vs>>>16,Is[Ls]=Vs<<8|Vs>>>24,Ps[Ls]=Vs,$s?($s=Ds^Rs[Rs[Rs[Ns^Ds]]],Os^=Rs[Rs[Os]]):$s=Os=1}var Gs=[0,1,2,4,8,16,32,64,128,27,54];ya=ya.AES=ga.extend({_doReset:function(){for(var Us=(Hs=this._key).words,zs=Hs.sigBytes/4,Hs=4*((this._nRounds=zs+6)+1),Qs=this._keySchedule=[],js=0;js<Hs;js++)if(js<zs)Qs[js]=Us[js];else{var Zs=Qs[js-1];js%zs?6<zs&&js%zs==4&&(Zs=_a[Zs>>>24]<<24|_a[Zs>>>16&255]<<16|_a[Zs>>>8&255]<<8|_a[255&Zs]):(Zs=_a[(Zs=Zs<<8|Zs>>>24)>>>24]<<24|_a[Zs>>>16&255]<<16|_a[Zs>>>8&255]<<8|_a[255&Zs],Zs^=Gs[js/zs|0]<<24),Qs[js]=Qs[js-zs]^Zs}for(Us=this._invKeySchedule=[],zs=0;zs<Hs;zs++)js=Hs-zs,Zs=zs%4?Qs[js]:Qs[js-4],Us[zs]=4>zs||4>=js?Zs:Ts[_a[Zs>>>24]]^Bs[_a[Zs>>>16&255]]^Is[_a[Zs>>>8&255]]^Ps[_a[255&Zs]]},encryptBlock:function(Us,zs){this._doCryptBlock(Us,zs,this._keySchedule,Ss,Ms,Es,Cs,_a)},decryptBlock:function(Us,zs){var Hs=Us[zs+1];Us[zs+1]=Us[zs+3],Us[zs+3]=Hs,this._doCryptBlock(Us,zs,this._invKeySchedule,Ts,Bs,Is,Ps,_s),Hs=Us[zs+1],Us[zs+1]=Us[zs+3],Us[zs+3]=Hs},_doCryptBlock:function(Us,zs,Hs,Qs,js,Zs,Ks,Ys){for(var qs=this._nRounds,eu=Us[zs]^Hs[0],Js=Us[zs+1]^Hs[1],Xs=Us[zs+2]^Hs[2],ru=Us[zs+3]^Hs[3],su=4,lu=1;lu<qs;lu++){var cu=Qs[eu>>>24]^js[Js>>>16&255]^Zs[Xs>>>8&255]^Ks[255&ru]^Hs[su++],xu=Qs[Js>>>24]^js[Xs>>>16&255]^Zs[ru>>>8&255]^Ks[255&eu]^Hs[su++],bu=Qs[Xs>>>24]^js[ru>>>16&255]^Zs[eu>>>8&255]^Ks[255&Js]^Hs[su++];ru=Qs[ru>>>24]^js[eu>>>16&255]^Zs[Js>>>8&255]^Ks[255&Xs]^Hs[su++],eu=cu,Js=xu,Xs=bu}cu=(Ys[eu>>>24]<<24|Ys[Js>>>16&255]<<16|Ys[Xs>>>8&255]<<8|Ys[255&ru])^Hs[su++],xu=(Ys[Js>>>24]<<24|Ys[Xs>>>16&255]<<16|Ys[ru>>>8&255]<<8|Ys[255&eu])^Hs[su++],bu=(Ys[Xs>>>24]<<24|Ys[ru>>>16&255]<<16|Ys[eu>>>8&255]<<8|Ys[255&Js])^Hs[su++],ru=(Ys[ru>>>24]<<24|Ys[eu>>>16&255]<<16|Ys[Js>>>8&255]<<8|Ys[255&Xs])^Hs[su++],Us[zs]=cu,Us[zs+1]=xu,Us[zs+2]=bu,Us[zs+3]=ru},keySize:8}),ca.AES=ga._createHelper(ya)}(),l$2.lang={extend:function(ca,ga,ya){if(!ga||!ca)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var _a=function(){};if(_a.prototype=ga.prototype,ca.prototype=new _a,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga),ya){var _s;for(_s in ya)ca.prototype[_s]=ya[_s];var Ss=function(){},Ms=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(Ss=function(Es,Cs){for(_s=0;_s<Ms.length;_s+=1){var Ts=Ms[_s],Bs=Cs[Ts];typeof Bs=="function"&&Bs!=Object.prototype[Ts]&&(Es[Ts]=Bs)}})}catch{}Ss(ca.prototype,ya)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(c$1.prototype.am=function(ca,ga,ya,_a,_s,Ss){for(var Ms=32767&ga,Es=ga>>15;--Ss>=0;){var Cs=32767&this[ca],Ts=this[ca++]>>15,Bs=Es*Cs+Ts*Ms;_s=((Cs=Ms*Cs+((32767&Bs)<<15)+ya[_a]+(1073741823&_s))>>>30)+(Bs>>>15)+Es*Ts+(_s>>>30),ya[_a++]=1073741823&Cs}return _s},a$1=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(c$1.prototype.am=function(ca,ga,ya,_a,_s,Ss){for(;--Ss>=0;){var Ms=ga*this[ca++]+ya[_a]+_s;_s=Math.floor(Ms/67108864),ya[_a++]=67108863&Ms}return _s},a$1=26):(c$1.prototype.am=function(ca,ga,ya,_a,_s,Ss){for(var Ms=16383&ga,Es=ga>>14;--Ss>=0;){var Cs=16383&this[ca],Ts=this[ca++]>>14,Bs=Es*Cs+Ts*Ms;_s=((Cs=Ms*Cs+((16383&Bs)<<14)+ya[_a]+_s)>>28)+(Bs>>14)+Es*Ts,ya[_a++]=268435455&Cs}return _s},a$1=28),c$1.prototype.DB=a$1,c$1.prototype.DM=(1<<a$1)-1,c$1.prototype.DV=1<<a$1;c$1.prototype.FV=Math.pow(2,52),c$1.prototype.F1=52-a$1,c$1.prototype.F2=2*a$1-52;var p$2,A$1,f$2=new Array;for(p$2="0".charCodeAt(0),A$1=0;A$1<=9;++A$1)f$2[p$2++]=A$1;for(p$2="a".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;for(p$2="A".charCodeAt(0),A$1=10;A$1<36;++A$1)f$2[p$2++]=A$1;function g$1(ca){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(ca)}function v$1(ca,ga){var ya=f$2[ca.charCodeAt(ga)];return ya==null?-1:ya}function m$2(ca){var ga=d$1();return ga.fromInt(ca),ga}function y$1(ca){var ga,ya=1;return(ga=ca>>>16)!=0&&(ca=ga,ya+=16),(ga=ca>>8)!=0&&(ca=ga,ya+=8),(ga=ca>>4)!=0&&(ca=ga,ya+=4),(ga=ca>>2)!=0&&(ca=ga,ya+=2),(ga=ca>>1)!=0&&(ca=ga,ya+=1),ya}function w$1(ca){this.m=ca}function b$1(ca){this.m=ca,this.mp=ca.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<ca.DB-15)-1,this.mt2=2*ca.t}function x$1(ca,ga){return ca&ga}function E$1(ca,ga){return ca|ga}function I(ca,ga){return ca^ga}function C$1(ca,ga){return ca&~ga}function S$1(ca){if(ca==0)return-1;var ga=0;return(65535&ca)==0&&(ca>>=16,ga+=16),(255&ca)==0&&(ca>>=8,ga+=8),(15&ca)==0&&(ca>>=4,ga+=4),(3&ca)==0&&(ca>>=2,ga+=2),(1&ca)==0&&++ga,ga}function B(ca){for(var ga=0;ca!=0;)ca&=ca-1,++ga;return ga}function M$1(){}function P$1(ca){return ca}function T(ca){this.r2=d$1(),this.q3=d$1(),c$1.ONE.dlShiftTo(2*ca.t,this.r2),this.mu=this.r2.divide(ca),this.m=ca}w$1.prototype.convert=function(ca){return ca.s<0||ca.compareTo(this.m)>=0?ca.mod(this.m):ca},w$1.prototype.revert=function(ca){return ca},w$1.prototype.reduce=function(ca){ca.divRemTo(this.m,null,ca)},w$1.prototype.mulTo=function(ca,ga,ya){ca.multiplyTo(ga,ya),this.reduce(ya)},w$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},b$1.prototype.convert=function(ca){var ga=d$1();return ca.abs().dlShiftTo(this.m.t,ga),ga.divRemTo(this.m,null,ga),ca.s<0&&ga.compareTo(c$1.ZERO)>0&&this.m.subTo(ga,ga),ga},b$1.prototype.revert=function(ca){var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},b$1.prototype.reduce=function(ca){for(;ca.t<=this.mt2;)ca[ca.t++]=0;for(var ga=0;ga<this.m.t;++ga){var ya=32767&ca[ga],_a=ya*this.mpl+((ya*this.mph+(ca[ga]>>15)*this.mpl&this.um)<<15)&ca.DM;for(ca[ya=ga+this.m.t]+=this.m.am(0,_a,ca,ga,0,this.m.t);ca[ya]>=ca.DV;)ca[ya]-=ca.DV,ca[++ya]++}ca.clamp(),ca.drShiftTo(this.m.t,ca),ca.compareTo(this.m)>=0&&ca.subTo(this.m,ca)},b$1.prototype.mulTo=function(ca,ga,ya){ca.multiplyTo(ga,ya),this.reduce(ya)},b$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)},c$1.prototype.copyTo=function(ca){for(var ga=this.t-1;ga>=0;--ga)ca[ga]=this[ga];ca.t=this.t,ca.s=this.s},c$1.prototype.fromInt=function(ca){this.t=1,this.s=ca<0?-1:0,ca>0?this[0]=ca:ca<-1?this[0]=ca+this.DV:this.t=0},c$1.prototype.fromString=function(ca,ga){var ya;if(ga==16)ya=4;else if(ga==8)ya=3;else if(ga==256)ya=8;else if(ga==2)ya=1;else if(ga==32)ya=5;else{if(ga!=4)return void this.fromRadix(ca,ga);ya=2}this.t=0,this.s=0;for(var _a=ca.length,_s=!1,Ss=0;--_a>=0;){var Ms=ya==8?255&ca[_a]:v$1(ca,_a);Ms<0?ca.charAt(_a)=="-"&&(_s=!0):(_s=!1,Ss==0?this[this.t++]=Ms:Ss+ya>this.DB?(this[this.t-1]|=(Ms&(1<<this.DB-Ss)-1)<<Ss,this[this.t++]=Ms>>this.DB-Ss):this[this.t-1]|=Ms<<Ss,(Ss+=ya)>=this.DB&&(Ss-=this.DB))}ya==8&&(128&ca[0])!=0&&(this.s=-1,Ss>0&&(this[this.t-1]|=(1<<this.DB-Ss)-1<<Ss)),this.clamp(),_s&&c$1.ZERO.subTo(this,this)},c$1.prototype.clamp=function(){for(var ca=this.s&this.DM;this.t>0&&this[this.t-1]==ca;)--this.t},c$1.prototype.dlShiftTo=function(ca,ga){var ya;for(ya=this.t-1;ya>=0;--ya)ga[ya+ca]=this[ya];for(ya=ca-1;ya>=0;--ya)ga[ya]=0;ga.t=this.t+ca,ga.s=this.s},c$1.prototype.drShiftTo=function(ca,ga){for(var ya=ca;ya<this.t;++ya)ga[ya-ca]=this[ya];ga.t=Math.max(this.t-ca,0),ga.s=this.s},c$1.prototype.lShiftTo=function(ca,ga){var ya,_a=ca%this.DB,_s=this.DB-_a,Ss=(1<<_s)-1,Ms=Math.floor(ca/this.DB),Es=this.s<<_a&this.DM;for(ya=this.t-1;ya>=0;--ya)ga[ya+Ms+1]=this[ya]>>_s|Es,Es=(this[ya]&Ss)<<_a;for(ya=Ms-1;ya>=0;--ya)ga[ya]=0;ga[Ms]=Es,ga.t=this.t+Ms+1,ga.s=this.s,ga.clamp()},c$1.prototype.rShiftTo=function(ca,ga){ga.s=this.s;var ya=Math.floor(ca/this.DB);if(ya>=this.t)ga.t=0;else{var _a=ca%this.DB,_s=this.DB-_a,Ss=(1<<_a)-1;ga[0]=this[ya]>>_a;for(var Ms=ya+1;Ms<this.t;++Ms)ga[Ms-ya-1]|=(this[Ms]&Ss)<<_s,ga[Ms-ya]=this[Ms]>>_a;_a>0&&(ga[this.t-ya-1]|=(this.s&Ss)<<_s),ga.t=this.t-ya,ga.clamp()}},c$1.prototype.subTo=function(ca,ga){for(var ya=0,_a=0,_s=Math.min(ca.t,this.t);ya<_s;)_a+=this[ya]-ca[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;if(ca.t<this.t){for(_a-=ca.s;ya<this.t;)_a+=this[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;_a+=this.s}else{for(_a+=this.s;ya<ca.t;)_a-=ca[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;_a-=ca.s}ga.s=_a<0?-1:0,_a<-1?ga[ya++]=this.DV+_a:_a>0&&(ga[ya++]=_a),ga.t=ya,ga.clamp()},c$1.prototype.multiplyTo=function(ca,ga){var ya=this.abs(),_a=ca.abs(),_s=ya.t;for(ga.t=_s+_a.t;--_s>=0;)ga[_s]=0;for(_s=0;_s<_a.t;++_s)ga[_s+ya.t]=ya.am(0,_a[_s],ga,_s,0,ya.t);ga.s=0,ga.clamp(),this.s!=ca.s&&c$1.ZERO.subTo(ga,ga)},c$1.prototype.squareTo=function(ca){for(var ga=this.abs(),ya=ca.t=2*ga.t;--ya>=0;)ca[ya]=0;for(ya=0;ya<ga.t-1;++ya){var _a=ga.am(ya,ga[ya],ca,2*ya,0,1);(ca[ya+ga.t]+=ga.am(ya+1,2*ga[ya],ca,2*ya+1,_a,ga.t-ya-1))>=ga.DV&&(ca[ya+ga.t]-=ga.DV,ca[ya+ga.t+1]=1)}ca.t>0&&(ca[ca.t-1]+=ga.am(ya,ga[ya],ca,2*ya,0,1)),ca.s=0,ca.clamp()},c$1.prototype.divRemTo=function(ca,ga,ya){var _a=ca.abs();if(!(_a.t<=0)){var _s=this.abs();if(_s.t<_a.t)return ga!=null&&ga.fromInt(0),void(ya!=null&&this.copyTo(ya));ya==null&&(ya=d$1());var Ss=d$1(),Ms=this.s,Es=ca.s,Cs=this.DB-y$1(_a[_a.t-1]);Cs>0?(_a.lShiftTo(Cs,Ss),_s.lShiftTo(Cs,ya)):(_a.copyTo(Ss),_s.copyTo(ya));var Ts=Ss.t,Bs=Ss[Ts-1];if(Bs!=0){var Is=Bs*(1<<this.F1)+(Ts>1?Ss[Ts-2]>>this.F2:0),Ps=this.FV/Is,Rs=(1<<this.F1)/Is,ks=1<<this.F2,$s=ya.t,Os=$s-Ts,Ls=ga==null?d$1():ga;for(Ss.dlShiftTo(Os,Ls),ya.compareTo(Ls)>=0&&(ya[ya.t++]=1,ya.subTo(Ls,ya)),c$1.ONE.dlShiftTo(Ts,Ls),Ls.subTo(Ss,Ss);Ss.t<Ts;)Ss[Ss.t++]=0;for(;--Os>=0;){var Ds=ya[--$s]==Bs?this.DM:Math.floor(ya[$s]*Ps+(ya[$s-1]+ks)*Rs);if((ya[$s]+=Ss.am(0,Ds,ya,Os,0,Ts))<Ds)for(Ss.dlShiftTo(Os,Ls),ya.subTo(Ls,ya);ya[$s]<--Ds;)ya.subTo(Ls,ya)}ga!=null&&(ya.drShiftTo(Ts,ga),Ms!=Es&&c$1.ZERO.subTo(ga,ga)),ya.t=Ts,ya.clamp(),Cs>0&&ya.rShiftTo(Cs,ya),Ms<0&&c$1.ZERO.subTo(ya,ya)}}},c$1.prototype.invDigit=function(){if(this.t<1)return 0;var ca=this[0];if((1&ca)==0)return 0;var ga=3&ca;return(ga=(ga=(ga=(ga=ga*(2-(15&ca)*ga)&15)*(2-(255&ca)*ga)&255)*(2-((65535&ca)*ga&65535))&65535)*(2-ca*ga%this.DV)%this.DV)>0?this.DV-ga:-ga},c$1.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},c$1.prototype.exp=function(ca,ga){if(ca>4294967295||ca<1)return c$1.ONE;var ya=d$1(),_a=d$1(),_s=ga.convert(this),Ss=y$1(ca)-1;for(_s.copyTo(ya);--Ss>=0;)if(ga.sqrTo(ya,_a),(ca&1<<Ss)>0)ga.mulTo(_a,_s,ya);else{var Ms=ya;ya=_a,_a=Ms}return ga.revert(ya)},c$1.prototype.toString=function(ca){if(this.s<0)return"-"+this.negate().toString(ca);var ga;if(ca==16)ga=4;else if(ca==8)ga=3;else if(ca==2)ga=1;else if(ca==32)ga=5;else{if(ca!=4)return this.toRadix(ca);ga=2}var ya,_a=(1<<ga)-1,_s=!1,Ss="",Ms=this.t,Es=this.DB-Ms*this.DB%ga;if(Ms-- >0)for(Es<this.DB&&(ya=this[Ms]>>Es)>0&&(_s=!0,Ss=g$1(ya));Ms>=0;)Es<ga?(ya=(this[Ms]&(1<<Es)-1)<<ga-Es,ya|=this[--Ms]>>(Es+=this.DB-ga)):(ya=this[Ms]>>(Es-=ga)&_a,Es<=0&&(Es+=this.DB,--Ms)),ya>0&&(_s=!0),_s&&(Ss+=g$1(ya));return _s?Ss:"0"},c$1.prototype.negate=function(){var ca=d$1();return c$1.ZERO.subTo(this,ca),ca},c$1.prototype.abs=function(){return this.s<0?this.negate():this},c$1.prototype.compareTo=function(ca){var ga=this.s-ca.s;if(ga!=0)return ga;var ya=this.t;if((ga=ya-ca.t)!=0)return this.s<0?-ga:ga;for(;--ya>=0;)if((ga=this[ya]-ca[ya])!=0)return ga;return 0},c$1.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y$1(this[this.t-1]^this.s&this.DM)},c$1.prototype.mod=function(ca){var ga=d$1();return this.abs().divRemTo(ca,null,ga),this.s<0&&ga.compareTo(c$1.ZERO)>0&&ca.subTo(ga,ga),ga},c$1.prototype.modPowInt=function(ca,ga){var ya;return ya=ca<256||ga.isEven()?new w$1(ga):new b$1(ga),this.exp(ca,ya)},c$1.ZERO=m$2(0),c$1.ONE=m$2(1),M$1.prototype.convert=P$1,M$1.prototype.revert=P$1,M$1.prototype.mulTo=function(ca,ga,ya){ca.multiplyTo(ga,ya)},M$1.prototype.sqrTo=function(ca,ga){ca.squareTo(ga)},T.prototype.convert=function(ca){if(ca.s<0||ca.t>2*this.m.t)return ca.mod(this.m);if(ca.compareTo(this.m)<0)return ca;var ga=d$1();return ca.copyTo(ga),this.reduce(ga),ga},T.prototype.revert=function(ca){return ca},T.prototype.reduce=function(ca){for(ca.drShiftTo(this.m.t-1,this.r2),ca.t>this.m.t+1&&(ca.t=this.m.t+1,ca.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);ca.compareTo(this.r2)<0;)ca.dAddOffset(1,this.m.t+1);for(ca.subTo(this.r2,ca);ca.compareTo(this.m)>=0;)ca.subTo(this.m,ca)},T.prototype.mulTo=function(ca,ga,ya){ca.multiplyTo(ga,ya),this.reduce(ya)},T.prototype.sqrTo=function(ca,ga){ca.squareTo(ga),this.reduce(ga)};var Q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R$1=(1<<26)/Q[Q.length-1];c$1.prototype.chunkSize=function(ca){return Math.floor(Math.LN2*this.DB/Math.log(ca))},c$1.prototype.toRadix=function(ca){if(ca==null&&(ca=10),this.signum()==0||ca<2||ca>36)return"0";var ga=this.chunkSize(ca),ya=Math.pow(ca,ga),_a=m$2(ya),_s=d$1(),Ss=d$1(),Ms="";for(this.divRemTo(_a,_s,Ss);_s.signum()>0;)Ms=(ya+Ss.intValue()).toString(ca).substr(1)+Ms,_s.divRemTo(_a,_s,Ss);return Ss.intValue().toString(ca)+Ms},c$1.prototype.fromRadix=function(ca,ga){this.fromInt(0),ga==null&&(ga=10);for(var ya=this.chunkSize(ga),_a=Math.pow(ga,ya),_s=!1,Ss=0,Ms=0,Es=0;Es<ca.length;++Es){var Cs=v$1(ca,Es);Cs<0?ca.charAt(Es)=="-"&&this.signum()==0&&(_s=!0):(Ms=ga*Ms+Cs,++Ss>=ya&&(this.dMultiply(_a),this.dAddOffset(Ms,0),Ss=0,Ms=0))}Ss>0&&(this.dMultiply(Math.pow(ga,Ss)),this.dAddOffset(Ms,0)),_s&&c$1.ZERO.subTo(this,this)},c$1.prototype.fromNumber=function(ca,ga,ya){if(typeof ga=="number")if(ca<2)this.fromInt(1);else for(this.fromNumber(ca,ya),this.testBit(ca-1)||this.bitwiseTo(c$1.ONE.shiftLeft(ca-1),E$1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ga);)this.dAddOffset(2,0),this.bitLength()>ca&&this.subTo(c$1.ONE.shiftLeft(ca-1),this);else{var _a=new Array,_s=7&ca;_a.length=1+(ca>>3),ga.nextBytes(_a),_s>0?_a[0]&=(1<<_s)-1:_a[0]=0,this.fromString(_a,256)}},c$1.prototype.bitwiseTo=function(ca,ga,ya){var _a,_s,Ss=Math.min(ca.t,this.t);for(_a=0;_a<Ss;++_a)ya[_a]=ga(this[_a],ca[_a]);if(ca.t<this.t){for(_s=ca.s&this.DM,_a=Ss;_a<this.t;++_a)ya[_a]=ga(this[_a],_s);ya.t=this.t}else{for(_s=this.s&this.DM,_a=Ss;_a<ca.t;++_a)ya[_a]=ga(_s,ca[_a]);ya.t=ca.t}ya.s=ga(this.s,ca.s),ya.clamp()},c$1.prototype.changeBit=function(ca,ga){var ya=c$1.ONE.shiftLeft(ca);return this.bitwiseTo(ya,ga,ya),ya},c$1.prototype.addTo=function(ca,ga){for(var ya=0,_a=0,_s=Math.min(ca.t,this.t);ya<_s;)_a+=this[ya]+ca[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;if(ca.t<this.t){for(_a+=ca.s;ya<this.t;)_a+=this[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;_a+=this.s}else{for(_a+=this.s;ya<ca.t;)_a+=ca[ya],ga[ya++]=_a&this.DM,_a>>=this.DB;_a+=ca.s}ga.s=_a<0?-1:0,_a>0?ga[ya++]=_a:_a<-1&&(ga[ya++]=this.DV+_a),ga.t=ya,ga.clamp()},c$1.prototype.dMultiply=function(ca){this[this.t]=this.am(0,ca-1,this,0,0,this.t),++this.t,this.clamp()},c$1.prototype.dAddOffset=function(ca,ga){if(ca!=0){for(;this.t<=ga;)this[this.t++]=0;for(this[ga]+=ca;this[ga]>=this.DV;)this[ga]-=this.DV,++ga>=this.t&&(this[this.t++]=0),++this[ga]}},c$1.prototype.multiplyLowerTo=function(ca,ga,ya){var _a,_s=Math.min(this.t+ca.t,ga);for(ya.s=0,ya.t=_s;_s>0;)ya[--_s]=0;for(_a=ya.t-this.t;_s<_a;++_s)ya[_s+this.t]=this.am(0,ca[_s],ya,_s,0,this.t);for(_a=Math.min(ca.t,ga);_s<_a;++_s)this.am(0,ca[_s],ya,_s,0,ga-_s);ya.clamp()},c$1.prototype.multiplyUpperTo=function(ca,ga,ya){--ga;var _a=ya.t=this.t+ca.t-ga;for(ya.s=0;--_a>=0;)ya[_a]=0;for(_a=Math.max(ga-this.t,0);_a<ca.t;++_a)ya[this.t+_a-ga]=this.am(ga-_a,ca[_a],ya,0,0,this.t+_a-ga);ya.clamp(),ya.drShiftTo(1,ya)},c$1.prototype.modInt=function(ca){if(ca<=0)return 0;var ga=this.DV%ca,ya=this.s<0?ca-1:0;if(this.t>0)if(ga==0)ya=this[0]%ca;else for(var _a=this.t-1;_a>=0;--_a)ya=(ga*ya+this[_a])%ca;return ya},c$1.prototype.millerRabin=function(ca){var ga=this.subtract(c$1.ONE),ya=ga.getLowestSetBit();if(ya<=0)return!1;var _a=ga.shiftRight(ya);(ca=ca+1>>1)>Q.length&&(ca=Q.length);for(var _s=d$1(),Ss=0;Ss<ca;++Ss){_s.fromInt(Q[Math.floor(Math.random()*Q.length)]);var Ms=_s.modPow(_a,this);if(Ms.compareTo(c$1.ONE)!=0&&Ms.compareTo(ga)!=0){for(var Es=1;Es++<ya&&Ms.compareTo(ga)!=0;)if((Ms=Ms.modPowInt(2,this)).compareTo(c$1.ONE)==0)return!1;if(Ms.compareTo(ga)!=0)return!1}}return!0},c$1.prototype.clone=function(){var ca=d$1();return this.copyTo(ca),ca},c$1.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},c$1.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},c$1.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},c$1.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},c$1.prototype.toByteArray=function(){var ca=this.t,ga=new Array;ga[0]=this.s;var ya,_a=this.DB-ca*this.DB%8,_s=0;if(ca-- >0)for(_a<this.DB&&(ya=this[ca]>>_a)!=(this.s&this.DM)>>_a&&(ga[_s++]=ya|this.s<<this.DB-_a);ca>=0;)_a<8?(ya=(this[ca]&(1<<_a)-1)<<8-_a,ya|=this[--ca]>>(_a+=this.DB-8)):(ya=this[ca]>>(_a-=8)&255,_a<=0&&(_a+=this.DB,--ca)),(128&ya)!=0&&(ya|=-256),_s==0&&(128&this.s)!=(128&ya)&&++_s,(_s>0||ya!=this.s)&&(ga[_s++]=ya);return ga},c$1.prototype.equals=function(ca){return this.compareTo(ca)==0},c$1.prototype.min=function(ca){return this.compareTo(ca)<0?this:ca},c$1.prototype.max=function(ca){return this.compareTo(ca)>0?this:ca},c$1.prototype.and=function(ca){var ga=d$1();return this.bitwiseTo(ca,x$1,ga),ga},c$1.prototype.or=function(ca){var ga=d$1();return this.bitwiseTo(ca,E$1,ga),ga},c$1.prototype.xor=function(ca){var ga=d$1();return this.bitwiseTo(ca,I,ga),ga},c$1.prototype.andNot=function(ca){var ga=d$1();return this.bitwiseTo(ca,C$1,ga),ga},c$1.prototype.not=function(){for(var ca=d$1(),ga=0;ga<this.t;++ga)ca[ga]=this.DM&~this[ga];return ca.t=this.t,ca.s=~this.s,ca},c$1.prototype.shiftLeft=function(ca){var ga=d$1();return ca<0?this.rShiftTo(-ca,ga):this.lShiftTo(ca,ga),ga},c$1.prototype.shiftRight=function(ca){var ga=d$1();return ca<0?this.lShiftTo(-ca,ga):this.rShiftTo(ca,ga),ga},c$1.prototype.getLowestSetBit=function(){for(var ca=0;ca<this.t;++ca)if(this[ca]!=0)return ca*this.DB+S$1(this[ca]);return this.s<0?this.t*this.DB:-1},c$1.prototype.bitCount=function(){for(var ca=0,ga=this.s&this.DM,ya=0;ya<this.t;++ya)ca+=B(this[ya]^ga);return ca},c$1.prototype.testBit=function(ca){var ga=Math.floor(ca/this.DB);return ga>=this.t?this.s!=0:(this[ga]&1<<ca%this.DB)!=0},c$1.prototype.setBit=function(ca){return this.changeBit(ca,E$1)},c$1.prototype.clearBit=function(ca){return this.changeBit(ca,C$1)},c$1.prototype.flipBit=function(ca){return this.changeBit(ca,I)},c$1.prototype.add=function(ca){var ga=d$1();return this.addTo(ca,ga),ga},c$1.prototype.subtract=function(ca){var ga=d$1();return this.subTo(ca,ga),ga},c$1.prototype.multiply=function(ca){var ga=d$1();return this.multiplyTo(ca,ga),ga},c$1.prototype.divide=function(ca){var ga=d$1();return this.divRemTo(ca,ga,null),ga},c$1.prototype.remainder=function(ca){var ga=d$1();return this.divRemTo(ca,null,ga),ga},c$1.prototype.divideAndRemainder=function(ca){var ga=d$1(),ya=d$1();return this.divRemTo(ca,ga,ya),new Array(ga,ya)},c$1.prototype.modPow=function(ca,ga){var ya,_a,_s=ca.bitLength(),Ss=m$2(1);if(_s<=0)return Ss;ya=_s<18?1:_s<48?3:_s<144?4:_s<768?5:6,_a=_s<8?new w$1(ga):ga.isEven()?new T(ga):new b$1(ga);var Ms=new Array,Es=3,Cs=ya-1,Ts=(1<<ya)-1;if(Ms[1]=_a.convert(this),ya>1){var Bs=d$1();for(_a.sqrTo(Ms[1],Bs);Es<=Ts;)Ms[Es]=d$1(),_a.mulTo(Bs,Ms[Es-2],Ms[Es]),Es+=2}var Is,Ps,Rs=ca.t-1,ks=!0,$s=d$1();for(_s=y$1(ca[Rs])-1;Rs>=0;){for(_s>=Cs?Is=ca[Rs]>>_s-Cs&Ts:(Is=(ca[Rs]&(1<<_s+1)-1)<<Cs-_s,Rs>0&&(Is|=ca[Rs-1]>>this.DB+_s-Cs)),Es=ya;(1&Is)==0;)Is>>=1,--Es;if((_s-=Es)<0&&(_s+=this.DB,--Rs),ks)Ms[Is].copyTo(Ss),ks=!1;else{for(;Es>1;)_a.sqrTo(Ss,$s),_a.sqrTo($s,Ss),Es-=2;Es>0?_a.sqrTo(Ss,$s):(Ps=Ss,Ss=$s,$s=Ps),_a.mulTo($s,Ms[Is],Ss)}for(;Rs>=0&&(ca[Rs]&1<<_s)==0;)_a.sqrTo(Ss,$s),Ps=Ss,Ss=$s,$s=Ps,--_s<0&&(_s=this.DB-1,--Rs)}return _a.revert(Ss)},c$1.prototype.modInverse=function(ca){var ga=ca.isEven();if(this.isEven()&&ga||ca.signum()==0)return c$1.ZERO;for(var ya=ca.clone(),_a=this.clone(),_s=m$2(1),Ss=m$2(0),Ms=m$2(0),Es=m$2(1);ya.signum()!=0;){for(;ya.isEven();)ya.rShiftTo(1,ya),ga?(_s.isEven()&&Ss.isEven()||(_s.addTo(this,_s),Ss.subTo(ca,Ss)),_s.rShiftTo(1,_s)):Ss.isEven()||Ss.subTo(ca,Ss),Ss.rShiftTo(1,Ss);for(;_a.isEven();)_a.rShiftTo(1,_a),ga?(Ms.isEven()&&Es.isEven()||(Ms.addTo(this,Ms),Es.subTo(ca,Es)),Ms.rShiftTo(1,Ms)):Es.isEven()||Es.subTo(ca,Es),Es.rShiftTo(1,Es);ya.compareTo(_a)>=0?(ya.subTo(_a,ya),ga&&_s.subTo(Ms,_s),Ss.subTo(Es,Ss)):(_a.subTo(ya,_a),ga&&Ms.subTo(_s,Ms),Es.subTo(Ss,Es))}return _a.compareTo(c$1.ONE)!=0?c$1.ZERO:Es.compareTo(ca)>=0?Es.subtract(ca):Es.signum()<0?(Es.addTo(ca,Es),Es.signum()<0?Es.add(ca):Es):Es},c$1.prototype.pow=function(ca){return this.exp(ca,new M$1)},c$1.prototype.gcd=function(ca){var ga=this.s<0?this.negate():this.clone(),ya=ca.s<0?ca.negate():ca.clone();if(ga.compareTo(ya)<0){var _a=ga;ga=ya,ya=_a}var _s=ga.getLowestSetBit(),Ss=ya.getLowestSetBit();if(Ss<0)return ga;for(_s<Ss&&(Ss=_s),Ss>0&&(ga.rShiftTo(Ss,ga),ya.rShiftTo(Ss,ya));ga.signum()>0;)(_s=ga.getLowestSetBit())>0&&ga.rShiftTo(_s,ga),(_s=ya.getLowestSetBit())>0&&ya.rShiftTo(_s,ya),ga.compareTo(ya)>=0?(ga.subTo(ya,ga),ga.rShiftTo(1,ga)):(ya.subTo(ga,ya),ya.rShiftTo(1,ya));return Ss>0&&ya.lShiftTo(Ss,ya),ya},c$1.prototype.isProbablePrime=function(ca){var ga,ya=this.abs();if(ya.t==1&&ya[0]<=Q[Q.length-1]){for(ga=0;ga<Q.length;++ga)if(ya[0]==Q[ga])return!0;return!1}if(ya.isEven())return!1;for(ga=1;ga<Q.length;){for(var _a=Q[ga],_s=ga+1;_s<Q.length&&_a<R$1;)_a*=Q[_s++];for(_a=ya.modInt(_a);ga<_s;)if(_a%Q[ga++]==0)return!1}return ya.millerRabin(ca)},c$1.prototype.square=function(){var ca=d$1();return this.squareTo(ca),ca};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function k$2(ca){var ga,ya,_a="";for(ga=0;ga+3<=ca.length;ga+=3)ya=parseInt(ca.substring(ga,ga+3),16),_a+=D.charAt(ya>>6)+D.charAt(63&ya);for(ga+1==ca.length?(ya=parseInt(ca.substring(ga,ga+1),16),_a+=D.charAt(ya<<2)):ga+2==ca.length&&(ya=parseInt(ca.substring(ga,ga+2),16),_a+=D.charAt(ya>>2)+D.charAt((3&ya)<<4));(3&_a.length)>0;)_a+="=";return _a}function N$1(ca){var ga,ya,_a,_s="",Ss=0;for(ga=0;ga<ca.length&&ca.charAt(ga)!="=";++ga)(_a=D.indexOf(ca.charAt(ga)))<0||(Ss==0?(_s+=g$1(_a>>2),ya=3&_a,Ss=1):Ss==1?(_s+=g$1(ya<<2|_a>>4),ya=15&_a,Ss=2):Ss==2?(_s+=g$1(ya),_s+=g$1(_a>>2),ya=3&_a,Ss=3):(_s+=g$1(ya<<2|_a>>4),_s+=g$1(15&_a),Ss=0));return Ss==1&&(_s+=g$1(ya<<2)),_s}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function F$1(){this.i=0,this.j=0,this.S=new Array}F$1.prototype.init=function(ca){var ga,ya,_a;for(ga=0;ga<256;++ga)this.S[ga]=ga;for(ya=0,ga=0;ga<256;++ga)ya=ya+this.S[ga]+ca[ga%ca.length]&255,_a=this.S[ga],this.S[ga]=this.S[ya],this.S[ya]=_a;this.i=0,this.j=0},F$1.prototype.next=function(){var ca;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,ca=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=ca,this.S[ca+this.S[this.i]&255]};var O$1,L$1,V$1;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function H(){var ca;ca=new Date().getTime(),L$1[V$1++]^=255&ca,L$1[V$1++]^=ca>>8&255,L$1[V$1++]^=ca>>16&255,L$1[V$1++]^=ca>>24&255,V$1>=256&&(V$1-=256)}if(L$1==null){var K;if(L$1=new Array,V$1=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var z=window.crypto||window.msCrypto;if(z.getRandomValues){var q$1=new Uint8Array(32);for(z.getRandomValues(q$1),K=0;K<32;++K)L$1[V$1++]=q$1[K]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var _$1=window.crypto.random(32);for(K=0;K<_$1.length;++K)L$1[V$1++]=255&_$1.charCodeAt(K)}}for(;V$1<256;)K=Math.floor(65536*Math.random()),L$1[V$1++]=K>>>8,L$1[V$1++]=255&K;V$1=0,H()}function j$1(){if(O$1==null){for(H(),(O$1=new F$1).init(L$1),V$1=0;V$1<L$1.length;++V$1)L$1[V$1]=0;V$1=0}return O$1.next()}function U$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function G(ca,ga){return new c$1(ca,ga)}function W$1(ca,ga,ya){for(var _a="",_s=0;_a.length<ga;)_a+=ya(String.fromCharCode.apply(String,ca.concat([(4278190080&_s)>>24,(16711680&_s)>>16,(65280&_s)>>8,255&_s]))),_s+=1;return _a}function X(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Y(ca,ga,ya){for(var _a="",_s=0;_a.length<ga;)_a+=ya(ca+String.fromCharCode.apply(String,[(4278190080&_s)>>24,(16711680&_s)>>16,(65280&_s)>>8,255&_s])),_s+=1;return _a}function Z(ca){for(var ga="",ya=0;ya<ca.length;ya++){var _a=ca[ya].toString(16);_a.length==1&&(_a="0"+_a),ga+=_a}return ga}function J(ca){return Z(function(ga){for(var ya=new Array,_a=0;_a<ga.length;_a++)ya[_a]=ga.charCodeAt(_a);return ya}(ca))}function $(ca){return ca.length%4==2?ca+="==":ca.length%4==3&&(ca+="="),ca=(ca=ca.replace(/-/g,"+")).replace(/_/g,"/")}function tt(ca){return ca.length%2==1&&(ca="0"+ca),function(ga){return(ga=(ga=ga.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(k$2(ca))}function et(ca){return N$1($(ca))}function it(ca){return function(ga){return ga.replace(/%/g,"")}(function(ga){for(var ya=encodeURIComponent(ga),_a="",_s=0;_s<ya.length;_s++)ya[_s]=="%"?(_a+=ya.substr(_s,3),_s+=2):_a=_a+"%"+J(ya[_s]);return _a}(ca))}function nt(ca){return decodeURIComponent(function(ga){return ga.replace(/(..)/g,"%$1")}(ca))}function rt(ca){for(var ga="",ya=0;ya<ca.length-1;ya+=2)ga+=String.fromCharCode(parseInt(ca.substr(ya,2),16));return ga}function ot(ca){for(var ga="",ya=0;ya<ca.length;ya++)ga+=("0"+ca.charCodeAt(ya).toString(16)).slice(-2);return ga}function st(ca){var ga=function(ya){return k$2(ya)}(ca).replace(/(.{64})/g,`$1\r
`);return ga=ga.replace(/\r\n$/,"")}function at(ca,ga){return"-----BEGIN "+ga+`-----\r
`+st(ca)+`\r
-----END `+ga+`-----\r
`}function ut(ca,ga){if(ca.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+ga;return function(ya){return N$1(ya.replace(/[^0-9A-Za-z\/+=]*/g,""))}(ca=ga!==void 0?(ca=ca.replace(new RegExp("^[^]*-----BEGIN "+ga+"-----"),"")).replace(new RegExp("-----END "+ga+"-----[^]*$"),""):(ca=ca.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function lt(ca){var ga="malformed hex value";if(!ca.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw ga;if(ca.length!=8)return ca.length==32?function(ya){if(!ya.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var _a=(ya=ya.toLowerCase()).match(/.{1,4}/g),_s=0;_s<8;_s++)_a[_s]=_a[_s].replace(/^0+/,""),_a[_s]==""&&(_a[_s]="0");var Ss=(ya=":"+_a.join(":")+":").match(/:(0:){2,}/g);if(Ss===null)return ya.slice(1,-1);var Ms="";for(_s=0;_s<Ss.length;_s++)Ss[_s].length>Ms.length&&(Ms=Ss[_s]);return(ya=ya.replace(Ms,"::")).slice(1,-1)}(ca):ca;try{return parseInt(ca.substr(0,2),16)+"."+parseInt(ca.substr(2,2),16)+"."+parseInt(ca.substr(4,2),16)+"."+parseInt(ca.substr(6,2),16)}catch{throw ga}}function ht(ca){return ca.match(/.{4}/g).map(function(ga){var ya=parseInt(ga.substr(0,2),16),_a=parseInt(ga.substr(2),16);if(ya==0&_a<128)return String.fromCharCode(_a);if(ya<8){var _s=128|63&_a;return nt((192|(7&ya)<<3|(192&_a)>>6).toString(16)+_s.toString(16))}_s=128|(15&ya)<<2|(192&_a)>>6;var Ss=128|63&_a;return nt((224|(240&ya)>>4).toString(16)+_s.toString(16)+Ss.toString(16))}).join("")}function ct(ca){return!(ca.length%2!=0||!ca.match(/^[0-9a-f]+$/)&&!ca.match(/^[0-9A-F]+$/))}function dt(ca){return ca.length%2==1?"0"+ca:ca.substr(0,1)>"7"?"00"+ca:ca}U$1.prototype.nextBytes=function(ca){var ga;for(ga=0;ga<ca.length;++ga)ca[ga]=j$1()},X.prototype.doPublic=function(ca){return ca.modPowInt(this.e,this.n)},X.prototype.setPublic=function(ca,ga){if(this.isPublic=!0,this.isPrivate=!1,typeof ca!="string")this.n=ca,this.e=ga;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA public key";this.n=G(ca,16),this.e=parseInt(ga,16)}},X.prototype.encrypt=function(ca){var ga=function(_s,Ss){if(Ss<_s.length+11)throw"Message too long for RSA";for(var Ms=new Array,Es=_s.length-1;Es>=0&&Ss>0;){var Cs=_s.charCodeAt(Es--);Cs<128?Ms[--Ss]=Cs:Cs>127&&Cs<2048?(Ms[--Ss]=63&Cs|128,Ms[--Ss]=Cs>>6|192):(Ms[--Ss]=63&Cs|128,Ms[--Ss]=Cs>>6&63|128,Ms[--Ss]=Cs>>12|224)}Ms[--Ss]=0;for(var Ts=new U$1,Bs=new Array;Ss>2;){for(Bs[0]=0;Bs[0]==0;)Ts.nextBytes(Bs);Ms[--Ss]=Bs[0]}return Ms[--Ss]=2,Ms[--Ss]=0,new c$1(Ms)}(ca,this.n.bitLength()+7>>3);if(ga==null)return null;var ya=this.doPublic(ga);if(ya==null)return null;var _a=ya.toString(16);return(1&_a.length)==0?_a:"0"+_a},X.prototype.encryptOAEP=function(ca,ga,ya){var _a=function(Ms,Es,Cs,Ts){var Bs=u$1.crypto.MessageDigest,Is=u$1.crypto.Util,Ps=null;if(Cs||(Cs="sha1"),typeof Cs=="string"&&(Ps=Bs.getCanonicalAlgName(Cs),Ts=Bs.getHashLength(Ps),Cs=function(Vs){return rt(Is.hashHex(ot(Vs),Ps))}),Ms.length+2*Ts+2>Es)throw"Message too long for RSA";var Rs,ks="";for(Rs=0;Rs<Es-Ms.length-2*Ts-2;Rs+=1)ks+="\0";var $s=Cs("")+ks+""+Ms,Os=new Array(Ts);new U$1().nextBytes(Os);var Ls=W$1(Os,$s.length,Cs),Ds=[];for(Rs=0;Rs<$s.length;Rs+=1)Ds[Rs]=$s.charCodeAt(Rs)^Ls.charCodeAt(Rs);var Fs=W$1(Ds,Os.length,Cs),Ns=[0];for(Rs=0;Rs<Os.length;Rs+=1)Ns[Rs+1]=Os[Rs]^Fs.charCodeAt(Rs);return new c$1(Ns.concat(Ds))}(ca,this.n.bitLength()+7>>3,ga,ya);if(_a==null)return null;var _s=this.doPublic(_a);if(_s==null)return null;var Ss=_s.toString(16);return(1&Ss.length)==0?Ss:"0"+Ss},X.prototype.type="RSA",X.prototype.doPrivate=function(ca){if(this.p==null||this.q==null)return ca.modPow(this.d,this.n);for(var ga=ca.mod(this.p).modPow(this.dmp1,this.p),ya=ca.mod(this.q).modPow(this.dmq1,this.q);ga.compareTo(ya)<0;)ga=ga.add(this.p);return ga.subtract(ya).multiply(this.coeff).mod(this.p).multiply(this.q).add(ya)},X.prototype.setPrivate=function(ca,ga,ya){if(this.isPrivate=!0,typeof ca!="string")this.n=ca,this.e=ga,this.d=ya;else{if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(ya,16)}},X.prototype.setPrivateEx=function(ca,ga,ya,_a,_s,Ss,Ms,Es){if(this.isPrivate=!0,this.isPublic=!1,ca==null)throw"RSASetPrivateEx N == null";if(ga==null)throw"RSASetPrivateEx E == null";if(ca.length==0)throw"RSASetPrivateEx N.length == 0";if(ga.length==0)throw"RSASetPrivateEx E.length == 0";if(!(ca!=null&&ga!=null&&ca.length>0&&ga.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=G(ca,16),this.e=parseInt(ga,16),this.d=G(ya,16),this.p=G(_a,16),this.q=G(_s,16),this.dmp1=G(Ss,16),this.dmq1=G(Ms,16),this.coeff=G(Es,16)},X.prototype.generate=function(ca,ga){var ya=new U$1,_a=ca>>1;this.e=parseInt(ga,16);for(var _s=new c$1(ga,16);;){for(;this.p=new c$1(ca-_a,1,ya),this.p.subtract(c$1.ONE).gcd(_s).compareTo(c$1.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new c$1(_a,1,ya),this.q.subtract(c$1.ONE).gcd(_s).compareTo(c$1.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var Ss=this.p;this.p=this.q,this.q=Ss}var Ms=this.p.subtract(c$1.ONE),Es=this.q.subtract(c$1.ONE),Cs=Ms.multiply(Es);if(Cs.gcd(_s).compareTo(c$1.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==ca)){this.d=_s.modInverse(Cs),this.dmp1=this.d.mod(Ms),this.dmq1=this.d.mod(Es),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},X.prototype.decrypt=function(ca){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var ga=G(ca,16),ya=this.doPrivate(ga);return ya==null?null:function(_a,_s){for(var Ss=_a.toByteArray(),Ms=0;Ms<Ss.length&&Ss[Ms]==0;)++Ms;if(Ss.length-Ms!=_s-1||Ss[Ms]!=2)return null;for(++Ms;Ss[Ms]!=0;)if(++Ms>=Ss.length)return null;for(var Es="";++Ms<Ss.length;){var Cs=255&Ss[Ms];Cs<128?Es+=String.fromCharCode(Cs):Cs>191&&Cs<224?(Es+=String.fromCharCode((31&Cs)<<6|63&Ss[Ms+1]),++Ms):(Es+=String.fromCharCode((15&Cs)<<12|(63&Ss[Ms+1])<<6|63&Ss[Ms+2]),Ms+=2)}return Es}(ya,this.n.bitLength()+7>>3)},X.prototype.decryptOAEP=function(ca,ga,ya){if(ca.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var _a=G(ca,16),_s=this.doPrivate(_a);return _s==null?null:function(Ss,Ms,Es,Cs){var Ts=u$1.crypto.MessageDigest,Bs=u$1.crypto.Util,Is=null;for(Es||(Es="sha1"),typeof Es=="string"&&(Is=Ts.getCanonicalAlgName(Es),Cs=Ts.getHashLength(Is),Es=function(Ns){return rt(Bs.hashHex(ot(Ns),Is))}),Ss=Ss.toByteArray(),Ps=0;Ps<Ss.length;Ps+=1)Ss[Ps]&=255;for(;Ss.length<Ms;)Ss.unshift(0);if((Ss=String.fromCharCode.apply(String,Ss)).length<2*Cs+2)throw"Cipher too short";var Ps,Rs=Ss.substr(1,Cs),ks=Ss.substr(Cs+1),$s=Y(ks,Cs,Es),Os=[];for(Ps=0;Ps<Rs.length;Ps+=1)Os[Ps]=Rs.charCodeAt(Ps)^$s.charCodeAt(Ps);var Ls=Y(String.fromCharCode.apply(String,Os),Ss.length-Cs,Es),Ds=[];for(Ps=0;Ps<ks.length;Ps+=1)Ds[Ps]=ks.charCodeAt(Ps)^Ls.charCodeAt(Ps);if((Ds=String.fromCharCode.apply(String,Ds)).substr(0,Cs)!==Es(""))throw"Hash mismatch";var Fs=(Ds=Ds.substr(Cs)).indexOf("");if((Fs!=-1?Ds.substr(0,Fs).lastIndexOf("\0"):-1)+1!=Fs)throw"Malformed data";return Ds.substr(Fs+1)}(_s,this.n.bitLength()+7>>3,ga,ya)},u$1.lang!==void 0&&u$1.lang||(u$1.lang={}),u$1.lang.String=function(){},u$1.lang.String.isInteger=function(ca){return!!ca.match(/^[0-9]+$/)||!!ca.match(/^-[0-9]+$/)},u$1.lang.String.isHex=function(ca){return ct(ca)},u$1.lang.String.isBase64=function(ca){return!(!(ca=ca.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||ca.length%4!=0)},u$1.lang.String.isBase64URL=function(ca){return!ca.match(/[+/=]/)&&(ca=$(ca),u$1.lang.String.isBase64(ca))},u$1.lang.String.isIntegerArray=function(ca){return!!(ca=ca.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$1.lang.String.isPrintable=function(ca){return ca.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$1.lang.String.isIA5=function(ca){return ca.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$1.lang.String.isMail=function(ca){return ca.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pt=function(ca,ga,ya){return ya==null&&(ya="0"),ca.length>=ga?ca:new Array(ga-ca.length+1).join(ya)+ca};function At(ca,ga){var ya=function(){};ya.prototype=ga.prototype,ca.prototype=new ya,ca.prototype.constructor=ca,ca.superclass=ga.prototype,ga.prototype.constructor==Object.prototype.constructor&&(ga.prototype.constructor=ga)}u$1.crypto!==void 0&&u$1.crypto||(u$1.crypto={}),u$1.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:h$1.algo.MD5,sha1:h$1.algo.SHA1,sha224:h$1.algo.SHA224,sha256:h$1.algo.SHA256,sha384:h$1.algo.SHA384,sha512:h$1.algo.SHA512,ripemd160:h$1.algo.RIPEMD160},this.getDigestInfoHex=function(ca,ga){if(this.DIGESTINFOHEAD[ga]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+ga;return this.DIGESTINFOHEAD[ga]+ca},this.getPaddedDigestInfoHex=function(ca,ga,ya){var _a=this.getDigestInfoHex(ca,ga),_s=ya/4;if(_a.length+22>_s)throw"key is too short for SigAlg: keylen="+ya+","+ga;for(var Ss="0001",Ms="00"+_a,Es="",Cs=_s-Ss.length-Ms.length,Ts=0;Ts<Cs;Ts+=2)Es+="ff";return Ss+Es+Ms},this.hashString=function(ca,ga){return new u$1.crypto.MessageDigest({alg:ga}).digestString(ca)},this.hashHex=function(ca,ga){return new u$1.crypto.MessageDigest({alg:ga}).digestHex(ca)},this.sha1=function(ca){return this.hashString(ca,"sha1")},this.sha256=function(ca){return this.hashString(ca,"sha256")},this.sha256Hex=function(ca){return this.hashHex(ca,"sha256")},this.sha512=function(ca){return this.hashString(ca,"sha512")},this.sha512Hex=function(ca){return this.hashHex(ca,"sha512")},this.isKey=function(ca){return ca instanceof X||ca instanceof u$1.crypto.DSA||ca instanceof u$1.crypto.ECDSA}},u$1.crypto.Util.md5=function(ca){return new u$1.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(ca)},u$1.crypto.Util.ripemd160=function(ca){return new u$1.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(ca)},u$1.crypto.Util.SECURERANDOMGEN=new U$1,u$1.crypto.Util.getRandomHexOfNbytes=function(ca){var ga=new Array(ca);return u$1.crypto.Util.SECURERANDOMGEN.nextBytes(ga),Z(ga)},u$1.crypto.Util.getRandomBigIntegerOfNbytes=function(ca){return new c$1(u$1.crypto.Util.getRandomHexOfNbytes(ca),16)},u$1.crypto.Util.getRandomHexOfNbits=function(ca){var ga=ca%8,ya=new Array((ca-ga)/8+1);return u$1.crypto.Util.SECURERANDOMGEN.nextBytes(ya),ya[0]=(255<<ga&255^255)&ya[0],Z(ya)},u$1.crypto.Util.getRandomBigIntegerOfNbits=function(ca){return new c$1(u$1.crypto.Util.getRandomHexOfNbits(ca),16)},u$1.crypto.Util.getRandomBigIntegerZeroToMax=function(ca){for(var ga=ca.bitLength();;){var ya=u$1.crypto.Util.getRandomBigIntegerOfNbits(ga);if(ca.compareTo(ya)!=-1)return ya}},u$1.crypto.Util.getRandomBigIntegerMinToMax=function(ca,ga){var ya=ca.compareTo(ga);if(ya==1)throw"biMin is greater than biMax";if(ya==0)return ca;var _a=ga.subtract(ca);return u$1.crypto.Util.getRandomBigIntegerZeroToMax(_a).add(ca)},u$1.crypto.MessageDigest=function(ca){this.setAlgAndProvider=function(ga,ya){if((ga=u$1.crypto.MessageDigest.getCanonicalAlgName(ga))!==null&&ya===void 0&&(ya=u$1.crypto.Util.DEFAULTPROVIDER[ga]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(ga)!=-1&&ya=="cryptojs"){try{this.md=u$1.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[ga].create()}catch(_a){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+_a}this.updateString=function(_a){this.md.update(_a)},this.updateHex=function(_a){var _s=h$1.enc.Hex.parse(_a);this.md.update(_s)},this.digest=function(){return this.md.finalize().toString(h$1.enc.Hex)},this.digestString=function(_a){return this.updateString(_a),this.digest()},this.digestHex=function(_a){return this.updateHex(_a),this.digest()}}if(":sha256:".indexOf(ga)!=-1&&ya=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(_a){throw"setAlgAndProvider hash alg set fail alg="+ga+"/"+_a}this.updateString=function(_a){this.md.update(_a)},this.updateHex=function(_a){var _s=sjcl.codec.hex.toBits(_a);this.md.update(_s)},this.digest=function(){var _a=this.md.finalize();return sjcl.codec.hex.fromBits(_a)},this.digestString=function(_a){return this.updateString(_a),this.digest()},this.digestHex=function(_a){return this.updateHex(_a),this.digest()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},ca!==void 0&&ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$1.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$1.crypto.MessageDigest.getCanonicalAlgName=function(ca){return typeof ca=="string"&&(ca=(ca=ca.toLowerCase()).replace(/-/,"")),ca},u$1.crypto.MessageDigest.getHashLength=function(ca){var ga=u$1.crypto.MessageDigest,ya=ga.getCanonicalAlgName(ca);if(ga.HASHLENGTH[ya]===void 0)throw"not supported algorithm: "+ca;return ga.HASHLENGTH[ya]},u$1.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$1.crypto.Mac=function(ca){this.setAlgAndProvider=function(ga,ya){if((ga=ga.toLowerCase())==null&&(ga="hmacsha1"),(ga=ga.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+ga;ya===void 0&&(ya=u$1.crypto.Util.DEFAULTPROVIDER[ga]),this.algProv=ga+"/"+ya;var _a=ga.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(_a)!=-1&&ya=="cryptojs"){try{var _s=u$1.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[_a];this.mac=h$1.algo.HMAC.create(_s,this.pass)}catch(Ss){throw"setAlgAndProvider hash alg set fail hashAlg="+_a+"/"+Ss}this.updateString=function(Ss){this.mac.update(Ss)},this.updateHex=function(Ss){var Ms=h$1.enc.Hex.parse(Ss);this.mac.update(Ms)},this.doFinal=function(){return this.mac.finalize().toString(h$1.enc.Hex)},this.doFinalString=function(Ss){return this.updateString(Ss),this.doFinal()},this.doFinalHex=function(Ss){return this.updateHex(Ss),this.doFinal()}}},this.updateString=function(ga){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(ga){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(ga){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(ga){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(ga){if(typeof ga=="string"){var ya=ga;return ga.length%2!=1&&ga.match(/^[0-9A-Fa-f]+$/)||(ya=ot(ga)),void(this.pass=h$1.enc.Hex.parse(ya))}if(typeof ga!="object")throw"KJUR.crypto.Mac unsupported password type: "+ga;if(ya=null,ga.hex!==void 0){if(ga.hex.length%2!=0||!ga.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+ga.hex;ya=ga.hex}if(ga.utf8!==void 0&&(ya=it(ga.utf8)),ga.rstr!==void 0&&(ya=ot(ga.rstr)),ga.b64!==void 0&&(ya=N$1(ga.b64)),ga.b64u!==void 0&&(ya=et(ga.b64u)),ya==null)throw"KJUR.crypto.Mac unsupported password type: "+ga;this.pass=h$1.enc.Hex.parse(ya)},ca!==void 0&&(ca.pass!==void 0&&this.setPassword(ca.pass),ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0&&(this.provName=u$1.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$1.crypto.Signature=function(ca){var ga=null;if(this._setAlgNames=function(){var ya=this.algName.match(/^(.+)with(.+)$/);ya&&(this.mdAlgName=ya[1].toLowerCase(),this.pubkeyAlgName=ya[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(ya,_a){for(var _s="",Ss=_a/4-ya.length,Ms=0;Ms<Ss;Ms++)_s+="0";return _s+ya},this.setAlgAndProvider=function(ya,_a){if(this._setAlgNames(),_a!="cryptojs/jsrsa")throw new Error("provider not supported: "+_a);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$1.crypto.MessageDigest({alg:this.mdAlgName})}catch(_s){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+_s)}this.init=function(_s,Ss){var Ms=null;try{Ms=Ss===void 0?Et.getKey(_s):Et.getKey(_s,Ss)}catch(Es){throw"init failed:"+Es}if(Ms.isPrivate===!0)this.prvKey=Ms,this.state="SIGN";else{if(Ms.isPublic!==!0)throw"init failed.:"+Ms;this.pubKey=Ms,this.state="VERIFY"}},this.updateString=function(_s){this.md.updateString(_s)},this.updateHex=function(_s){this.md.updateHex(_s)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$1.crypto.ECDSA!==void 0&&(this.prvKey=new u$1.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof X&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$1.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$1.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(_s){return this.updateString(_s),this.sign()},this.signHex=function(_s){return this.updateHex(_s),this.sign()},this.verify=function(_s){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$1.crypto.ECDSA!==void 0&&(this.pubKey=new u$1.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof X&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,_s,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof X&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,_s);if(u$1.crypto.ECDSA!==void 0&&this.pubKey instanceof u$1.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,_s);if(u$1.crypto.DSA!==void 0&&this.pubKey instanceof u$1.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,_s);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(ya,_a){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(ya){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(ya){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(ya){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(ya){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(ya){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=ca,ca!==void 0&&(ca.alg!==void 0&&(this.algName=ca.alg,ca.prov===void 0?this.provName=u$1.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=ca.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),ca.psssaltlen!==void 0&&(this.pssSaltLen=ca.psssaltlen),ca.prvkeypem!==void 0)){if(ca.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{ga=Et.getKey(ca.prvkeypem),this.init(ga)}catch(ya){throw"fatal error to load pem private key: "+ya}}},u$1.crypto.Cipher=function(ca){},u$1.crypto.Cipher.encrypt=function(ca,ga,ya){if(ga instanceof X&&ga.isPublic){var _a=u$1.crypto.Cipher.getAlgByKeyAndName(ga,ya);if(_a==="RSA")return ga.encrypt(ca);if(_a==="RSAOAEP")return ga.encryptOAEP(ca,"sha1");var _s=_a.match(/^RSAOAEP(\d+)$/);if(_s!==null)return ga.encryptOAEP(ca,"sha"+_s[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+ya}throw"Cipher.encrypt: unsupported key or algorithm"},u$1.crypto.Cipher.decrypt=function(ca,ga,ya){if(ga instanceof X&&ga.isPrivate){var _a=u$1.crypto.Cipher.getAlgByKeyAndName(ga,ya);if(_a==="RSA")return ga.decrypt(ca);if(_a==="RSAOAEP")return ga.decryptOAEP(ca,"sha1");var _s=_a.match(/^RSAOAEP(\d+)$/);if(_s!==null)return ga.decryptOAEP(ca,"sha"+_s[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+ya}throw"Cipher.decrypt: unsupported key or algorithm"},u$1.crypto.Cipher.getAlgByKeyAndName=function(ca,ga){if(ca instanceof X){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(ga)!=-1)return ga;if(ga==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+ga}throw"getAlgByKeyAndName: not supported algorithm name: "+ga},u$1.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var ft,gt,vt,mt,yt,wt,bt,xt,Et=(ft=function(ca,ga,ya){return gt(h$1.AES,ca,ga,ya)},gt=function(ca,ga,ya,_a){var _s=h$1.enc.Hex.parse(ga),Ss=h$1.enc.Hex.parse(ya),Ms=h$1.enc.Hex.parse(_a),Es={};Es.key=Ss,Es.iv=Ms,Es.ciphertext=_s;var Cs=ca.decrypt(Es,Ss,{iv:Ms});return h$1.enc.Hex.stringify(Cs)},vt=function(ca,ga,ya){return mt(h$1.AES,ca,ga,ya)},mt=function(ca,ga,ya,_a){var _s=h$1.enc.Hex.parse(ga),Ss=h$1.enc.Hex.parse(ya),Ms=h$1.enc.Hex.parse(_a),Es=ca.encrypt(_s,Ss,{iv:Ms}),Cs=h$1.enc.Hex.parse(Es.toString());return h$1.enc.Base64.stringify(Cs)},yt={"AES-256-CBC":{proc:ft,eproc:vt,keylen:32,ivlen:16},"AES-192-CBC":{proc:ft,eproc:vt,keylen:24,ivlen:16},"AES-128-CBC":{proc:ft,eproc:vt,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ca,ga,ya){return gt(h$1.TripleDES,ca,ga,ya)},eproc:function(ca,ga,ya){return mt(h$1.TripleDES,ca,ga,ya)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ca,ga,ya){return gt(h$1.DES,ca,ga,ya)},eproc:function(ca,ga,ya){return mt(h$1.DES,ca,ga,ya)},keylen:8,ivlen:8}},wt=function(ca){var ga={},ya=ca.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ya&&(ga.cipher=ya[1],ga.ivsalt=ya[2]);var _a=ca.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));_a&&(ga.type=_a[1]);var _s=-1,Ss=0;ca.indexOf(`\r
\r
`)!=-1&&(_s=ca.indexOf(`\r
\r
`),Ss=2),ca.indexOf(`

`)!=-1&&(_s=ca.indexOf(`

`),Ss=1);var Ms=ca.indexOf("-----END");if(_s!=-1&&Ms!=-1){var Es=ca.substring(_s+2*Ss,Ms-Ss);Es=Es.replace(/\s+/g,""),ga.data=Es}return ga},bt=function(ca,ga,ya){for(var _a=ya.substring(0,16),_s=h$1.enc.Hex.parse(_a),Ss=h$1.enc.Utf8.parse(ga),Ms=yt[ca].keylen+yt[ca].ivlen,Es="",Cs=null;;){var Ts=h$1.algo.MD5.create();if(Cs!=null&&Ts.update(Cs),Ts.update(Ss),Ts.update(_s),Cs=Ts.finalize(),(Es+=h$1.enc.Hex.stringify(Cs)).length>=2*Ms)break}var Bs={};return Bs.keyhex=Es.substr(0,2*yt[ca].keylen),Bs.ivhex=Es.substr(2*yt[ca].keylen,2*yt[ca].ivlen),Bs},xt=function(ca,ga,ya,_a){var _s=h$1.enc.Base64.parse(ca),Ss=h$1.enc.Hex.stringify(_s);return(0,yt[ga].proc)(Ss,ya,_a)},{version:"1.0.0",parsePKCS5PEM:function(ca){return wt(ca)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ca,ga,ya){return bt(ca,ga,ya)},decryptKeyB64:function(ca,ga,ya,_a){return xt(ca,ga,ya,_a)},getDecryptedKeyHex:function(ca,ga){var ya=wt(ca),_a=ya.cipher,_s=ya.ivsalt,Ss=ya.data,Ms=bt(_a,ga,_s).keyhex;return xt(Ss,_a,Ms,_s)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ca,ga,ya,_a,_s){var Ss="";if(_a!==void 0&&_a!=null||(_a="AES-256-CBC"),yt[_a]===void 0)throw"KEYUTIL unsupported algorithm: "+_a;_s!==void 0&&_s!=null||(_s=function(Es){var Cs=h$1.lib.WordArray.random(Es);return h$1.enc.Hex.stringify(Cs)}(yt[_a].ivlen).toUpperCase());var Ms=function(Es,Cs,Ts,Bs){return(0,yt[Cs].eproc)(Es,Ts,Bs)}(ga,_a,bt(_a,ya,_s).keyhex,_s);return Ss="-----BEGIN "+ca+` PRIVATE KEY-----\r
`,Ss+=`Proc-Type: 4,ENCRYPTED\r
`,Ss+="DEK-Info: "+_a+","+_s+`\r
`,Ss+=`\r
`,Ss+=Ms.replace(/(.{64})/g,`$1\r
`),Ss+=`\r
-----END `+ca+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(ca){var ga=It,ya=ga.getChildIdx,_a=ga.getV,_s={},Ss=ya(ca,0);if(Ss.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+Ss.length;_s.ciphertext=_a(ca,Ss[1]);var Ms=ya(ca,Ss[0]);if(Ms.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+Ms.length;if(_a(ca,Ms[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var Es=ya(ca,Ms[1]);if(Ms.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+Es.length;var Cs=ya(ca,Es[1]);if(Cs.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Cs.length;if(_a(ca,Cs[0])!="2a864886f70d0307")throw"this only supports TripleDES";_s.encryptionSchemeAlg="TripleDES",_s.encryptionSchemeIV=_a(ca,Cs[1]);var Ts=ya(ca,Es[0]);if(Ts.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ts.length;if(_a(ca,Ts[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var Bs=ya(ca,Ts[1]);if(Bs.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Bs.length;_s.pbkdf2Salt=_a(ca,Bs[0]);var Is=_a(ca,Bs[1]);try{_s.pbkdf2Iter=parseInt(Is,16)}catch{throw"malformed format pbkdf2Iter: "+Is}return _s},getPBKDF2KeyHexFromParam:function(ca,ga){var ya=h$1.enc.Hex.parse(ca.pbkdf2Salt),_a=ca.pbkdf2Iter,_s=h$1.PBKDF2(ga,ya,{keySize:6,iterations:_a});return h$1.enc.Hex.stringify(_s)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ca,ga){var ya=ut(ca,"ENCRYPTED PRIVATE KEY"),_a=this.parseHexOfEncryptedPKCS8(ya),_s=Et.getPBKDF2KeyHexFromParam(_a,ga),Ss={};Ss.ciphertext=h$1.enc.Hex.parse(_a.ciphertext);var Ms=h$1.enc.Hex.parse(_s),Es=h$1.enc.Hex.parse(_a.encryptionSchemeIV),Cs=h$1.TripleDES.decrypt(Ss,Ms,{iv:Es});return h$1.enc.Hex.stringify(Cs)},getKeyFromEncryptedPKCS8PEM:function(ca,ga){var ya=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ca,ga);return this.getKeyFromPlainPrivatePKCS8Hex(ya)},parsePlainPrivatePKCS8Hex:function(ca){var ga=It,ya=ga.getChildIdx,_a=ga.getV,_s={algparam:null};if(ca.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ss=ya(ca,0);if(Ss.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(ca.substr(Ss[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ms=ya(ca,Ss[1]);if(Ms.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(ca.substr(Ms[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(_s.algoid=_a(ca,Ms[0]),ca.substr(Ms[1],2)=="06"&&(_s.algparam=_a(ca,Ms[1])),ca.substr(Ss[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return _s.keyidx=ga.getVidx(ca,Ss[2]),_s},getKeyFromPlainPrivatePKCS8PEM:function(ca){var ga=ut(ca,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ga)},getKeyFromPlainPrivatePKCS8Hex:function(ca){var ga,ya=this.parsePlainPrivatePKCS8Hex(ca);if(ya.algoid=="2a864886f70d010101")ga=new X;else if(ya.algoid=="2a8648ce380401")ga=new u$1.crypto.DSA;else{if(ya.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";ga=new u$1.crypto.ECDSA}return ga.readPKCS8PrvKeyHex(ca),ga},_getKeyFromPublicPKCS8Hex:function(ca){var ga,ya=It.getVbyList(ca,0,[0,0],"06");if(ya==="2a864886f70d010101")ga=new X;else if(ya==="2a8648ce380401")ga=new u$1.crypto.DSA;else{if(ya!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";ga=new u$1.crypto.ECDSA}return ga.readPKCS8PubKeyHex(ca),ga},parsePublicRawRSAKeyHex:function(ca){var ga=It,ya=ga.getChildIdx,_a=ga.getV,_s={};if(ca.substr(0,2)!="30")throw"malformed RSA key(code:001)";var Ss=ya(ca,0);if(Ss.length!=2)throw"malformed RSA key(code:002)";if(ca.substr(Ss[0],2)!="02")throw"malformed RSA key(code:003)";if(_s.n=_a(ca,Ss[0]),ca.substr(Ss[1],2)!="02")throw"malformed RSA key(code:004)";return _s.e=_a(ca,Ss[1]),_s},parsePublicPKCS8Hex:function(ca){var ga=It,ya=ga.getChildIdx,_a=ga.getV,_s={algparam:null},Ss=ya(ca,0);if(Ss.length!=2)throw"outer DERSequence shall have 2 elements: "+Ss.length;var Ms=Ss[0];if(ca.substr(Ms,2)!="30")throw"malformed PKCS8 public key(code:001)";var Es=ya(ca,Ms);if(Es.length!=2)throw"malformed PKCS8 public key(code:002)";if(ca.substr(Es[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(_s.algoid=_a(ca,Es[0]),ca.substr(Es[1],2)=="06"?_s.algparam=_a(ca,Es[1]):ca.substr(Es[1],2)=="30"&&(_s.algparam={},_s.algparam.p=ga.getVbyList(ca,Es[1],[0],"02"),_s.algparam.q=ga.getVbyList(ca,Es[1],[1],"02"),_s.algparam.g=ga.getVbyList(ca,Es[1],[2],"02")),ca.substr(Ss[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return _s.key=_a(ca,Ss[1]).substr(2),_s}});Et.getKey=function(ca,ga,ya){var _a=(Os=It).getChildIdx;Os.getV;var _s=Os.getVbyList,Ss=u$1.crypto,Ms=Ss.ECDSA,Es=Ss.DSA,Cs=X,Ts=ut,Bs=Et;if(Cs!==void 0&&ca instanceof Cs||Ms!==void 0&&ca instanceof Ms||Es!==void 0&&ca instanceof Es)return ca;if(ca.curve!==void 0&&ca.xy!==void 0&&ca.d===void 0)return new Ms({pub:ca.xy,curve:ca.curve});if(ca.curve!==void 0&&ca.d!==void 0)return new Ms({prv:ca.d,curve:ca.curve});if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(js=new Cs).setPublic(ca.n,ca.e),js;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.co!==void 0&&ca.qi===void 0)return(js=new Cs).setPrivateEx(ca.n,ca.e,ca.d,ca.p,ca.q,ca.dp,ca.dq,ca.co),js;if(ca.kty===void 0&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p===void 0)return(js=new Cs).setPrivate(ca.n,ca.e,ca.d),js;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x===void 0)return(js=new Es).setPublic(ca.p,ca.q,ca.g,ca.y),js;if(ca.p!==void 0&&ca.q!==void 0&&ca.g!==void 0&&ca.y!==void 0&&ca.x!==void 0)return(js=new Es).setPrivate(ca.p,ca.q,ca.g,ca.y,ca.x),js;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d===void 0)return(js=new Cs).setPublic(et(ca.n),et(ca.e)),js;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0&&ca.p!==void 0&&ca.q!==void 0&&ca.dp!==void 0&&ca.dq!==void 0&&ca.qi!==void 0)return(js=new Cs).setPrivateEx(et(ca.n),et(ca.e),et(ca.d),et(ca.p),et(ca.q),et(ca.dp),et(ca.dq),et(ca.qi)),js;if(ca.kty==="RSA"&&ca.n!==void 0&&ca.e!==void 0&&ca.d!==void 0)return(js=new Cs).setPrivate(et(ca.n),et(ca.e),et(ca.d)),js;if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d===void 0){var Is=(Qs=new Ms({curve:ca.crv})).ecparams.keylen/4,Ps="04"+("0000000000"+et(ca.x)).slice(-Is)+("0000000000"+et(ca.y)).slice(-Is);return Qs.setPublicKeyHex(Ps),Qs}if(ca.kty==="EC"&&ca.crv!==void 0&&ca.x!==void 0&&ca.y!==void 0&&ca.d!==void 0){Is=(Qs=new Ms({curve:ca.crv})).ecparams.keylen/4,Ps="04"+("0000000000"+et(ca.x)).slice(-Is)+("0000000000"+et(ca.y)).slice(-Is);var Rs=("0000000000"+et(ca.d)).slice(-Is);return Qs.setPublicKeyHex(Ps),Qs.setPrivateKeyHex(Rs),Qs}if(ya==="pkcs5prv"){var ks,$s=ca,Os=It;if((ks=_a($s,0)).length===9)(js=new Cs).readPKCS5PrvKeyHex($s);else if(ks.length===6)(js=new Es).readPKCS5PrvKeyHex($s);else{if(!(ks.length>2&&$s.substr(ks[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(js=new Ms).readPKCS5PrvKeyHex($s)}return js}if(ya==="pkcs8prv")return js=Bs.getKeyFromPlainPrivatePKCS8Hex(ca);if(ya==="pkcs8pub")return Bs._getKeyFromPublicPKCS8Hex(ca);if(ya==="x509pub")return Mt.getPublicKeyFromCertHex(ca);if(ca.indexOf("-END CERTIFICATE-",0)!=-1||ca.indexOf("-END X509 CERTIFICATE-",0)!=-1||ca.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Mt.getPublicKeyFromCertPEM(ca);if(ca.indexOf("-END PUBLIC KEY-")!=-1){var Ls=ut(ca,"PUBLIC KEY");return Bs._getKeyFromPublicPKCS8Hex(Ls)}if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var Ds=Ts(ca,"RSA PRIVATE KEY");return Bs.getKey(Ds,null,"pkcs5prv")}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1){var Fs=_s(Ys=Ts(ca,"DSA PRIVATE KEY"),0,[1],"02"),Ns=_s(Ys,0,[2],"02"),Vs=_s(Ys,0,[3],"02"),Gs=_s(Ys,0,[4],"02"),Us=_s(Ys,0,[5],"02");return(js=new Es).setPrivate(new c$1(Fs,16),new c$1(Ns,16),new c$1(Vs,16),new c$1(Gs,16),new c$1(Us,16)),js}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")==-1)return Ds=Ts(ca,"EC PRIVATE KEY"),Bs.getKey(Ds,null,"pkcs5prv");if(ca.indexOf("-END PRIVATE KEY-")!=-1)return Bs.getKeyFromPlainPrivatePKCS8PEM(ca);if(ca.indexOf("-END RSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var zs=Bs.getDecryptedKeyHex(ca,ga),Hs=new X;return Hs.readPKCS5PrvKeyHex(zs),Hs}if(ca.indexOf("-END EC PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Qs,js=_s(Ys=Bs.getDecryptedKeyHex(ca,ga),0,[1],"04"),Zs=_s(Ys,0,[2,0],"06"),Ks=_s(Ys,0,[3,0],"03").substr(2);if(u$1.crypto.OID.oidhex2name[Zs]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Zs;return(Qs=new Ms({curve:u$1.crypto.OID.oidhex2name[Zs]})).setPublicKeyHex(Ks),Qs.setPrivateKeyHex(js),Qs.isPublic=!1,Qs}if(ca.indexOf("-END DSA PRIVATE KEY-")!=-1&&ca.indexOf("4,ENCRYPTED")!=-1){var Ys;return Fs=_s(Ys=Bs.getDecryptedKeyHex(ca,ga),0,[1],"02"),Ns=_s(Ys,0,[2],"02"),Vs=_s(Ys,0,[3],"02"),Gs=_s(Ys,0,[4],"02"),Us=_s(Ys,0,[5],"02"),(js=new Es).setPrivate(new c$1(Fs,16),new c$1(Ns,16),new c$1(Vs,16),new c$1(Gs,16),new c$1(Us,16)),js}if(ca.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Bs.getKeyFromEncryptedPKCS8PEM(ca,ga);throw new Error("not supported argument")},Et.generateKeypair=function(ca,ga){if(ca=="RSA"){var ya=ga;(Ms=new X).generate(ya,"10001"),Ms.isPrivate=!0,Ms.isPublic=!0;var _a=new X,_s=Ms.n.toString(16),Ss=Ms.e.toString(16);return _a.setPublic(_s,Ss),_a.isPrivate=!1,_a.isPublic=!0,(Es={}).prvKeyObj=Ms,Es.pubKeyObj=_a,Es}if(ca=="EC"){var Ms,Es,Cs=ga,Ts=new u$1.crypto.ECDSA({curve:Cs}).generateKeyPairHex();return(Ms=new u$1.crypto.ECDSA({curve:Cs})).setPublicKeyHex(Ts.ecpubhex),Ms.setPrivateKeyHex(Ts.ecprvhex),Ms.isPrivate=!0,Ms.isPublic=!1,(_a=new u$1.crypto.ECDSA({curve:Cs})).setPublicKeyHex(Ts.ecpubhex),_a.isPrivate=!1,_a.isPublic=!0,(Es={}).prvKeyObj=Ms,Es.pubKeyObj=_a,Es}throw"unknown algorithm: "+ca},Et.getPEM=function(ca,ga,ya,_a,_s,Ss){var Ms=u$1,Es=Ms.asn1,Cs=Es.DERObjectIdentifier,Ts=Es.DERInteger,Bs=Es.ASN1Util.newObject,Is=Es.x509.SubjectPublicKeyInfo,Ps=Ms.crypto,Rs=Ps.DSA,ks=Ps.ECDSA,$s=X;function Os(Qs){return Bs({seq:[{int:0},{int:{bigint:Qs.n}},{int:Qs.e},{int:{bigint:Qs.d}},{int:{bigint:Qs.p}},{int:{bigint:Qs.q}},{int:{bigint:Qs.dmp1}},{int:{bigint:Qs.dmq1}},{int:{bigint:Qs.coeff}}]})}function Ls(Qs){return Bs({seq:[{int:1},{octstr:{hex:Qs.prvKeyHex}},{tag:["a0",!0,{oid:{name:Qs.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Qs.pubKeyHex}}]}]})}function Ds(Qs){return Bs({seq:[{int:0},{int:{bigint:Qs.p}},{int:{bigint:Qs.q}},{int:{bigint:Qs.g}},{int:{bigint:Qs.y}},{int:{bigint:Qs.x}}]})}if(($s!==void 0&&ca instanceof $s||Rs!==void 0&&ca instanceof Rs||ks!==void 0&&ca instanceof ks)&&ca.isPublic==1&&(ga===void 0||ga=="PKCS8PUB"))return at(Gs=new Is(ca).getEncodedHex(),"PUBLIC KEY");if(ga=="PKCS1PRV"&&$s!==void 0&&ca instanceof $s&&(ya===void 0||ya==null)&&ca.isPrivate==1)return at(Gs=Os(ca).getEncodedHex(),"RSA PRIVATE KEY");if(ga=="PKCS1PRV"&&ks!==void 0&&ca instanceof ks&&(ya===void 0||ya==null)&&ca.isPrivate==1){var Fs=new Cs({name:ca.curveName}).getEncodedHex(),Ns=Ls(ca).getEncodedHex(),Vs="";return Vs+=at(Fs,"EC PARAMETERS"),Vs+=at(Ns,"EC PRIVATE KEY")}if(ga=="PKCS1PRV"&&Rs!==void 0&&ca instanceof Rs&&(ya===void 0||ya==null)&&ca.isPrivate==1)return at(Gs=Ds(ca).getEncodedHex(),"DSA PRIVATE KEY");if(ga=="PKCS5PRV"&&$s!==void 0&&ca instanceof $s&&ya!==void 0&&ya!=null&&ca.isPrivate==1){var Gs=Os(ca).getEncodedHex();return _a===void 0&&(_a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Gs,ya,_a,Ss)}if(ga=="PKCS5PRV"&&ks!==void 0&&ca instanceof ks&&ya!==void 0&&ya!=null&&ca.isPrivate==1)return Gs=Ls(ca).getEncodedHex(),_a===void 0&&(_a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Gs,ya,_a,Ss);if(ga=="PKCS5PRV"&&Rs!==void 0&&ca instanceof Rs&&ya!==void 0&&ya!=null&&ca.isPrivate==1)return Gs=Ds(ca).getEncodedHex(),_a===void 0&&(_a="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Gs,ya,_a,Ss);var Us=function(Qs,js){var Zs=zs(Qs,js);return new Bs({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Zs.pbkdf2Salt}},{int:Zs.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Zs.encryptionSchemeIV}}]}]}]},{octstr:{hex:Zs.ciphertext}}]}).getEncodedHex()},zs=function(Qs,js){var Zs=h$1.lib.WordArray.random(8),Ks=h$1.lib.WordArray.random(8),Ys=h$1.PBKDF2(js,Zs,{keySize:6,iterations:100}),qs=h$1.enc.Hex.parse(Qs),eu=h$1.TripleDES.encrypt(qs,Ys,{iv:Ks})+"",Js={};return Js.ciphertext=eu,Js.pbkdf2Salt=h$1.enc.Hex.stringify(Zs),Js.pbkdf2Iter=100,Js.encryptionSchemeAlg="DES-EDE3-CBC",Js.encryptionSchemeIV=h$1.enc.Hex.stringify(Ks),Js};if(ga=="PKCS8PRV"&&$s!=null&&ca instanceof $s&&ca.isPrivate==1){var Hs=Os(ca).getEncodedHex();return Gs=Bs({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Hs}}]}).getEncodedHex(),ya===void 0||ya==null?at(Gs,"PRIVATE KEY"):at(Ns=Us(Gs,ya),"ENCRYPTED PRIVATE KEY")}if(ga=="PKCS8PRV"&&ks!==void 0&&ca instanceof ks&&ca.isPrivate==1)return Hs=new Bs({seq:[{int:1},{octstr:{hex:ca.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+ca.pubKeyHex}}]}]}).getEncodedHex(),Gs=Bs({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:ca.curveName}}]},{octstr:{hex:Hs}}]}).getEncodedHex(),ya===void 0||ya==null?at(Gs,"PRIVATE KEY"):at(Ns=Us(Gs,ya),"ENCRYPTED PRIVATE KEY");if(ga=="PKCS8PRV"&&Rs!==void 0&&ca instanceof Rs&&ca.isPrivate==1)return Hs=new Ts({bigint:ca.x}).getEncodedHex(),Gs=Bs({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:ca.p}},{int:{bigint:ca.q}},{int:{bigint:ca.g}}]}]},{octstr:{hex:Hs}}]}).getEncodedHex(),ya===void 0||ya==null?at(Gs,"PRIVATE KEY"):at(Ns=Us(Gs,ya),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Et.getKeyFromCSRPEM=function(ca){var ga=ut(ca,"CERTIFICATE REQUEST");return Et.getKeyFromCSRHex(ga)},Et.getKeyFromCSRHex=function(ca){var ga=Et.parseCSRHex(ca);return Et.getKey(ga.p8pubkeyhex,null,"pkcs8pub")},Et.parseCSRHex=function(ca){var ga=It,ya=ga.getChildIdx,_a=ga.getTLV,_s={},Ss=ca;if(Ss.substr(0,2)!="30")throw"malformed CSR(code:001)";var Ms=ya(Ss,0);if(Ms.length<1)throw"malformed CSR(code:002)";if(Ss.substr(Ms[0],2)!="30")throw"malformed CSR(code:003)";var Es=ya(Ss,Ms[0]);if(Es.length<3)throw"malformed CSR(code:004)";return _s.p8pubkeyhex=_a(Ss,Es[2]),_s},Et.getKeyID=function(ca){var ga=Et,ya=It;typeof ca=="string"&&ca.indexOf("BEGIN ")!=-1&&(ca=ga.getKey(ca));var _a=ut(ga.getPEM(ca)),_s=ya.getIdxbyList(_a,0,[1]),Ss=ya.getV(_a,_s).substring(2);return u$1.crypto.Util.hashHex(Ss,"sha1")},Et.getJWKFromKey=function(ca){var ga={};if(ca instanceof X&&ca.isPrivate)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga.d=tt(ca.d.toString(16)),ga.p=tt(ca.p.toString(16)),ga.q=tt(ca.q.toString(16)),ga.dp=tt(ca.dmp1.toString(16)),ga.dq=tt(ca.dmq1.toString(16)),ga.qi=tt(ca.coeff.toString(16)),ga;if(ca instanceof X&&ca.isPublic)return ga.kty="RSA",ga.n=tt(ca.n.toString(16)),ga.e=tt(ca.e.toString(16)),ga;if(ca instanceof u$1.crypto.ECDSA&&ca.isPrivate){if((_a=ca.getShortNISTPCurveName())!=="P-256"&&_a!=="P-384")throw"unsupported curve name for JWT: "+_a;var ya=ca.getPublicKeyXYHex();return ga.kty="EC",ga.crv=_a,ga.x=tt(ya.x),ga.y=tt(ya.y),ga.d=tt(ca.prvKeyHex),ga}if(ca instanceof u$1.crypto.ECDSA&&ca.isPublic){var _a;if((_a=ca.getShortNISTPCurveName())!=="P-256"&&_a!=="P-384")throw"unsupported curve name for JWT: "+_a;return ya=ca.getPublicKeyXYHex(),ga.kty="EC",ga.crv=_a,ga.x=tt(ya.x),ga.y=tt(ya.y),ga}throw"not supported key object"},u$1.asn1!==void 0&&u$1.asn1||(u$1.asn1={}),u$1.asn1.ASN1Util=new function(){this.integerToByteHex=function(ca){var ga=ca.toString(16);return ga.length%2==1&&(ga="0"+ga),ga},this.bigIntToMinTwosComplementsHex=function(ca){var ga=ca.toString(16);if(ga.substr(0,1)!="-")ga.length%2==1?ga="0"+ga:ga.match(/^[0-7]/)||(ga="00"+ga);else{var ya=ga.substr(1).length;ya%2==1?ya+=1:ga.match(/^[0-7]/)||(ya+=2);for(var _a="",_s=0;_s<ya;_s++)_a+="f";ga=new c$1(_a,16).xor(ca).add(c$1.ONE).toString(16).replace(/^-/,"")}return ga},this.getPEMStringFromHex=function(ca,ga){return at(ca,ga)},this.newObject=function(ca){var ga=u$1.asn1,ya=ga.ASN1Object,_a=ga.DERBoolean,_s=ga.DERInteger,Ss=ga.DERBitString,Ms=ga.DEROctetString,Es=ga.DERNull,Cs=ga.DERObjectIdentifier,Ts=ga.DEREnumerated,Bs=ga.DERUTF8String,Is=ga.DERNumericString,Ps=ga.DERPrintableString,Rs=ga.DERTeletexString,ks=ga.DERIA5String,$s=ga.DERUTCTime,Os=ga.DERGeneralizedTime,Ls=ga.DERVisibleString,Ds=ga.DERBMPString,Fs=ga.DERSequence,Ns=ga.DERSet,Vs=ga.DERTaggedObject,Gs=ga.ASN1Util.newObject;if(ca instanceof ga.ASN1Object)return ca;var Us=Object.keys(ca);if(Us.length!=1)throw new Error("key of param shall be only one.");var zs=Us[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+zs+":")==-1)throw new Error("undefined key: "+zs);if(zs=="bool")return new _a(ca[zs]);if(zs=="int")return new _s(ca[zs]);if(zs=="bitstr")return new Ss(ca[zs]);if(zs=="octstr")return new Ms(ca[zs]);if(zs=="null")return new Es(ca[zs]);if(zs=="oid")return new Cs(ca[zs]);if(zs=="enum")return new Ts(ca[zs]);if(zs=="utf8str")return new Bs(ca[zs]);if(zs=="numstr")return new Is(ca[zs]);if(zs=="prnstr")return new Ps(ca[zs]);if(zs=="telstr")return new Rs(ca[zs]);if(zs=="ia5str")return new ks(ca[zs]);if(zs=="utctime")return new $s(ca[zs]);if(zs=="gentime")return new Os(ca[zs]);if(zs=="visstr")return new Ls(ca[zs]);if(zs=="bmpstr")return new Ds(ca[zs]);if(zs=="asn1")return new ya(ca[zs]);if(zs=="seq"){for(var Hs=ca[zs],Qs=[],js=0;js<Hs.length;js++){var Zs=Gs(Hs[js]);Qs.push(Zs)}return new Fs({array:Qs})}if(zs=="set"){for(Hs=ca[zs],Qs=[],js=0;js<Hs.length;js++)Zs=Gs(Hs[js]),Qs.push(Zs);return new Ns({array:Qs})}if(zs=="tag"){var Ks=ca[zs];if(Object.prototype.toString.call(Ks)==="[object Array]"&&Ks.length==3){var Ys=Gs(Ks[2]);return new Vs({tag:Ks[0],explicit:Ks[1],obj:Ys})}return new Vs(Ks)}},this.jsonToASN1HEX=function(ca){return this.newObject(ca).getEncodedHex()}},u$1.asn1.ASN1Util.oidHexToInt=function(ca){for(var ga="",ya=parseInt(ca.substr(0,2),16),_a=(ga=Math.floor(ya/40)+"."+ya%40,""),_s=2;_s<ca.length;_s+=2){var Ss=("00000000"+parseInt(ca.substr(_s,2),16).toString(2)).slice(-8);_a+=Ss.substr(1,7),Ss.substr(0,1)=="0"&&(ga=ga+"."+new c$1(_a,2).toString(10),_a="")}return ga},u$1.asn1.ASN1Util.oidIntToHex=function(ca){var ga=function(Es){var Cs=Es.toString(16);return Cs.length==1&&(Cs="0"+Cs),Cs},ya=function(Es){var Cs="",Ts=new c$1(Es,10).toString(2),Bs=7-Ts.length%7;Bs==7&&(Bs=0);for(var Is="",Ps=0;Ps<Bs;Ps++)Is+="0";for(Ts=Is+Ts,Ps=0;Ps<Ts.length-1;Ps+=7){var Rs=Ts.substr(Ps,7);Ps!=Ts.length-7&&(Rs="1"+Rs),Cs+=ga(parseInt(Rs,2))}return Cs};if(!ca.match(/^[0-9.]+$/))throw"malformed oid string: "+ca;var _a="",_s=ca.split("."),Ss=40*parseInt(_s[0])+parseInt(_s[1]);_a+=ga(Ss),_s.splice(0,2);for(var Ms=0;Ms<_s.length;Ms++)_a+=ya(_s[Ms]);return _a},u$1.asn1.ASN1Object=function(ca){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var ga=this.hV.length/2,ya=ga.toString(16);if(ya.length%2==1&&(ya="0"+ya),ga<128)return ya;var _a=ya.length/2;if(_a>15)throw"ASN.1 length too long to represent by 8x: n = "+ga.toString(16);return(128+_a).toString(16)+ya},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(ga){this.params=ga},ca!=null&&ca.tlv!=null&&(this.hTLV=ca.tlv,this.isModified=!1)},u$1.asn1.DERAbstractString=function(ca){u$1.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=it(this.s).toLowerCase()},this.setStringHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"?this.setString(ca):ca.str!==void 0?this.setString(ca.str):ca.hex!==void 0&&this.setStringHex(ca.hex))},l$2.lang.extend(u$1.asn1.DERAbstractString,u$1.asn1.ASN1Object),u$1.asn1.DERAbstractTime=function(ca){u$1.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(ga){var ya=ga.getTime()+6e4*ga.getTimezoneOffset();return new Date(ya)},this.formatDate=function(ga,ya,_a){var _s=this.zeroPadding,Ss=this.localDateToUTC(ga),Ms=String(Ss.getFullYear());ya=="utc"&&(Ms=Ms.substr(2,2));var Es=Ms+_s(String(Ss.getMonth()+1),2)+_s(String(Ss.getDate()),2)+_s(String(Ss.getHours()),2)+_s(String(Ss.getMinutes()),2)+_s(String(Ss.getSeconds()),2);if(_a===!0){var Cs=Ss.getMilliseconds();if(Cs!=0){var Ts=_s(String(Cs),3);Es=Es+"."+(Ts=Ts.replace(/[0]+$/,""))}}return Es+"Z"},this.zeroPadding=function(ga,ya){return ga.length>=ya?ga:new Array(ya-ga.length+1).join("0")+ga},this.getString=function(){return this.s},this.setString=function(ga){this.hTLV=null,this.isModified=!0,this.s=ga,this.hV=J(ga)},this.setByDateValue=function(ga,ya,_a,_s,Ss,Ms){var Es=new Date(Date.UTC(ga,ya-1,_a,_s,Ss,Ms,0));this.setByDate(Es)},this.getFreshValueHex=function(){return this.hV}},l$2.lang.extend(u$1.asn1.DERAbstractTime,u$1.asn1.ASN1Object),u$1.asn1.DERAbstractStructured=function(ca){u$1.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array=ga},this.appendASN1Object=function(ga){this.hTLV=null,this.isModified=!0,this.asn1Array.push(ga)},this.asn1Array=new Array,ca!==void 0&&ca.array!==void 0&&(this.asn1Array=ca.array)},l$2.lang.extend(u$1.asn1.DERAbstractStructured,u$1.asn1.ASN1Object),u$1.asn1.DERBoolean=function(ca){u$1.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=ca==0?"010100":"0101ff"},l$2.lang.extend(u$1.asn1.DERBoolean,u$1.asn1.ASN1Object),u$1.asn1.DERInteger=function(ca){u$1.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$1.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var ya=new c$1(String(ga),10);this.setByBigInteger(ya)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.bigint!==void 0?this.setByBigInteger(ca.bigint):ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$1.asn1.DERInteger,u$1.asn1.ASN1Object),u$1.asn1.DERBitString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$1.asn1.ASN1Util.newObject(ca.obj);ca.hex="00"+ga.getEncodedHex()}u$1.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(ya){this.hTLV=null,this.isModified=!0,this.hV=ya},this.setUnusedBitsAndHexValue=function(ya,_a){if(ya<0||7<ya)throw"unused bits shall be from 0 to 7: u = "+ya;var _s="0"+ya;this.hTLV=null,this.isModified=!0,this.hV=_s+_a},this.setByBinaryString=function(ya){var _a=8-(ya=ya.replace(/0+$/,"")).length%8;_a==8&&(_a=0);for(var _s=0;_s<=_a;_s++)ya+="0";var Ss="";for(_s=0;_s<ya.length-1;_s+=8){var Ms=ya.substr(_s,8),Es=parseInt(Ms,2).toString(16);Es.length==1&&(Es="0"+Es),Ss+=Es}this.hTLV=null,this.isModified=!0,this.hV="0"+_a+Ss},this.setByBooleanArray=function(ya){for(var _a="",_s=0;_s<ya.length;_s++)ya[_s]==1?_a+="1":_a+="0";this.setByBinaryString(_a)},this.newFalseArray=function(ya){for(var _a=new Array(ya),_s=0;_s<ya;_s++)_a[_s]=!1;return _a},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(typeof ca=="string"&&ca.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(ca):ca.hex!==void 0?this.setHexValueIncludingUnusedBits(ca.hex):ca.bin!==void 0?this.setByBinaryString(ca.bin):ca.array!==void 0&&this.setByBooleanArray(ca.array))},l$2.lang.extend(u$1.asn1.DERBitString,u$1.asn1.ASN1Object),u$1.asn1.DEROctetString=function(ca){if(ca!==void 0&&ca.obj!==void 0){var ga=u$1.asn1.ASN1Util.newObject(ca.obj);ca.hex=ga.getEncodedHex()}u$1.asn1.DEROctetString.superclass.constructor.call(this,ca),this.hT="04"},l$2.lang.extend(u$1.asn1.DEROctetString,u$1.asn1.DERAbstractString),u$1.asn1.DERNull=function(){u$1.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},l$2.lang.extend(u$1.asn1.DERNull,u$1.asn1.ASN1Object),u$1.asn1.DERObjectIdentifier=function(ca){u$1.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(ga){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ga},this.setValueOidString=function(ga){var ya=function(_a){var _s=function(Bs){var Is=Bs.toString(16);return Is.length==1&&(Is="0"+Is),Is},Ss=function(Bs){var Is="",Ps=parseInt(Bs,10).toString(2),Rs=7-Ps.length%7;Rs==7&&(Rs=0);for(var ks="",$s=0;$s<Rs;$s++)ks+="0";for(Ps=ks+Ps,$s=0;$s<Ps.length-1;$s+=7){var Os=Ps.substr($s,7);$s!=Ps.length-7&&(Os="1"+Os),Is+=_s(parseInt(Os,2))}return Is};try{if(!_a.match(/^[0-9.]+$/))return null;var Ms="",Es=_a.split("."),Cs=40*parseInt(Es[0],10)+parseInt(Es[1],10);Ms+=_s(Cs),Es.splice(0,2);for(var Ts=0;Ts<Es.length;Ts++)Ms+=Ss(Es[Ts]);return Ms}catch{return null}}(ga);if(ya==null)throw new Error("malformed oid string: "+ga);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ya},this.setValueName=function(ga){var ya=u$1.asn1.x509.OID.name2oid(ga);if(ya==="")throw new Error("DERObjectIdentifier oidName undefined: "+ga);this.setValueOidString(ya)},this.setValueNameOrOid=function(ga){ga.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(ga):this.setValueName(ga)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(ga){typeof ga=="string"?this.setValueNameOrOid(ga):ga.oid!==void 0?this.setValueNameOrOid(ga.oid):ga.name!==void 0?this.setValueNameOrOid(ga.name):ga.hex!==void 0&&this.setValueHex(ga.hex)},ca!==void 0&&this.setByParam(ca)},l$2.lang.extend(u$1.asn1.DERObjectIdentifier,u$1.asn1.ASN1Object),u$1.asn1.DEREnumerated=function(ca){u$1.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(ga){this.hTLV=null,this.isModified=!0,this.hV=u$1.asn1.ASN1Util.bigIntToMinTwosComplementsHex(ga)},this.setByInteger=function(ga){var ya=new c$1(String(ga),10);this.setByBigInteger(ya)},this.setValueHex=function(ga){this.hV=ga},this.getFreshValueHex=function(){return this.hV},ca!==void 0&&(ca.int!==void 0?this.setByInteger(ca.int):typeof ca=="number"?this.setByInteger(ca):ca.hex!==void 0&&this.setValueHex(ca.hex))},l$2.lang.extend(u$1.asn1.DEREnumerated,u$1.asn1.ASN1Object),u$1.asn1.DERUTF8String=function(ca){u$1.asn1.DERUTF8String.superclass.constructor.call(this,ca),this.hT="0c"},l$2.lang.extend(u$1.asn1.DERUTF8String,u$1.asn1.DERAbstractString),u$1.asn1.DERNumericString=function(ca){u$1.asn1.DERNumericString.superclass.constructor.call(this,ca),this.hT="12"},l$2.lang.extend(u$1.asn1.DERNumericString,u$1.asn1.DERAbstractString),u$1.asn1.DERPrintableString=function(ca){u$1.asn1.DERPrintableString.superclass.constructor.call(this,ca),this.hT="13"},l$2.lang.extend(u$1.asn1.DERPrintableString,u$1.asn1.DERAbstractString),u$1.asn1.DERTeletexString=function(ca){u$1.asn1.DERTeletexString.superclass.constructor.call(this,ca),this.hT="14"},l$2.lang.extend(u$1.asn1.DERTeletexString,u$1.asn1.DERAbstractString),u$1.asn1.DERIA5String=function(ca){u$1.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="16"},l$2.lang.extend(u$1.asn1.DERIA5String,u$1.asn1.DERAbstractString),u$1.asn1.DERVisibleString=function(ca){u$1.asn1.DERIA5String.superclass.constructor.call(this,ca),this.hT="1a"},l$2.lang.extend(u$1.asn1.DERVisibleString,u$1.asn1.DERAbstractString),u$1.asn1.DERBMPString=function(ca){u$1.asn1.DERBMPString.superclass.constructor.call(this,ca),this.hT="1e"},l$2.lang.extend(u$1.asn1.DERBMPString,u$1.asn1.DERAbstractString),u$1.asn1.DERUTCTime=function(ca){u$1.asn1.DERUTCTime.superclass.constructor.call(this,ca),this.hT="17",this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{12}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date))},l$2.lang.extend(u$1.asn1.DERUTCTime,u$1.asn1.DERAbstractTime),u$1.asn1.DERGeneralizedTime=function(ca){u$1.asn1.DERGeneralizedTime.superclass.constructor.call(this,ca),this.hT="18",this.withMillis=!1,this.setByDate=function(ga){this.hTLV=null,this.isModified=!0,this.date=ga,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)),this.hV},ca!==void 0&&(ca.str!==void 0?this.setString(ca.str):typeof ca=="string"&&ca.match(/^[0-9]{14}Z$/)?this.setString(ca):ca.hex!==void 0?this.setStringHex(ca.hex):ca.date!==void 0&&this.setByDate(ca.date),ca.millis===!0&&(this.withMillis=!0))},l$2.lang.extend(u$1.asn1.DERGeneralizedTime,u$1.asn1.DERAbstractTime),u$1.asn1.DERSequence=function(ca){u$1.asn1.DERSequence.superclass.constructor.call(this,ca),this.hT="30",this.getFreshValueHex=function(){for(var ga="",ya=0;ya<this.asn1Array.length;ya++)ga+=this.asn1Array[ya].getEncodedHex();return this.hV=ga,this.hV}},l$2.lang.extend(u$1.asn1.DERSequence,u$1.asn1.DERAbstractStructured),u$1.asn1.DERSet=function(ca){u$1.asn1.DERSet.superclass.constructor.call(this,ca),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var ga=new Array,ya=0;ya<this.asn1Array.length;ya++){var _a=this.asn1Array[ya];ga.push(_a.getEncodedHex())}return this.sortFlag==1&&ga.sort(),this.hV=ga.join(""),this.hV},ca!==void 0&&ca.sortflag!==void 0&&ca.sortflag==0&&(this.sortFlag=!1)},l$2.lang.extend(u$1.asn1.DERSet,u$1.asn1.DERAbstractStructured),u$1.asn1.DERTaggedObject=function(ca){u$1.asn1.DERTaggedObject.superclass.constructor.call(this);var ga=u$1.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(ya,_a,_s){this.hT=_a,this.isExplicit=ya,this.asn1Object=_s,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=_s.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,_a),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(ya){ya.tag!=null&&(this.hT=ya.tag),ya.explicit!=null&&(this.isExplicit=ya.explicit),ya.tage!=null&&(this.hT=ya.tage,this.isExplicit=!0),ya.tagi!=null&&(this.hT=ya.tagi,this.isExplicit=!1),ya.obj!=null&&(ya.obj instanceof ga.ASN1Object?(this.asn1Object=ya.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof ya.obj=="object"&&(this.asn1Object=ga.ASN1Util.newObject(ya.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ca!=null&&this.setByParam(ca)},l$2.lang.extend(u$1.asn1.DERTaggedObject,u$1.asn1.ASN1Object);var It=new function(){};function Ct(ca,ga){for(var ya="",_a=ga/4-ca.length,_s=0;_s<_a;_s++)ya+="0";return ya+ca}function St(ca,ga,ya){for(var _a="",_s=0;_a.length<ga;)_a+=rt(ya(ot(ca+String.fromCharCode.apply(String,[(4278190080&_s)>>24,(16711680&_s)>>16,(65280&_s)>>8,255&_s])))),_s+=1;return _a}function Bt(ca){for(var ga in u$1.crypto.Util.DIGESTINFOHEAD){var ya=u$1.crypto.Util.DIGESTINFOHEAD[ga],_a=ya.length;if(ca.substring(0,_a)==ya)return[ga,ca.substring(_a)]}return[]}function Mt(ca){var ga,ya=It,_a=ya.getChildIdx,_s=ya.getV,Ss=ya.getTLV,Ms=ya.getVbyList,Es=ya.getVbyListEx,Cs=ya.getTLVbyList,Ts=ya.getTLVbyListEx,Bs=ya.getIdxbyList,Is=ya.getIdxbyListEx,Ps=ya.getVidx,Rs=ya.getInt,ks=ya.oidname,$s=ya.hextooidstr,Os=ut;try{ga=u$1.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Ls=Cs(this.hex,0,[0,0]);if(Ls.substr(0,2)=="a0"){var Ds=Cs(Ls,0,[0]),Fs=Rs(Ds,0);if(Fs<0||2<Fs)throw new Error("malformed version field");return this.version=Fs+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return Es(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Ls=Ts(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Ls)},this.getAlgorithmIdentifierName=function(Ls){for(var Ds in ga)if(Ls===ga[Ds])return Ds;return ks(Es(Ls,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Cs(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Cs(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Ls=Ms(this.hex,0,[0,4+this.foffset,0]);return Ls=Ls.replace(/(..)/g,"%$1"),Ls=decodeURIComponent(Ls)},this.getNotAfter=function(){var Ls=Ms(this.hex,0,[0,4+this.foffset,1]);return Ls=Ls.replace(/(..)/g,"%$1"),Ls=decodeURIComponent(Ls)},this.getPublicKeyHex=function(){return ya.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Bs(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Ls=this.getPublicKeyIdx();return Bs(this.hex,Ls,[1,0],"30")},this.getPublicKey=function(){return Et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Ls=Cs(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Ls)},this.getSignatureValueHex=function(){return Ms(this.hex,0,[2],"03",!0)},this.verifySignature=function(Ls){var Ds=this.getSignatureAlgorithmField(),Fs=this.getSignatureValueHex(),Ns=Cs(this.hex,0,[0],"30"),Vs=new u$1.crypto.Signature({alg:Ds});return Vs.init(Ls),Vs.updateHex(Ns),Vs.verify(Fs)},this.parseExt=function(Ls){var Ds,Fs,Ns;if(Ls===void 0){if(Ns=this.hex,this.version!==3)return-1;Ds=Bs(Ns,0,[0,7,0],"30"),Fs=_a(Ns,Ds)}else{Ns=ut(Ls);var Vs=Bs(Ns,0,[0,3,0,0],"06");if(_s(Ns,Vs)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);Ds=Bs(Ns,0,[0,3,0,1,0],"30"),Fs=_a(Ns,Ds),this.hex=Ns}this.aExtInfo=new Array;for(var Gs=0;Gs<Fs.length;Gs++){var Us={critical:!1},zs=0;_a(Ns,Fs[Gs]).length===3&&(Us.critical=!0,zs=1),Us.oid=ya.hextooidstr(Ms(Ns,Fs[Gs],[0],"06"));var Hs=Bs(Ns,Fs[Gs],[1+zs]);Us.vidx=Ps(Ns,Hs),this.aExtInfo.push(Us)}},this.getExtInfo=function(Ls){var Ds=this.aExtInfo,Fs=Ls;if(Ls.match(/^[0-9.]+$/)||(Fs=u$1.asn1.x509.OID.name2oid(Ls)),Fs!==""){for(var Ns=0;Ns<Ds.length;Ns++)if(Ds[Ns].oid===Fs)return Ds[Ns]}},this.getExtBasicConstraints=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("basicConstraints");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"basicConstraints"};if(Ds&&(Ns.critical=!0),Ls==="3000")return Ns;if(Ls==="30030101ff")return Ns.cA=!0,Ns;if(Ls.substr(0,12)==="30060101ff02"){var Vs=_s(Ls,10),Gs=parseInt(Vs,16);return Ns.cA=!0,Ns.pathLen=Gs,Ns}throw new Error("hExtV parse error: "+Ls)},this.getExtKeyUsage=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("keyUsage");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"keyUsage"};return Ds&&(Ns.critical=!0),Ns.names=this.getExtKeyUsageString(Ls).split(","),Ns},this.getExtKeyUsageBin=function(Ls){if(Ls===void 0){var Ds=this.getExtInfo("keyUsage");if(Ds===void 0)return"";Ls=Ss(this.hex,Ds.vidx)}if(Ls.length!=8&&Ls.length!=10)throw new Error("malformed key usage value: "+Ls);var Fs="000000000000000"+parseInt(Ls.substr(6),16).toString(2);return Ls.length==8&&(Fs=Fs.slice(-8)),Ls.length==10&&(Fs=Fs.slice(-16)),(Fs=Fs.replace(/0+$/,""))==""&&(Fs="0"),Fs},this.getExtKeyUsageString=function(Ls){for(var Ds=this.getExtKeyUsageBin(Ls),Fs=new Array,Ns=0;Ns<Ds.length;Ns++)Ds.substr(Ns,1)=="1"&&Fs.push(Mt.KEYUSAGE_NAME[Ns]);return Fs.join(",")},this.getExtSubjectKeyIdentifier=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("subjectKeyIdentifier");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"subjectKeyIdentifier"};Ds&&(Ns.critical=!0);var Vs=_s(Ls,0);return Ns.kid={hex:Vs},Ns},this.getExtAuthorityKeyIdentifier=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("authorityKeyIdentifier");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"authorityKeyIdentifier"};Ds&&(Ns.critical=!0);for(var Vs=_a(Ls,0),Gs=0;Gs<Vs.length;Gs++){var Us=Ls.substr(Vs[Gs],2);if(Us==="80"&&(Ns.kid={hex:_s(Ls,Vs[Gs])}),Us==="a1"){var zs=Ss(Ls,Vs[Gs]),Hs=this.getGeneralNames(zs);Ns.issuer=Hs[0].dn}Us==="82"&&(Ns.sn={hex:_s(Ls,Vs[Gs])})}return Ns},this.getExtExtKeyUsage=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("extKeyUsage");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"extKeyUsage",array:[]};Ds&&(Ns.critical=!0);for(var Vs=_a(Ls,0),Gs=0;Gs<Vs.length;Gs++)Ns.array.push(ks(_s(Ls,Vs[Gs])));return Ns},this.getExtExtKeyUsageName=function(){var Ls=this.getExtInfo("extKeyUsage");if(Ls===void 0)return Ls;var Ds=new Array,Fs=Ss(this.hex,Ls.vidx);if(Fs==="")return Ds;for(var Ns=_a(Fs,0),Vs=0;Vs<Ns.length;Vs++)Ds.push(ks(_s(Fs,Ns[Vs])));return Ds},this.getExtSubjectAltName=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("subjectAltName");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"subjectAltName",array:[]};return Ds&&(Ns.critical=!0),Ns.array=this.getGeneralNames(Ls),Ns},this.getExtIssuerAltName=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("issuerAltName");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"issuerAltName",array:[]};return Ds&&(Ns.critical=!0),Ns.array=this.getGeneralNames(Ls),Ns},this.getGeneralNames=function(Ls){for(var Ds=_a(Ls,0),Fs=[],Ns=0;Ns<Ds.length;Ns++){var Vs=this.getGeneralName(Ss(Ls,Ds[Ns]));Vs!==void 0&&Fs.push(Vs)}return Fs},this.getGeneralName=function(Ls){var Ds=Ls.substr(0,2),Fs=_s(Ls,0),Ns=rt(Fs);return Ds=="81"?{rfc822:Ns}:Ds=="82"?{dns:Ns}:Ds=="86"?{uri:Ns}:Ds=="87"?{ip:lt(Fs)}:Ds=="a4"?{dn:this.getX500Name(Fs)}:void 0},this.getExtSubjectAltName2=function(){var Ls,Ds,Fs,Ns=this.getExtInfo("subjectAltName");if(Ns===void 0)return Ns;for(var Vs=new Array,Gs=Ss(this.hex,Ns.vidx),Us=_a(Gs,0),zs=0;zs<Us.length;zs++)Fs=Gs.substr(Us[zs],2),Ls=_s(Gs,Us[zs]),Fs==="81"&&(Ds=nt(Ls),Vs.push(["MAIL",Ds])),Fs==="82"&&(Ds=nt(Ls),Vs.push(["DNS",Ds])),Fs==="84"&&(Ds=Mt.hex2dn(Ls,0),Vs.push(["DN",Ds])),Fs==="86"&&(Ds=nt(Ls),Vs.push(["URI",Ds])),Fs==="87"&&(Ds=lt(Ls),Vs.push(["IP",Ds]));return Vs},this.getExtCRLDistributionPoints=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("cRLDistributionPoints");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"cRLDistributionPoints",array:[]};Ds&&(Ns.critical=!0);for(var Vs=_a(Ls,0),Gs=0;Gs<Vs.length;Gs++){var Us=Ss(Ls,Vs[Gs]);Ns.array.push(this.getDistributionPoint(Us))}return Ns},this.getDistributionPoint=function(Ls){for(var Ds={},Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++){var Vs=Ls.substr(Fs[Ns],2),Gs=Ss(Ls,Fs[Ns]);Vs=="a0"&&(Ds.dpname=this.getDistributionPointName(Gs))}return Ds},this.getDistributionPointName=function(Ls){for(var Ds={},Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++){var Vs=Ls.substr(Fs[Ns],2),Gs=Ss(Ls,Fs[Ns]);Vs=="a0"&&(Ds.full=this.getGeneralNames(Gs))}return Ds},this.getExtCRLDistributionPointsURI=function(){var Ls=this.getExtInfo("cRLDistributionPoints");if(Ls===void 0)return Ls;for(var Ds=new Array,Fs=_a(this.hex,Ls.vidx),Ns=0;Ns<Fs.length;Ns++)try{var Vs=nt(Ms(this.hex,Fs[Ns],[0,0,0],"86"));Ds.push(Vs)}catch{}return Ds},this.getExtAIAInfo=function(){var Ls=this.getExtInfo("authorityInfoAccess");if(Ls===void 0)return Ls;for(var Ds={ocsp:[],caissuer:[]},Fs=_a(this.hex,Ls.vidx),Ns=0;Ns<Fs.length;Ns++){var Vs=Ms(this.hex,Fs[Ns],[0],"06"),Gs=Ms(this.hex,Fs[Ns],[1],"86");Vs==="2b06010505073001"&&Ds.ocsp.push(nt(Gs)),Vs==="2b06010505073002"&&Ds.caissuer.push(nt(Gs))}return Ds},this.getExtAuthorityInfoAccess=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("authorityInfoAccess");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"authorityInfoAccess",array:[]};Ds&&(Ns.critical=!0);for(var Vs=_a(Ls,0),Gs=0;Gs<Vs.length;Gs++){var Us=Es(Ls,Vs[Gs],[0],"06"),zs=nt(Ms(Ls,Vs[Gs],[1],"86"));if(Us=="2b06010505073001")Ns.array.push({ocsp:zs});else{if(Us!="2b06010505073002")throw new Error("unknown method: "+Us);Ns.array.push({caissuer:zs})}}return Ns},this.getExtCertificatePolicies=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("certificatePolicies");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"certificatePolicies",array:[]};Ds&&(Ns.critical=!0);for(var Vs=_a(Ls,0),Gs=0;Gs<Vs.length;Gs++){var Us=Ss(Ls,Vs[Gs]),zs=this.getPolicyInformation(Us);Ns.array.push(zs)}return Ns},this.getPolicyInformation=function(Ls){var Ds={},Fs=Ms(Ls,0,[0],"06");Ds.policyoid=ks(Fs);var Ns=Is(Ls,0,[1],"30");if(Ns!=-1){Ds.array=[];for(var Vs=_a(Ls,Ns),Gs=0;Gs<Vs.length;Gs++){var Us=Ss(Ls,Vs[Gs]),zs=this.getPolicyQualifierInfo(Us);Ds.array.push(zs)}}return Ds},this.getPolicyQualifierInfo=function(Ls){var Ds={},Fs=Ms(Ls,0,[0],"06");if(Fs==="2b06010505070201"){var Ns=Es(Ls,0,[1],"16");Ds.cps=rt(Ns)}else if(Fs==="2b06010505070202"){var Vs=Cs(Ls,0,[1],"30");Ds.unotice=this.getUserNotice(Vs)}return Ds},this.getUserNotice=function(Ls){for(var Ds={},Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++){var Vs=Ss(Ls,Fs[Ns]);Vs.substr(0,2)!="30"&&(Ds.exptext=this.getDisplayText(Vs))}return Ds},this.getDisplayText=function(Ls){var Ds={};return Ds.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Ls.substr(0,2)],Ds.str=rt(_s(Ls,0)),Ds},this.getExtCRLNumber=function(Ls,Ds){var Fs={extname:"cRLNumber"};if(Ds&&(Fs.critical=!0),Ls.substr(0,2)=="02")return Fs.num={hex:_s(Ls,0)},Fs;throw new Error("hExtV parse error: "+Ls)},this.getExtCRLReason=function(Ls,Ds){var Fs={extname:"cRLReason"};if(Ds&&(Fs.critical=!0),Ls.substr(0,2)=="0a")return Fs.code=parseInt(_s(Ls,0),16),Fs;throw new Error("hExtV parse error: "+Ls)},this.getExtOcspNonce=function(Ls,Ds){var Fs={extname:"ocspNonce"};Ds&&(Fs.critical=!0);var Ns=_s(Ls,0);return Fs.hex=Ns,Fs},this.getExtOcspNoCheck=function(Ls,Ds){var Fs={extname:"ocspNoCheck"};return Ds&&(Fs.critical=!0),Fs},this.getExtAdobeTimeStamp=function(Ls,Ds){if(Ls===void 0&&Ds===void 0){var Fs=this.getExtInfo("adobeTimeStamp");if(Fs===void 0)return;Ls=Ss(this.hex,Fs.vidx),Ds=Fs.critical}var Ns={extname:"adobeTimeStamp"};Ds&&(Ns.critical=!0);var Vs=_a(Ls,0);if(Vs.length>1){var Gs=Ss(Ls,Vs[1]),Us=this.getGeneralName(Gs);Us.uri!=null&&(Ns.uri=Us.uri)}if(Vs.length>2){var zs=Ss(Ls,Vs[2]);zs=="0101ff"&&(Ns.reqauth=!0),zs=="010100"&&(Ns.reqauth=!1)}return Ns},this.getX500NameRule=function(Ls){for(var Ds=null,Fs=[],Ns=0;Ns<Ls.length;Ns++)for(var Vs=Ls[Ns],Gs=0;Gs<Vs.length;Gs++)Fs.push(Vs[Gs]);for(Ns=0;Ns<Fs.length;Ns++){var Us=Fs[Ns],zs=Us.ds,Hs=Us.value,Qs=Us.type;if(zs!="prn"&&zs!="utf8"&&zs!="ia5")return"mixed";if(zs=="ia5"){if(Qs!="CN")return"mixed";if(u$1.lang.String.isMail(Hs))continue;return"mixed"}if(Qs=="C"){if(zs=="prn")continue;return"mixed"}if(Ds==null)Ds=zs;else if(Ds!==zs)return"mixed"}return Ds==null?"prn":Ds},this.getX500Name=function(Ls){var Ds=this.getX500NameArray(Ls);return{array:Ds,str:this.dnarraytostr(Ds)}},this.getX500NameArray=function(Ls){for(var Ds=[],Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++)Ds.push(this.getRDN(Ss(Ls,Fs[Ns])));return Ds},this.getRDN=function(Ls){for(var Ds=[],Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++)Ds.push(this.getAttrTypeAndValue(Ss(Ls,Fs[Ns])));return Ds},this.getAttrTypeAndValue=function(Ls){var Ds={type:null,value:null,ds:null},Fs=_a(Ls,0),Ns=Ms(Ls,Fs[0],[],"06"),Vs=Ms(Ls,Fs[1],[]),Gs=u$1.asn1.ASN1Util.oidHexToInt(Ns);return Ds.type=u$1.asn1.x509.OID.oid2atype(Gs),Ds.ds=this.HEX2STAG[Ls.substr(Fs[1],2)],Ds.ds!="bmp"?Ds.value=nt(Vs):Ds.value=ht(Vs),Ds},this.readCertPEM=function(Ls){this.readCertHex(Os(Ls))},this.readCertHex=function(Ls){this.hex=Ls,this.getVersion();try{Bs(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Ls={};return Ls.version=this.getVersion(),Ls.serial={hex:this.getSerialNumberHex()},Ls.sigalg=this.getSignatureAlgorithmField(),Ls.issuer=this.getIssuer(),Ls.notbefore=this.getNotBefore(),Ls.notafter=this.getNotAfter(),Ls.subject=this.getSubject(),Ls.sbjpubkey=at(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Ls.ext=this.getExtParamArray()),Ls.sighex=this.getSignatureValueHex(),Ls},this.getExtParamArray=function(Ls){Ls==null&&Is(this.hex,0,[0,"[3]"])!=-1&&(Ls=Ts(this.hex,0,[0,"[3]",0],"30"));for(var Ds=[],Fs=_a(Ls,0),Ns=0;Ns<Fs.length;Ns++){var Vs=Ss(Ls,Fs[Ns]),Gs=this.getExtParam(Vs);Gs!=null&&Ds.push(Gs)}return Ds},this.getExtParam=function(Ls){var Ds=_a(Ls,0).length;if(Ds!=2&&Ds!=3)throw new Error("wrong number elements in Extension: "+Ds+" "+Ls);var Fs=$s(Ms(Ls,0,[0],"06")),Ns=!1;Ds==3&&Cs(Ls,0,[1])=="0101ff"&&(Ns=!0);var Vs=Cs(Ls,0,[Ds-1,0]),Gs=void 0;if(Fs=="2.5.29.14"?Gs=this.getExtSubjectKeyIdentifier(Vs,Ns):Fs=="2.5.29.15"?Gs=this.getExtKeyUsage(Vs,Ns):Fs=="2.5.29.17"?Gs=this.getExtSubjectAltName(Vs,Ns):Fs=="2.5.29.18"?Gs=this.getExtIssuerAltName(Vs,Ns):Fs=="2.5.29.19"?Gs=this.getExtBasicConstraints(Vs,Ns):Fs=="2.5.29.31"?Gs=this.getExtCRLDistributionPoints(Vs,Ns):Fs=="2.5.29.32"?Gs=this.getExtCertificatePolicies(Vs,Ns):Fs=="2.5.29.35"?Gs=this.getExtAuthorityKeyIdentifier(Vs,Ns):Fs=="2.5.29.37"?Gs=this.getExtExtKeyUsage(Vs,Ns):Fs=="1.3.6.1.5.5.7.1.1"?Gs=this.getExtAuthorityInfoAccess(Vs,Ns):Fs=="2.5.29.20"?Gs=this.getExtCRLNumber(Vs,Ns):Fs=="2.5.29.21"?Gs=this.getExtCRLReason(Vs,Ns):Fs=="1.3.6.1.5.5.7.48.1.2"?Gs=this.getExtOcspNonce(Vs,Ns):Fs=="1.3.6.1.5.5.7.48.1.5"?Gs=this.getExtOcspNoCheck(Vs,Ns):Fs=="1.2.840.113583.1.1.9.1"&&(Gs=this.getExtAdobeTimeStamp(Vs,Ns)),Gs!=null)return Gs;var Us={extname:Fs,extn:Vs};return Ns&&(Us.critical=!0),Us},this.findExt=function(Ls,Ds){for(var Fs=0;Fs<Ls.length;Fs++)if(Ls[Fs].extname==Ds)return Ls[Fs];return null},this.updateExtCDPFullURI=function(Ls,Ds){var Fs=this.findExt(Ls,"cRLDistributionPoints");if(Fs!=null&&Fs.array!=null){for(var Ns=Fs.array,Vs=0;Vs<Ns.length;Vs++)if(Ns[Vs].dpname!=null&&Ns[Vs].dpname.full!=null)for(var Gs=Ns[Vs].dpname.full,Us=0;Us<Gs.length;Us++){var zs=Gs[Vs];zs.uri!=null&&(zs.uri=Ds)}}},this.updateExtAIAOCSP=function(Ls,Ds){var Fs=this.findExt(Ls,"authorityInfoAccess");if(Fs!=null&&Fs.array!=null)for(var Ns=Fs.array,Vs=0;Vs<Ns.length;Vs++)Ns[Vs].ocsp!=null&&(Ns[Vs].ocsp=Ds)},this.updateExtAIACAIssuer=function(Ls,Ds){var Fs=this.findExt(Ls,"authorityInfoAccess");if(Fs!=null&&Fs.array!=null)for(var Ns=Fs.array,Vs=0;Vs<Ns.length;Vs++)Ns[Vs].caissuer!=null&&(Ns[Vs].caissuer=Ds)},this.dnarraytostr=function(Ls){return"/"+Ls.map(function(Ds){return function(Fs){return Fs.map(function(Ns){return function(Vs){return Vs.type+"="+Vs.value}(Ns).replace(/\+/,"\\+")}).join("+")}(Ds).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Ls,Ds,Fs,Ns,Vs=function(Ys){for(var qs="",eu=Ys.array,Js=0;Js<eu.length;Js++){var Xs=eu[Js];if(qs+="    policy oid: "+Xs.policyoid+`
`,Xs.array!==void 0)for(var ru=0;ru<Xs.array.length;ru++){var su=Xs.array[ru];su.cps!==void 0&&(qs+="    cps: "+su.cps+`
`)}}return qs},Gs=function(Ys){for(var qs="",eu=Ys.array,Js=0;Js<eu.length;Js++){var Xs=eu[Js];try{Xs.dpname.full[0].uri!==void 0&&(qs+="    "+Xs.dpname.full[0].uri+`
`)}catch{}try{Xs.dname.full[0].dn.hex!==void 0&&(qs+="    "+Mt.hex2dn(Xs.dpname.full[0].dn.hex)+`
`)}catch{}}return qs},Us=function(Ys){for(var qs="",eu=Ys.array,Js=0;Js<eu.length;Js++){var Xs=eu[Js];Xs.caissuer!==void 0&&(qs+="    caissuer: "+Xs.caissuer+`
`),Xs.ocsp!==void 0&&(qs+="    ocsp: "+Xs.ocsp+`
`)}return qs};if(Ls=`Basic Fields
`,Ls+="  serial number: "+this.getSerialNumberHex()+`
`,Ls+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Ls+="  issuer: "+this.getIssuerString()+`
`,Ls+="  notBefore: "+this.getNotBefore()+`
`,Ls+="  notAfter: "+this.getNotAfter()+`
`,Ls+="  subject: "+this.getSubjectString()+`
`,Ls+=`  subject public key info: 
`,Ls+="    key algorithm: "+(Ds=this.getPublicKey()).type+`
`,Ds.type==="RSA"&&(Ls+="    n="+dt(Ds.n.toString(16)).substr(0,16)+`...
`,Ls+="    e="+dt(Ds.e.toString(16))+`
`),(Fs=this.aExtInfo)!=null){Ls+=`X509v3 Extensions:
`;for(var zs=0;zs<Fs.length;zs++){var Hs=Fs[zs],Qs=u$1.asn1.x509.OID.oid2name(Hs.oid);Qs===""&&(Qs=Hs.oid);var js="";if(Hs.critical===!0&&(js="CRITICAL"),Ls+="  "+Qs+" "+js+`:
`,Qs==="basicConstraints"){var Zs=this.getExtBasicConstraints();Zs.cA===void 0?Ls+=`    {}
`:(Ls+="    cA=true",Zs.pathLen!==void 0&&(Ls+=", pathLen="+Zs.pathLen),Ls+=`
`)}else if(Qs==="keyUsage")Ls+="    "+this.getExtKeyUsageString()+`
`;else if(Qs==="subjectKeyIdentifier")Ls+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Qs==="authorityKeyIdentifier"){var Ks=this.getExtAuthorityKeyIdentifier();Ks.kid!==void 0&&(Ls+="    kid="+Ks.kid.hex+`
`)}else Qs==="extKeyUsage"?Ls+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Qs==="subjectAltName"?Ls+="    "+(Ns=this.getExtSubjectAltName(),JSON.stringify(Ns.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Qs==="cRLDistributionPoints"?Ls+=Gs(this.getExtCRLDistributionPoints()):Qs==="authorityInfoAccess"?Ls+=Us(this.getExtAuthorityInfoAccess()):Qs==="certificatePolicies"&&(Ls+=Vs(this.getExtCertificatePolicies()))}}return Ls+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Ls+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof ca=="string"&&(ca.indexOf("-----BEGIN")!=-1?this.readCertPEM(ca):u$1.lang.String.isHex(ca)&&this.readCertHex(ca))}function Pt(ca){return h$1.SHA256(ca).toString()}It.getLblen=function(ca,ga){if(ca.substr(ga+2,1)!="8")return 1;var ya=parseInt(ca.substr(ga+3,1));return ya==0?-1:0<ya&&ya<10?ya+1:-2},It.getL=function(ca,ga){var ya=It.getLblen(ca,ga);return ya<1?"":ca.substr(ga+2,2*ya)},It.getVblen=function(ca,ga){var ya;return(ya=It.getL(ca,ga))==""?-1:(ya.substr(0,1)==="8"?new c$1(ya.substr(2),16):new c$1(ya,16)).intValue()},It.getVidx=function(ca,ga){var ya=It.getLblen(ca,ga);return ya<0?ya:ga+2*(ya+1)},It.getV=function(ca,ga){var ya=It.getVidx(ca,ga),_a=It.getVblen(ca,ga);return ca.substr(ya,2*_a)},It.getTLV=function(ca,ga){return ca.substr(ga,2)+It.getL(ca,ga)+It.getV(ca,ga)},It.getTLVblen=function(ca,ga){return 2+2*It.getLblen(ca,ga)+2*It.getVblen(ca,ga)},It.getNextSiblingIdx=function(ca,ga){return It.getVidx(ca,ga)+2*It.getVblen(ca,ga)},It.getChildIdx=function(ca,ga){var ya,_a,_s,Ss=It,Ms=[];ya=Ss.getVidx(ca,ga),_a=2*Ss.getVblen(ca,ga),ca.substr(ga,2)=="03"&&(ya+=2,_a-=2),_s=0;for(var Es=ya;_s<=_a;){var Cs=Ss.getTLVblen(ca,Es);if((_s+=Cs)<=_a&&Ms.push(Es),Es+=Cs,_s>=_a)break}return Ms},It.getNthChildIdx=function(ca,ga,ya){return It.getChildIdx(ca,ga)[ya]},It.getIdxbyList=function(ca,ga,ya,_a){var _s,Ss,Ms=It;return ya.length==0?_a!==void 0&&ca.substr(ga,2)!==_a?-1:ga:(_s=ya.shift())>=(Ss=Ms.getChildIdx(ca,ga)).length?-1:Ms.getIdxbyList(ca,Ss[_s],ya,_a)},It.getIdxbyListEx=function(ca,ga,ya,_a){var _s,Ss,Ms=It;if(ya.length==0)return _a!==void 0&&ca.substr(ga,2)!==_a?-1:ga;_s=ya.shift(),Ss=Ms.getChildIdx(ca,ga);for(var Es=0,Cs=0;Cs<Ss.length;Cs++){var Ts=ca.substr(Ss[Cs],2);if(typeof _s=="number"&&!Ms.isContextTag(Ts)&&Es==_s||typeof _s=="string"&&Ms.isContextTag(Ts,_s))return Ms.getIdxbyListEx(ca,Ss[Cs],ya,_a);Ms.isContextTag(Ts)||Es++}return-1},It.getTLVbyList=function(ca,ga,ya,_a){var _s=It,Ss=_s.getIdxbyList(ca,ga,ya,_a);return Ss==-1||Ss>=ca.length?null:_s.getTLV(ca,Ss)},It.getTLVbyListEx=function(ca,ga,ya,_a){var _s=It,Ss=_s.getIdxbyListEx(ca,ga,ya,_a);return Ss==-1?null:_s.getTLV(ca,Ss)},It.getVbyList=function(ca,ga,ya,_a,_s){var Ss,Ms,Es=It;return(Ss=Es.getIdxbyList(ca,ga,ya,_a))==-1||Ss>=ca.length?null:(Ms=Es.getV(ca,Ss),_s===!0&&(Ms=Ms.substr(2)),Ms)},It.getVbyListEx=function(ca,ga,ya,_a,_s){var Ss,Ms,Es=It;return(Ss=Es.getIdxbyListEx(ca,ga,ya,_a))==-1?null:(Ms=Es.getV(ca,Ss),ca.substr(Ss,2)=="03"&&_s!==!1&&(Ms=Ms.substr(2)),Ms)},It.getInt=function(ca,ga,ya){ya==null&&(ya=-1);try{var _a=ca.substr(ga,2);if(_a!="02"&&_a!="03")return ya;var _s=It.getV(ca,ga);return _a=="02"?parseInt(_s,16):function(Ss){try{var Ms=Ss.substr(0,2);if(Ms=="00")return parseInt(Ss.substr(2),16);var Es=parseInt(Ms,16),Cs=Ss.substr(2),Ts=parseInt(Cs,16).toString(2);return Ts=="0"&&(Ts="00000000"),Ts=Ts.slice(0,0-Es),parseInt(Ts,2)}catch{return-1}}(_s)}catch{return ya}},It.getOID=function(ca,ga,ya){ya==null&&(ya=null);try{return ca.substr(ga,2)!="06"?ya:function(_a){if(!ct(_a))return null;try{var _s=[],Ss=_a.substr(0,2),Ms=parseInt(Ss,16);_s[0]=new String(Math.floor(Ms/40)),_s[1]=new String(Ms%40);for(var Es=_a.substr(2),Cs=[],Ts=0;Ts<Es.length/2;Ts++)Cs.push(parseInt(Es.substr(2*Ts,2),16));var Bs=[],Is="";for(Ts=0;Ts<Cs.length;Ts++)128&Cs[Ts]?Is+=pt((127&Cs[Ts]).toString(2),7):(Is+=pt((127&Cs[Ts]).toString(2),7),Bs.push(new String(parseInt(Is,2))),Is="");var Ps=_s.join(".");return Bs.length>0&&(Ps=Ps+"."+Bs.join(".")),Ps}catch{return null}}(It.getV(ca,ga))}catch{return ya}},It.getOIDName=function(ca,ga,ya){ya==null&&(ya=null);try{var _a=It.getOID(ca,ga,ya);if(_a==ya)return ya;var _s=u$1.asn1.x509.OID.oid2name(_a);return _s==""?_a:_s}catch{return ya}},It.getString=function(ca,ga,ya){ya==null&&(ya=null);try{return rt(It.getV(ca,ga))}catch{return ya}},It.hextooidstr=function(ca){var ga=function(Is,Ps){return Is.length>=Ps?Is:new Array(Ps-Is.length+1).join("0")+Is},ya=[],_a=ca.substr(0,2),_s=parseInt(_a,16);ya[0]=new String(Math.floor(_s/40)),ya[1]=new String(_s%40);for(var Ss=ca.substr(2),Ms=[],Es=0;Es<Ss.length/2;Es++)Ms.push(parseInt(Ss.substr(2*Es,2),16));var Cs=[],Ts="";for(Es=0;Es<Ms.length;Es++)128&Ms[Es]?Ts+=ga((127&Ms[Es]).toString(2),7):(Ts+=ga((127&Ms[Es]).toString(2),7),Cs.push(new String(parseInt(Ts,2))),Ts="");var Bs=ya.join(".");return Cs.length>0&&(Bs=Bs+"."+Cs.join(".")),Bs},It.dump=function(ca,ga,ya,_a){var _s=It,Ss=_s.getV,Ms=_s.dump,Es=_s.getChildIdx,Cs=ca;ca instanceof u$1.asn1.ASN1Object&&(Cs=ca.getEncodedHex());var Ts=function(Us,zs){return Us.length<=2*zs?Us:Us.substr(0,zs)+"..(total "+Us.length/2+"bytes).."+Us.substr(Us.length-zs,zs)};ga===void 0&&(ga={ommit_long_octet:32}),ya===void 0&&(ya=0),_a===void 0&&(_a="");var Bs,Is=ga.ommit_long_octet;if((Bs=Cs.substr(ya,2))=="01")return(Ps=Ss(Cs,ya))=="00"?_a+`BOOLEAN FALSE
`:_a+`BOOLEAN TRUE
`;if(Bs=="02")return _a+"INTEGER "+Ts(Ps=Ss(Cs,ya),Is)+`
`;if(Bs=="03"){var Ps=Ss(Cs,ya);if(_s.isASN1HEX(Ps.substr(2))){var Rs=_a+`BITSTRING, encapsulates
`;return Rs+=Ms(Ps.substr(2),ga,0,_a+"  ")}return _a+"BITSTRING "+Ts(Ps,Is)+`
`}if(Bs=="04")return Ps=Ss(Cs,ya),_s.isASN1HEX(Ps)?(Rs=_a+`OCTETSTRING, encapsulates
`,Rs+=Ms(Ps,ga,0,_a+"  ")):_a+"OCTETSTRING "+Ts(Ps,Is)+`
`;if(Bs=="05")return _a+`NULL
`;if(Bs=="06"){var ks=Ss(Cs,ya),$s=u$1.asn1.ASN1Util.oidHexToInt(ks),Os=u$1.asn1.x509.OID.oid2name($s),Ls=$s.replace(/\./g," ");return Os!=""?_a+"ObjectIdentifier "+Os+" ("+Ls+`)
`:_a+"ObjectIdentifier ("+Ls+`)
`}if(Bs=="0a")return _a+"ENUMERATED "+parseInt(Ss(Cs,ya))+`
`;if(Bs=="0c")return _a+"UTF8String '"+nt(Ss(Cs,ya))+`'
`;if(Bs=="13")return _a+"PrintableString '"+nt(Ss(Cs,ya))+`'
`;if(Bs=="14")return _a+"TeletexString '"+nt(Ss(Cs,ya))+`'
`;if(Bs=="16")return _a+"IA5String '"+nt(Ss(Cs,ya))+`'
`;if(Bs=="17")return _a+"UTCTime "+nt(Ss(Cs,ya))+`
`;if(Bs=="18")return _a+"GeneralizedTime "+nt(Ss(Cs,ya))+`
`;if(Bs=="1a")return _a+"VisualString '"+nt(Ss(Cs,ya))+`'
`;if(Bs=="1e")return _a+"BMPString '"+ht(Ss(Cs,ya))+`'
`;if(Bs=="30"){if(Cs.substr(ya,4)=="3000")return _a+`SEQUENCE {}
`;Rs=_a+`SEQUENCE
`;var Ds=ga;if(((Vs=Es(Cs,ya)).length==2||Vs.length==3)&&Cs.substr(Vs[0],2)=="06"&&Cs.substr(Vs[Vs.length-1],2)=="04"){Os=_s.oidname(Ss(Cs,Vs[0]));var Fs=JSON.parse(JSON.stringify(ga));Fs.x509ExtName=Os,Ds=Fs}for(var Ns=0;Ns<Vs.length;Ns++)Rs+=Ms(Cs,Ds,Vs[Ns],_a+"  ");return Rs}if(Bs=="31"){Rs=_a+`SET
`;var Vs=Es(Cs,ya);for(Ns=0;Ns<Vs.length;Ns++)Rs+=Ms(Cs,ga,Vs[Ns],_a+"  ");return Rs}if((128&(Bs=parseInt(Bs,16)))!=0){var Gs=31&Bs;if((32&Bs)!=0){for(Rs=_a+"["+Gs+`]
`,Vs=Es(Cs,ya),Ns=0;Ns<Vs.length;Ns++)Rs+=Ms(Cs,ga,Vs[Ns],_a+"  ");return Rs}if(Ps=Ss(Cs,ya),It.isASN1HEX(Ps)){var Rs=_a+"["+Gs+`]
`;return Rs+=Ms(Ps,ga,0,_a+"  ")}return(Ps.substr(0,8)=="68747470"||ga.x509ExtName==="subjectAltName"&&Gs==2)&&(Ps=nt(Ps)),Rs=_a+"["+Gs+"] "+Ps+`
`}return _a+"UNKNOWN("+Bs+") "+Ss(Cs,ya)+`
`},It.isContextTag=function(ca,ga){var ya,_a;ca=ca.toLowerCase();try{ya=parseInt(ca,16)}catch{return-1}if(ga===void 0)return(192&ya)==128;try{return ga.match(/^\[[0-9]+\]$/)!=null&&!((_a=parseInt(ga.substr(1,ga.length-1),10))>31)&&(192&ya)==128&&(31&ya)==_a}catch{return!1}},It.isASN1HEX=function(ca){var ga=It;if(ca.length%2==1)return!1;var ya=ga.getVblen(ca,0),_a=ca.substr(0,2),_s=ga.getL(ca,0);return ca.length-_a.length-_s.length==2*ya},It.checkStrictDER=function(ca,ga,ya,_a,_s){var Ss=It;if(ya===void 0){if(typeof ca!="string")throw new Error("not hex string");if(ca=ca.toLowerCase(),!u$1.lang.String.isHex(ca))throw new Error("not hex string");ya=ca.length,_s=(_a=ca.length/2)<128?1:Math.ceil(_a.toString(16))+1}if(Ss.getL(ca,ga).length>2*_s)throw new Error("L of TLV too long: idx="+ga);var Ms=Ss.getVblen(ca,ga);if(Ms>_a)throw new Error("value of L too long than hex: idx="+ga);var Es=Ss.getTLV(ca,ga),Cs=Es.length-2-Ss.getL(ca,ga).length;if(Cs!==2*Ms)throw new Error("V string length and L's value not the same:"+Cs+"/"+2*Ms);if(ga===0&&ca.length!=Es.length)throw new Error("total length and TLV length unmatch:"+ca.length+"!="+Es.length);var Ts=ca.substr(ga,2);if(Ts==="02"){var Bs=Ss.getVidx(ca,ga);if(ca.substr(Bs,2)=="00"&&ca.charCodeAt(Bs+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Ts,16)){for(var Is=Ss.getVblen(ca,ga),Ps=0,Rs=Ss.getChildIdx(ca,ga),ks=0;ks<Rs.length;ks++)Ps+=Ss.getTLV(ca,Rs[ks]).length,Ss.checkStrictDER(ca,Rs[ks],ya,_a,_s);if(2*Is!=Ps)throw new Error("sum of children's TLV length and L unmatch: "+2*Is+"!="+Ps)}},It.oidname=function(ca){var ga=u$1.asn1;u$1.lang.String.isHex(ca)&&(ca=ga.ASN1Util.oidHexToInt(ca));var ya=ga.x509.OID.oid2name(ca);return ya===""&&(ya=ca),ya},u$1.asn1!==void 0&&u$1.asn1||(u$1.asn1={}),u$1.asn1.x509!==void 0&&u$1.asn1.x509||(u$1.asn1.x509={}),u$1.asn1.x509.Certificate=function(ca){u$1.asn1.x509.Certificate.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERBitString,_a=ga.DERSequence,_s=ga.x509,Ss=_s.TBSCertificate,Ms=_s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(Es){this.params=Es},this.sign=function(){var Es=this.params,Cs=Es.sigalg;Es.sigalg.name!=null&&(Cs=Es.sigalg.name);var Ts=Es.tbsobj.getEncodedHex(),Bs=new u$1.crypto.Signature({alg:Cs});Bs.init(Es.cakey),Bs.updateHex(Ts),Es.sighex=Bs.sign()},this.getPEM=function(){return at(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var Es=this.params;if(Es.tbsobj!=null&&Es.tbsobj!=null||(Es.tbsobj=new Ss(Es)),Es.sighex==null&&Es.cakey!=null&&this.sign(),Es.sighex==null)throw new Error("sighex or cakey parameter not defined");var Cs=[];return Cs.push(Es.tbsobj),Cs.push(new Ms({name:Es.sigalg})),Cs.push(new ya({hex:"00"+Es.sighex})),new _a({array:Cs}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$1.asn1.x509.Certificate,u$1.asn1.ASN1Object),u$1.asn1.x509.TBSCertificate=function(ca){u$1.asn1.x509.TBSCertificate.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.x509,_a=ga.DERTaggedObject,_s=ga.DERInteger,Ss=ga.DERSequence,Ms=ya.AlgorithmIdentifier,Es=ya.Time,Cs=ya.X500Name,Ts=ya.Extensions,Bs=ya.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(Is){this.params=Is},this.getEncodedHex=function(){var Is=[],Ps=this.params;if(Ps.version!=null||Ps.version!=1){var Rs=2;Ps.version!=null&&(Rs=Ps.version-1);var ks=new _a({obj:new _s({int:Rs})});Is.push(ks)}return Is.push(new _s(Ps.serial)),Is.push(new Ms({name:Ps.sigalg})),Is.push(new Cs(Ps.issuer)),Is.push(new Ss({array:[new Es(Ps.notbefore),new Es(Ps.notafter)]})),Is.push(new Cs(Ps.subject)),Is.push(new Bs(Et.getKey(Ps.sbjpubkey))),Ps.ext!==void 0&&Ps.ext.length>0&&Is.push(new _a({tag:"a3",obj:new Ts(Ps.ext)})),new u$1.asn1.DERSequence({array:Is}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.TBSCertificate,u$1.asn1.ASN1Object),u$1.asn1.x509.Extensions=function(ca){u$1.asn1.x509.Extensions.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERSequence,_a=ga.x509;this.aParam=[],this.setByParam=function(_s){this.aParam=_s},this.getEncodedHex=function(){for(var _s=[],Ss=0;Ss<this.aParam.length;Ss++){var Ms=this.aParam[Ss],Es=Ms.extname,Cs=null;if(Ms.extn!=null)Cs=new _a.PrivateExtension(Ms);else if(Es=="subjectKeyIdentifier")Cs=new _a.SubjectKeyIdentifier(Ms);else if(Es=="keyUsage")Cs=new _a.KeyUsage(Ms);else if(Es=="subjectAltName")Cs=new _a.SubjectAltName(Ms);else if(Es=="issuerAltName")Cs=new _a.IssuerAltName(Ms);else if(Es=="basicConstraints")Cs=new _a.BasicConstraints(Ms);else if(Es=="cRLDistributionPoints")Cs=new _a.CRLDistributionPoints(Ms);else if(Es=="certificatePolicies")Cs=new _a.CertificatePolicies(Ms);else if(Es=="authorityKeyIdentifier")Cs=new _a.AuthorityKeyIdentifier(Ms);else if(Es=="extKeyUsage")Cs=new _a.ExtKeyUsage(Ms);else if(Es=="authorityInfoAccess")Cs=new _a.AuthorityInfoAccess(Ms);else if(Es=="cRLNumber")Cs=new _a.CRLNumber(Ms);else if(Es=="cRLReason")Cs=new _a.CRLReason(Ms);else if(Es=="ocspNonce")Cs=new _a.OCSPNonce(Ms);else if(Es=="ocspNoCheck")Cs=new _a.OCSPNoCheck(Ms);else if(Es=="adobeTimeStamp")Cs=new _a.AdobeTimeStamp(Ms);else{if(Es!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(Ms));Cs=new _a.SubjectDirectoryAttributes(Ms)}Cs!=null&&_s.push(Cs)}return new ya({array:_s}).getEncodedHex()},ca!=null&&this.setByParam(ca)},At(u$1.asn1.x509.Extensions,u$1.asn1.ASN1Object),u$1.asn1.x509.Extension=function(ca){u$1.asn1.x509.Extension.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERObjectIdentifier,_a=ga.DEROctetString;ga.DERBitString;var _s=ga.DERBoolean,Ss=ga.DERSequence;this.getEncodedHex=function(){var Ms=new ya({oid:this.oid}),Es=new _a({hex:this.getExtnValueHex()}),Cs=new Array;return Cs.push(Ms),this.critical&&Cs.push(new _s),Cs.push(Es),new Ss({array:Cs}).getEncodedHex()},this.critical=!1,ca!==void 0&&ca.critical!==void 0&&(this.critical=ca.critical)},At(u$1.asn1.x509.Extension,u$1.asn1.ASN1Object),u$1.asn1.x509.KeyUsage=function(ca){u$1.asn1.x509.KeyUsage.superclass.constructor.call(this,ca);var ga=Mt.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",ca!==void 0&&(ca.bin!==void 0&&(this.asn1ExtnValue=new u$1.asn1.DERBitString(ca)),ca.names!==void 0&&ca.names.length!==void 0)){for(var ya=ca.names,_a="000000000",_s=0;_s<ya.length;_s++)for(var Ss=0;Ss<ga.length;Ss++)ya[_s]===ga[Ss]&&(_a=_a.substring(0,Ss)+"1"+_a.substring(Ss+1,_a.length));this.asn1ExtnValue=new u$1.asn1.DERBitString({bin:_a})}},At(u$1.asn1.x509.KeyUsage,u$1.asn1.x509.Extension),u$1.asn1.x509.BasicConstraints=function(ca){u$1.asn1.x509.BasicConstraints.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.DERBoolean,_a=ga.DERInteger,_s=ga.DERSequence;this.getExtnValueHex=function(){var Ss=new Array;this.cA&&Ss.push(new ya),this.pathLen>-1&&Ss.push(new _a({int:this.pathLen}));var Ms=new _s({array:Ss});return this.asn1ExtnValue=Ms,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,ca!==void 0&&(ca.cA!==void 0&&(this.cA=ca.cA),ca.pathLen!==void 0&&(this.pathLen=ca.pathLen))},At(u$1.asn1.x509.BasicConstraints,u$1.asn1.x509.Extension),u$1.asn1.x509.CRLDistributionPoints=function(ca){u$1.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(_a){for(var _s=[],Ss=0;Ss<_a.length;Ss++)if(_a[Ss]instanceof u$1.asn1.ASN1Object)_s.push(_a[Ss]);else{var Ms=new ya.DistributionPoint(_a[Ss]);_s.push(Ms)}this.asn1ExtnValue=new ga.DERSequence({array:_s})},this.setByOneURI=function(_a){var _s=new ya.DistributionPoint({fulluri:_a});this.setByDPArray([_s])},this.oid="2.5.29.31",ca!==void 0&&(ca.array!==void 0?this.setByDPArray(ca.array):ca.uri!==void 0&&this.setByOneURI(ca.uri))},At(u$1.asn1.x509.CRLDistributionPoints,u$1.asn1.x509.Extension),u$1.asn1.x509.DistributionPoint=function(ca){u$1.asn1.x509.DistributionPoint.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.x509.DistributionPointName;this.getEncodedHex=function(){var _a=new ga.DERSequence;if(this.asn1DP!=null){var _s=new ga.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});_a.appendASN1Object(_s)}return this.hTLV=_a.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.dpobj!==void 0?this.asn1DP=ca.dpobj:ca.dpname!==void 0?this.asn1DP=new ya(ca.dpname):ca.fulluri!==void 0&&(this.asn1DP=new ya({full:[{uri:ca.fulluri}]})))},At(u$1.asn1.x509.DistributionPoint,u$1.asn1.ASN1Object),u$1.asn1.x509.DistributionPointName=function(ca){u$1.asn1.x509.DistributionPointName.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new ya({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},ca!==void 0)if(ga.x509.GeneralNames.prototype.isPrototypeOf(ca))this.type="full",this.tag="a0",this.asn1V=ca;else{if(ca.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new ga.x509.GeneralNames(ca.full)}},At(u$1.asn1.x509.DistributionPointName,u$1.asn1.ASN1Object),u$1.asn1.x509.CertificatePolicies=function(ca){u$1.asn1.x509.CertificatePolicies.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.x509,_a=ga.DERSequence,_s=ya.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var Ss=[],Ms=0;Ms<this.params.array.length;Ms++)Ss.push(new _s(this.params.array[Ms]));var Es=new _a({array:Ss});return this.asn1ExtnValue=Es,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.CertificatePolicies,u$1.asn1.x509.Extension),u$1.asn1.x509.PolicyInformation=function(ca){u$1.asn1.x509.PolicyInformation.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.DERSequence,_a=ga.DERObjectIdentifier,_s=ga.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var Ss=[new _a(this.params.policyoid)];if(this.params.array!==void 0){for(var Ms=[],Es=0;Es<this.params.array.length;Es++)Ms.push(new _s(this.params.array[Es]));Ms.length>0&&Ss.push(new ya({array:Ms}))}return new ya({array:Ss}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.PolicyInformation,u$1.asn1.ASN1Object),u$1.asn1.x509.PolicyQualifierInfo=function(ca){u$1.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.DERSequence,_a=ga.DERIA5String,_s=ga.DERObjectIdentifier,Ss=ga.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new ya({array:[new _s({oid:"1.3.6.1.5.5.7.2.1"}),new _a({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new ya({array:[new _s({oid:"1.3.6.1.5.5.7.2.2"}),new Ss(this.params.unotice)]}).getEncodedHex():void 0},ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.PolicyQualifierInfo,u$1.asn1.ASN1Object),u$1.asn1.x509.UserNotice=function(ca){u$1.asn1.x509.UserNotice.superclass.constructor.call(this,ca);var ga=u$1.asn1.DERSequence;u$1.asn1.DERInteger;var ya=u$1.asn1.x509.DisplayText,_a=u$1.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var _s=[];return this.params.noticeref!==void 0&&_s.push(new _a(this.params.noticeref)),this.params.exptext!==void 0&&_s.push(new ya(this.params.exptext)),new ga({array:_s}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.UserNotice,u$1.asn1.ASN1Object),u$1.asn1.x509.NoticeReference=function(ca){u$1.asn1.x509.NoticeReference.superclass.constructor.call(this,ca);var ga=u$1.asn1.DERSequence,ya=u$1.asn1.DERInteger,_a=u$1.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var _s=[];if(this.params.org!==void 0&&_s.push(new _a(this.params.org)),this.params.noticenum!==void 0){for(var Ss=[],Ms=this.params.noticenum,Es=0;Es<Ms.length;Es++)Ss.push(new ya(Ms[Es]));_s.push(new ga({array:Ss}))}if(_s.length==0)throw new Error("parameter is empty");return new ga({array:_s}).getEncodedHex()},ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.NoticeReference,u$1.asn1.ASN1Object),u$1.asn1.x509.DisplayText=function(ca){u$1.asn1.x509.DisplayText.superclass.constructor.call(this,ca),this.hT="0c",ca!==void 0&&(ca.type==="ia5"?this.hT="16":ca.type==="vis"?this.hT="1a":ca.type==="bmp"&&(this.hT="1e"))},At(u$1.asn1.x509.DisplayText,u$1.asn1.DERAbstractString),u$1.asn1.x509.ExtKeyUsage=function(ca){u$1.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,ca);var ga=u$1.asn1;this.setPurposeArray=function(ya){this.asn1ExtnValue=new ga.DERSequence;for(var _a=0;_a<ya.length;_a++){var _s=new ga.DERObjectIdentifier(ya[_a]);this.asn1ExtnValue.appendASN1Object(_s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",ca!==void 0&&ca.array!==void 0&&this.setPurposeArray(ca.array)},At(u$1.asn1.x509.ExtKeyUsage,u$1.asn1.x509.Extension),u$1.asn1.x509.AuthorityKeyIdentifier=function(ca){u$1.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$1,ya=ga.asn1,_a=ya.DERTaggedObject,_s=ya.x509.GeneralNames;ga.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var Ss=new Array;this.asn1KID&&Ss.push(new _a({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&Ss.push(new _a({explicit:!1,tag:"a1",obj:new _s([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&Ss.push(new _a({explicit:!1,tag:"82",obj:this.asn1CertSN}));var Ms=new ya.DERSequence({array:Ss});return this.asn1ExtnValue=Ms,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(Ss){if(Ss.str!==void 0||Ss.hex!==void 0)this.asn1KID=new u$1.asn1.DEROctetString(Ss);else if(typeof Ss=="object"&&u$1.crypto.Util.isKey(Ss)||typeof Ss=="string"&&Ss.indexOf("BEGIN ")!=-1){var Ms=Ss;typeof Ss=="string"&&(Ms=Et.getKey(Ss));var Es=Et.getKeyID(Ms);this.asn1KID=new u$1.asn1.DEROctetString({hex:Es})}},this.setCertIssuerByParam=function(Ss){Ss.str!==void 0||Ss.ldapstr!==void 0||Ss.hex!==void 0||Ss.certsubject!==void 0||Ss.certissuer!==void 0?this.asn1CertIssuer=new u$1.asn1.x509.X500Name(Ss):typeof Ss=="string"&&Ss.indexOf("BEGIN ")!=-1&&Ss.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$1.asn1.x509.X500Name({certissuer:Ss}))},this.setCertSNByParam=function(Ss){if(Ss.str!==void 0||Ss.bigint!==void 0||Ss.hex!==void 0)this.asn1CertSN=new u$1.asn1.DERInteger(Ss);else if(typeof Ss=="string"&&Ss.indexOf("BEGIN ")!=-1&&Ss.indexOf("CERTIFICATE")){var Ms=new Mt;Ms.readCertPEM(Ss);var Es=Ms.getSerialNumberHex();this.asn1CertSN=new u$1.asn1.DERInteger({hex:Es})}},this.oid="2.5.29.35",ca!==void 0&&(ca.kid!==void 0&&this.setKIDByParam(ca.kid),ca.issuer!==void 0&&this.setCertIssuerByParam(ca.issuer),ca.sn!==void 0&&this.setCertSNByParam(ca.sn),ca.issuersn!==void 0&&typeof ca.issuersn=="string"&&ca.issuersn.indexOf("BEGIN ")!=-1&&ca.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(ca.issuersn),this.setCertIssuerByParam(ca.issuersn)))},At(u$1.asn1.x509.AuthorityKeyIdentifier,u$1.asn1.x509.Extension),u$1.asn1.x509.SubjectKeyIdentifier=function(ca){u$1.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,ca);var ga=u$1.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(ya){if(ya.str!==void 0||ya.hex!==void 0)this.asn1KID=new ga(ya);else if(typeof ya=="object"&&u$1.crypto.Util.isKey(ya)||typeof ya=="string"&&ya.indexOf("BEGIN")!=-1){var _a=ya;typeof ya=="string"&&(_a=Et.getKey(ya));var _s=Et.getKeyID(_a);this.asn1KID=new u$1.asn1.DEROctetString({hex:_s})}},this.oid="2.5.29.14",ca!==void 0&&ca.kid!==void 0&&this.setKIDByParam(ca.kid)},At(u$1.asn1.x509.SubjectKeyIdentifier,u$1.asn1.x509.Extension),u$1.asn1.x509.AuthorityInfoAccess=function(ca){u$1.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,ca),this.setAccessDescriptionArray=function(ga){for(var ya=new Array,_a=u$1.asn1,_s=_a.DERSequence,Ss=_a.DERObjectIdentifier,Ms=_a.x509.GeneralName,Es=0;Es<ga.length;Es++){var Cs,Ts=ga[Es];if(Ts.ocsp!==void 0)Cs=new _s({array:[new Ss({oid:"1.3.6.1.5.5.7.48.1"}),new Ms({uri:Ts.ocsp})]});else{if(Ts.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(Ts));Cs=new _s({array:[new Ss({oid:"1.3.6.1.5.5.7.48.2"}),new Ms({uri:Ts.caissuer})]})}ya.push(Cs)}this.asn1ExtnValue=new _s({array:ya})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",ca!==void 0&&ca.array!==void 0&&this.setAccessDescriptionArray(ca.array)},At(u$1.asn1.x509.AuthorityInfoAccess,u$1.asn1.x509.Extension),u$1.asn1.x509.SubjectAltName=function(ca){u$1.asn1.x509.SubjectAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$1.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$1.asn1.x509.SubjectAltName,u$1.asn1.x509.Extension),u$1.asn1.x509.IssuerAltName=function(ca){u$1.asn1.x509.IssuerAltName.superclass.constructor.call(this,ca),this.setNameArray=function(ga){this.asn1ExtnValue=new u$1.asn1.x509.GeneralNames(ga)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",ca!==void 0&&ca.array!==void 0&&this.setNameArray(ca.array)},At(u$1.asn1.x509.IssuerAltName,u$1.asn1.x509.Extension),u$1.asn1.x509.SubjectDirectoryAttributes=function(ca){u$1.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.DERSequence,_a=ga.ASN1Util.newObject,_s=ga.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var Ss=[],Ms=0;Ms<this.params.array.length;Ms++){var Es=this.params.array[Ms],Cs={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(Es.attr=="dateOfBirth")Cs.seq[0].oid=_s(Es.attr),Cs.seq[1].set[0]={gentime:Es.str};else if(Es.attr=="placeOfBirth")Cs.seq[0].oid=_s(Es.attr),Cs.seq[1].set[0]={utf8str:Es.str};else if(Es.attr=="gender")Cs.seq[0].oid=_s(Es.attr),Cs.seq[1].set[0]={prnstr:Es.str};else if(Es.attr=="countryOfCitizenship")Cs.seq[0].oid=_s(Es.attr),Cs.seq[1].set[0]={prnstr:Es.str};else{if(Es.attr!="countryOfResidence")throw new Error("unsupported attribute: "+Es.attr);Cs.seq[0].oid=_s(Es.attr),Cs.seq[1].set[0]={prnstr:Es.str}}Ss.push(new _a(Cs))}var Ts=new ya({array:Ss});return this.asn1ExtnValue=Ts,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",ca!==void 0&&(this.params=ca)},At(u$1.asn1.x509.SubjectDirectoryAttributes,u$1.asn1.x509.Extension),u$1.asn1.x509.PrivateExtension=function(ca){u$1.asn1.x509.PrivateExtension.superclass.constructor.call(this,ca);var ga=u$1,ya=ga.lang.String.isHex,_a=ga.asn1,_s=_a.x509.OID.name2oid,Ss=_a.ASN1Util.newObject;this.params=null,this.setByParam=function(Ms){this.oid=_s(Ms.extname),this.params=Ms},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var Ms=this.params.extn;if(typeof Ms=="string"&&ya(Ms))return Ms;if(typeof Ms=="object")try{return Ss(Ms).getEncodedHex()}catch{}throw new Error("unsupported extn value")},ca!=null&&this.setByParam(ca)},At(u$1.asn1.x509.PrivateExtension,u$1.asn1.x509.Extension),u$1.asn1.x509.CRL=function(ca){u$1.asn1.x509.CRL.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERSequence,_a=ga.DERBitString,_s=ga.x509,Ss=_s.AlgorithmIdentifier,Ms=_s.TBSCertList;this.params=void 0,this.setByParam=function(Es){this.params=Es},this.sign=function(){var Es=new Ms(this.params).getEncodedHex(),Cs=new u$1.crypto.Signature({alg:this.params.sigalg});Cs.init(this.params.cakey),Cs.updateHex(Es);var Ts=Cs.sign();this.params.sighex=Ts},this.getPEM=function(){return at(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var Es=this.params;if(Es.tbsobj==null&&(Es.tbsobj=new Ms(Es)),Es.sighex==null&&Es.cakey!=null&&this.sign(),Es.sighex==null)throw new Error("sighex or cakey parameter not defined");var Cs=[];return Cs.push(Es.tbsobj),Cs.push(new Ss({name:Es.sigalg})),Cs.push(new _a({hex:"00"+Es.sighex})),new ya({array:Cs}).getEncodedHex()},ca!=null&&(this.params=ca)},At(u$1.asn1.x509.CRL,u$1.asn1.ASN1Object),u$1.asn1.x509.TBSCertList=function(ca){u$1.asn1.x509.TBSCertList.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERInteger,_a=ga.DERSequence,_s=ga.DERTaggedObject;ga.DERObjectIdentifier;var Ss=ga.x509,Ms=Ss.AlgorithmIdentifier,Es=Ss.Time,Cs=Ss.Extensions,Ts=Ss.X500Name;this.params=null,this.setByParam=function(Bs){this.params=Bs},this.getRevCertSequence=function(){for(var Bs=[],Is=this.params.revcert,Ps=0;Ps<Is.length;Ps++){var Rs=[new ya(Is[Ps].sn),new Es(Is[Ps].date)];Is[Ps].ext!=null&&Rs.push(new Cs(Is[Ps].ext)),Bs.push(new _a({array:Rs}))}return new _a({array:Bs})},this.getEncodedHex=function(){var Bs=[],Is=this.params;if(Is.version!=null){var Ps=Is.version-1,Rs=new ya({int:Ps});Bs.push(Rs)}if(Bs.push(new Ms({name:Is.sigalg})),Bs.push(new Ts(Is.issuer)),Bs.push(new Es(Is.thisupdate)),Is.nextupdate!=null&&Bs.push(new Es(Is.nextupdate)),Is.revcert!=null&&Bs.push(this.getRevCertSequence()),Is.ext!=null){var ks=new Cs(Is.ext);Bs.push(new _s({tag:"a0",explicit:!0,obj:ks}))}return new _a({array:Bs}).getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.TBSCertList,u$1.asn1.ASN1Object),u$1.asn1.x509.CRLEntry=function(ca){u$1.asn1.x509.CRLEntry.superclass.constructor.call(this);var ga=u$1.asn1;this.setCertSerial=function(ya){this.sn=new ga.DERInteger(ya)},this.setRevocationDate=function(ya){this.time=new ga.x509.Time(ya)},this.getEncodedHex=function(){var ya=new ga.DERSequence({array:[this.sn,this.time]});return this.TLV=ya.getEncodedHex(),this.TLV},ca!==void 0&&(ca.time!==void 0&&this.setRevocationDate(ca.time),ca.sn!==void 0&&this.setCertSerial(ca.sn))},At(u$1.asn1.x509.CRLEntry,u$1.asn1.ASN1Object),u$1.asn1.x509.CRLNumber=function(ca){u$1.asn1.x509.CRLNumber.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$1.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",ca!=null&&(this.params=ca)},At(u$1.asn1.x509.CRLNumber,u$1.asn1.x509.Extension),u$1.asn1.x509.CRLReason=function(ca){u$1.asn1.x509.CRLReason.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$1.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",ca!=null&&(this.params=ca)},At(u$1.asn1.x509.CRLReason,u$1.asn1.x509.Extension),u$1.asn1.x509.OCSPNonce=function(ca){u$1.asn1.x509.OCSPNonce.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$1.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",ca!=null&&(this.params=ca)},At(u$1.asn1.x509.OCSPNonce,u$1.asn1.x509.Extension),u$1.asn1.x509.OCSPNoCheck=function(ca){u$1.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,ca),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$1.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",ca!=null&&(this.params=ca)},At(u$1.asn1.x509.OCSPNoCheck,u$1.asn1.x509.Extension),u$1.asn1.x509.AdobeTimeStamp=function(ca){u$1.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,ca);var ga=u$1.asn1,ya=ga.DERInteger,_a=ga.DERBoolean,_s=ga.DERSequence,Ss=ga.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var Ms=this.params,Es=[new ya(1)];return Es.push(new Ss({uri:Ms.uri})),Ms.reqauth!=null&&Es.push(new _a(Ms.reqauth)),this.asn1ExtnValue=new _s({array:Es}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.AdobeTimeStamp,u$1.asn1.x509.Extension),u$1.asn1.x509.X500Name=function(ca){u$1.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$1.asn1,ya=ga.x509,_a=ya.RDN;this.setByString=function(_s,Ss){Ss!==void 0&&(this.sRule=Ss);var Ms=_s.split("/");Ms.shift();for(var Es=[],Cs=0;Cs<Ms.length;Cs++)if(Ms[Cs].match(/^[^=]+=.+$/))Es.push(Ms[Cs]);else{var Ts=Es.length-1;Es[Ts]=Es[Ts]+"/"+Ms[Cs]}for(Cs=0;Cs<Es.length;Cs++)this.asn1Array.push(new _a({str:Es[Cs],rule:this.sRule}))},this.setByLdapString=function(_s,Ss){Ss!==void 0&&(this.sRule=Ss);var Ms=ya.X500Name.ldapToCompat(_s);this.setByString(Ms,Ss)},this.setByObject=function(_s,Ss){for(var Ms in Ss!==void 0&&(this.sRule=Ss),_s)if(_s.hasOwnProperty(Ms)){var Es=new _a({str:Ms+"="+_s[Ms],rule:this.sRule});this.asn1Array?this.asn1Array.push(Es):this.asn1Array=[Es]}},this.setByParam=function(_s){var Ss;_s.rule!==void 0&&(this.sRule=_s.rule),_s.array!==void 0?this.paramArray=_s.array:_s.str!==void 0?this.setByString(_s.str):_s.ldapstr!==void 0?this.setByLdapString(_s.ldapstr):_s.hex!==void 0?this.hTLV=_s.hex:_s.certissuer!==void 0?((Ss=new Mt).readCertPEM(_s.certissuer),this.hTLV=Ss.getIssuerHex()):_s.certsubject!==void 0?((Ss=new Mt).readCertPEM(_s.certsubject),this.hTLV=Ss.getSubjectHex()):typeof _s=="object"&&_s.certsubject===void 0&&_s.certissuer===void 0&&this.setByObject(_s)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var _s=0;_s<this.paramArray.length;_s++){var Ss={array:this.paramArray[_s]};this.sRule!="utf8"&&(Ss.rule=this.sRule);var Ms=new _a(Ss);this.asn1Array.push(Ms)}var Es=new ga.DERSequence({array:this.asn1Array});return this.hTLV=Es.getEncodedHex(),this.hTLV},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.X500Name,u$1.asn1.ASN1Object),u$1.asn1.x509.X500Name.compatToLDAP=function(ca){if(ca.substr(0,1)!=="/")throw"malformed input";var ga=(ca=ca.substr(1)).split("/");return ga.reverse(),(ga=ga.map(function(ya){return ya.replace(/,/,"\\,")})).join(",")},u$1.asn1.x509.X500Name.onelineToLDAP=function(ca){return u$1.asn1.x509.X500Name.compatToLDAP(ca)},u$1.asn1.x509.X500Name.ldapToCompat=function(ca){for(var ga=ca.split(","),ya=!1,_a=[],_s=0;ga.length>0;_s++){var Ss=ga.shift();if(ya===!0){var Ms=(_a.pop()+","+Ss).replace(/\\,/g,",");_a.push(Ms),ya=!1}else _a.push(Ss);Ss.substr(-1,1)==="\\"&&(ya=!0)}return(_a=_a.map(function(Es){return Es.replace("/","\\/")})).reverse(),"/"+_a.join("/")},u$1.asn1.x509.X500Name.ldapToOneline=function(ca){return u$1.asn1.x509.X500Name.ldapToCompat(ca)},u$1.asn1.x509.RDN=function(ca){u$1.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var ga=u$1.asn1.x509.AttributeTypeAndValue;this.setByParam=function(ya){ya.rule!==void 0&&(this.sRule=ya.rule),ya.str!==void 0&&this.addByMultiValuedString(ya.str),ya.array!==void 0&&(this.paramArray=ya.array)},this.addByString=function(ya){this.asn1Array.push(new u$1.asn1.x509.AttributeTypeAndValue({str:ya,rule:this.sRule}))},this.addByMultiValuedString=function(ya){for(var _a=u$1.asn1.x509.RDN.parseString(ya),_s=0;_s<_a.length;_s++)this.addByString(_a[_s])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var ya=0;ya<this.paramArray.length;ya++){var _a=this.paramArray[ya];_a.rule!==void 0&&this.sRule!="utf8"&&(_a.rule=this.sRule);var _s=new ga(_a);this.asn1Array.push(_s)}var Ss=new u$1.asn1.DERSet({array:this.asn1Array});return this.TLV=Ss.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.RDN,u$1.asn1.ASN1Object),u$1.asn1.x509.RDN.parseString=function(ca){for(var ga=ca.split(/\+/),ya=!1,_a=[],_s=0;ga.length>0;_s++){var Ss=ga.shift();if(ya===!0){var Ms=(_a.pop()+"+"+Ss).replace(/\\\+/g,"+");_a.push(Ms),ya=!1}else _a.push(Ss);Ss.substr(-1,1)==="\\"&&(ya=!0)}var Es=!1,Cs=[];for(_s=0;_a.length>0;_s++){if(Ss=_a.shift(),Es===!0){var Ts=Cs.pop();Ss.match(/"$/)?(Ms=(Ts+"+"+Ss).replace(/^([^=]+)="(.*)"$/,"$1=$2"),Cs.push(Ms),Es=!1):Cs.push(Ts+"+"+Ss)}else Cs.push(Ss);Ss.match(/^[^=]+="/)&&(Es=!0)}return Cs},u$1.asn1.x509.AttributeTypeAndValue=function(ca){u$1.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var ga=u$1,ya=ga.asn1,_a=ya.DERSequence,_s=ya.DERUTF8String,Ss=ya.DERPrintableString,Ms=ya.DERTeletexString,Es=ya.DERIA5String,Cs=ya.DERVisibleString,Ts=ya.DERBMPString,Bs=ga.lang.String.isMail,Is=ga.lang.String.isPrintable;this.setByParam=function(Ps){if(Ps.rule!==void 0&&(this.sRule=Ps.rule),Ps.ds!==void 0&&(this.dsType=Ps.ds),Ps.value===void 0&&Ps.str!==void 0){var Rs=Ps.str.match(/^([^=]+)=(.+)$/);if(!Rs)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=Rs[1],this.sValue=Rs[2]}else this.sType=Ps.type,this.sValue=Ps.value},this.setByString=function(Ps,Rs){Rs!==void 0&&(this.sRule=Rs);var ks=Ps.match(/^([^=]+)=(.+)$/);if(!ks)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(ks[1],ks[2])},this._getDsType=function(){var Ps=this.sType,Rs=this.sValue,ks=this.sRule;return ks==="prn"?Ps=="CN"&&Bs(Rs)?"ia5":Is(Rs)?"prn":"utf8":ks==="utf8"?Ps=="CN"&&Bs(Rs)?"ia5":Ps=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(Ps,Rs,ks){ks!==void 0&&(this.sRule=ks),this.sType=Ps,this.sValue=Rs},this.getValueObj=function(Ps,Rs){if(Ps=="utf8")return new _s({str:Rs});if(Ps=="prn")return new Ss({str:Rs});if(Ps=="tel")return new Ms({str:Rs});if(Ps=="ia5")return new Es({str:Rs});if(Ps=="vis")return new Cs({str:Rs});if(Ps=="bmp")return new Ts({str:Rs});throw new Error("unsupported directory string type: type="+Ps+" value="+Rs)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var Ps=u$1.asn1.x509.OID.atype2obj(this.sType),Rs=this.getValueObj(this.dsType,this.sValue),ks=new _a({array:[Ps,Rs]});return this.TLV=ks.getEncodedHex(),this.TLV},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.AttributeTypeAndValue,u$1.asn1.ASN1Object),u$1.asn1.x509.SubjectPublicKeyInfo=function(ca){u$1.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var ga=u$1,ya=ga.asn1,_a=ya.DERInteger,_s=ya.DERBitString,Ss=ya.DERObjectIdentifier,Ms=ya.DERSequence,Es=ya.ASN1Util.newObject,Cs=ya.x509.AlgorithmIdentifier,Ts=ga.crypto;Ts.ECDSA,Ts.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new Ms({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var Bs=this.getASN1Object();return this.hTLV=Bs.getEncodedHex(),this.hTLV},this.setPubKey=function(Bs){try{if(Bs instanceof X){var Is=Es({seq:[{int:{bigint:Bs.n}},{int:{int:Bs.e}}]}).getEncodedHex();this.asn1AlgId=new Cs({name:"rsaEncryption"}),this.asn1SubjPKey=new _s({hex:"00"+Is})}}catch{}try{if(Bs instanceof u$1.crypto.ECDSA){var Ps=new Ss({name:Bs.curveName});this.asn1AlgId=new Cs({name:"ecPublicKey",asn1params:Ps}),this.asn1SubjPKey=new _s({hex:"00"+Bs.pubKeyHex})}}catch{}try{if(Bs instanceof u$1.crypto.DSA){Ps=new Es({seq:[{int:{bigint:Bs.p}},{int:{bigint:Bs.q}},{int:{bigint:Bs.g}}]}),this.asn1AlgId=new Cs({name:"dsa",asn1params:Ps});var Rs=new _a({bigint:Bs.y});this.asn1SubjPKey=new _s({hex:"00"+Rs.getEncodedHex()})}}catch{}},ca!==void 0&&this.setPubKey(ca)},At(u$1.asn1.x509.SubjectPublicKeyInfo,u$1.asn1.ASN1Object),u$1.asn1.x509.Time=function(ca){u$1.asn1.x509.Time.superclass.constructor.call(this);var ga=u$1.asn1,ya=ga.DERUTCTime,_a=ga.DERGeneralizedTime;this.setTimeParams=function(_s){this.timeParams=_s},this.getEncodedHex=function(){var _s=null;return _s=this.timeParams!=null?this.type=="utc"?new ya(this.timeParams):new _a(this.timeParams):this.type=="utc"?new ya:new _a,this.TLV=_s.getEncodedHex(),this.TLV},this.type="utc",ca!==void 0&&(ca.type!==void 0?this.type=ca.type:ca.str!==void 0&&(ca.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),ca.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=ca)},At(u$1.asn1.x509.Time,u$1.asn1.ASN1Object),u$1.asn1.x509.AlgorithmIdentifier=function(ca){u$1.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var ga=u$1.asn1,ya=ga.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var _s=null;for(var Ss in ya)Ss===this.nameAlg&&(_s=ya[Ss]);if(_s!==null)return this.hTLV=_s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=ga.x509.OID.name2obj(this.nameAlg));var Ms=[this.asn1Alg];this.asn1Params!==null&&Ms.push(this.asn1Params);var Es=new ga.DERSequence({array:Ms});return this.hTLV=Es.getEncodedHex(),this.hTLV},ca!==void 0&&(ca.name!==void 0&&(this.nameAlg=ca.name),ca.asn1params!==void 0&&(this.asn1Params=ca.asn1params),ca.paramempty!==void 0&&(this.paramEmpty=ca.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var _a=this.nameAlg.toLowerCase();_a.substr(-7,7)!=="withdsa"&&_a.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new ga.DERNull)}},At(u$1.asn1.x509.AlgorithmIdentifier,u$1.asn1.ASN1Object),u$1.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$1.asn1.x509.GeneralName=function(ca){u$1.asn1.x509.GeneralName.superclass.constructor.call(this);var ga={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},ya=u$1.asn1;ya.DERSequence;var _a=ya.DEROctetString,_s=ya.DERIA5String,Ss=ya.DERTaggedObject,Ms=ya.ASN1Object,Es=ya.x509.X500Name,Cs=ut;this.explicit=!1,this.setByParam=function(Ts){var Bs=null;if(Ts!==void 0){if(Ts.rfc822!==void 0&&(this.type="rfc822",Bs=new _s({str:Ts[this.type]})),Ts.dns!==void 0&&(this.type="dns",Bs=new _s({str:Ts[this.type]})),Ts.uri!==void 0&&(this.type="uri",Bs=new _s({str:Ts[this.type]})),Ts.dn!==void 0&&(this.type="dn",this.explicit=!0,Bs=typeof Ts.dn=="string"?new Es({str:Ts.dn}):Ts.dn instanceof u$1.asn1.x509.X500Name?Ts.dn:new Es(Ts.dn)),Ts.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,Bs=new Es({ldapstr:Ts.ldapdn})),Ts.certissuer!==void 0){this.type="dn",this.explicit=!0;var Is=null;if((Rs=Ts.certissuer).match(/^[0-9A-Fa-f]+$/),Rs.indexOf("-----BEGIN ")!=-1&&(Is=Cs(Rs)),Is==null)throw"certissuer param not cert";(ks=new Mt).hex=Is;var Ps=ks.getIssuerHex();(Bs=new Ms).hTLV=Ps}if(Ts.certsubj!==void 0){this.type="dn",this.explicit=!0;var Rs,ks;if(Is=null,(Rs=Ts.certsubj).match(/^[0-9A-Fa-f]+$/),Rs.indexOf("-----BEGIN ")!=-1&&(Is=Cs(Rs)),Is==null)throw"certsubj param not cert";(ks=new Mt).hex=Is,Ps=ks.getSubjectHex(),(Bs=new Ms).hTLV=Ps}if(Ts.ip!==void 0){this.type="ip",this.explicit=!1;var $s,Os=Ts.ip,Ls="malformed IP address";if(Os.match(/^[0-9.]+[.][0-9.]+$/)){if(($s=function(Ds){Ds=(Ds=(Ds=Ds.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return Ds.split(/,/).map(function(Fs,Ns,Vs){var Gs=parseInt(Fs);if(Gs<0||255<Gs)throw"integer not in range 0-255";return("00"+Gs.toString(16)).slice(-2)}).join("")}catch(Fs){throw"malformed integer array string: "+Fs}}("["+Os.split(".").join(",")+"]")).length!==8)throw Ls}else if(Os.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))$s=function(Ds){var Fs="malformed IPv6 address";if(!Ds.match(/^[0-9A-Fa-f:]+$/))throw Fs;var Ns=(Ds=Ds.toLowerCase()).split(":").length-1;if(Ns<2)throw Fs;var Vs=":".repeat(7-Ns+2),Gs=(Ds=Ds.replace("::",Vs)).split(":");if(Gs.length!=8)throw Fs;for(var Us=0;Us<8;Us++)Gs[Us]=("0000"+Gs[Us]).slice(-4);return Gs.join("")}(Os);else{if(!Os.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw Ls;$s=Os}Bs=new _a({hex:$s})}if(this.type==null)throw"unsupported type in params="+Ts;this.asn1Obj=new Ss({explicit:this.explicit,tag:ga[this.type],obj:Bs})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},ca!==void 0&&this.setByParam(ca)},At(u$1.asn1.x509.GeneralName,u$1.asn1.ASN1Object),u$1.asn1.x509.GeneralNames=function(ca){u$1.asn1.x509.GeneralNames.superclass.constructor.call(this);var ga=u$1.asn1;this.setByParamArray=function(ya){for(var _a=0;_a<ya.length;_a++){var _s=new ga.x509.GeneralName(ya[_a]);this.asn1Array.push(_s)}},this.getEncodedHex=function(){return new ga.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,ca!==void 0&&this.setByParamArray(ca)},At(u$1.asn1.x509.GeneralNames,u$1.asn1.ASN1Object),u$1.asn1.x509.OID=new function(ca){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];if(this.name2oidList[ga]===void 0)throw"Name of ObjectIdentifier not defined: "+ga;var ya=this.name2oidList[ga],_a=new u$1.asn1.DERObjectIdentifier({oid:ya});return this.objCache[ga]=_a,_a},this.atype2obj=function(ga){if(this.objCache[ga]!==void 0)return this.objCache[ga];var ya;if(ga.match(/^\d+\.\d+\.[0-9.]+$/))ya=ga;else if(this.atype2oidList[ga]!==void 0)ya=this.atype2oidList[ga];else{if(this.name2oidList[ga]===void 0)throw"AttributeType name undefined: "+ga;ya=this.name2oidList[ga]}var _a=new u$1.asn1.DERObjectIdentifier({oid:ya});return this.objCache[ga]=_a,_a}},u$1.asn1.x509.OID.oid2name=function(ca){var ga=u$1.asn1.x509.OID.name2oidList;for(var ya in ga)if(ga[ya]==ca)return ya;return""},u$1.asn1.x509.OID.oid2atype=function(ca){var ga=u$1.asn1.x509.OID.atype2oidList;for(var ya in ga)if(ga[ya]==ca)return ya;return ca},u$1.asn1.x509.OID.name2oid=function(ca){if(ca.match(/^[0-9.]+$/))return ca;var ga=u$1.asn1.x509.OID.name2oidList;return ga[ca]===void 0?"":ga[ca]},u$1.asn1.x509.X509Util={},u$1.asn1.x509.X509Util.newCertPEM=function(ca){var ga=u$1.asn1.x509;return ga.TBSCertificate,new ga.Certificate(ca).getPEM()},X.getPosArrayOfChildrenFromHex=function(ca){return It.getChildIdx(ca,0)},X.getHexValueArrayOfChildrenFromHex=function(ca){var ga,ya=It.getV,_a=ya(ca,(ga=X.getPosArrayOfChildrenFromHex(ca))[0]),_s=ya(ca,ga[1]),Ss=ya(ca,ga[2]),Ms=ya(ca,ga[3]),Es=ya(ca,ga[4]),Cs=ya(ca,ga[5]),Ts=ya(ca,ga[6]),Bs=ya(ca,ga[7]),Is=ya(ca,ga[8]);return(ga=new Array).push(_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is),ga},X.prototype.readPrivateKeyFromPEMString=function(ca){var ga=ut(ca),ya=X.getHexValueArrayOfChildrenFromHex(ga);this.setPrivateEx(ya[1],ya[2],ya[3],ya[4],ya[5],ya[6],ya[7],ya[8])},X.prototype.readPKCS5PrvKeyHex=function(ca){var ga=X.getHexValueArrayOfChildrenFromHex(ca);this.setPrivateEx(ga[1],ga[2],ga[3],ga[4],ga[5],ga[6],ga[7],ga[8])},X.prototype.readPKCS8PrvKeyHex=function(ca){var ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts=It,Bs=Ts.getVbyListEx;if(Ts.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");try{ga=Bs(ca,0,[2,0,1],"02"),ya=Bs(ca,0,[2,0,2],"02"),_a=Bs(ca,0,[2,0,3],"02"),_s=Bs(ca,0,[2,0,4],"02"),Ss=Bs(ca,0,[2,0,5],"02"),Ms=Bs(ca,0,[2,0,6],"02"),Es=Bs(ca,0,[2,0,7],"02"),Cs=Bs(ca,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(ga,ya,_a,_s,Ss,Ms,Es,Cs)},X.prototype.readPKCS5PubKeyHex=function(ca){var ga=It,ya=ga.getV;if(ga.isASN1HEX(ca)===!1)throw new Error("keyHex is not ASN.1 hex string");var _a=ga.getChildIdx(ca,0);if(_a.length!==2||ca.substr(_a[0],2)!=="02"||ca.substr(_a[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var _s=ya(ca,_a[0]),Ss=ya(ca,_a[1]);this.setPublic(_s,Ss)},X.prototype.readPKCS8PubKeyHex=function(ca){var ga=It;if(ga.isASN1HEX(ca)===!1)throw new Error("not ASN.1 hex string");if(ga.getTLVbyListEx(ca,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var ya=ga.getTLVbyListEx(ca,0,[1,0]);this.readPKCS5PubKeyHex(ya)},X.prototype.readCertPubKeyHex=function(ca,ga){var ya,_a;(ya=new Mt).readCertHex(ca),_a=ya.getPublicKeyHex(),this.readPKCS8PubKeyHex(_a)},X.prototype.sign=function(ca,ga){var ya,_a=(ya=ca,u$1.crypto.Util.hashString(ya,ga));return this.signWithMessageHash(_a,ga)},X.prototype.signWithMessageHash=function(ca,ga){var ya=G(u$1.crypto.Util.getPaddedDigestInfoHex(ca,ga,this.n.bitLength()),16);return Ct(this.doPrivate(ya).toString(16),this.n.bitLength())},X.prototype.signPSS=function(ca,ga,ya){var _a,_s=(_a=ot(ca),u$1.crypto.Util.hashHex(_a,ga));return ya===void 0&&(ya=-1),this.signWithMessageHashPSS(_s,ga,ya)},X.prototype.signWithMessageHashPSS=function(ca,ga,ya){var _a,_s=rt(ca),Ss=_s.length,Ms=this.n.bitLength()-1,Es=Math.ceil(Ms/8),Cs=function(Os){return u$1.crypto.Util.hashHex(Os,ga)};if(ya===-1||ya===void 0)ya=Ss;else if(ya===-2)ya=Es-Ss-2;else if(ya<-2)throw new Error("invalid salt length");if(Es<Ss+ya+2)throw new Error("data too long");var Ts="";ya>0&&(Ts=new Array(ya),new U$1().nextBytes(Ts),Ts=String.fromCharCode.apply(String,Ts));var Bs=rt(Cs(ot("\0\0\0\0\0\0\0\0"+_s+Ts))),Is=[];for(_a=0;_a<Es-ya-Ss-2;_a+=1)Is[_a]=0;var Ps=String.fromCharCode.apply(String,Is)+""+Ts,Rs=St(Bs,Ps.length,Cs),ks=[];for(_a=0;_a<Ps.length;_a+=1)ks[_a]=Ps.charCodeAt(_a)^Rs.charCodeAt(_a);var $s=65280>>8*Es-Ms&255;for(ks[0]&=~$s,_a=0;_a<Ss;_a++)ks.push(Bs.charCodeAt(_a));return ks.push(188),Ct(this.doPrivate(new c$1(ks)).toString(16),this.n.bitLength())},X.prototype.verify=function(ca,ga){if((ga=ga.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var ya=G(ga,16),_a=this.n.bitLength();if(ya.bitLength()>_a)return!1;var _s=this.doPublic(ya).toString(16);if(_s.length+3!=_a/4)return!1;var Ss=Bt(_s.replace(/^1f+00/,""));if(Ss.length==0)return!1;var Ms,Es=Ss[0];return Ss[1]==(Ms=ca,u$1.crypto.Util.hashString(Ms,Es))},X.prototype.verifyWithMessageHash=function(ca,ga){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var ya=G(ga,16);if(ya.bitLength()>this.n.bitLength())return 0;var _a=Bt(this.doPublic(ya).toString(16).replace(/^1f+00/,""));return _a.length!=0&&(_a[0],_a[1]==ca)},X.prototype.verifyPSS=function(ca,ga,ya,_a){var _s=function(Ss){return u$1.crypto.Util.hashHex(Ss,ya)}(ot(ca));return _a===void 0&&(_a=-1),this.verifyWithMessageHashPSS(_s,ga,ya,_a)},X.prototype.verifyWithMessageHashPSS=function(ca,ga,ya,_a){if(ga.length!=Math.ceil(this.n.bitLength()/4))return!1;var _s,Ss=new c$1(ga,16),Ms=function(Ds){return u$1.crypto.Util.hashHex(Ds,ya)},Es=rt(ca),Cs=Es.length,Ts=this.n.bitLength()-1,Bs=Math.ceil(Ts/8);if(_a===-1||_a===void 0)_a=Cs;else if(_a===-2)_a=Bs-Cs-2;else if(_a<-2)throw new Error("invalid salt length");if(Bs<Cs+_a+2)throw new Error("data too long");var Is=this.doPublic(Ss).toByteArray();for(_s=0;_s<Is.length;_s+=1)Is[_s]&=255;for(;Is.length<Bs;)Is.unshift(0);if(Is[Bs-1]!==188)throw new Error("encoded message does not end in 0xbc");var Ps=(Is=String.fromCharCode.apply(String,Is)).substr(0,Bs-Cs-1),Rs=Is.substr(Ps.length,Cs),ks=65280>>8*Bs-Ts&255;if((Ps.charCodeAt(0)&ks)!=0)throw new Error("bits beyond keysize not zero");var $s=St(Rs,Ps.length,Ms),Os=[];for(_s=0;_s<Ps.length;_s+=1)Os[_s]=Ps.charCodeAt(_s)^$s.charCodeAt(_s);Os[0]&=~ks;var Ls=Bs-Cs-_a-2;for(_s=0;_s<Ls;_s+=1)if(Os[_s]!==0)throw new Error("leftmost octets not zero");if(Os[Ls]!==1)throw new Error("0x01 marker not found");return Rs===rt(Ms(ot("\0\0\0\0\0\0\0\0"+Es+String.fromCharCode.apply(String,Os.slice(-_a)))))},X.SALT_LEN_HLEN=-1,X.SALT_LEN_MAX=-2,X.SALT_LEN_RECOVER=-2,Mt.hex2dn=function(ca,ga){ga===void 0&&(ga=0);var ya=new Mt;return It.getTLV(ca,ga),ya.getX500Name(ca).str},Mt.hex2rdn=function(ca,ga){if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="31")throw new Error("malformed RDN");for(var ya=new Array,_a=It.getChildIdx(ca,ga),_s=0;_s<_a.length;_s++)ya.push(Mt.hex2attrTypeValue(ca,_a[_s]));return(ya=ya.map(function(Ss){return Ss.replace("+","\\+")})).join("+")},Mt.hex2attrTypeValue=function(ca,ga){var ya=It,_a=ya.getV;if(ga===void 0&&(ga=0),ca.substr(ga,2)!=="30")throw new Error("malformed attribute type and value");var _s=ya.getChildIdx(ca,ga);_s.length!==2||ca.substr(_s[0],2);var Ss=_a(ca,_s[0]),Ms=u$1.asn1.ASN1Util.oidHexToInt(Ss);return u$1.asn1.x509.OID.oid2atype(Ms)+"="+rt(_a(ca,_s[1]))},Mt.getPublicKeyFromCertHex=function(ca){var ga=new Mt;return ga.readCertHex(ca),ga.getPublicKey()},Mt.getPublicKeyFromCertPEM=function(ca){var ga=new Mt;return ga.readCertPEM(ca),ga.getPublicKey()},Mt.getPublicKeyInfoPropOfCertPEM=function(ca){var ga,ya,_a=It.getVbyList,_s={};return _s.algparam=null,(ga=new Mt).readCertPEM(ca),ya=ga.getPublicKeyHex(),_s.keyhex=_a(ya,0,[1],"03").substr(2),_s.algoid=_a(ya,0,[0,0],"06"),_s.algoid==="2a8648ce3d0201"&&(_s.algparam=_a(ya,0,[0,1],"06")),_s},Mt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Tt,Qt=[(Tt=new Mt,Tt.readCertPEM(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Tt)];function Rt(ca,ga){var ya=ca.getIssuerHex();if(ya===ca.getSubjectHex())return ca.verifySignature(ca.getPublicKey());var _a=function(_s,Ss){for(var Ms=0,Es=Ss;Ms<Es.length;Ms++){var Cs=Es[Ms];if(Cs.getSubjectHex()===_s)return Cs}}(ya,ga);return!!_a&&ca.verifySignature(_a.getPublicKey())!==!1&&Rt(_a,ga)}function Dt(ca){return ca.getIssuerHex()!==ca.getSubjectHex()&&Rt(ca,Qt)}(function(ca){var ga=new Mt;typeof ca=="string"?ga.readCertPEM(ca):ga.readCertHex(ca.hex),Dt(ga),Qt.push(ga)})(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var kt,Nt=(kt="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(kt,">$"):Symbol(kt));function Ft(ca){return ca[Nt]||(ca[Nt]={}),ca[Nt]}var Ot=function(){function ca(){}return ca.prototype.hasListener=function(ga){var ya=Ft(this);return ya&&ya[ga]&&ya[ga].length>0},ca.prototype.on=function(ga,ya,_a){var _s=this,Ss=Ft(this);return Ss[ga]||(Ss[ga]=[]),Ss[ga].push([ya,_a||!1]),function(){return _s.off(ga,ya)}},ca.prototype.once=function(ga,ya){return this.on(ga,ya,!0)},ca.prototype.off=function(ga,ya){if(ga!==void 0){var _a,_s=Ft(this);if(_s[ga]||(_s[ga]=[]),ya!==void 0){for(var Ss=0;Ss<_s[ga].length&&_s[ga][Ss][0]!==ya;Ss++);Ss<_s[ga].length&&_s[ga].splice(Ss,1)}else _s[ga].length=0}else(_a=this)[Nt]||delete _a[Nt]},ca.prototype.emit=function(ga){for(var ya=[],_a=1;_a<arguments.length;_a++)ya[_a-1]=arguments[_a];for(var _s=!1,Ss=Ft(this),Ms=Ss[ga]||[],Es=0,Cs=Ms.slice();Es<Cs.length;Es++){var Ts=Cs[Es],Bs=Ts[0],Is=Ts[1],Ps=Is!==void 0&&Is,Rs=Bs.apply(void 0,ya);Ps&&this.off(ga,Bs),Rs===!1&&(_s=!0)}return _s},ca}();function Lt(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga]}var Vt=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),Ht=typeof performance!="undefined"?function(){return Vt+performance.now()}:function(){return Date.now()};function Kt(ca){Object.freeze(ca);var ga=typeof ca=="function",ya=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(ca).forEach(function(_a){!ya.call(ca,_a)||ga&&(_a==="caller"||_a==="callee"||_a==="arguments")||ca[_a]===null||typeof ca[_a]!="object"&&typeof ca[_a]!="function"||Object.isFrozen(ca[_a])||Kt(ca[_a])}),ca}var zt=/^([^.]+)(\.([^.]+))*$/;function qt(ca){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(ca)}function _t(ca,ga){return zt.test(ca)&&zt.test(ga)&&function(ya,_a){if(ya==="*")return!0;var _s=ya.split(".").reverse(),Ss=_a.split(".").reverse();if(_s.length<=1)return ya===_a;for(var Ms=0;Ms<_s.length;Ms++)if(_s[Ms]!==Ss[Ms])return!1;return!0}(ca,ga)}var jt=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Ut=Kt(JSON.parse(function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/9-/rnyrr;w}/9-/rnyrr:pq{;p|z/-j"))),Gt=function(ca){function ga(ya,_a,_s){return ca.call(this,"[NETWORK]: response error(type: ".concat(_a,", reason: ").concat(_s,"): ").concat(ya))||this}return e$1.__extends(ga,ca),ga}(Error),Wt=function(ca){function ga(ya,_a,_s){var Ss=ca.call(this,"[NETWORK]: response error(type: ".concat(_a,", status: ").concat(_s,"): ").concat(ya))||this;return Ss.httpStatus=_s,Ss}return e$1.__extends(ga,ca),ga}(Error);(function(ca){function ga(ya,_a){return ca.call(this,"[NETWORK]: request abort(type: ".concat(_a,"): ").concat(ya))||this}e$1.__extends(ga,ca)})(Error);var Xt=function(ca){function ga(ya,_a,_s){return ca.call(this,"[NETWORK]: request timeout(type: ".concat(_a,", timeout: ").concat(_s,"ms): ").concat(ya))||this}return e$1.__extends(ga,ca),ga}(Error);function Yt(ca){for(var ga=0,ya=jt;ga<ya.length;ga++){var _a=ya[ga],_s=ca.match(_a);if(_s)return"jsonp_"+_s[1]}return null}function Zt(ca){return Yt(ca)!==null}function Jt(ca){return jt.reduce(function(ga,ya){return ga.replace(ya,"")},ca)}function $t(ca){var ga=ca.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[2]:location.hostname}(function(ca){function ga(ya,_a,_s){return ca.call(this,"[NETWORK]: request forbidden(type: ".concat(_a,", reason: ").concat(_s,"): ").concat(ya))||this}e$1.__extends(ga,ca)})(Error);var te=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$1.__extends(ga,ca),ga}(Ot);function ee(ca,ga,ya,_a,_s){return ga===void 0&&(ga={}),ya===void 0&&(ya=Lt),_a===void 0&&(_a=Lt),_s===void 0&&(_s=Lt),new Promise(function(Ss,Ms){var Es,Cs=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Ts=$t(ca),Bs=Yt(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Qs){return _t(Qs,location.hostname)}).length===0&&!qt(Ts)&&Cs.filter(function(Qs){return _t(Qs,Ts)}).length===0){var Is=Bs?"Script":"XMLHttpRequest",Ps=new Gt(ca,Is,"request host(".concat(Ts,") is not allowed"));return _a(Ps),Ms(Ps),void((Es=ga.networkSubscribe)===null||Es===void 0||Es.emit("network",ca,Is,"forbidden",Ps.message))}if(Bs){var Rs=window,ks=null,$s=!1,Os=Ht(),Ls=document.createElement("script");Rs[Bs]=function(Qs){var js,Zs,Ks=Ht(),Ys=Ks-Os;if(delete Rs[Bs],Ls.parentNode&&Ls.parentNode.removeChild(Ls),ks!==null&&(window.clearTimeout(ks),ks=null),$s!==!0){if(Qs.indexOf("data:")!==0){var qs=new Wt(ca,"Script",500);return _a(qs),Ms(qs),void((js=ga.networkSubscribe)===null||js===void 0||js.emit("network",ca,"Script","error",qs.message))}var eu=Qs.split(","),Js=(eu[0].match(/:(.*?);/)||[])[1],Xs=eu[1];if(ga.responseType==="arraybuffer"||ga.responseType==="blob"){for(var ru=atob(eu[1]),su=ru.length,lu=new Uint8Array(su),cu=0;cu<su;cu++)lu[cu]=ru.charCodeAt(cu);Xs=ga.responseType==="arraybuffer"?lu.buffer:new Blob([lu],{type:Js})}var xu={body:Xs,meta:{source:ca,requestTime:Os,responseTime:Ks,costs:Ys,headers:{}}};ya(xu),Ss(xu),(Zs=ga.networkSubscribe)===null||Zs===void 0||Zs.emit("network",ca,"Script","ok",JSON.stringify(xu.meta)),$s=!0}},Ls.src=ca,document.body.appendChild(Ls),typeof ga.timeout=="number"&&(ks=window.setTimeout(function(){var Qs;if(ks=null,$s!==!0){$s=!0;var js=new Xt(ca,"Script",ga.timeout||NaN);_a(js),Ms(js),(Qs=ga.networkSubscribe)===null||Qs===void 0||Qs.emit("network",ca,"Script","timeout",js.message)}},ga.timeout))}else{var Ds=Ht(),Fs=!1,Ns=new XMLHttpRequest,Vs=function(){Ns&&(Ns.removeEventListener("timeout",Gs,!1),Ns.removeEventListener("progress",Us,!1),Ns.removeEventListener("load",zs,!1),Ns.removeEventListener("error",Hs,!1)),Ns=null,Vs=Lt},Gs=function(){var Qs;if(Fs!==!0){Fs=!0,Vs();var js=new Xt(ca,"XMLHttpRequest",ga.timeout||NaN);_a(js),Ms(js),(Qs=ga.networkSubscribe)===null||Qs===void 0||Qs.emit("network",ca,"XMLHttpRequest","timeout",js.message)}},Us=function(Qs){Fs!==!0&&Qs.lengthComputable&&(Qs.total<=0||_s(Qs.loaded/Qs.total))},zs=function(Qs){var js;if(Fs!==!0){var Zs=this.status;if(Zs===0||Zs>=200&&Zs<400){Fs=!0,Vs();var Ks=Ht(),Ys=Ks-Ds,qs=function(Xs){if(!Xs)return{};for(var ru={},su=Xs.trim().split(`
`),lu=0;lu<su.length;lu++){var cu=su[lu],xu=cu.indexOf(":"),bu=cu.slice(0,xu).trim().toLowerCase(),yu=cu.slice(xu+1).trim();yu&&(ru[bu]?ru[bu]+=", "+yu:ru[bu]=yu)}return ru}(this.getAllResponseHeaders()),eu=Qs.total,Js={body:this.response,meta:{source:ca,requestTime:Ds,responseTime:Ks,costs:Ys,headers:qs,size:eu}};ya(Js),Ss(Js),(js=ga.networkSubscribe)===null||js===void 0||js.emit("network",ca,"XMLHttpRequest","ok",JSON.stringify(Js.meta))}else Hs.call(this)}},Hs=function(){var Qs;if(Fs!==!0){Fs=!0,Vs();var js=new Wt(ca,"XMLHttpRequest",this.status);_a(js),Ms(js),(Qs=ga.networkSubscribe)===null||Qs===void 0||Qs.emit("network",ca,"XMLHttpRequest","error",js.message)}};Ns.addEventListener("timeout",Gs,!1),Ns.addEventListener("progress",Us,!1),Ns.addEventListener("load",zs,!1),Ns.addEventListener("error",Hs,!1),ga.responseType&&(Ns.responseType=ga.responseType),typeof ga.timeout=="number"&&(Ns.timeout=ga.timeout),Ns.open("GET",ca,!0),Ns.send(null)}})}var ie={};function ne(ca,ga,ya,_a,_s,Ss){return ga===void 0&&(ga={}),ya===void 0&&(ya=Lt),_a===void 0&&(_a=Lt),_s===void 0&&(_s=Lt),new Promise(function(Ms,Es){var Cs,Ts=ga.allowHosts?Ut.concat(ga.allowHosts):Ut.slice(),Bs=$t(ca);if(location.hostname.length!==0&&!qt(location.hostname)&&Ut.filter(function(Os){return _t(Os,location.hostname)}).length===0&&!qt(Bs)&&Ts.filter(function(Os){return _t(Os,Bs)}).length===0){var Is=new Gt(ca,"Image","request host(".concat(Bs,") is not allowed"));return _a(Is),Es(Is),void((Cs=ga.networkSubscribe)===null||Cs===void 0||Cs.emit("network",ca,"Image","forbidden",Is.message))}var Ps=Ss!=null?Ss:new Image,Rs=Ht(),ks=!1,$s=null;typeof ga.timeout=="number"&&($s=window.setTimeout(function(){var Os;if(Ps.onload=Lt,Ps.onerror=Lt,$s=null,ks!==!0){ks=!0;var Ls=new Xt(ca,"Image",ga.timeout);_a(Ls),Es(Ls),(Os=ga.networkSubscribe)===null||Os===void 0||Os.emit("network",ca,"Image","timeout",Ls.message)}},ga.timeout)),Ps.onload=function(){var Os;if(Ps.onload=Lt,Ps.onerror=Lt,$s!==null&&(clearTimeout($s),$s=null),ks!==!0){var Ls=Ht();ks=!0;var Ds={body:Ps,meta:{headers:{},source:ca,requestTime:Rs,responseTime:Ls,costs:Ls-Rs}};_s(1),ya(Ds),Ms(Ds),(Os=ga.networkSubscribe)===null||Os===void 0||Os.emit("network",ca,"Image","ok",JSON.stringify(Ds.meta))}},Ps.onerror=function(){var Os;if(Ps.onload=Lt,Ps.onerror=Lt,$s!==null&&(clearTimeout($s),$s=null),ks!==!0){ks=!0;var Ls=new Wt(ca,"Image",0);_a(Ls),Es(Ls),(Os=ga.networkSubscribe)===null||Os===void 0||Os.emit("network",ca,"Image","ok",Ls.message)}},_s(0),Ps.src=ca})}var re=function(){if(typeof window!="undefined"){var ca=window;return ca.requestAnimationFrame||ca.mozRequestAnimationFrame||ca.webkitRequestAnimationFrame||ca.msRequestAnimationFrame||function(ga){return setTimeout(ga,16)}}return function(ga){return setTimeout(ga,16)}}(),oe=16,se=function(){function ca(){this.frames=[],this.stoped=!1,this.time=Ht(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(ca,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new ca),this.sharedInstance},enumerable:!1,configurable:!0}),ca.getFrameTime=function(){return oe},ca.prototype.loop=function(){if(!this.stoped){var ga=Ht(),ya=ga-this.time;this.time=ga;var _a=[];oe=ya;for(var _s=0,Ss=this.frames;_s<Ss.length;_s++){var Ms=Ss[_s];if(Ms.delay>0)Ms.delay=Ms.delay-1;else{try{Ms.callback(ga,ya)}catch(Es){console.error(Es)}Ms.once&&_a.push(Ms)}}_a.length>0&&(this.frames=this.frames.filter(function(Es){return _a.indexOf(Es)===-1})),re(this.loop)}},ca.prototype.remove=function(ga){var ya=this.frames.indexOf(ga);ya>=0&&this.frames.splice(ya,1)},ca.prototype.add=function(ga,ya,_a,_s){var Ss=this;ya===void 0&&(ya=!1),_a===void 0&&(_a=0),_s===void 0&&(_s=5);var Ms={callback:ga,once:ya,delay:_a,order:_s};return this.frames.push(Ms),this.frames.sort(function(Es,Cs){return Es.order-Cs.order}),function(){return Ss.remove(Ms)}},ca.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},ca}(),ae=/^https?\:\/\/?([^\/]+)/;function ue(ca,ga){return ca.replace(ae,function(ya,_a){return ya.slice(0,ya.length-_a.length)+ga})}var le={"vrlab-public.ljcdn.com":{pano:["vrlab-image1.ljcdn.com","vrlab-image2.ljcdn.com"],texture:["vrlab-image3.ljcdn.com"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-2.realsee-cdn.cn"],default:["vrlab-image4.ljcdn.com"]},"vr-public.realsee-cdn.cn":{pano:["vr-image-1.realsee-cdn.cn","vr-image-2.realsee-cdn.cn"],texture:["vr-image-3.realsee-cdn.cn"],tile:["vr-tile-1.realsee-cdn.cn","vr-tile-1.realsee-cdn.cn"],default:["vr-image-4.realsee-cdn.cn"]},"global-public.realsee-cdn.com":{pano:["global-image-1.realsee-cdn.com","global-image-2.realsee-cdn.com"],texture:["global-image-3.realsee-cdn.com"],tile:["global-tile-1.realsee-cdn.com","global-tile-2.realsee-cdn.com"],default:["global-image-4.realsee-cdn.com"]},"test-vr-public.realsee-cdn.com":{pano:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],texture:["test-vr-image.realsee-cdn.com"],tile:["test-vr-image.realsee-cdn.com","test-vr-image.realsee-cdn.com"],default:["test-vr-image.realsee-cdn.com"]}};function he(ca,ga){var ya=e$1.__assign(e$1.__assign({},le),ga.mappings),_a=function(Ss){var Ms=Ss.match(ae);return Ms===null?null:Ms[1]}(ca);if(_a===null)return ca;var _s=ya[_a];return _s?function(Ss,Ms){var Es,Cs=Ss.split("?")[0],Ts=Cs.split(".").pop();if(Ts==="jpeg"&&(Ts="jpg"),Ts!=="png"&&Ts!=="jpg")return Ss;var Bs="";if(Ms.format!==void 0&&Ms.format!==Ts&&(Bs+="/format/".concat(Ms.format)),Ms.cut!==void 0&&(Bs+="/cut/".concat(Ms.cut[2],"x").concat(Ms.cut[3],"x").concat(Ms.cut[0],"x").concat(Ms.cut[1])),Ms.quality!==void 0){var Is=(Es=Ms.format)!==null&&Es!==void 0?Es:Ts;Is&&["jpg","webp","tpg","heif","avif"].indexOf(Is)>=0&&(Bs+="/quality/".concat(Ms.quality))}if(Ms.size!==void 0){var Ps=Ss.match(/\/cube_(\d+)\//);(Ps?Number(Ps[1]):NaN)!==Number(Ms.size)&&(Bs+="/thumbnail/".concat(Ms.size,"x"))}return Ms.sharpen!==void 0&&(Bs+="/sharpen/".concat(Ms.sharpen)),Bs.length&&(Bs="?imageMogr2"+Bs),Cs+Bs}(function(Ss,Ms,Es){var Cs=Ms.split("."),Ts=Cs[0],Bs=Cs.slice(1);if(Ts==="texture")return ue(Ss,Es.texture[0]);if(Ts==="pano"||Ts==="pano_luminance")switch(Bs[0],Bs[1]){case"front":case"left":case"up":return ue(Ss,Es.pano[0]);case"down":case"right":case"back":return ue(Ss,Es.pano[1])}else if(Ts==="pano_tile"||Ts==="pano_tile_luminance"){Bs[0],Bs[1];var Is=Bs[2],Ps=Bs[3],Rs=Bs[4],ks=Math.pow(2,Number(Is))*Number(Ps)+Number(Rs);if(!isNaN(ks))return ue(Ss,Es.tile[ks%2])}return ue(Ss,Es.default[0])}(ca,ga.key,_s),ga):ca}var ce=function(ca){function ga(){var ya=ca!==null&&ca.apply(this,arguments)||this;return ya.floorIndex=0,ya.needsRender=!0,ya}return e$1.__extends(ga,ca),ga}(r$1.Mesh),de=function(ca){function ga(){var ya=ca!==null&&ca.apply(this,arguments)||this;return ya.needsRender=!0,ya.enableTransparent=!0,ya}return e$1.__extends(ga,ca),ga.prototype.getTransparent=function(){return this.enableTransparent},ga.prototype.setTransparent=function(ya){this.enableTransparent=ya,this.traverse(function(_a){_a instanceof ce&&_a.material.forEach(function(_s){_s.transparent=ya})})},ga.prototype.getMaterial=function(){var ya=null;return this.traverse(function(_a){if(ya===null&&_a instanceof ce){var _s=_a.material[0];ya={pano0:_s.pano0,pano1:_s.pano1,modelAlpha:_s.modelAlpha,progress:_s.progress,useBlackTransition:_s.useBlackTransition,perspToOrtho:_s.perspToOrtho,opacity:_s.opacity}}}),ya},ga.prototype.setMaterial=function(ya){this.traverse(function(_a){_a instanceof ce&&_a.material.forEach(function(_s){ya.pano0!==void 0&&(_s.pano0=ya.pano0),ya.pano1!==void 0&&(_s.pano1=ya.pano1),ya.modelAlpha!==void 0&&(_s.modelAlpha=ya.modelAlpha),ya.progress!==void 0&&(_s.progress=ya.progress),ya.useBlackTransition!==void 0&&(_s.useBlackTransition=ya.useBlackTransition),ya.perspToOrtho!==void 0&&(_s.perspToOrtho=ya.perspToOrtho),ya.opacity!==void 0&&(_s.opacity=ya.opacity)})})},ga.prototype.disposeMaterial=function(){this.traverse(function(ya){if(ya instanceof ce){var _a=[];ya.material.forEach(function(_s){var Ss=_s.uniforms;Object.keys(Ss).map(function(Ms){if(/^pano\d\_/.test(Ms))Ss[Ms].value=null;else{var Es=Ss[Ms].value;Es&&typeof Es.dispose=="function"&&_a.indexOf(Es)===-1&&(Ss[Ms].value=null,_a.push(Es))}}),_s.dispose()}),_a.forEach(function(_s){return _s.dispose()})}})},ga.prototype.disposeGeometry=function(){this.traverse(function(ya){ya instanceof ce&&ya.geometry.dispose()})},ga}(r$1.Group),pe=function(ca){function ga(){var ya=ca!==null&&ca.apply(this,arguments)||this;return ya.floorIndex=0,ya}return e$1.__extends(ga,ca),ga}(de),Ae=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K0v{pyqr-Iunq|zn}l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-z|qryZnv\x07-7-n{s|zrqH--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--0v{pyqr-Iunq|zn}lrr\x07K\f`),fe=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rpA-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{K0v{pyqr-Iunq|zn}l}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{;\x07\b	-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6-<-aNb-7-?;=H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-pynz}5oynpx]|tr-7-@;=9-=;=9->;=66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-pynz}5oynpx]|tr-7-@;=-:-?;=9-=;=9->;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{;\x07\b	-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function ge(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var ve=ge();ve.width=ve.height=8;var me=new r$1.Texture(ve);me.name="EMPTY_TEXTURE";var ye=new r$1.CubeTexture([ve,ve,ve,ve,ve,ve]);ye.name="EMPTY_CUBE_TEXTURE",me.dispose=ye.dispose=function(){};var we=Object.assign({modelAlpha:new r$1.Uniform(0),progress:new r$1.Uniform(0),pano0_map:new r$1.Uniform(ye),pano0_luminanceMap:new r$1.Uniform(null),pano0_matrix:new r$1.Uniform(new r$1.Matrix4),pano1_map:new r$1.Uniform(ye),pano1_luminanceMap:new r$1.Uniform(null),pano1_matrix:new r$1.Uniform(new r$1.Matrix4),modelCenter:new r$1.Uniform(new r$1.Vector3),perspToOrtho:new r$1.Uniform(0)},{exposure:new r$1.Uniform(1),emissive:new r$1.Uniform(new r$1.Color(0)),emissiveMap:new r$1.Uniform(null),specular:new r$1.Uniform(new r$1.Color(1118481)),specularMap:new r$1.Uniform(null),normalMap:new r$1.Uniform(null),bumpMap:new r$1.Uniform(null),shininess:new r$1.Uniform(30)},r$1.UniformsUtils.clone(r$1.UniformsLib.common),r$1.UniformsUtils.clone(r$1.UniformsLib.lights)),be=function(ca){function ga(ya){ya===void 0&&(ya={});var _a,_s,Ss,Ms,Es,Cs,Ts,Bs=this;return Bs=ca.call(this,{vertexShader:Ae,fragmentShader:fe,uniforms:r$1.UniformsUtils.clone(we),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$1.NoBlending,lights:!0})||this,Object.defineProperties(Bs,{pano0:{get:function(){return this.uniforms.pano0_map.value===ye?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(Is){Is===null?(this.uniforms.pano0_map.value=ye,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=Is.map,this.uniforms.pano0_luminanceMap.value=Is.luminanceMap,this.uniforms.pano0_matrix.value.copy(Is.matrix));var Ps=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Ps&&(this.defines.USE_LUMINANCE=Ps,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===ye?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(Is){Is===null?(this.uniforms.pano1_map.value=ye,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=Is.map,this.uniforms.pano1_luminanceMap.value=Is.luminanceMap,this.uniforms.pano1_matrix.value.copy(Is.matrix));var Ps=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==Ps&&(this.defines.USE_LUMINANCE=Ps,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(Is){this.uniforms.modelAlpha.value=Is}},progress:{get:function(){return this.uniforms.progress.value},set:function(Is){this.uniforms.progress.value=Is}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(Is){this.defines.USE_BLACK_TRANSITION!==Is&&(this.defines.USE_BLACK_TRANSITION=Is,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(Is){this.uniforms.opacity.value=Is;var Ps=Is<1?r$1.NormalBlending:r$1.NoBlending;Ps!==this.blending&&(this.blending=Ps,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(Is){this.uniforms.perspToOrtho.value=Is}}}),Bs.pano0=(_a=ya.pano0)!==null&&_a!==void 0?_a:null,Bs.pano1=(_s=ya.pano1)!==null&&_s!==void 0?_s:null,Bs.modelAlpha=(Ss=ya.modelAlpha)!==null&&Ss!==void 0?Ss:1,Bs.progress=(Ms=ya.progress)!==null&&Ms!==void 0?Ms:0,Bs.useBlackTransition=(Es=ya.useBlackTransition)!==null&&Es!==void 0&&Es,Bs.perspToOrtho=(Cs=ya.perspToOrtho)!==null&&Cs!==void 0?Cs:0,Bs.opacity=(Ts=ya.opacity)!==null&&Ts!==void 0?Ts:1,Bs.originOpacity=1,Bs}return e$1.__extends(ga,ca),ga}(r$1.ShaderMaterial),xe=function(ca){function ga(ya){var _a=ya.preserveDrawingBuffer,_s=_a===void 0||_a,Ss=ya.backgroundColor,Ms=Ss===void 0?1579548:Ss,Es=ya.backgroundAlpha,Cs=Es===void 0?1:Es,Ts=ya.pixelRatio,Bs=Ts===void 0?1:Ts,Is=ya.antialias,Ps=Is!==void 0&&Is,Rs=ya.webgl2,ks=this;if(Rs!==void 0&&Rs){var $s=document.createElement("canvas"),Os=$s.getContext("webgl2");if(Os===null)throw new Error("error occurred when getting webgl2 canvas context");ks=ca.call(this,{antialias:Ps,preserveDrawingBuffer:_s,alpha:Cs<1,canvas:$s,context:Os})||this}else ks=ca.call(this,{antialias:Ps,preserveDrawingBuffer:_s,alpha:Cs<1})||this;return ks.setPixelRatio(Bs),ks.setClearColor(Ms,Cs),ks.outputEncoding=r$1.sRGBEncoding,ks.autoClear=!0,ks}return e$1.__extends(ga,ca),ga}(r$1.WebGLRenderer),Ee=function(ca){function ga(){return ca!==null&&ca.apply(this,arguments)||this}return e$1.__extends(ga,ca),ga.prototype.add=function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.prototype.add.apply(this,ya)},ga.prototype.remove=function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.prototype.remove.apply(this,ya)},ga}(r$1.Scene),Ie=2*Math.PI,Ce=Math.PI/2;function Se(ca){return ca>0&&ca<=Ie?ca:(ca%Ie+Ie)%Ie}var Be,Me,Pe,Te,Qe=function(ca){function ga(ya){var _a=ca.call(this,ya,1,.1,1e3)||this;return _a.pose={longitude:0,latitude:0,fov:ya,distance:0,offset:new r$1.Vector3},_a.computePose(),_a}return e$1.__extends(ga,ca),ga.prototype.computePose=function(){var ya=this.getWorldDirection(new r$1.Vector3);return this.pose.longitude=Se(-Math.atan2(ya.x,-ya.z)),this.pose.latitude=-Math.asin(ya.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},ga.prototype.setFromPose=function(ya){var _a,_s,Ss,Ms,Es,Cs=Se((_a=ya.longitude)!==null&&_a!==void 0?_a:this.pose.longitude),Ts=Math.max(1e-4-Ce,Math.min(Ce-1e-4,(_s=ya.latitude)!==null&&_s!==void 0?_s:this.pose.latitude)),Bs=(Ss=ya.fov)!==null&&Ss!==void 0?Ss:this.pose.fov,Is=(Ms=ya.distance)!==null&&Ms!==void 0?Ms:this.pose.distance,Ps=(Es=ya.offset)!==null&&Es!==void 0?Es:this.pose.offset,Rs=function(ks){var $s=Math.abs(Math.cos(ks.latitude));return new r$1.Vector3(-Math.sin(ks.longitude)*$s,-Math.sin(ks.latitude),-Math.cos(ks.longitude)*$s)}({longitude:Cs,latitude:Ts}).normalize();return this.position.set(0,0,0),this.lookAt(Rs),this.position.add(Ps).sub(Rs.clone().setLength(Is)),this.fov!==Bs&&(this.fov=Bs,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=Cs,this.pose.latitude=Ts,this.pose.fov=Bs,this.pose.distance=Is,this.pose.offset.copy(Ps),this},ga.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},ga}(r$1.PerspectiveCamera),Re=function(){function ca(ga,ya,_a){this.x=ga,this.y=ya,this.z=_a}return ca.prototype.copy=function(ga){return this.x=ga.x,this.y=ga.y,this.z=ga.z,this},ca.prototype.set=function(ga,ya,_a){return this.x=ga,this.y=ya,this.z=_a,this},ca.prototype.fromArray=function(ga,ya){return ya===void 0&&(ya=0),this.x=ga[ya],this.y=ga[ya+1],this.z=ga[ya+2],this},ca.prototype.add=function(ga){return this.x+=ga.x,this.y+=ga.y,this.z+=ga.z,this},ca.prototype.multiplyScalar=function(ga){return this.x*=ga,this.y*=ga,this.z*=ga,this},ca.prototype.subVectors=function(ga,ya){return this.x=ga.x-ya.x,this.y=ga.y-ya.y,this.z=ga.z-ya.z,this},ca.prototype.dot=function(ga){return this.x*ga.x+this.y*ga.y+this.z*ga.z},ca.prototype.cross=function(ga){var ya=this.x,_a=this.y,_s=this.z;return this.x=_a*ga.z-_s*ga.y,this.y=_s*ga.x-ya*ga.z,this.z=ya*ga.y-_a*ga.x,this},ca.prototype.crossVectors=function(ga,ya){var _a=ga.x,_s=ga.y,Ss=ga.z,Ms=ya.x,Es=ya.y,Cs=ya.z;return this.x=_s*Cs-Ss*Es,this.y=Ss*Ms-_a*Cs,this.z=_a*Es-_s*Ms,this},ca.prototype.clone=function(){return new ca(this.x,this.y,this.z)},ca}(),De=function(ca,ga,ya){this.extents=ca,this.startIndex=ga,this.endIndex=ya},ke=function(ca,ga){this.triangle=ca,this.intersectionPoint=ga},Ne=(Be=new Re(0,0,0),Me=new Re(0,0,0),Pe=new Re(0,0,0),Te=new Re(0,0,0),function(ca,ga,ya,_a,_s,Ss){Me.subVectors(ga,ca),Pe.subVectors(ya,ca),Te.crossVectors(Me,Pe);var Ms,Es=_s.dot(Te);if(Es>0){if(Ss)return null;Ms=1}else{if(!(Es<0))return null;Ms=-1,Es=-Es}Be.subVectors(_a,ca);var Cs=Ms*_s.dot(Pe.crossVectors(Be,Pe));if(Cs<0)return null;var Ts=Ms*_s.dot(Me.cross(Be));if(Ts<0||Cs+Ts>Es)return null;var Bs=-Ms*Be.dot(Te);if(Bs<0)return null;var Is=Bs/Es;return new Re(0,0,0).copy(_s).multiplyScalar(Is).add(_a)}),Fe=function(ca,ga){this.min=ca,this.max=ga};function Oe(ca,ga,ya){var _a=new Fe(0,0);ga.x>=0?(_a.min=(ya.extents[0]-ca.x)*ga.x,_a.max=(ya.extents[3]-ca.x)*ga.x):(_a.min=(ya.extents[3]-ca.x)*ga.x,_a.max=(ya.extents[0]-ca.x)*ga.x);var _s=new Fe(0,0);if(ga.y>=0?(_s.min=(ya.extents[1]-ca.y)*ga.y,_s.max=(ya.extents[4]-ca.y)*ga.y):(_s.min=(ya.extents[4]-ca.y)*ga.y,_s.max=(ya.extents[1]-ca.y)*ga.y),_a.min>_s.max||_s.min>_a.max)return!1;_s.min>_a.min&&(_a.min=_s.min),_s.max<_a.max&&(_a.max=_s.max);var Ss=new Fe(0,0);return ga.z>=0?(Ss.min=(ya.extents[2]-ca.z)*ga.z,Ss.max=(ya.extents[5]-ca.z)*ga.z):(Ss.min=(ya.extents[5]-ca.z)*ga.z,Ss.max=(ya.extents[2]-ca.z)*ga.z),!(_a.min>Ss.max||Ss.min>_a.max)&&(Ss.min>_a.min&&(_a.min=Ss.min),Ss.max<_a.max&&(_a.max=Ss.max),!(_a.max<0))}function Le(ca,ga,ya,_a,_s){if(ya>=_a)return[0,0,0,0,0,0];for(var Ss=1/0,Ms=1/0,Es=1/0,Cs=-1/0,Ts=-1/0,Bs=-1/0,Is=ya,Ps=void 0,Rs=void 0;Is<_a;Is++)(Rs=ga[Ps=6*ca[Is]])<Ss&&(Ss=Rs),(Rs=ga[Ps+1])<Ms&&(Ms=Rs),(Rs=ga[Ps+2])<Es&&(Es=Rs),(Rs=ga[Ps+3])>Cs&&(Cs=Rs),(Rs=ga[Ps+4])>Ts&&(Ts=Rs),(Rs=ga[Ps+5])>Bs&&(Bs=Rs);return[Ss-_s,Ms-_s,Es-_s,Cs+_s,Ts+_s,Bs+_s]}var Ve=function(){function ca(){}return ca.prototype.create=function(ga){return this.trianglesArray=ga,this},ca.prototype.splitNode=function(ga){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var ya=this.trianglesArray,_a=ya.length/9,_s=new Uint32Array(_a),Ss=new Float32Array(6*_a),Ms=[],Es=1/0,Cs=1/0,Ts=1/0,Bs=-1/0,Is=-1/0,Ps=-1/0,Rs=0,ks=0,$s=0,Os=void 0,Ls=void 0,Ds=void 0,Fs=void 0,Ns=void 0,Vs=void 0,Gs=void 0;Rs<_a;Rs++,ks+=6,$s+=9)_s[Rs]=Rs,Os=Fs=ya[$s],(Gs=ya[$s+3])<Os&&(Os=Gs),Gs>Fs&&(Fs=Gs),(Gs=ya[$s+6])<Os&&(Os=Gs),Gs>Fs&&(Fs=Gs),Ls=Ns=ya[$s+1],(Gs=ya[$s+4])<Ls&&(Ls=Gs),Gs>Ns&&(Ns=Gs),(Gs=ya[$s+7])<Ls&&(Ls=Gs),Gs>Ns&&(Ns=Gs),Ds=Vs=ya[$s+2],(Gs=ya[$s+5])<Ds&&(Ds=Gs),Gs>Vs&&(Vs=Gs),(Gs=ya[$s+8])<Ds&&(Ds=Gs),Gs>Vs&&(Vs=Gs),Os<Es&&(Es=Os),Fs>Bs&&(Bs=Fs),Ls<Cs&&(Cs=Ls),Ns>Is&&(Is=Ns),Ds<Ts&&(Ts=Ds),Vs>Ps&&(Ps=Vs),Ss[ks]=Os,Ss[ks+1]=Ls,Ss[ks+2]=Ds,Ss[ks+3]=Fs,Ss[ks+4]=Ns,Ss[ks+5]=Vs;var Us,zs=new De([Es,Cs,Ts,Bs,Is,Ps],0,_a);function Hs(Qs){for(var js=Qs.startIndex,Zs=Qs.endIndex,Ks=Qs.extents,Ys=[Ks[3]-Ks[0],Ks[4]-Ks[1],Ks[5]-Ks[2]],qs=[0,1,2].sort(function(yu,fu){return Ys[fu]-Ys[yu]}),eu=0;eu<3;eu++){for(var Js=qs[eu],Xs=Ks[Js]+Ks[Js+3],ru=js,su=Zs-1,lu=-1,cu=void 0;ru<=su;)lu===-1?(cu=_s[ru],Ss[6*cu+Js]+Ss[6*cu+Js+3]<Xs?ru++:lu=cu):(cu=_s[su],Ss[6*cu+Js]+Ss[6*cu+Js+3]>=Xs||(_s[ru]=cu,_s[su]=lu,lu=-1,ru++),su--);if(ru>js&&ru<Zs){var xu=new De(Le(_s,Ss,js,ru,1e-6),js,ru);xu.endIndex-xu.startIndex>ga&&Ms.push(xu);var bu=new De(Le(_s,Ss,ru,Zs,1e-6),ru,Zs);bu.endIndex-bu.startIndex>ga&&Ms.push(bu),Qs.node0=xu,Qs.node1=bu,Qs.startIndex=0,Qs.endIndex=0;break}}}for(Ms.push(zs);Us=Ms.pop();)Hs(Us);return this.offsetArray=_s,this.rootNode=zs,this},ca.prototype.intersectRay=function(ga,ya,_a){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var _s,Ss=this.trianglesArray,Ms=this.offsetArray,Es=this.rootNode,Cs=[],Ts=[],Bs=new Re(1/ya.x,1/ya.y,1/ya.z),Is=[Es];_s=Is.pop();)if(Oe(ga,Bs,_s)){_s.node0&&Is.push(_s.node0),_s.node1&&Is.push(_s.node1);for(var Ps=_s.startIndex;Ps<_s.endIndex;Ps++)Cs.push(Ms[Ps])}for(var Rs=new Re(0,0,0),ks=new Re(0,0,0),$s=new Re(0,0,0),Os=new Re(ga.x,ga.y,ga.z),Ls=new Re(ya.x,ya.y,ya.z),Ds=(Ps=0,void 0),Fs=Cs.length;Ps<Fs;Ps++){Ds=9*Cs[Ps],Rs.x=Ss[Ds],Rs.y=Ss[Ds+1],Rs.z=Ss[Ds+2],ks.x=Ss[Ds+3],ks.y=Ss[Ds+3+1],ks.z=Ss[Ds+3+2],$s.x=Ss[Ds+6],$s.y=Ss[Ds+6+1],$s.z=Ss[Ds+6+2];var Ns=Ne(Rs,ks,$s,Os,Ls,_a);Ns&&Ts.push(new ke([Rs.clone(),ks.clone(),$s.clone()],Ns))}return Ts},ca.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},ca}(),He=null,Ke=!1,ze=[];function qe(ca){if(ca===void 0&&(ca=!1),ca||!Ke)if(He)Ke=!1;else{Ke=!0;var ga=ze.shift();if(ga){try{ga()}catch{}se.shared.add(function(){return qe(!0)},!0,2)}else Ke=!1}}function _e(){He=null,qe()}function je(ca){return new Promise(function(ga,ya){ze.push(function(){try{ga(ca())}catch(_a){ya(_a)}}),qe()})}function Ue(){var ca={OutWindow:function(){this._windowSize=0}};return ca.OutWindow.prototype.create=function(ga){this._buffer&&this._windowSize===ga||(this._buffer=[]),this._windowSize=ga,this._pos=0,this._streamPos=0},ca.OutWindow.prototype.flush=function(){var ga=this._pos-this._streamPos;if(ga!==0){for(;ga--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},ca.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},ca.OutWindow.prototype.setStream=function(ga){this.releaseStream(),this._stream=ga},ca.OutWindow.prototype.init=function(ga){ga||(this._streamPos=0,this._pos=0)},ca.OutWindow.prototype.copyBlock=function(ga,ya){var _a=this._pos-ga-1;for(_a<0&&(_a+=this._windowSize);ya--;)_a>=this._windowSize&&(_a=0),this._buffer[this._pos++]=this._buffer[_a++],this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.putByte=function(ga){this._buffer[this._pos++]=ga,this._pos>=this._windowSize&&this.flush()},ca.OutWindow.prototype.getByte=function(ga){var ya=this._pos-ga-1;return ya<0&&(ya+=this._windowSize),this._buffer[ya]},ca.RangeDecoder=function(){},ca.RangeDecoder.prototype.setStream=function(ga){this._stream=ga},ca.RangeDecoder.prototype.releaseStream=function(){this._stream=null},ca.RangeDecoder.prototype.init=function(){var ga=5;for(this._code=0,this._range=-1;ga--;)this._code=this._code<<8|this._stream.readByte()},ca.RangeDecoder.prototype.decodeDirectBits=function(ga){for(var ya,_a=0,_s=ga;_s--;)this._range>>>=1,ya=this._code-this._range>>>31,this._code-=this._range&ya-1,_a=_a<<1|1-ya,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return _a},ca.RangeDecoder.prototype.decodeBit=function(ga,ya){var _a=ga[ya],_s=(this._range>>>11)*_a;return(2147483648^this._code)<(2147483648^_s)?(this._range=_s,ga[ya]+=2048-_a>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=_s,this._code-=_s,ga[ya]-=_a>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},ca.initBitModels=function(ga,ya){for(;ya--;)ga[ya]=1024},ca.BitTreeDecoder=function(ga){this._models=[],this._numBitLevels=ga},ca.BitTreeDecoder.prototype.init=function(){ca.initBitModels(this._models,1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.decode=function(ga){for(var ya=1,_a=this._numBitLevels;_a--;)ya=ya<<1|ga.decodeBit(this._models,ya);return ya-(1<<this._numBitLevels)},ca.BitTreeDecoder.prototype.reverseDecode=function(ga){for(var ya,_a=1,_s=0,Ss=0;Ss<this._numBitLevels;++Ss)_a=_a<<1|(ya=ga.decodeBit(this._models,_a)),_s|=ya<<Ss;return _s},ca.reverseDecode2=function(ga,ya,_a,_s){for(var Ss,Ms=1,Es=0,Cs=0;Cs<_s;++Cs)Ms=Ms<<1|(Ss=_a.decodeBit(ga,ya+Ms)),Es|=Ss<<Cs;return Es},ca.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new ca.BitTreeDecoder(8),this._numPosStates=0},ca.LenDecoder.prototype.create=function(ga){for(;this._numPosStates<ga;++this._numPosStates)this._lowCoder[this._numPosStates]=new ca.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new ca.BitTreeDecoder(3)},ca.LenDecoder.prototype.init=function(){var ga=this._numPosStates;for(ca.initBitModels(this._choice,2);ga--;)this._lowCoder[ga].init(),this._midCoder[ga].init();this._highCoder.init()},ca.LenDecoder.prototype.decode=function(ga,ya){return ga.decodeBit(this._choice,0)===0?this._lowCoder[ya].decode(ga):ga.decodeBit(this._choice,1)===0?8+this._midCoder[ya].decode(ga):16+this._highCoder.decode(ga)},ca.Decoder2=function(){this._decoders=[]},ca.Decoder2.prototype.init=function(){ca.initBitModels(this._decoders,768)},ca.Decoder2.prototype.decodeNormal=function(ga){var ya=1;do ya=ya<<1|ga.decodeBit(this._decoders,ya);while(ya<256);return 255&ya},ca.Decoder2.prototype.decodeWithMatchByte=function(ga,ya){var _a,_s,Ss=1;do if(_a=ya>>7&1,ya<<=1,Ss=Ss<<1|(_s=ga.decodeBit(this._decoders,(1+_a<<8)+Ss)),_a!==_s){for(;Ss<256;)Ss=Ss<<1|ga.decodeBit(this._decoders,Ss);break}while(Ss<256);return 255&Ss},ca.LiteralDecoder=function(){},ca.LiteralDecoder.prototype.create=function(ga,ya){var _a;if(!this._coders||this._numPrevBits!==ya||this._numPosBits!==ga)for(this._numPosBits=ga,this._posMask=(1<<ga)-1,this._numPrevBits=ya,this._coders=[],_a=1<<this._numPrevBits+this._numPosBits;_a--;)this._coders[_a]=new ca.Decoder2},ca.LiteralDecoder.prototype.init=function(){for(var ga=1<<this._numPrevBits+this._numPosBits;ga--;)this._coders[ga].init()},ca.LiteralDecoder.prototype.getDecoder=function(ga,ya){return this._coders[((ga&this._posMask)<<this._numPrevBits)+((255&ya)>>>8-this._numPrevBits)]},ca.Decoder=function(){this._outWindow=new ca.OutWindow,this._rangeDecoder=new ca.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new ca.BitTreeDecoder(4),this._lenDecoder=new ca.LenDecoder,this._repLenDecoder=new ca.LenDecoder,this._literalDecoder=new ca.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new ca.BitTreeDecoder(6),this._posSlotDecoder[1]=new ca.BitTreeDecoder(6),this._posSlotDecoder[2]=new ca.BitTreeDecoder(6),this._posSlotDecoder[3]=new ca.BitTreeDecoder(6)},ca.Decoder.prototype.setDictionarySize=function(ga){return!(ga<0)&&(this._dictionarySize!==ga&&(this._dictionarySize=ga,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},ca.Decoder.prototype.setLcLpPb=function(ga,ya,_a){var _s=1<<_a;return!(ga>8||ya>4||_a>4)&&(this._literalDecoder.create(ya,ga),this._lenDecoder.create(_s),this._repLenDecoder.create(_s),this._posStateMask=_s-1,!0)},ca.Decoder.prototype.init=function(){var ga=4;for(this._outWindow.init(!1),ca.initBitModels(this._isMatchDecoders,192),ca.initBitModels(this._isRep0LongDecoders,192),ca.initBitModels(this._isRepDecoders,12),ca.initBitModels(this._isRepG0Decoders,12),ca.initBitModels(this._isRepG1Decoders,12),ca.initBitModels(this._isRepG2Decoders,12),ca.initBitModels(this._posDecoders,114),this._literalDecoder.init();ga--;)this._posSlotDecoder[ga].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},ca.Decoder.prototype.decode=function(ga,ya,_a){var _s,Ss,Ms,Es,Cs,Ts,Bs=0,Is=0,Ps=0,Rs=0,ks=0,$s=0,Os=0;for(this._rangeDecoder.setStream(ga),this._outWindow.setStream(ya),this.init();_a<0||$s<_a;)if(_s=$s&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(Bs<<4)+_s)===0)Ss=this._literalDecoder.getDecoder($s++,Os),Os=Bs>=7?Ss.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(Is)):Ss.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Os),Bs=Bs<4?0:Bs-(Bs<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,Bs)===1)Ms=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,Bs)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(Bs<<4)+_s)===0&&(Bs=Bs<7?9:11,Ms=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,Bs)===0?Es=Ps:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,Bs)===0?Es=Rs:(Es=ks,ks=Rs),Rs=Ps),Ps=Is,Is=Es),Ms===0&&(Ms=2+this._repLenDecoder.decode(this._rangeDecoder,_s),Bs=Bs<7?8:11);else if(ks=Rs,Rs=Ps,Ps=Is,Ms=2+this._lenDecoder.decode(this._rangeDecoder,_s),Bs=Bs<7?7:10,(Cs=this._posSlotDecoder[Ms<=5?Ms-2:3].decode(this._rangeDecoder))>=4){if(Is=(2|1&Cs)<<(Ts=(Cs>>1)-1),Cs<14)Is+=ca.reverseDecode2(this._posDecoders,Is-Cs-1,this._rangeDecoder,Ts);else if(Is+=this._rangeDecoder.decodeDirectBits(Ts-4)<<4,(Is+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(Is===-1)break;return!1}}else Is=Cs;if(Is>=$s||Is>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(Is,Ms),$s+=Ms,Os=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},ca.Decoder.prototype.setDecoderProperties=function(ga){var ya,_a,_s,Ss,Ms;return!(ga.size<5)&&(_a=(ya=ga.readByte())%9,_s=(ya=~~(ya/9))%5,Ss=~~(ya/5),!!this.setLcLpPb(_a,_s,Ss)&&(Ms=ga.readByte(),Ms|=ga.readByte()<<8,Ms|=ga.readByte()<<16,Ms+=16777216*ga.readByte(),this.setDictionarySize(Ms)))},ca.decompress=function(ga,ya,_a,_s){var Ss=new ca.Decoder;if(!Ss.setDecoderProperties(ga))throw"Incorrect stream properties";if(!Ss.decode(ya,_a,_s))throw"Error in data stream";return!0},ca.decompressFile=function(ga,ya){var _a,_s=new ca.Decoder;if(!_s.setDecoderProperties(ga))throw"Incorrect stream properties";if(_a=ga.readByte(),_a|=ga.readByte()<<8,_a|=ga.readByte()<<16,_a+=16777216*ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),ga.readByte(),!_s.decode(ga,ya,_a))throw"Error in data stream";return!0},ca}var Ge=Ue(),We=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(Ue.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,ya){try{var _a={data:ga,offset:0,readByte:function(){return this.data[this.offset++]}},_s=_a.data.length,Ss={data:[],offset:0,writeByte:function(Cs){var Ts=Math.floor(this.offset/_s);this.data[Ts]||(this.data[Ts]=new Uint8Array(_s)),this.data[Ts][this.offset%_s]=Cs,this.offset++}};ca.decompressFile(_a,Ss);for(var Ms=new Uint8Array(Ss.offset),Es=0;Es<Ss.offset;Es++)Ms[Es]=Ss.data[Math.floor(Es/_s)][Es%_s];ya(null,Ms)}catch(Cs){ya(Cs)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(ca){for(var ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ya=new Uint8Array(256),_a=0;_a<ga.length;_a++)ya[ga.charCodeAt(_a)]=_a;var _s,Ss,Ms,Es,Cs,Ts=.75*ca.length,Bs=ca.length,Is=0;ca[ca.length-1]==="="&&(Ts--,ca[ca.length-2]==="="&&Ts--);var Ps=new ArrayBuffer(Ts),Rs=new Uint8Array(Ps);for(_s=0;_s<Bs;_s+=4)Ss=ya[ca.charCodeAt(_s)],Ms=ya[ca.charCodeAt(_s+1)],Es=ya[ca.charCodeAt(_s+2)],Cs=ya[ca.charCodeAt(_s+3)],Rs[Is++]=Ss<<2|Ms>>4,Rs[Is++]=(15&Ms)<<4|Es>>2,Rs[Is++]=(3&Es)<<6|63&Cs;return Ps}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(ca,ga,ya){try{var _a=new WebAssembly.Memory({initial:16}),_s=new WebAssembly.Module(ca),Ss=new WebAssembly.Instance(_s,{env:{memory:_a,abort:function(){ya(new Error("webAssembly abort"))}}}).exports,Ms=Ss.newU8Array(ga.length);new Uint8Array(_a.buffer,Ms+24,ga.length).set(ga);var Es=Ss.decode(Ms),Cs=new Uint32Array(_a.buffer,Es,4),Ts=Cs[0],Bs=Cs[2],Is=Cs[3];Ts?ya(null,new Uint8Array(_a.buffer,Is+24,Bs).slice(0,Bs)):ya(new Error("lzma deocder error"))}catch(Ps){ya(Ps)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Xe=typeof Worker!="undefined"&&typeof Blob!="undefined",Ye="";if(Xe)try{var Ze=new Blob([We],{type:"text/javascript"});Ye=URL.createObjectURL(Ze)}catch(ca){}var Je=function(){function ca(){var ga=this;if(!Xe)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var ya=this.worker=new Worker(Ye);ya.onmessage=function(_a){var _s=_a.data,Ss=_s.id,Ms=_s.result,Es=_s.error,Cs=ga.getKey(Ss);ga.requests[Cs]&&(Es?ga.requests[Cs](new Error(Es)):ga.requests[Cs](null,Ms),delete ga.requests[Cs])},ya.onerror=function(_a){return console.error(_a)}}return ca.prototype.getKey=function(ga){return"key_"+String(ga)},ca.prototype.decompress=function(ga,ya){var _a=++this.callCounter;this.requests[this.getKey(_a)]=ya,this.worker.postMessage({type:"decompress",id:_a,data:ga},[ga.buffer])},ca.prototype.terminate=function(){this.worker.terminate()},ca.support=Xe,ca}();function $e(ca){return Array.prototype.reduce.call(ca,function(ga,ya,_a){return ga|ya<<8*_a},0)}function ti(ca){var ga=new Uint8Array(ca),ya=$e(ga.slice(0,4));if(ya>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var _a=[],_s=[],Ss=4+4*ya,Ms=0;Ms<ya;Ms++)_s[Ms]=$e(ga.slice(4+4*Ms,8+4*Ms)),_a[Ms]=Ms===ya-1?ga.subarray(Ss,Ss+_s[Ms]):ga.slice(Ss,Ss+_s[Ms]),Ss+=_s[Ms];return Je.support?function(Es){for(var Cs=[],Ts=Es.length,Bs=function(Ps){Cs.push(new Promise(function(Rs,ks){var $s=new Je;$s.decompress(Es[Ps],function(Os,Ls){if($s.terminate(),Os)return ks(Os);Rs(Ls)})}))},Is=0;Is<Ts;Is++)Bs(Is);return Promise.all(Cs)}(_a):Promise.resolve(function(Es){for(var Cs,Ts=[],Bs=Es.length,Is=function(Rs){var ks={data:Es[Rs],offset:0,readByte:function(){return this.data[this.offset++]}},$s=ks.data.length,Os={data:[],offset:0,writeByte:function(Ds){var Fs=Math.floor(this.offset/$s);this.data[Fs]||(this.data[Fs]=new Uint8Array($s)),this.data[Fs][this.offset%$s]=Ds,this.offset++}};Ge.decompressFile(ks,Os),Cs=new Uint8Array(Os.offset);for(var Ls=0;Ls<Os.offset;Ls++)Cs[Ls]=Os.data[Math.floor(Ls/$s)][Ls%$s];Ts.push(Cs)},Ps=0;Ps<Bs;Ps++)Is(Ps);return Ts}(_a))}function ei(ca,ga){for(var ya={},_a=0,_s=ga;_a<_s.length;_a++){var Ss=_s[_a];Ss in ca&&(ya[Ss]=ca[Ss])}return ya}var ii=!1;try{ii=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(ca){}var ni=[];function ri(){var ca=this.src;this.onerror=this.onload=Lt,this.removeAttribute("src"),/^blob\:/.test(ca)&&URL.revokeObjectURL(ca),this.close=Lt}function oi(){ni.push(this)}function si(){return Object.assign(new Image,{crossOrigin:"",close:ri})}function ai(ca){return new Promise(function(ga,ya){var _a=si();_a.onload=function(){_a.onload=_a.onerror=Lt,setTimeout(function(){return ga(_a)},30)},_a.onerror=function(){var _s=_a.src;_a.onload=_a.onerror=Lt,_a.close(),ya(new Error("image load error: ".concat(_s)))},_a.src=URL.createObjectURL(ca)})}function ui(ca,ga){if(ga&&(ca.width>ga.width||ca.height>ga.height)){var ya=function(Cs,Ts){var Bs=ni.shift();if(Bs)return Bs.width=Cs,Bs.height=Ts,Bs;if(ii){var Is=new OffscreenCanvas(Cs,Ts);return Object.assign(Is,{close:oi})}return Is=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(Is,{close:oi})}(Math.min(ca.width,ga.width),Math.min(ca.height,ga.height)),_a=ya.getContext("2d");_a.clearRect(0,0,ya.width,ya.height),_a.drawImage(ca,0,0,ya.width,ya.height),ca.close();var _s=new r$1.Texture(ya);_s.needsUpdate=!0,_s.flipY=!0;var Ss=_s.dispose;return _s.dispose=function(){ya.close(),Ss.call(_s),delete _s.dispose},_s}var Ms=new r$1.Texture(ca);Ms.needsUpdate=!0,Ms.minFilter=r$1.LinearFilter,Ms.magFilter=r$1.LinearFilter,Ms.flipY=!0;var Es=Ms.dispose;return Ms.dispose=function(){ca.close(),Es.call(Ms),delete Ms.dispose},Ms}var li=new r$1.WebGLRenderTarget(1,1),hi=new r$1.OrthographicCamera(-1,1,1,-1,0,1),ci=new r$1.BufferGeometry;ci.setAttribute("position",new r$1.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),ci.setAttribute("uv",new r$1.Float32BufferAttribute([0,2,0,0,2,0],2));var di=new r$1.Mesh(ci),pi=new r$1.Scene;pi.add(di);var Ai,fi=new r$1.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),gi=new r$1.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function vi(ca,ga,ya){return ga.flipY!==void 0&&(ca.flipY=ga.flipY),ga.format!==void 0&&(ca.format=ga.format),ga.encoding!==void 0&&(ca.encoding=ga.encoding),ga.minFilter!==void 0&&(ca.minFilter=ga.minFilter),ga.magFilter!==void 0&&(ca.magFilter=ga.magFilter),ya?new Promise(function(_a){se.shared.add(function(){try{var _s=ya.getRenderTarget();ya.setRenderTarget(li),ca instanceof r$1.CubeTexture?(di.material=gi,gi.uniforms.map.value=ca,ya.render(pi,hi),gi.uniforms.map.value=null):(di.material=fi,fi.uniforms.map.value=ca,ya.render(pi,hi),gi.uniforms.map.value=null),ya.setRenderTarget(_s),_a(ca)}catch{_a(ca)}},!0,1)}):Promise.resolve(ca)}var mi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,yi={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},wi={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},bi=((Ai={})[yi.cTFBC1]=wi.COMPRESSED_RGB_S3TC_DXT1_EXT,Ai[yi.cTFBC3]=wi.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ai),xi=function(){function ca(){}return ca.setTranscoderPath=function(ga){return this.transcoderPath=ga,this},ca.setWorkerLimit=function(ga){return this.workerLimit=ga,this},ca.isInitialized=function(){return this.workerPool.filter(function(ga){return ga._initialized}).length!==0},ca.detectSupport=function(ga){var ya=this.workerConfig;if(ya.astcSupported=!!ga.extensions.get("WEBGL_compressed_texture_astc"),ya.bptcSupported=!!ga.extensions.get("EXT_texture_compression_bptc"),ya.etcSupported=!!ga.extensions.get("WEBGL_compressed_texture_etc1"),ya.dxtSupported=!!ga.extensions.get("WEBGL_compressed_texture_s3tc"),ya.pvrtcSupported=!!ga.extensions.get("WEBGL_compressed_texture_pvrtc")||!!ga.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),ya.astcSupported)ya.format=ca.BASIS_FORMAT.cTFASTC_4x4;else if(ya.bptcSupported)ya.format=ca.BASIS_FORMAT.cTFBC7_M5;else if(ya.dxtSupported)ya.format=ca.BASIS_FORMAT.cTFBC3;else if(ya.pvrtcSupported)ya.format=ca.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!ya.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");ya.format=ca.BASIS_FORMAT.cTFETC1}return this},ca.createTexture=function(ga){var ya,_a,_s=this,Ss=ga.byteLength,Ms=this._allocateWorker(Ss).then(function(Es){return ya=Es,_a=_s.workerNextTaskID++,new Promise(function(Cs,Ts){ya._callbacks[_a]={resolve:Cs,reject:Ts},ya.postMessage({type:"transcode",id:_a,buffer:ga},[ga])})}).then(function(Es){var Cs,Ts=_s.workerConfig,Bs=Es.width,Is=Es.height,Ps=Es.mipmaps;switch(Es.format){case yi.cTFASTC_4x4:Cs=new r$1.CompressedTexture(Ps,Bs,Is,r$1.RGBA_ASTC_4x4_Format);break;case yi.cTFBC1:case yi.cTFBC3:Cs=new r$1.CompressedTexture(Ps,Bs,Is,bi[Ts.format],r$1.UnsignedByteType);break;case yi.cTFETC1:Cs=new r$1.CompressedTexture(Ps,Bs,Is,r$1.RGB_ETC1_Format);break;case yi.cTFPVRTC1_4_RGB:Cs=new r$1.CompressedTexture(Ps,Bs,Is,r$1.RGB_PVRTC_4BPPV1_Format);break;case yi.cTFPVRTC1_4_RGBA:Cs=new r$1.CompressedTexture(Ps,Bs,Is,r$1.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return Cs.minFilter=Ps.length===1?r$1.LinearFilter:r$1.LinearMipmapLinearFilter,Cs.magFilter=r$1.LinearFilter,Cs.generateMipmaps=!1,Cs.needsUpdate=!0,Cs});return Ms.catch(function(){return!0}).then(function(){ya&&_a&&(ya._taskLoad-=Ss,delete ya._callbacks[_a])}),Ms},ca._initTranscoder=function(){var ga=this;if(!this.transcoderPending){var ya=new r$1.FileLoader;ya.setPath(this.transcoderPath);var _a=new Promise(function(Ms,Es){ya.load("basis_transcoder.js",Ms,void 0,Es)}),_s=new r$1.FileLoader;_s.setPath(this.transcoderPath),_s.setResponseType("arraybuffer");var Ss=new Promise(function(Ms,Es){_s.load("basis_transcoder.wasm",Ms,void 0,Es)});this.transcoderPending=Promise.all([_a,Ss]).then(function(Ms){var Es=Ms[0],Cs=Ms[1],Ts=["/* basis_transcoder.js */",Es,"/* worker */",mi].join(`
`);ga.workerSourceURL=URL.createObjectURL(new Blob([Ts])),ga.transcoderBinary=Cs})}return this.transcoderPending},ca._allocateWorker=function(ga){var ya=this;return this._initTranscoder().then(function(){if(ya.workerPool.length<ya.workerLimit){var _a=function(Ss){var Ms=new Worker(Ss);return Object.assign(Ms,{_callbacks:{},_initialized:!1,_taskLoad:0})}(ya.workerSourceURL);_a._callbacks={},_a._initialized=!1,_a._taskLoad=0,_a.postMessage({type:"init",config:ya.workerConfig,transcoderBinary:ya.transcoderBinary}),_a.onmessage=function(Ss){var Ms=Ss.data;switch(Ms.type){case"initialized":_a._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":_a._callbacks[Ms.id].resolve(Ms);break;case"error":_a._callbacks[Ms.id].reject(Ms);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(Ms.type,'"'))}},ya.workerPool.push(_a)}else ya.workerPool.sort(function(Ss,Ms){return Ss._taskLoad>Ms._taskLoad?-1:1});var _s=ya.workerPool[ya.workerPool.length-1];return _s._taskLoad+=ga,_s})},ca.prototype.dispose=function(){for(var ga=0;ga<ca.workerPool.length;ga++)ca.workerPool[ga].terminate();return ca.workerPool.length=0,this},ca.BASIS_FORMAT=yi,ca.DXT_FORMAT=wi,ca.DXT_FORMAT_MAP=bi,ca.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",ca.transcoderBinary=null,ca.transcoderPending=null,ca.workerLimit=1,ca.workerPool=[],ca.workerNextTaskID=1,ca.workerSourceURL="",ca.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},ca}();function Ei(ca){var ga=ca.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return ga?ga[1]:location.protocol}var Ii=function(){function ca(ga){this.timeout=ga.timeout,this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga},ca.prototype.load=function(ga,ya,_a,_s,Ss,Ms){var Es;ya===void 0&&(ya={}),_a===void 0&&(_a=Lt),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt);var Cs=Ei(ga),Ts={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Bs=(Es=ya.viaAjax)!==null&&Es!==void 0&&Es,Is=Zt(ga),Ps=/^https?:$/.test(Cs),Rs=/\.basis$/.test(Jt(ga).split("?")[0]);if(Is?Bs=!0:Ps||(Bs=!1),Bs){if(Rs){var ks=null,$s="arraybuffer";return ya.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):ee(ga,e$1.__assign(e$1.__assign({},Ts),{responseType:$s}),void 0,void 0,Ss).then(function(Fs){return ks=Fs.meta,xi.createTexture(Fs.body)}).then(function(Fs){return ya.preInit!==!1?vi(Fs,e$1.__assign({flipY:!1,encoding:r$1.sRGBEncoding},ei(ya,["wrapS","wrapT"])),Ms):Fs}).then(function(Fs){var Ns={meta:ks,body:Fs};return _a(Ns),Ns}).catch(function(Fs){return _s(Fs),Promise.reject(Fs)})}return $s="blob",ee(ga,e$1.__assign(e$1.__assign({},Ts),{responseType:$s}),void 0,void 0,Ss).then(function(Fs){return ai(Fs.body)}).then(function(Fs){return ui(Fs,ya.maxSize)}).then(function(Fs){return ya.preInit!==!1?vi(Fs,e$1.__assign({flipY:!0,encoding:r$1.sRGBEncoding},ya),Ms):Fs}).then(function(Fs){var Ns={meta:null,body:Fs};return _a(Ns),Ns}).catch(function(Fs){return _s(Fs),Promise.reject(Fs)})}if(Rs){var Os=new Error("cannot load basis texture via image");return _s(Os),Promise.reject(Os)}var Ls=null,Ds=si();return ne(ga,Ts,void 0,void 0,Ss,Ds).then(function(Fs){return Ls=Fs.meta,ui(Fs.body,ya.maxSize)}).then(function(Fs){return ya.preInit!==!1?vi(Fs,e$1.__assign({flipY:!0,encoding:r$1.sRGBEncoding},ya),Ms):Fs}).then(function(Fs){var Ns={meta:Ls,body:Fs};return _a(Ns),Ns}).catch(function(Fs){return Ds.close(),_s(Fs),Promise.reject(Fs)})},ca.prototype.loadCube=function(ga,ya,_a,_s,Ss,Ms){var Es;ya===void 0&&(ya={}),_a===void 0&&(_a=Lt),_s===void 0&&(_s=Lt),Ss===void 0&&(Ss=Lt),Array.isArray(ga)||(ga=[ga.right,ga.left,ga.up,ga.down,ga.front,ga.back]);for(var Cs={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},Ts=[],Bs=[0,0,0,0,0,0],Is=[],Ps=function($s){var Os=ga[$s],Ls=Ei(Os),Ds=function(js){Bs[$s]=js,Ss(Bs.reduce(function(Zs,Ks){return Zs+Ks},0)/6)},Fs=(Es=ya.viaAjax)!==null&&Es!==void 0&&Es,Ns=/^https?:$/.test(Ls),Vs=Zt(Os),Gs=/\.basis$/.test(Jt(Os).split("?")[0]);if(Vs?Fs=!0:Ns||(Fs=!1),Fs)if(Gs){var Us="arraybuffer",zs=ee(Os,e$1.__assign(e$1.__assign({},Cs),{responseType:Us}),void 0,void 0,Ds).then(function(js){return Is[$s]=js.meta,xi.createTexture(js.body)});Ts.push(zs)}else Us="blob",zs=ee(Os,e$1.__assign(e$1.__assign({},Cs),{responseType:Us}),void 0,void 0,Ds).then(function(js){return Is[$s]=js.meta,ai(js.body)}),Ts.push(zs);else{if(Gs){var Hs=new Error("cannot load basis texture via image");return _s(Hs),{value:Promise.reject(Hs)}}var Qs=si();zs=ne(Os,Cs,void 0,void 0,Ds,Qs).then(function(js){return Is[$s]=js.meta,js.body}).catch(function(js){return Qs.close(),Promise.reject(js)}),Ts.push(zs)}},Rs=0;Rs<6;Rs++){var ks=Ps(Rs);if(typeof ks=="object")return ks.value}return Promise.all(Ts).then(function($s){return $s[0]instanceof r$1.CompressedTexture?function(Os){var Ls=new r$1.CubeTexture(Os);Ls.needsUpdate=!0;var Ds=Ls.dispose;return Ls.dispose=function(){for(var Fs=0,Ns=Os;Fs<Ns.length;Fs++)Ns[Fs].dispose();Ds.call(Ls),delete Ls.dispose},Ls.isCompressedTexture=!0,Ls.format=Os[0].format,Ls.minFilter=Os[0].minFilter,Ls.magFilter=Os[0].magFilter,Ls}($s):function(Os){var Ls=new r$1.CubeTexture(Os);Ls.needsUpdate=!0,Ls.minFilter=r$1.LinearFilter,Ls.magFilter=r$1.LinearFilter,Ls.flipY=!1;var Ds=Ls.dispose;return Ls.dispose=function(){for(var Fs=0,Ns=Os;Fs<Ns.length;Fs++)Ns[Fs].close();Ds.call(Ls),delete Ls.dispose},Ls}($s)}).then(function($s){return ya.preInit!==!1?$s.isCompressedTexture?vi($s,e$1.__assign({flipY:!1,encoding:r$1.sRGBEncoding},ei(ya,["wrapS","wrapT"])),Ms):vi($s,e$1.__assign({flipY:!1,encoding:r$1.sRGBEncoding},ya),Ms):$s}).then(function($s){var Os={body:$s,meta:Is};return _a(Os),Os}).catch(function($s){for(var Os=0,Ls=Ts;Os<Ls.length;Os++)Ls[Os].then(function(Ds){Ds instanceof r$1.Texture?Ds.dispose():Ds.close()}).catch(Lt);return _s($s),Promise.reject($s)})},ca}();const Ci=o$1.Reader,Si=o$1.util,Bi=o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Mi=Bi.Model=(()=>{function ca(ga){if(this.chunks=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.chunks=Si.emptyArray,ca.decode=function(ga,ya){ga instanceof Ci||(ga=Ci.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Bi.Model;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.chunks&&_s.chunks.length||(_s.chunks=[]),_s.chunks.push(Bi.Chunk.decode(ga,ga.uint32()));break;default:ga.skipType(7&Ss)}}return _s},ca})();function Pi(ca){var ga,ya,_a=new r$1.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function _s(Ru){var Nu=Ru.match(/(group|floor)-?(\d+)/);return Nu?parseInt(Nu[2],10):0}function Ss(Ru){var Nu=Ru.match(/(chunk)-?(\d+)/);return Nu?parseInt(Nu[2],10):0}function Ms(Ru){return 1e6*_s(Ru.name)+1e3*Ss(Ru.name)+function(Nu){var uu=Nu.match(/(sub)-?(\d+)/);return uu?parseInt(uu[2],10):0}(Ru.name)}for(var Es=[],Cs=0,Ts=((ga=ca.chunks)!==null&&ga!==void 0?ga:[]).sort(function(Ru,Nu){return Ms(Ru)-Ms(Nu)});Cs<Ts.length;Cs++){var Bs=_s((qs=Ts[Cs]).name);Es[Bs]||(Es[Bs]=[]),Es[Bs].push(qs)}for(var Is=[],Ps=0;Ps<Es.length;Ps++){var Rs=Es[Ps];if(Rs){for(var ks=0,$s=0,Os=0;Os<Rs.length;Os++)$s+=(qs=Rs[Os]).vertices.xyz.length/3,ks+=qs.faces.indices.length;for(var Ls=3*$s,Ds=2*$s,Fs=3*$s,Ns=ks,Vs=new ArrayBuffer(4*Ls+4*Ds+4*Fs+4*Ns),Gs=new Float32Array(Vs,0,Ls),Us=new Float32Array(Vs,4*Ls,Ds),zs=new Float32Array(Vs,4*Ls+4*Ds,Fs),Hs=new Uint32Array(Vs,4*Ls+4*Ds+4*Fs,Ns),Qs=[],js=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Zs=0,Ks=0,Ys=0;Ys<Rs.length;Ys++){var qs,eu=(qs=Rs[Ys]).vertices.xyz,Js=qs.vertices.uvs,Xs=qs.faces.indices,ru=eu.length/3,su=Xs.length,lu=[1/0,1/0,1/0,-1/0,-1/0,-1/0];for(Os=0;Os<ru;Os++){var cu=eu[3*Os],xu=eu[3*Os+1],bu=eu[3*Os+2],yu=_a.elements,fu=1/(yu[3]*cu+yu[7]*xu+yu[11]*bu+yu[15]),gu=(yu[0]*cu+yu[4]*xu+yu[8]*bu+yu[12])*fu,Su=(yu[1]*cu+yu[5]*xu+yu[9]*bu+yu[13])*fu,wu=(yu[2]*cu+yu[6]*xu+yu[10]*bu+yu[14])*fu;Gs[3*Ks+3*Os]=gu,Gs[3*Ks+3*Os+1]=Su,Gs[3*Ks+3*Os+2]=wu,Us[2*Ks+2*Os]=Js[2*Os],Us[2*Ks+2*Os+1]=Js[2*Os+1],gu<lu[0]&&(lu[0]=gu),Su<lu[1]&&(lu[1]=Su),wu<lu[2]&&(lu[2]=wu),gu>lu[3]&&(lu[3]=gu),Su>lu[4]&&(lu[4]=Su),wu>lu[5]&&(lu[5]=wu)}for(lu[0]<js[0]&&(js[0]=lu[0]),lu[1]<js[1]&&(js[1]=lu[1]),lu[2]<js[2]&&(js[2]=lu[2]),lu[3]>js[3]&&(js[3]=lu[3]),lu[4]>js[4]&&(js[4]=lu[4]),lu[5]>js[5]&&(js[5]=lu[5]),Os=0;Os<su;Os++)Hs[Zs+Os]=Ks+Xs[Os];Qs.push({materialIndex:Ys,name:qs.name,chunkName:Ss(qs.name),start:Zs,count:qs.faces.indices.length,texture:(ya=qs.texture)!==null&&ya!==void 0?ya:void 0}),Ks+=ru,Zs+=su}for(Os=0;Os<ks;Os+=3){var vu,pu,Eu,Tu,zu,Du,Gu,tu,ou,Cu,Mu,Wu,Lu,Bu,vl,Ku,ju,Pu,Ou;vu=3*Hs[Os],pu=3*Hs[Os+1],Eu=3*Hs[Os+2],Tu=Gs[vu],zu=Gs[vu+1],Du=Gs[vu+2],Gu=Gs[pu],tu=Gs[pu+1],ou=Gs[pu+2],Cu=Gs[Eu],ju=(Wu=Gs[Eu+1]-tu)*(Ku=Du-ou)-(Lu=Gs[Eu+2]-ou)*(vl=zu-tu),Pu=Lu*(Bu=Tu-Gu)-(Mu=Cu-Gu)*Ku,Ou=Mu*vl-Wu*Bu,zs[vu]+=ju,zs[vu+1]+=Pu,zs[vu+2]+=Ou,zs[pu]+=ju,zs[pu+1]+=Pu,zs[pu+2]+=Ou,zs[Eu]+=ju,zs[Eu+1]+=Pu,zs[Eu+2]+=Ou}Is.push({floorIndex:Ps,vertices:Gs,uvs:Us,indices:Hs,normals:zs,groups:Qs,extents:js})}}return Is}function Ti(ca,ga,ya,_a){var _s=e$1.__assign({key:"texture.pbm",basisLoaderInitialized:xi.isInitialized()},ei(ga,["format","quality","size","sharpen","mappings"]));return ca=ga.transform?ga.transform(ca,_s):he(ca,_s),new Ii({allowHosts:ya,networkSubscribe:_a}).load(ca,{wrapS:r$1.ClampToEdgeWrapping,wrapT:r$1.ClampToEdgeWrapping,minFilter:r$1.LinearFilter,maxSize:typeof _s.size=="number"?new r$1.Vector2(_s.size,_s.size):void 0,preInit:!0}).then(function(Ss){var Ms=Ss.body;return Ms.needsUpdate=!0,Ms})}function Qi(ca,ga,ya,_a,_s,Ss,Ms){_s===void 0&&(_s={});for(var Es=[],Cs=0,Ts=Pi(ca);Cs<Ts.length;Cs++){var Bs=Ts[Cs],Is=Bs.floorIndex,Ps=Bs.vertices,Rs=Bs.uvs,ks=Bs.indices,$s=Bs.normals,Os=Bs.groups,Ls=Bs.extents,Ds=new r$1.Box3;Ds.min.x=Ls[0],Ds.min.y=Ls[1],Ds.min.z=Ls[2],Ds.max.x=Ls[3],Ds.max.y=Ls[4],Ds.max.z=Ls[5];var Fs=new r$1.BufferGeometry;Fs.setAttribute("position",new r$1.BufferAttribute(Ps,3)),Fs.setAttribute("uv",new r$1.BufferAttribute(Rs,2)),Fs.setAttribute("normal",new r$1.BufferAttribute($s,3)),Fs.setIndex(new r$1.BufferAttribute(ks,1)),Fs.boundingBox=Ds,Fs.boundingSphere=Ds.getBoundingSphere(new r$1.Sphere);for(var Ns=0,Vs=Os;Ns<Vs.length;Ns++){var Gs=Vs[Ns];Fs.addGroup(Gs.start,Gs.count,Gs.materialIndex)}for(var Us=[],zs=function(Zs){var Ks=ya[Zs.chunkName]||(Zs.texture?ga+Zs.texture:void 0),Ys=new be;if(Us.push(Ys),Ks){var qs=void 0;Ks in _s?qs=_s[Ks]:(qs=Ti(Ks,_a,Ss,Ms),_s[Ks]=qs),qs.then(function(eu){Ys.uniforms.map.value=eu,Ys.uniforms.exposure.value=3.3},function(){Ys.defines.USE_MAP=!1,Ys.uniforms.color.value=new r$1.Color(16777215)})}else Ys.defines.USE_MAP=!1,Ys.uniforms.color.value=new r$1.Color(16777215)},Hs=0,Qs=Os;Hs<Qs.length;Hs++)zs(Gs=Qs[Hs]);var js=new ce(Fs,Us);js.name="model_floor_"+Is,js.floorIndex=Is,Es.push(js)}return{objects:Es,texturePromise:Promise.all(Object.keys(_s).map(function(Zs){return _s[Zs].catch(Lt)})).then(Lt)}}function Ri(ca,ga){return(ca=Object.assign({},ca)).autoResize!==!1&&(ca.size=ga>96?Math.min(ca.size||1/0,100):ga>48?Math.min(ca.size||1/0,200):ga>24?Math.min(ca.size||1/0,400):ga>12?Math.min(ca.size||1/0,800):Math.min(ca.size||1/0,1024)),ca}function Di(ca){return ca.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(ca)}Bi.Chunk=(()=>{function ca(ga){if(ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.vertices=null,ca.prototype.faces=null,ca.prototype.name="",ca.prototype.texture="",ca.decode=function(ga,ya){ga instanceof Ci||(ga=Ci.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Bi.Chunk;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.vertices=Bi.Vertices.decode(ga,ga.uint32());break;case 2:_s.faces=Bi.Faces.decode(ga,ga.uint32());break;case 3:_s.name=ga.string();break;case 4:_s.texture=ga.string();break;default:ga.skipType(7&Ss)}}if(!_s.hasOwnProperty("vertices"))throw Si.ProtocolError("missing required 'vertices'",{instance:_s});if(!_s.hasOwnProperty("faces"))throw Si.ProtocolError("missing required 'faces'",{instance:_s});if(!_s.hasOwnProperty("name"))throw Si.ProtocolError("missing required 'name'",{instance:_s});return _s},ca})(),Bi.Vertices=(()=>{function ca(ga){if(this.xyz=[],this.uvs=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.xyz=Si.emptyArray,ca.prototype.uvs=Si.emptyArray,ca.decode=function(ga,ya){ga instanceof Ci||(ga=Ci.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Bi.Vertices;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.xyz&&_s.xyz.length||(_s.xyz=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.xyz.push(ga.float())}else _s.xyz.push(ga.float());break;case 2:if(_s.uvs&&_s.uvs.length||(_s.uvs=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.uvs.push(ga.float())}else _s.uvs.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})(),Bi.Faces=(()=>{function ca(ga){if(this.indices=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.indices=Si.emptyArray,ca.decode=function(ga,ya){ga instanceof Ci||(ga=Ci.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Bi.Faces;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.indices&&_s.indices.length||(_s.indices=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.indices.push(ga.uint32())}else _s.indices.push(ga.uint32());break;default:ga.skipType(7&Ss)}}return _s},ca})();const ki=o$1.Reader,Ni=o$1.util,Fi=o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(o$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Oi=Fi.Model=(()=>{function ca(ga){if(this.meshes=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.meshes=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Model;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.meshes&&_s.meshes.length||(_s.meshes=[]),_s.meshes.push(Fi.Mesh.decode(ga,ga.uint32()));break;default:ga.skipType(7&Ss)}}return _s},ca})();function Li(ca){for(var ga=[0,0,0],ya=0;ya<ca.attributes.normal.array.length/9;ya++)ga[0]=ca.attributes.normal.array[9*ya],ga[1]=ca.attributes.normal.array[9*ya+1],ga[2]=ca.attributes.normal.array[9*ya+2],ca.attributes.normal.array[9*ya]=ca.attributes.normal.array[9*ya+6],ca.attributes.normal.array[9*ya+1]=ca.attributes.normal.array[9*ya+7],ca.attributes.normal.array[9*ya+2]=ca.attributes.normal.array[9*ya+8],ca.attributes.normal.array[9*ya+6]=ga[0],ca.attributes.normal.array[9*ya+7]=ga[1],ca.attributes.normal.array[9*ya+8]=ga[2];for(ya=0;ya<ca.attributes.position.array.length/9;ya++)ga[0]=ca.attributes.position.array[9*ya],ga[1]=ca.attributes.position.array[9*ya+1],ga[2]=ca.attributes.position.array[9*ya+2],ca.attributes.position.array[9*ya]=ca.attributes.position.array[9*ya+6],ca.attributes.position.array[9*ya+1]=ca.attributes.position.array[9*ya+7],ca.attributes.position.array[9*ya+2]=ca.attributes.position.array[9*ya+8],ca.attributes.position.array[9*ya+6]=ga[0],ca.attributes.position.array[9*ya+7]=ga[1],ca.attributes.position.array[9*ya+8]=ga[2];for(ya=0;ya<ca.attributes.uv.array.length/6;ya++)ga[0]=ca.attributes.uv.array[6*ya],ga[1]=ca.attributes.uv.array[6*ya+1],ca.attributes.uv.array[6*ya]=ca.attributes.uv.array[6*ya+4],ca.attributes.uv.array[6*ya+1]=ca.attributes.uv.array[6*ya+5],ca.attributes.uv.array[6*ya+4]=ga[0],ca.attributes.uv.array[6*ya+5]=ga[1];ca.attributes.normal.needsUpdate=!0,ca.attributes.position.needsUpdate=!0,ca.attributes.uv.needsUpdate=!0}function Vi(ca){var ga=ca.position,ya=ca.normal,_a=ca.uv,_s=ca.uv2,Ss=ca.groups,Ms=new r$1.BufferGeometry;Ms.setAttribute("position",new r$1.BufferAttribute(new Float32Array(ga.array),3)),ya&&Ms.setAttribute("normal",new r$1.BufferAttribute(new Float32Array(ya.array),3)),_a&&Ms.setAttribute("uv",new r$1.BufferAttribute(new Float32Array(_a.array),2)),_s&&Ms.setAttribute("uv2",new r$1.BufferAttribute(new Float32Array(_s.array),2));for(var Es=0,Cs=Ss;Es<Cs.length;Es++){var Ts=Cs[Es];Ms.addGroup(Ts.start,Ts.count,Ts.materialIndex)}return Ms}function Hi(ca,ga,ya,_a,_s,Ss){if(Ss.hasOwnProperty(ca))return Ss[ca];Di(ca=ca.split("?")[0])||(ca=ga+ca),(ca=ca.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(ca="https:"+ca);var Ms=e$1.__assign({key:"texture.dome",size:64,basisLoaderInitialized:xi.isInitialized()},ei(ya,["quality","format","sharpen","mappings"]));return Ss[ca=ya.transform?ya.transform(ca,Ms):he(ca,Ms)]=_s.load(ca,{wrapS:r$1.RepeatWrapping,wrapT:r$1.RepeatWrapping}).then(function(Es){var Cs=Es.body;return _a&&Cs.repeat.copy(_a),Cs.needsUpdate=!0,Cs.updateMatrix(),Cs})}function Ki(ca,ga,ya,_a,_s){var Ss=[],Ms=new be,Es=Ms.uniforms;Es.exposure.value=4.3;var Cs=Ms.defines;if(Cs.USE_MAP=!1,Cs.USE_UV=!1,ca.kd&&(Es.diffuse.value=new r$1.Color().fromArray(ca.kd.rgb)),ca.mapkd){var Ts=null;if(ca.mapkdrepeat){var Bs=ca.mapkdrepeat.split(/\s+/).map(function(ks){return Number(ks)}),Is=Bs[0],Ps=Bs[1];Ts=new r$1.Vector2(Is,Ps)}Ss.push(Hi(ca.mapkd,ga,ya,Ts,_a,_s).then(function(ks){Cs.USE_MAP=!0,Cs.USE_UV=!0,Es.map.value=ks,Es.uvTransform.value=ks.matrix,Ms.needsUpdate=!0}).catch(Lt))}if(ca.ks&&(Es.specular.value=new r$1.Color().fromArray(ca.ks.rgb)),ca.mapks&&Ss.push(Hi(ca.mapks,ga,ya,null,_a,_s).then(function(ks){Es.specularMap.value=ks}).catch(Lt)),ca.ke&&(Es.emissive.value=new r$1.Color().fromArray(ca.ke.rgb)),ca.mapke&&Ss.push(Hi(ca.mapke,ga,ya,null,_a,_s).then(function(ks){Es.emissiveMap.value=ks}).catch(Lt)),ca.norm&&Ss.push(Hi(ca.norm,ga,ya,null,_a,_s).then(function(ks){Es.normalMap.value=ks}).catch(Lt)),ca.mapbump&&Ss.push(Hi(ca.mapbump,ga,ya,null,_a,_s).then(function(ks){Es.bumpMap.value=ks}).catch(Lt)),ca.bump&&Ss.push(Hi(ca.bump,ga,ya,null,_a,_s).then(function(ks){Es.bumpMap.value=ks}).catch(Lt)),typeof ca.ns=="number"&&(Es.shininess.value=ca.ns),typeof ca.d=="number"){var Rs=ca.d;Rs>0&&Rs<1&&(Ms.originOpacity=Rs,Ms.opacity=Rs)}return{material:Ms,textureReady:Promise.all(Ss).then(Lt)}}function zi(ca,ga,ya,_a,_s){for(var Ss,Ms=[],Es=[],Cs=(Ss=ca,Oi.decode(Ss).meshes),Ts=new Ii({allowHosts:_a,networkSubscribe:_s}),Bs=new r$1.Matrix4,Is=new r$1.Vector3,Ps=new r$1.Quaternion,Rs=new r$1.Vector3,ks={},$s=0,Os=Cs;$s<Os.length;$s++){var Ls=Os[$s],Ds=Ls.name,Fs=Ls.chunks,Ns=Ls.matrix;if(Ds!=="Ceiling"&&Ds!=="CeilingDrop")for(var Vs=0,Gs=Ns;Vs<Gs.length;Vs++){var Us=Gs[Vs];Bs.elements=Us.elements;var zs=new pe;zs.renderOrder=-3;for(var Hs=0;Hs<Fs.length;Hs++){var Qs=Vi(Fs[Hs].geometry);Qs.applyMatrix4(Bs),Bs.decompose(Is,Ps,Rs),Rs.x*Rs.y*Rs.z<0&&Qs.attributes.normal&&Qs.attributes.position&&Qs.attributes.uv&&Li(Qs);for(var js=[],Zs=0,Ks=Fs[Hs].material;Zs<Ks.length;Zs++){var Ys=Ki(Ks[Zs],ga,ya,Ts,ks),qs=Ys.material,eu=Ys.textureReady;Es.push(eu),js.push(qs)}var Js=new ce(Qs,js);Js.name="chunk_"+Hs,zs.add(Js)}zs.floorIndex=0,zs.name=Ds,Ms.push(zs)}}return{objects:Ms,texturePromise:Promise.all(Es).catch(Lt)}}function qi(ca){return ca==null}Fi.Mesh=(()=>{function ca(ga){if(this.chunks=[],this.matrix=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.name="",ca.prototype.chunks=Ni.emptyArray,ca.prototype.matrix=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Mesh;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.name=ga.string();break;case 2:_s.chunks&&_s.chunks.length||(_s.chunks=[]),_s.chunks.push(Fi.Chunk.decode(ga,ga.uint32()));break;case 3:_s.matrix&&_s.matrix.length||(_s.matrix=[]),_s.matrix.push(Fi.Matrix.decode(ga,ga.uint32()));break;default:ga.skipType(7&Ss)}}if(!_s.hasOwnProperty("name"))throw Ni.ProtocolError("missing required 'name'",{instance:_s});return _s},ca})(),Fi.Matrix=(()=>{function ca(ga){if(this.elements=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.elements=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Matrix;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.elements&&_s.elements.length||(_s.elements=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.elements.push(ga.float())}else _s.elements.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})(),Fi.Chunk=(()=>{function ca(ga){if(this.material=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.geometry=null,ca.prototype.material=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Chunk;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 2:_s.geometry=Fi.Geometry.decode(ga,ga.uint32());break;case 3:_s.material&&_s.material.length||(_s.material=[]),_s.material.push(Fi.Material.decode(ga,ga.uint32()));break;default:ga.skipType(7&Ss)}}if(!_s.hasOwnProperty("geometry"))throw Ni.ProtocolError("missing required 'geometry'",{instance:_s});return _s},ca})(),Fi.Geometry=(()=>{function ca(ga){if(this.groups=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.position=null,ca.prototype.uv=null,ca.prototype.uv2=null,ca.prototype.normal=null,ca.prototype.groups=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Geometry;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.position=Fi.Position.decode(ga,ga.uint32());break;case 2:_s.uv=Fi.UV.decode(ga,ga.uint32());break;case 3:_s.uv2=Fi.UV.decode(ga,ga.uint32());break;case 4:_s.normal=Fi.Normal.decode(ga,ga.uint32());break;case 5:_s.groups&&_s.groups.length||(_s.groups=[]),_s.groups.push(Fi.Group.decode(ga,ga.uint32()));break;default:ga.skipType(7&Ss)}}if(!_s.hasOwnProperty("position"))throw Ni.ProtocolError("missing required 'position'",{instance:_s});if(!_s.hasOwnProperty("normal"))throw Ni.ProtocolError("missing required 'normal'",{instance:_s});return _s},ca})(),Fi.Position=(()=>{function ca(ga){if(this.array=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Position;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.array&&_s.array.length||(_s.array=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.array.push(ga.float())}else _s.array.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})(),Fi.UV=(()=>{function ca(ga){if(this.array=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.UV;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.array&&_s.array.length||(_s.array=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.array.push(ga.float())}else _s.array.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})(),Fi.Normal=(()=>{function ca(ga){if(this.array=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.array=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Normal;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.array&&_s.array.length||(_s.array=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.array.push(ga.float())}else _s.array.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})(),Fi.Group=(()=>{function ca(ga){if(ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.start=0,ca.prototype.count=0,ca.prototype.materialIndex=0,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Group;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.start=ga.uint32();break;case 2:_s.count=ga.uint32();break;case 3:_s.materialIndex=ga.uint32();break;default:ga.skipType(7&Ss)}}if(!_s.hasOwnProperty("start"))throw Ni.ProtocolError("missing required 'start'",{instance:_s});if(!_s.hasOwnProperty("count"))throw Ni.ProtocolError("missing required 'count'",{instance:_s});if(!_s.hasOwnProperty("materialIndex"))throw Ni.ProtocolError("missing required 'materialIndex'",{instance:_s});return _s},ca})(),Fi.Material=(()=>{function ca(ga){if(ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.kd=null,ca.prototype.ks=null,ca.prototype.ke=null,ca.prototype.mapkd="",ca.prototype.mapks="",ca.prototype.mapke="",ca.prototype.norm="",ca.prototype.mapbump="",ca.prototype.bump="",ca.prototype.mapd="",ca.prototype.ns=0,ca.prototype.d=0,ca.prototype.tr=0,ca.prototype.mapkdrepeat="",ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Material;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:_s.kd=Fi.Color.decode(ga,ga.uint32());break;case 2:_s.ks=Fi.Color.decode(ga,ga.uint32());break;case 3:_s.ke=Fi.Color.decode(ga,ga.uint32());break;case 4:_s.mapkd=ga.string();break;case 5:_s.mapks=ga.string();break;case 6:_s.mapke=ga.string();break;case 7:_s.norm=ga.string();break;case 8:_s.mapbump=ga.string();break;case 9:_s.bump=ga.string();break;case 10:_s.mapd=ga.string();break;case 11:_s.ns=ga.float();break;case 12:_s.d=ga.float();break;case 13:_s.tr=ga.float();break;case 14:_s.mapkdrepeat=ga.string();break;default:ga.skipType(7&Ss)}}return _s},ca})(),Fi.Color=(()=>{function ca(ga){if(this.rgb=[],ga)for(let ya=Object.keys(ga),_a=0;_a<ya.length;++_a)ga[ya[_a]]!=null&&(this[ya[_a]]=ga[ya[_a]])}return ca.prototype.rgb=Ni.emptyArray,ca.decode=function(ga,ya){ga instanceof ki||(ga=ki.create(ga));let _a=ya===void 0?ga.len:ga.pos+ya,_s=new Fi.Color;for(;ga.pos<_a;){let Ss=ga.uint32();switch(Ss>>>3){case 1:if(_s.rgb&&_s.rgb.length||(_s.rgb=[]),(7&Ss)==2){let Ms=ga.uint32()+ga.pos;for(;ga.pos<Ms;)_s.rgb.push(ga.float())}else _s.rgb.push(ga.float());break;default:ga.skipType(7&Ss)}}return _s},ca})();var _i=function(ca,ga){ga===void 0&&(ga=1e-4),ga=Math.max(ga,Number.EPSILON);for(var ya={},_a=ca.getIndex(),_s=ca.getAttribute("position"),Ss=_a?_a.count:_s.count,Ms=0,Es=Object.keys(ca.attributes),Cs={},Ts={},Bs=[],Is=["getX","getY","getZ","getW"],Ps=0,Rs=Es.length;Ps<Rs;Ps++)Cs[Fs=Es[Ps]]=[],(Us=ca.morphAttributes[Fs])&&(Ts[Fs]=new Array(Us.length).fill().map(function(){return[]}));var ks=Math.log10(1/ga),$s=Math.pow(10,ks);for(Ps=0;Ps<Ss;Ps++){var Os=_a?_a.getX(Ps):Ps,Ls="",Ds=0;for(Rs=Es.length;Ds<Rs;Ds++)for(var Fs=Es[Ds],Ns=(Gs=ca.getAttribute(Fs)).itemSize,Vs=0;Vs<Ns;Vs++)Ls+="".concat(~~(Gs[Is[Vs]](Os)*$s),",");if(Ls in ya)Bs.push(ya[Ls]);else{for(Ds=0,Rs=Es.length;Ds<Rs;Ds++){Fs=Es[Ds];var Gs=ca.getAttribute(Fs),Us=ca.morphAttributes[Fs],zs=(Ns=Gs.itemSize,Cs[Fs]),Hs=Ts[Fs];for(Vs=0;Vs<Ns;Vs++){var Qs=Is[Vs];if(zs.push(Gs[Qs](Os)),Us)for(var js=0,Zs=Us.length;js<Zs;js++)Hs[js].push(Us[js][Qs](Os))}}ya[Ls]=Ms,Bs.push(Ms),Ms++}}var Ks=ca.clone();for(Ps=0,Rs=Es.length;Ps<Rs;Ps++){Fs=Es[Ps];var Ys=ca.getAttribute(Fs),qs=new Ys.array.constructor(Cs[Fs]);if(Gs=new r$1.BufferAttribute(qs,Ys.itemSize,Ys.normalized),Ks.setAttribute(Fs,Gs),Fs in Ts)for(Ds=0;Ds<Ts[Fs].length;Ds++){var eu=ca.morphAttributes[Fs][Ds],Js=(qs=new eu.array.constructor(Ts[Fs][Ds]),new r$1.BufferAttribute(qs,eu.itemSize,eu.normalized));Ks.morphAttributes[Fs][Ds]=Js}}return Ks.setIndex(Bs),Ks};function ji(ca){var ga;return new((ga=r$1.Triangle).bind.apply(ga,e$1.__spreadArray([void 0],ca.map(function(ya){return new r$1.Vector3(ya.x,ya.y,ya.z)}),!1)))}var Ui={at3d:function(ca,ga){for(var ya=Ri(ga.textureOptions,ca.textures.length),_a={},_s=0,Ss=ca.textures;_s<Ss.length;_s++){var Ms=Ss[_s];_a[Ms]=Ti(Ms,ya,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Es){return ti(Es.body)}).then(function(Es){return je(function(){for(var Cs,Ts={chunks:[]},Bs=0,Is=Es;Bs<Is.length;Bs++){var Ps=Is[Bs],Rs=Mi.decode(Ps);Rs.chunks.length&&(Cs=Ts.chunks).push.apply(Cs,Rs.chunks)}return Ts})}).then(function(Es){return je(function(){return Qi(Es,ca.textureBase,ca.textures.slice(),ya,_a,ga.allowHosts,ga.networkSubscribe)})})},pbm:function(ca,ga){for(var ya=Ri(ga.textureOptions,ca.textures.length),_a={},_s=0,Ss=ca.textures;_s<Ss.length;_s++){var Ms=Ss[_s];_a[Ms]=Ti(Ms,ya,ga.allowHosts,ga.networkSubscribe)}return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(Es){return je(function(){var Cs=new Uint8Array(Es.body);return Mi.decode(Cs)})}).then(function(Es){return je(function(){return Qi(Es,ca.textureBase,ca.textures.slice(),ya,_a,ga.allowHosts,ga.networkSubscribe)})})},dome:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(ya){return zi(new Uint8Array(ya.body),ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})},domez:function(ca,ga){return Promise.resolve().then(function(){return ee(ca.file,{responseType:"arraybuffer",allowHosts:ga.allowHosts,networkSubscribe:ga.networkSubscribe})}).then(function(ya){return ti(ya.body)}).then(function(ya){var _a=ya.reduce(function(Ms,Es){return Ms+Es.length},0),_s=new Uint8Array(_a),Ss=0;return ya.forEach(function(Ms){_s.set(Ms,Ss),Ss+=Ms.length}),_s}).then(function(ya){return zi(ya,ca.textureBase,ga.textureOptions,ga.allowHosts,ga.networkSubscribe)})}},Gi=function(ca){function ga(ya){ya===void 0&&(ya={});var _a=ca.call(this)||this;return _a.empty=!0,_a.name="model",_a.loaded=!1,_a.bvhs=Object.assign([],{loaded:!1}),_a.bounding=new r$1.Box3,_a.shownFloor=null,_a.floorLength=0,_a.networkSubscribe=ya.networkSubscribe,_a.allowHosts=ya.allowHosts,_a.renderOrder=-3,_a}return e$1.__extends(ga,ca),Object.defineProperty(ga.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),ga.prototype.getEdges=function(ya){var _a;ya===void 0&&(ya=30/180*Math.PI);for(var _s=Math.cos(ya),Ss=[],Ms=0,Es=this.children;Ms<Es.length;Ms++){var Cs=Es[Ms];if(Cs instanceof ce){for(var Ts={},Bs=["a","b","c"],Is=_i(Cs.geometry),Ps=Is.getAttribute("position").array,Rs=((_a=Is.getIndex())===null||_a===void 0?void 0:_a.array)||[],ks=[],$s=[],Os=0,Ls=Ps.length;Os<Ls;Os+=3)ks.push(new r$1.Vector3(Ps[Os],Ps[Os+1],Ps[Os+2]));for(Os=0,Ls=Rs.length;Os<Ls;Os+=3){var Ds=Rs[Os],Fs=Rs[Os+1],Ns=Rs[Os+2],Vs=new r$1.Vector3().crossVectors(ks[Fs].clone().sub(ks[Ds]),ks[Ns].clone().sub(ks[Ds])).normalize();$s.push({a:Ds,b:Fs,c:Ns,normal:Vs})}for(Os=0,Ls=$s.length;Os<Ls;Os++)for(var Gs=$s[Os],Us=0;Us<3;Us++){var zs=Gs[Bs[Us]],Hs=Gs[Bs[(Us+1)%3]],Qs=[Math.min(zs,Hs),Math.max(zs,Hs)];Ts[js=Qs[0]+"-"+Qs[1]]===void 0?Ts[js]={index1:Qs[0],index2:Qs[1],face1:Os}:Ts[js].face2=Os}for(var js in Ts){var Zs=Ts[js];if(Zs.face2===void 0||$s[Zs.face1].normal.dot($s[Zs.face2].normal)<=_s){var Ks=ks[Zs.index1],Ys=ks[Zs.index2];Ss.push(new r$1.Line3(Ks,Ys))}}Is.dispose(),ks.length=0,$s.length=0}}return Ss},ga.prototype.hasFloors=function(){return this.hasFloors_()},ga.prototype.hasFloors_=function(){var ya=[];return this.traverse(function(_a){_a instanceof ce&&(ya[_a.floorIndex]=!0)}),ya.length},ga.prototype.show=function(){for(var ya,_a=[],_s=0;_s<arguments.length;_s++)_a[_s]=arguments[_s];var Ss=this.shownFloor,Ms=null,Es=1,Cs=(ya=_a[1])!==null&&ya!==void 0?ya:.1,Ts=_a.length!==0;this.shownFloor=Ms=Ts?_a[0]:null,this.traverse(function(Bs){Bs instanceof ce&&Bs.material.forEach(function(Is){Ms===null||Ms===Bs.floorIndex?Is.opacity=Is.originOpacity*Es:Is.opacity=Is.originOpacity*Cs})}),Ss!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},ga.prototype.intersectRaycaster=function(ya,_a){var _s=ya.ray,Ss=_s.origin,Ms=_s.direction;if(qi(_a))if(qi(this.shownFloor)){var Es=this.floorLength;_a=[];for(var Cs=-1;Cs<Es;Cs++)_a.push(Cs)}else _a=[this.shownFloor];var Ts=[],Bs=[];Array.isArray(_a)?Bs.push.apply(Bs,_a):Bs.push(_a);for(var Is=function($s){var Os=Ps.bvhs&&Ps.bvhs[$s];if(Os){var Ls=new Re(Ss.x,Ss.y,Ss.z),Ds=new Re(Ms.x,Ms.y,Ms.z);(Fs=Os.intersectRay(Ls,Ds,!0).map(function(Vs){var Gs=Vs.intersectionPoint,Us=Vs.triangle,zs=new r$1.Vector3(Gs.x,Gs.y,Gs.z);return{point:zs,face:{normal:ji(Us).getNormal(new r$1.Vector3)},distance:Ss.distanceTo(zs)}})).length&&Ts.push.apply(Ts,Fs)}else{var Fs,Ns=[];Ps.traverse(function(Vs){Vs instanceof ce&&Vs.floorIndex===$s&&Ns.push(Vs)}),(Fs=ya.intersectObjects(Ns).map(function(Vs){return{face:Vs.face?{normal:Vs.face.normal}:void 0,point:Vs.point,distance:Vs.distance}})).length&&Ts.push.apply(Ts,Fs)}},Ps=this,Rs=0,ks=Bs;Rs<ks.length;Rs++)Is(ks[Rs]);return Ts.filter(function($s){var Os=$s.distance;return Os<=ya.far&&Os>=ya.near}).sort(function($s,Os){return $s.distance-Os.distance})},ga.prototype.buildBVH=function(){if(!this.bvhs.loaded){var ya=[];this.traverse(function(Gs){Gs instanceof ce&&(ya[Gs.floorIndex]=ya[Gs.floorIndex]||[],ya[Gs.floorIndex].push(Gs.geometry))}),this.bvhs.length=0;for(var _a=0,_s=ya;_a<_s.length;_a++){for(var Ss=_s[_a],Ms=0,Es=0,Cs=Ss;Es<Cs.length;Es++){var Ts=0;Ts=(ks=Cs[Es]).index?ks.index.array.length:ks.attributes.position.array.length/3,Ms+=3*Math.floor(Ts/3)}for(var Bs=new Float32Array(3*Ms),Is=0,Ps=0,Rs=Ss;Ps<Rs.length;Ps++){var ks,$s=(ks=Rs[Ps]).attributes.position.array,Os=ks.index?ks.index.array:null;if(Os){for(var Ls=3*Math.floor(Os.length/3),Ds=0,Fs=void 0,Ns=void 0;Ds<Ls;Ds++)Fs=3*(Is+Ds),Ns=3*Os[Ds],Bs[Fs]=$s[Ns],Bs[Fs+1]=$s[Ns+1],Bs[Fs+2]=$s[Ns+2];Is+=Ls}else{for(Ls=3*Math.floor($s.length/3/3),Ds=0,Fs=void 0,Ns=void 0;Ds<Ls;Ds++)Ns=3*Ds,Bs[Fs=3*(Is+Ds)]=$s[Ns],Bs[Fs+1]=$s[Ns+1],Bs[Fs+2]=$s[Ns+2];Is+=Ls}}var Vs=new Ve().create(Bs).splitNode(50);this.bvhs.push(Vs)}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},ga.prototype.load=function(ya,_a){var _s=this;if(_a===void 0&&(_a={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var Ss=function(Es,Cs){Cs===void 0&&(Cs=[]);var Ts=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(Es);if(!Ts)return"";for(var Bs=0,Is=String(Ts[1]).trim().split(".").slice(1).reverse();Bs<Is.length;Bs++){var Ps=Is[Bs],Rs=Cs.indexOf(Ps);if(Rs>=0)return Cs[Rs]}return""}(ya.file,Object.keys(Ui)),Ms=Ui[Ss];if(!Ms)throw new Error("[MODEL LOAD ERROR]: file type(".concat(Ss,") does not support."));return this.name=ya.file,Ms(ya,{textureOptions:_a,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(Es){var Cs=Es.objects,Ts=Es.texturePromise;_s.bounding.makeEmpty();for(var Bs=0,Is=Cs;Bs<Is.length;Bs++)($s=Is[Bs]).traverse(function(Os){if(Os instanceof ce){var Ls=Os.geometry;Ls.boundingBox||Ls.computeBoundingBox(),Ls.boundingSphere||Ls.computeBoundingSphere(),_s.bounding.union(Ls.boundingBox)}}),_s.add($s);for(var Ps=_s.bounding.getCenter(new r$1.Vector3),Rs=0,ks=Cs;Rs<ks.length;Rs++){var $s;($s=ks[Rs]).traverse(function(Os){if(Os instanceof ce)for(var Ls=0,Ds=Os.material;Ls<Ds.length;Ls++)Ds[Ls].uniforms.modelCenter.value=Ps})}_s.floorLength=_s.hasFloors_(),_s.empty=!1,_s.loaded=!0,je(function(){_s.emit("geometryLoaded"),Ts.then(function(){_s.emit("materialLoaded"),_s.emit("loaded")})})}).catch(function(Es){return _s.name="",_s.emit("error",Es),Promise.reject(Es)})},ga.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},ga}(de);Object.assign(Gi.prototype,{on:Ot.prototype.on,once:Ot.prototype.once,off:Ot.prototype.off,emit:Ot.prototype.emit,hasListener:Ot.prototype.hasListener});function Wi(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=[];ca=ca.map(function(Es){return Es.trim()}).filter(function(Es){return Es.length>0&&!/^\/+$/.test(Es)});for(var _a=0;_a<ca.length;_a++){var _s=_a===0,Ss=_a===ca.length-1,Ms=ca[_a];_s||(Ms=Ms.replace(/^\/+/,"")),Ss||(Ms=Ms.replace(/\/+$/,"")),ya.push(Ms)}return ya.join("/")}function Xi(ca,ga){if(ca===ga)return!0;if(ca&&ga&&typeof ca=="object"&&typeof ga=="object"){if(ca.constructor!==ga.constructor)return!1;var ya,_a,_s;if(Array.isArray(ca)){if((ya=ca.length)!=ga.length)return!1;for(_a=ya;_a--!=0;)if(!Xi(ca[_a],ga[_a]))return!1;return!0}if(ca.constructor===RegExp)return ca.source===ga.source&&ca.flags===ga.flags;if(ca.valueOf!==Object.prototype.valueOf)return ca.valueOf()===ga.valueOf();if(ca.toString!==Object.prototype.toString)return ca.toString()===ga.toString();if((ya=(_s=Object.keys(ca)).length)!==Object.keys(ga).length)return!1;for(_a=ya;_a--!=0;)if(!Object.prototype.hasOwnProperty.call(ga,_s[_a]))return!1;for(_a=ya;_a--!=0;){var Ss=_s[_a];if(!Xi(ca[Ss],ga[Ss]))return!1}return!0}return ca!=ca&&ga!=ga}function Yi(ca){return typeof ca=="number"}function Zi(ca){return(ca&ca-1)==0&&ca!==0}var Ji=function(){return new Error("Invalid input.")},$i=function(){return new Error("Invalid certificate.")},tn=function(){return new Error("Invalid signature.")};function en(ca,ga){ga===void 0&&(ga=!1);var ya=typeof ca;if(ya==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var _a="[",_s=ca.length-1,Ss=0;Ss<_s;Ss++)_a+=en(ca[Ss],!1)+",";return _s>-1&&(_a+=en(ca[Ss],!1)),_a+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return en(ca.toJSON(),ga);var Ms=Object.keys(ca).sort(),Es=Ms.length;for(_a="",Ss=0;Ss<Es;){var Cs=Ms[Ss],Ts=en(ca[Cs],!0);Ts!==void 0&&(Ss&&_a!==""&&(_a+=","),_a+=JSON.stringify(Cs)+":"+Ts),Ss++}return"{"+_a+"}"}switch(ya){case"function":case"undefined":return ga?void 0:null;case"number":return 0;default:return isFinite(ca)?ca:null}}function nn(ca){return String(en(ca,!1))}function rn(ca){var ga,ya,_a;if(Array.isArray(ca)){var _s,Ss,Ms=void 0;if(ca.length<=0)return Ji();for(var Es=function(Ns){var Vs=rn(ca[Ns]);if(Vs instanceof Error)return{value:Vs};if(Ms){if(Ms!==Vs.issuer)return{value:$i()}}else Ms=Vs.issuer;_s?Vs.expire.getTime()<_s.getTime()&&(_s=Vs.expire):_s=Vs.expire,Ss=Ss?Ss.filter(function(Gs){return Vs.allowHosts.indexOf(Gs)!==-1}):Vs.allowHosts},Cs=0;Cs<ca.length;Cs++){var Ts=Es(Cs);if(typeof Ts=="object")return Ts.value}return Kt({issuer:Ms,expire:_s,allowHosts:Ss})}var Bs=JSON.parse(ca),Is=typeof location!="undefined"?location.hostname:"",Ps=Date.now();if(typeof Bs!="object")return Ji();var Rs=new Date(typeof Bs.expire_at=="string"&&/^\d+$/.test(Bs.expire_at)?Number(Bs.expire_at):Bs.expire_at),ks=Array.isArray(Bs.allow_hosts)?Bs.allow_hosts:[];if(Is.length===0||qt(Is)||Ut.filter(function(Ns){return _t(Ns,Is)}).length>0){var $s=String((ga=Bs.certificate)!==null&&ga!==void 0?ga:"");if($s){var Os=new Mt;return Os.readCertPEM($s),Kt({issuer:Os.getSubjectString(),expire:Rs,allowHosts:ks})}return Kt({issuer:"none",expire:Rs,allowHosts:ks})}var Ls=String((ya=Bs.certificate)!==null&&ya!==void 0?ya:"");if(!Ls)return $i();var Ds=new Mt;Ds.readCertPEM(Ls);var Fs=String((_a=Bs._signature)!==null&&_a!==void 0?_a:"");return Fs?function(Ns,Vs,Gs){var Us=new Mt;if(typeof Gs=="string"?Us.readCertPEM(Gs):Us.readCertHex(Gs.hex),Dt(Us)===!1)return!1;var zs=new X;return zs.readCertPubKeyHex(Us.hex,6),!!zs.verify(Ns,N$1(Vs))}(nn(function(Ns,Vs){for(var Gs={},Us=0,zs=Object.keys(Ns);Us<zs.length;Us++){var Hs=zs[Us];Vs.indexOf(Hs)===-1&&(Gs[Hs]=Ns[Hs])}return Gs}(Bs,["_signature"])),Fs,Ds)===!1?tn():Ps<Rs.getTime()?ks.filter(function(Ns){return _t(Ns,Is)}).length===0?function(Ns){return new Error("host(".concat(JSON.stringify(Ns),") is not allowed."))}(Is):Kt({issuer:Ds.getSubjectString(),expire:Rs,allowHosts:ks}):function(Ns){return new Error("date(".concat(Ns.toString(),") expired."))}(Rs):tn()}var on=new WeakMap,sn=function(){function ca(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={works:[""],options:""}}return ca.prototype.toJSON=function(){return this.raw.works},ca.parse=hn,ca}();function an(ca){return ca==null?"null":Array.isArray(ca)?"array":typeof ca=="object"?"dict":"value"}function un(ca,ga){var ya=an(ca),_a=an(ga);if(_a==="null")return ca;if(_a==="value")return ga;if(_a!==ya)return JSON.parse(JSON.stringify(ga));if(_a==="array")for(var _s=0;_s<ga.length;_s++)ca[_s]=un(ca[_s],ga[_s]);else if(_a==="dict")for(var Ss in ga)ca[Ss]=un(ca[Ss],ga[Ss]);return ca}function ln(ca,ga,ya){for(var _a,_s=JSON.stringify(ga),Ss=[],Ms=0,Es=[].concat(ca);Ms<Es.length;Ms++){var Cs=Es[Ms];Cs instanceof sn?Ss.push.apply(Ss,Cs.raw.works):typeof Cs=="string"?Ss.push(Cs):Ss.push(JSON.stringify(Cs))}var Ts=rn(Ss);if(Ts instanceof Error)return Ts;ga=JSON.parse(_s),ca=Ss.map(function(Du){return JSON.parse(Du)}).reduce(function(Du,Gu){return un(Du,Gu)});var Bs=new sn;if(Ts instanceof Error)return Ts;Bs.issuer=Ts.issuer,Bs.expire=Ts.expire,Bs.allowHosts=Ts.allowHosts,Bs.raw={works:Ss,options:_s};var Is=(_a=ca.base_url)!==null&&_a!==void 0?_a:"";Is&&Is[Is.length-1]!=="/"&&(Is+="/");var Ps=function(Du,Gu){return Du.indexOf(Gu)===0},Rs=function(Du,Gu){var tu,ou=Du;if(ga.jsonp===!0){ou=Du.replace(/([\?\#].*)?$/i,"");var Cu=Pt("".concat(ou)).slice(0,7);ou="".concat(ou,".").concat(Cu,".jsonp")}if(ga.shortPath===!0){var Mu=ou.replace(Is,"").split("."),Wu=(tu=Mu.shift())!==null&&tu!==void 0?tu:"",Lu=Mu.join(".");ou=Wi(Is,Pt(Wu))+(Lu?"."+Lu:"")}var Bu=ou.replace(Is,"");return ga.baseURL&&(ou=Wi(ga.baseURL,Bu)),ya&&ya(Du,ou,Bu,Gu),ou},ks=function(Du,Gu){var tu,ou,Cu,Mu,Wu,Lu,Bu=Du;if(!Di(Du)){var vl=(Lu=(Mu=(ou=(tu=ca.panorama)===null||tu===void 0?void 0:tu.pano_high_cube_base_url)!==null&&ou!==void 0?ou:(Cu=ca.panorama)===null||Cu===void 0?void 0:Cu.pano_cube_base_url)!==null&&Mu!==void 0?Mu:(Wu=ca.panorama)===null||Wu===void 0?void 0:Wu.base_url)!==null&&Lu!==void 0?Lu:"";vl&&(vl=Wi(vl,String(Gu))),Bu=Wi(vl,Bu)}return Di(Bu)||(Bu=Wi(Is,Bu)),Ps(Bu,Is)||console.warn("".concat(Bu," is not start with base_url(").concat(Is,").")),Rs(Bu,"panorama")},$s=function(Du){var Gu=Du;return Di(Gu)||(Gu=Wi(Is,Du)),Ps(Gu,Is)||console.warn("".concat(Gu," is not start with base_url(").concat(Is,").")),Rs(Gu,"model")},Os=function(Du,Gu){Gu===void 0&&(Gu="");var tu=Du;return Di(tu)||(tu=Wi(Gu,tu)),Di(tu)||(tu=Wi(Is,tu)),Ps(tu,Is)||console.warn("".concat(tu," is not start with base_url(").concat(Is,").")),Rs(tu,"texture")};if(Ts instanceof Error||(Bs.workCode=String(ca.work_code||ca.code||ca.vr_code||ca.workCode),Bs.name=String(ca.name),Ts instanceof Error)||(ca.initial&&(ca.initial.mode!=="Floorplan"&&ca.initial.mode!=="Topview"&&ca.initial.mode!=="Panorama"&&ca.initial.mode!=="VRPanorama"&&ca.initial.mode!=="Model"&&ca.initial.mode!=="DepthPanorama"||(Bs.initial.mode=ca.initial.mode),Yi(ca.initial.latitude)&&(Bs.initial.latitude=ca.initial.latitude),Yi(ca.initial.longitude)?Bs.initial.longitude=ca.initial.longitude:Yi(ca.initial.heading)&&(Bs.initial.longitude=-(360*(ca.initial.heading-.25)+90)/180*Math.PI),Yi(ca.initial.fov)&&(Bs.initial.fov=ca.initial.fov),Yi(ca.initial.panoIndex)?Bs.initial.panoIndex=ca.initial.panoIndex:Yi(ca.initial.pano_index)?Bs.initial.panoIndex=ca.initial.pano_index:Yi(ca.initial.pano)&&(Bs.initial.panoIndex=ca.initial.pano)),Ts instanceof Error))return Ts;if(ca.model){var Ls={bvh:!0,async:!1,textureBase:"",textures:[]};typeof ga.modelBvh=="boolean"?Ls.bvh=ga.modelBvh:typeof ca.model.bvh=="boolean"?Ls.bvh=ca.model.bvh:typeof ca.bvh=="boolean"&&(Ls.bvh=ca.bvh),ca.model.file?Ls.file=$s(ca.model.file):ca.model.file_url&&(Ls.file=$s(ca.model.file_url)),ca.model.textureBase?Ls.textureBase=ca.model.textureBase:ca.model.material_base_url&&(Ls.textureBase=ca.model.material_base_url),Array.isArray(ca.model.textures)?Ls.textures=ca.model.textures.map(function(Du){return Os(Du,Ls.textureBase)}):Array.isArray(ca.model.material_textures)&&(Ls.textures=ca.model.material_textures.map(function(Du){return Os(Du,Ls.textureBase)})),Ls.file&&(Bs.model=Ls)}if(Ts instanceof Error)return Ts;if(ca.observers&&Array.isArray(ca.observers)){var Ds=[];ca.panorama&&(Array.isArray(ca.panorama)?Ds=ca.panorama:Array.isArray(ca.panorama.list)?Ds=ca.panorama.list:Array.isArray(ca.panorama.info)&&(Ds=ca.panorama.info));for(var Fs=0;Fs<ca.observers.length;Fs++){var Ns={},Vs=ca.observers[Fs];if(!Vs)break;var Gs=Ds[Fs];if(!Gs)break;Vs=Object.assign({},Vs,Gs,{active:Vs.active!==!1&&Gs.active!==!1}),Ns.panoIndex=Fs,Ns.active=Vs.active!==!1,Ns.loadable=Vs.loadable===!0,Ns.images={up:ks(Vs.images?Vs.images.up:Vs.up,Fs),down:ks(Vs.images?Vs.images.down:Vs.down,Fs),right:ks(Vs.images?Vs.images.right:Vs.right,Fs),left:ks(Vs.images?Vs.images.left:Vs.left,Fs),front:ks(Vs.images?Vs.images.front:Vs.front,Fs),back:ks(Vs.images?Vs.images.back:Vs.back,Fs)};var Us=Vs.images?Vs.images.depth:Vs.depth;Us&&(Ns.images.depth=ks(Us,Fs));var zs=Vs.images?Vs.images.luminance:Vs.luminance;zs&&(Ns.images.luminance={up:ks(zs.up,Fs),down:ks(zs.down,Fs),right:ks(zs.right,Fs),left:ks(zs.left,Fs),front:ks(zs.front,Fs),back:ks(zs.back,Fs)});var Hs=Vs.images?Vs.images.tiles:Vs.tiles;if(Hs){for(var Qs=[],js=function(Du){var Gu=Du.match(/\/cube_(\d+)\//);if(Gu){var tu=Number(Gu[1]);if(Zi(tu))return tu}return!1},Zs=function(Du,Gu){return Du.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(Gu,"/")})},Ks=0,Ys=Hs;Ks<Ys.length;Ks++){var qs=Ys[Ks];if(typeof qs=="number"){var eu=qs,Js=js(Ns.images.front);if(Js===!1)continue;if((bu=Math.max(Js,512*Math.pow(2,eu)))>2048){var Xs=Zs(Ns.images.up,bu),ru=Zs(Ns.images.down,bu),su=Zs(Ns.images.right,bu),lu=Zs(Ns.images.left,bu),cu=Zs(Ns.images.front,bu),xu=Zs(Ns.images.back,bu);Qs.push({level:eu,size:bu,up:Xs,down:ru,right:su,left:lu,front:cu,back:xu})}else Xs=Ns.images.up,ru=Ns.images.down,su=Ns.images.right,lu=Ns.images.left,cu=Ns.images.front,xu=Ns.images.back,Qs.push({level:eu,size:bu,up:Xs,down:ru,right:su,left:lu,front:cu,back:xu})}else{var bu;if(typeof(eu=qs.level)!="number"||typeof(bu=qs.size)!="number")continue;Xs=ks(qs.up,Fs),ru=ks(qs.down,Fs),su=ks(qs.right,Fs),lu=ks(qs.left,Fs),cu=ks(qs.front,Fs),xu=ks(qs.back,Fs),Qs.push({level:eu,size:bu,up:Xs,down:ru,right:su,left:lu,front:cu,back:xu})}}Qs.sort(function(Du,Gu){return Du.level-Gu.level}),Ns.images.tiles=Qs}if(Vs.position instanceof r$1.Vector3)Ns.position=Vs.position.clone();else{if(!Array.isArray(Vs.position))break;Ns.position=new r$1.Vector3().fromArray(Vs.position)}if(Vs.standingPosition instanceof r$1.Vector3)Ns.standingPosition=Vs.standingPosition.clone();else if(Array.isArray(Vs.standingPosition))Ns.standingPosition=new r$1.Vector3().fromArray(Vs.standingPosition);else if(Vs.standing_position instanceof r$1.Vector3)Ns.standingPosition=Vs.standing_position.clone();else{if(!Array.isArray(Vs.standing_position))break;Ns.standingPosition=new r$1.Vector3().fromArray(Vs.standing_position)}if(Vs.quaternion instanceof r$1.Quaternion)Ns.quaternion=Vs.quaternion.clone();else if(Array.isArray(Vs.quaternion))Ns.quaternion=new r$1.Quaternion().fromArray(Vs.quaternion);else{if(!Vs.quaternion)break;var yu=Vs.quaternion,fu=yu.x,gu=yu.y,Su=yu.z,wu=yu.w;Ns.quaternion=new r$1.Quaternion(fu,gu,Su,wu)}if(Array.isArray(Vs.accessibleNodes)?Ns.accessibleNodes=Vs.accessibleNodes.slice():Array.isArray(Vs.accessible_nodes)&&(Ns.accessibleNodes=Vs.accessible_nodes.slice()),Array.isArray(Vs.visibleNodes)?Ns.visibleNodes=Vs.visibleNodes.slice():Array.isArray(Vs.visible_nodes)&&(Ns.visibleNodes=Vs.visible_nodes.slice()),Yi(Vs.floorIndex)?Ns.floorIndex=Vs.floorIndex:Yi(Vs.floor_index)?Ns.floorIndex=Vs.floor_index:Ns.floorIndex=0,Vs.video){var vu={};typeof Vs.video.source=="string"&&(vu.source=Vs.video.source),Vs.video.matrix instanceof r$1.Matrix4?vu.matrix=Vs.video.matrix.clone():Array.isArray(Vs.video.matrix)&&(vu.matrix=new r$1.Matrix4().fromArray(Vs.video.matrix)),Vs.video.size instanceof r$1.Vector2?vu.size=Vs.video.size.clone():Array.isArray(Vs.video.size)&&(vu.size=new r$1.Vector2().fromArray(Vs.video.size)),vu.source&&vu.matrix&&vu.size&&(Ns.video=vu)}Bs.observers[Fs]=Ns}}if(Ts instanceof Error)return Ts;for(var pu=0,Eu=Bs.observers;pu<Eu.length;pu++){if(!(Ns=Eu[pu]).accessibleNodes){Ns.accessibleNodes=[];for(var Tu=0;Tu<Bs.observers.length;Tu++)Bs.observers[Tu]!==Ns&&Ns.accessibleNodes.push(Tu)}if(!Ns.visibleNodes)for(Ns.visibleNodes=[],Tu=0;Tu<Bs.observers.length;Tu++)Bs.observers[Tu]!==Ns&&Ns.visibleNodes.push(Tu)}if(Ts instanceof Error)return Ts;var zu=Kt(Bs);return on.set(zu,{works:Ss,options:_s}),zu}function hn(ca,ga,ya){typeof ca=="string"&&ca.trim()[0]==="{"&&(ca=JSON.parse(ca));var _a=on.get(ca);if(_a){if(ga&&!Xi(JSON.parse(_a.options),ga))throw new Error("[PARSE FAILED]: work is parsed with different options.");return ca}var _s=ln(ca,ga!=null?ga:{},ya);if(_s instanceof Error)throw new Error("[PARSE FAILED]: "+_s.message);return _s}function cn(ca,ga,ya){return ca<ga?ga:ca>ya?ya:ca}function dn(ca,ga,ya){return ca+(ga-ca)*ya}function pn(ca,ga){var ya=ga[1]-ga[0];return ca<ga[0]?pn(ca+ya,ga):ca>=ga[1]?pn(ca-ya,ga):ca}function An(ca,ga,ya,_a){return _a?function(_s,Ss,Ms,Es){var Cs=Es[1]-Es[0];return _s=pn(_s,Es),dn((Ss=pn(Ss,Es))-_s>Cs/2?_s+Cs:_s-Ss>Cs/2?_s-Cs:_s,Ss,Ms)}(ca,ga,ya,_a):dn(ca,ga,ya)}var fn=function(){function ca(ga){for(var ya in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Ht(),this.startVelocity=0,this.duration=0,this.keyframes=[],ga){var _a=ga[ya];typeof _a=="number"?(this.value[ya]=_a,this.config[ya]={circle:!1}):(this.value[ya]=_a.value,this.config[ya]={circle:_a.circle})}this.keyframes=[{progress:0,value:e$1.__assign({},this.value)},{progress:1,value:e$1.__assign({},this.value)}]}return ca.prototype.getProgress=function(ga){var ya=ga-this.startTime;return ya<0?0:ya>=this.duration?1:1-function(_a,_s,Ss,Ms){var Es=(_s*Ss+2*_a)/Math.pow(Ss,3),Cs=-(2*_s*Ss+3*_a)/Math.pow(Ss,2),Ts=_s,Bs=_a;return Es*Math.pow(Ms,3)+Cs*Math.pow(Ms,2)+Ts*Ms+Bs}(1,this.startVelocity,this.duration,ya)},ca.prototype.getValue=function(ga){for(var ya=1;ya<this.keyframes.length;ya++)if(this.keyframes[ya].progress>ga){var _a=this.keyframes[ya-1],_s=this.keyframes[ya],Ss={};for(var Ms in this.config){var Es=(ga-_a.progress)/(_s.progress-_a.progress);Ss[Ms]=An(_a.value[Ms],_s.value[Ms],Es,this.config[Ms].circle)}return Ss}return e$1.__assign({},this.keyframes[this.keyframes.length-1].value)},ca.prototype.getProgressVelocity=function(ga){var ya=ga-this.startTime;return ya>=this.duration?0:function(_a,_s,Ss,Ms){var Es=(_s*Ss+2*_a)/Math.pow(Ss,3),Cs=-(2*_s*Ss+3*_a)/Math.pow(Ss,2),Ts=_s;return 3*Es*Math.pow(Ms,2)+2*Cs*Ms+Ts}(1,this.startVelocity,this.duration,ya)},ca.prototype.update=function(ga){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(ga))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},ca.prototype.getKeyFrameSegment=function(ga){for(var ya=this.getProgress(ga),_a=1;_a<this.keyframes.length;_a++)if(this.keyframes[_a].progress>ya)return[this.keyframes[_a-1],this.keyframes[_a]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},ca.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},ca.prototype.set=function(ga,ya,_a,_s){var Ss;_a===void 0&&(_a=0),isNaN(ya)&&(ya=0),isNaN(_a)&&(_a=0),_s=_s!=null?_s:Ht();var Ms=this.getProgress(_s),Es=this.getValue(Ms),Cs={};for(var Ts in this.config)Cs[Ts]=(Ss=ga[Ts])!==null&&Ss!==void 0?Ss:Es[Ts];var Bs=[{progress:0,value:Es},{progress:1,value:Cs}];return this.setKeyframes(Bs,ya,_a,_s)},ca.prototype.setKeyframes=function(ga,ya,_a,_s){var Ss=this;if(_a===void 0&&(_a=0),ga.length<2)throw new Error("keyframes invalid.");return isNaN(ya)&&(ya=0),isNaN(_a)&&(_a=0),this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(Ms,Es){_s=_s!=null?_s:Ht(),Ss.progress=0,Ss.ended=!1,Ss.startTime=_s,Ss.startVelocity=_a,Ss.keyframes=ga,Ss.duration=ya,ya===0?(Ss.progress=1,Ss.value=e$1.__assign({},ga[ga.length-1].value)):Ss.value=e$1.__assign({},ga[0].value),Ss.callbacks=[Ms,Es]})},ca.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},ca}(),gn=ge(),vn=new r$1.Texture(gn);gn.onload=function(){return vn.needsUpdate=!0},gn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var mn=new r$1.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),yn=new r$1.MeshBasicMaterial({map:vn,transparent:!0}),wn=new r$1.SphereBufferGeometry(.12,16,16),bn=new r$1.MeshBasicMaterial({color:16777215,opacity:0,transparent:!0});function xn(){if(typeof document=="undefined"){var ca=new r$1.Texture;return Object.assign(ca,{draw:function(Bs){},retain:!1,pool:!1})}var ga=document.createElement("canvas"),ya=512,_a=256,_s=190;ga.setAttribute("width",String(ya)),ga.setAttribute("height",String(ya));var Ss=new r$1.Texture(ga),Ms=ga.getContext("2d");if(!Ms)throw Error("cannot create canvas context");var Es=Ms.createRadialGradient(_a,_a,150,_a,_a,0);function Cs(){var Bs=Math.PI/12,Is=2*Math.PI/3;Ms&&(Ms.beginPath(),Ms.arc(_a,_a,_s,0*Is,1*Is-Bs),Ms.stroke(),Ms.beginPath(),Ms.arc(_a,_a,_s,1*Is,2*Is-Bs),Ms.stroke(),Ms.beginPath(),Ms.arc(_a,_a,_s,2*Is,3*Is-Bs),Ms.stroke())}function Ts(Bs){Ms&&(Ms.clearRect(0,0,ya,ya),Ms.lineWidth=20,Bs!==-1&&(Ms.globalCompositeOperation="source-over",Ms.strokeStyle="rgba(255, 255, 255, 1)",Cs(),Ms.globalCompositeOperation="source-in",Ms.beginPath(),Ms.arc(_a,_a,_s,0,2*Math.PI*Bs),Ms.strokeStyle="rgba(255, 255, 255, 1)",Ms.stroke(),Ms.globalCompositeOperation="source-over",Ms.strokeStyle="rgba(255, 255, 255, "+(Bs?.5:1)+")",Cs()),Ms.beginPath(),Ms.arc(_a,_a,150,0,2*Math.PI),Ms.closePath(),Ms.fillStyle=Es,Ms.fill(),Ms.fillStyle="rgba(255, 255, 255, 0.01)",Ms.fillRect(0,0,ya,ya),Ss.needsUpdate=!0)}return Es.addColorStop(0,"rgba(255, 255, 255, 1)"),Es.addColorStop(.15,"rgba(255, 255, 255, 1)"),Es.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),Es.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),Es.addColorStop(1,"rgba(255, 255, 255, 0.0)"),Ts(0),Object.assign(Ss,{draw:Ts,retain:!1,pool:!1})}var En=[],In=xn();In.draw(0);var Cn=xn();Cn.draw(1);var Sn=xn();Sn.draw(-1);var Bn=new r$1.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function Mn(){return new r$1.Mesh(Bn,new r$1.MeshBasicMaterial({map:In,transparent:!0}))}function Pn(ca,ga){var ya=ca.map;ga===0||ga===1?(ya.pool===!0&&(ya.retain=!1),ga===0&&(ca.map=In),ga===1&&(ca.map=Cn)):(ya.pool!==!0&&(ca.map=function(){for(var _a=0,_s=En;_a<_s.length;_a++){var Ss=_s[_a];if(Ss.retain===!1)return Ss}var Ms=xn();return Ms.pool=!0,Ms.retain=!0,En.push(Ms),Ms}()),ca.map.draw(ga))}var Tn=function(ca){function ga(){var ya=ca.call(this)||this;return ya.loading=!1,ya.disabled=!1,ya.current=!1,ya.progress=0,ya.opacity=0,ya.hitTestMesh=new r$1.Mesh(wn,bn),ya.add(ya.hitTestMesh),ya.centerMesh=Mn(),ya.centerMesh.position.y+=.01,ya.add(ya.centerMesh),ya.loadingMesh=new r$1.Mesh(mn,yn),ya.loadingMesh.position.y+=.011,ya.progressMotion=new fn({progress:ya.progress}),ya.opacityMotion=new fn({opacity:ya.opacity}),ya.needsRender=!0,ya.renderOrder=-2,ya}return e$1.__extends(ga,ca),ga.prototype.setLoading=function(ya){var _a=this;this.loading=ya,this.stopInterval&&this.stopInterval(),ya?(this.add(this.loadingMesh),this.stopInterval=se.shared.add(function(){_a.loadingMesh.rotateOnAxis(new r$1.Vector3(0,1,0),.1),_a.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},ga.prototype.setDisabled=function(ya){this.disabled=ya,function(_a,_s){var Ss=_a.map;Ss.pool===!0&&(Ss.retain=!1),_a.map=_s?Sn:In}(this.centerMesh.material,ya),this.needsRender=!0},ga.prototype.setProgress=function(ya){this.setLoading(!1),this.setDisabled(!1),this.progress=ya=cn(ya,0,1),ya!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:ya},120).catch(Lt)},ga.prototype.setOpacity=function(ya){this.opacity=ya=cn(ya,0,1),this.current&&(ya=1),ya!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:ya},500).catch(Lt)},ga.prototype.setCurrent=function(ya){this.current!==ya&&(this.current=ya,this.setOpacity(this.opacity))},ga.prototype.updateTime=function(ya,_a){this.opacityMotion.ended||(this.opacityMotion.update(ya),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(ya),Pn(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},ga.prototype.dispose=function(){this.setLoading(!1),this.remove(this.hitTestMesh),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},ga}(r$1.Object3D),Qn=new Float32Array([-.13,0,-.13,.13,0,-.13,-.13,0,.13,.13,0,.13]),Rn=new Float32Array([0,1,1,1,0,0,1,0]),Dn=new Uint8Array([0,2,1,2,3,1]),kn=new r$1.BufferGeometry;kn.setAttribute("position",new r$1.BufferAttribute(Qn,3)),kn.setAttribute("uv",new r$1.BufferAttribute(Rn,2)),kn.setIndex(new r$1.BufferAttribute(Dn,1));var Nn,Fn,On=(Nn=ge(),Fn=new r$1.Texture,Nn.onload=function(){if(typeof document!="undefined"){var ca=256,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var ya=ga.getContext("2d");if(ya){ya.drawImage(Nn,0,0,ca,ca),ya.globalCompositeOperation="source-out";var _a=128;ya.beginPath(),ya.lineWidth=29.952,ya.arc(_a,_a,84.48,0,2*Math.PI),ya.strokeStyle="rgba(255, 255, 255, 0.5)",ya.closePath(),ya.stroke(),Fn.image=ga,Fn.needsUpdate=!0}}},Nn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Fn),Ln=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var ya=256,_a=199.68;return ga.beginPath(),ga.arc(ya,ya,_a,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(ya,ya,_a,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$1.CanvasTexture(ca)}}return null}(),Vn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var ya=256,_a=138.24,_s=ga.createLinearGradient(ya-Math.cos(Math.PI/4)*_a,ya-Math.sin(Math.PI/4)*_a,ya+Math.cos(Math.PI/4)*_a,ya+Math.sin(Math.PI/4)*_a);return _s.addColorStop(0,"rgba(255, 255, 255, 1)"),_s.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),_s.addColorStop(1,"rgba(255, 255, 255, 1)"),ga.beginPath(),ga.lineWidth=33.28,ga.arc(ya,ya,_a,0,2*Math.PI),ga.strokeStyle=_s,ga.shadowBlur=38.4,ga.shadowColor="rgba(0, 0, 0, 0.3)",ga.closePath(),ga.stroke(),new r$1.CanvasTexture(ca)}}return null}(),Hn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var ya=256,_a=199.68,_s=ga.createLinearGradient(ya+Math.cos(Math.PI/4)*_a,ya-Math.sin(Math.PI/4)*_a,ya-Math.cos(Math.PI/4)*_a,ya+Math.sin(Math.PI/4)*_a);return _s.addColorStop(0,"rgba(255, 255, 255, 0.5)"),_s.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),_s.addColorStop(1,"rgba(255, 255, 255, 0.5)"),ga.beginPath(),ga.lineWidth=15.36,ga.arc(ya,ya,_a,0,2*Math.PI),ga.strokeStyle=_s,ga.shadowBlur=25.6,ga.shadowColor="rgba(0, 0, 0, 0.5)",ga.closePath(),ga.stroke(),new r$1.CanvasTexture(ca)}}return null}(),Kn=function(ca,ga){var ya=128;ca.clearRect(0,0,256,256),ca.beginPath(),ca.lineWidth=29.44,ca.arc(ya,ya,84.48,0,2*Math.PI*ga),ca.strokeStyle="rgba(255, 255, 255, 0.2)",ca.stroke()},zn=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(256)),ca.setAttribute("height",String(256));var ga=ca.getContext("2d");ga&&Kn(ga,2*Math.PI);var ya=new r$1.CanvasTexture(ca);return Object.assign(ya,{setProgress:function(_a){ga&&(Kn(ga,_a),ya.needsUpdate=!0)}})}return null},qn=[],_n=zn(),jn=function(ca){function ga(){var ya=ca.call(this)||this;ya.progress=0,ya.opacity=0,ya.loading=!1,ya.current=!1,ya.disabled=!1,ya.ringRotateMotion=new fn({angle:0}),ya.tapMotion=new fn({scale:1,opacity:1}),ya.progressMotion=new fn({progress:0}),ya.progressOpacityMotion=new fn({opacity:0}),ya.opacityMotion=new fn({opacity:0});var _a={blending:r$1.CustomBlending,blendSrc:r$1.SrcAlphaFactor,blendDst:r$1.OneMinusSrcAlphaFactor,blendSrcAlpha:r$1.OneFactor,blendDstAlpha:r$1.OneMinusSrcAlphaFactor,depthWrite:!1};return ya.centerMesh=new r$1.Mesh(kn,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Vn,opacity:0}))),ya.ringMesh=new r$1.Mesh(kn,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Hn,opacity:0}))),ya.loadingMesh=new r$1.Mesh(kn,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:On,opacity:.5}))),ya.disableMesh=new r$1.Mesh(kn,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Ln,opacity:0}))),ya.progressMesh=new r$1.Mesh(kn,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:_n,opacity:0}))),ya.loadingMesh.visible=!1,ya.disableMesh.visible=!1,ya.ringMesh.position.y=.003,ya.disableMesh.position.y=.002,ya.centerMesh.position.y=.002,ya.loadingMesh.position.y=.005,ya.progressMesh.position.y=.004,ya.centerMesh.frustumCulled=!1,ya.ringMesh.frustumCulled=!1,ya.progressMesh.frustumCulled=!1,ya.loadingMesh.frustumCulled=!1,ya.disableMesh.frustumCulled=!1,ya.renderOrder=-2,ya.add(ya.centerMesh),ya.add(ya.ringMesh),ya.add(ya.progressMesh),ya.add(ya.loadingMesh),ya.add(ya.disableMesh),ya.needsRender=!0,ya}return e$1.__extends(ga,ca),ga.prototype.setProgress=function(ya){this.setDisabled(!1),this.setLoading(!1),this.progress!==ya&&(ya=cn(ya,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Lt),ya===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Lt),this.progressMotion.set({progress:cn(1.2*ya,0,1)},0).catch(Lt)):this.progressMotion.set({progress:cn(1.2*ya,0,1)},100).catch(Lt)),this.progress=ya)},ga.prototype.setOpacity=function(ya){this.opacity!==ya&&(this.opacity=ya=cn(ya,0,1),this.opacityMotion.set({opacity:ya},500).catch(Lt))},ga.prototype.setCurrent=function(ya){if(this.current!==ya){if(ya===!0&&this.ringRotateMotion.ended){var _a=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(_a,5e3).catch(Lt)}this.current=ya}},ga.prototype.setLoading=function(ya){this.loading!==ya&&(this.loading=ya,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=ya,this.needsRender=!0)},ga.prototype.setDisabled=function(ya){this.disabled!==ya&&(this.disabled=ya,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=ya,this.ringMesh.visible=!ya,this.centerMesh.visible=!ya,this.needsRender=!0)},ga.prototype.tap=function(){var ya=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Lt),this.progressMotion.set({progress:0},0).catch(Lt),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){ya.progressOpacityMotion.set({opacity:ya.progress>0?1:0},300).catch(Lt),ya.progressMotion.set({progress:ya.progress},120).catch(Lt)}).catch(Lt)):Promise.resolve()},ga.prototype.updateTime=function(ya,_a){var _s;if(!this.progressMotion.ended){this.progressMotion.update(ya);var Ss=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(Ss===0)this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=_n);else if(Ss===1)this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=_n);else{if(this.progressMesh.material.map===_n){var Ms=qn.pop()||zn();this.progressMesh.material.map=Ms}(_s=this.progressMesh.material.map)===null||_s===void 0||_s.setProgress(Ss)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(ya);var Es=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=Es,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(ya),Es=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Es,this.ringMesh.material.opacity=Es,this.disableMesh.material.opacity=Es,this.loadingMesh.material.opacity=Es,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-_a/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(ya);var Cs=this.tapMotion.value.scale;this.centerMesh.scale.set(Cs,Cs,Cs),this.ringMesh.scale.set(Cs,Cs,Cs),this.progressMesh.scale.set(Cs,Cs,Cs),Es=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=Es,this.ringMesh.material.opacity=Es,this.disableMesh.material.opacity=Es,this.loadingMesh.material.opacity=Es,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(ya),this.ringMesh.quaternion.setFromEuler(new r$1.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},ga.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==_n&&(qn.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},ga}(r$1.Object3D),Un=new r$1.CircleBufferGeometry(.1,16),Gn=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var ya=ga.getContext("2d");if(ya){var _a=256,_s=192,Ss=76.8;ya.lineWidth=Ss,ya.arc(_a,_a,_s,0,2*Math.PI),ya.strokeStyle="rgba(147, 162, 255, 0.3)",ya.shadowBlur=12.8,ya.shadowColor="rgba(255, 255, 255, 0.6)",ya.stroke(),ya.lineWidth=Ss,ya.arc(_a,_a,_s,0,2*Math.PI);var Ms=ya.createRadialGradient(_a,_a,153.6,_a,_a,230.4);Ms.addColorStop(0,"rgba(255, 255, 255, 0.3)"),Ms.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.3)"),ya.strokeStyle=Ms,ya.stroke(),ya.beginPath(),ya.lineWidth=4.8,ya.arc(_a,_a,228,0,2*Math.PI);var Es=ya.createLinearGradient(0,0,ca,0);return Es.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Es.addColorStop(.08,"rgba(255, 255, 255, 0.0)"),Es.addColorStop(.92,"rgba(255, 255, 255, 0.0)"),Es.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),ya.strokeStyle=Es,ya.stroke(),new r$1.CanvasTexture(ga)}}return null}(),Wn=new r$1.MeshBasicMaterial({map:Gn,transparent:!0}),Xn=function(ca){function ga(){var ya=ca.call(this)||this;return ya.ringMesh=new r$1.Mesh(Un,Wn),ya.ringMesh.renderOrder=-3,ya.add(ya.ringMesh),ya}return e$1.__extends(ga,ca),ga.prototype.dispose=function(){this.remove(this.ringMesh)},ga}(r$1.Object3D);function Yn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Zn(){return(Yn()+Yn()+"-"+Yn()+"-4"+Yn().substr(0,3)+"-"+Yn()+"-"+Yn()+Yn()+Yn()).toLowerCase()}function Jn(ca,ga,ya){var _a=Math.abs(ca-ga);return _a<.001||ya!==void 0&&Math.abs(ya-_a)<.001}function $n(ca,ga,ya){return!Jn(ca,ga,ya)}function tr(ca,ga){return ca.distanceTo(ga)<.001}function er(ca,ga){return!tr(ca,ga)}var ir=new r$1.Vector3(0,0,0),nr=function(ca){function ga(ya,_a){_a===void 0&&(_a=ir);var _s=ca.call(this)||this,Ss=new r$1.BoxBufferGeometry(ya.max.x-ya.min.x+2*_a.x,ya.max.y-ya.min.y+2*_a.y,ya.max.z-ya.min.z+2*_a.z,1,1);Ss.groups.length=0,Ss.groups.push({start:0,count:36,materialIndex:0}),Ss.applyMatrix4(new r$1.Matrix4().makeScale(-1,1,1));var Ms=new be;Ms.defines.USE_MAP=!1,Ms.defines.USE_UV=!1,Ms.uniforms.diffuse.value=new r$1.Color(16777215);var Es=new ce(Ss,[Ms]);return Es.floorIndex=-1,Es.position.copy(ya.getCenter(new r$1.Vector3)),Es.frustumCulled=!1,_s.renderOrder=-3,_s.add(Es),_s.boundingBox=new r$1.Box3,_s.computeBoundingBox(),_s}return e$1.__extends(ga,ca),ga.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},ga.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},ga}(pe);function rr(ca,ga){return ga===void 0&&(ga=ir),new nr(ca,ga)}var or=2*Math.PI;function sr(ca){return ca>=0&&ca<or?ca:(ca%or+or)%or}var ar=Math.PI,ur=2*ar;function lr(ca,ga,ya){if(ca===ga)return ga;var _a=ga-ca;return Math.abs(_a)<=ya?ga:ca+(_a>0?1:-1)*ya}(function(){try{var ca=document.createElement("canvas");!window.WebGLRenderingContext||!ca.getContext("webgl")&&ca.getContext("experimental-webgl")}catch{return!1}})();var hr=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node";return/android/i.test(ca)||/webos/i.test(ca)||/ipad|iphone|ipod/i.test(ca)||/iemobile/i.test(ca)||/opera mini/i.test(ca)||/blackberry/i.test(ca)||/windows phone/i.test(ca)};function cr(ca,ga){ca.mode=ga.mode,ca.panoIndex=ga.panoIndex,ca.longitude=ga.longitude,ca.latitude=ga.latitude,ca.fov=ga.fov,ca.offset.copy(ga.offset)}function dr(ca,ga){return ca.panoIndex===ga.panoIndex&&ca.mode===ga.mode&&Jn(ca.longitude,ga.longitude,2*Math.PI)&&Jn(ca.latitude,ga.latitude)&&Jn(ca.fov,ga.fov)&&tr(ca.offset,ga.offset)}var pr=function(ca){return Number(ca)};function Ar(ca,ga,ya){var _a;ga===void 0&&(ga=pr),ya===void 0&&(ya=!1);for(var _s,Ss=1/0,Ms=0,Es=ca;Ms<Es.length;Ms++){var Cs=Es[Ms],Ts=ga(Cs);Ts<=Ss&&(_s=(_a=[Cs,Ts])[0],Ss=_a[1])}return ya?[_s,Ss]:_s}function fr(ca){for(var ga in ca)return!1;return!0}function gr(ca){return{longitude:ca.longitude,latitude:ca.latitude,fov:ca.fov,offset:ca.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var vr=function(ca,ga,ya,_a){var _s,Ss=["","webkit","Moz","MS","ms","o"],Ms=ga.createElement?ga.createElement("div"):_a,Es=Math.round,Cs=Math.abs,Ts=Date.now;function Bs(Ws,iu,au){return setTimeout(Ls(Ws,au),iu)}function Is(Ws,iu,au){return!!Array.isArray(Ws)&&(Ps(Ws,au[iu],au),!0)}function Ps(Ws,iu,au){var hu;if(Ws)if(Ws.forEach)Ws.forEach(iu,au);else if(Ws.length!==_a)for(hu=0;hu<Ws.length;)iu.call(au,Ws[hu],hu,Ws),hu++;else for(hu in Ws)Ws.hasOwnProperty(hu)&&iu.call(au,Ws[hu],hu,Ws)}function Rs(Ws,iu,au){var hu="DEPRECATED METHOD: "+iu+`
`+au+` AT 
`;return function(){var _u=new Error("get-stack-trace"),Hu=_u&&_u.stack?_u.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yu=ca.console&&(ca.console.warn||ca.console.log);return Yu&&Yu.call(ca.console,hu,Hu),Ws.apply(this,arguments)}}_s=typeof Object.assign!="function"?function(Ws){if(Ws===_a||Ws===null)throw new TypeError("Cannot convert undefined or null to object");for(var iu=Object(Ws),au=1;au<arguments.length;au++){var hu=arguments[au];if(hu!==_a&&hu!==null)for(var _u in hu)hu.hasOwnProperty(_u)&&(iu[_u]=hu[_u])}return iu}:Object.assign;var ks=Rs(function(Ws,iu,au){for(var hu=Object.keys(iu),_u=0;_u<hu.length;)(!au||au&&Ws[hu[_u]]===_a)&&(Ws[hu[_u]]=iu[hu[_u]]),_u++;return Ws},"extend","Use `assign`."),$s=Rs(function(Ws,iu){return ks(Ws,iu,!0)},"merge","Use `assign`.");function Os(Ws,iu,au){var hu,_u=iu.prototype;(hu=Ws.prototype=Object.create(_u)).constructor=Ws,hu._super=_u,au&&_s(hu,au)}function Ls(Ws,iu){return function(){return Ws.apply(iu,arguments)}}function Ds(Ws,iu){return typeof Ws=="function"?Ws.apply(iu&&iu[0]||_a,iu):Ws}function Fs(Ws,iu){return Ws===_a?iu:Ws}function Ns(Ws,iu,au){Ps(zs(iu),function(hu){Ws.addEventListener(hu,au,!1)})}function Vs(Ws,iu,au){Ps(zs(iu),function(hu){Ws.removeEventListener(hu,au,!1)})}function Gs(Ws,iu){for(;Ws;){if(Ws==iu)return!0;Ws=Ws.parentNode}return!1}function Us(Ws,iu){return Ws.indexOf(iu)>-1}function zs(Ws){return Ws.trim().split(/\s+/g)}function Hs(Ws,iu,au){if(Ws.indexOf&&!au)return Ws.indexOf(iu);for(var hu=0;hu<Ws.length;){if(au&&Ws[hu][au]==iu||!au&&Ws[hu]===iu)return hu;hu++}return-1}function Qs(Ws){return Array.prototype.slice.call(Ws,0)}function js(Ws,iu,au){for(var hu=[],_u=[],Hu=0;Hu<Ws.length;){var Yu=iu?Ws[Hu][iu]:Ws[Hu];Hs(_u,Yu)<0&&hu.push(Ws[Hu]),_u[Hu]=Yu,Hu++}return au&&(hu=iu?hu.sort(function(Sl,Uu){return Sl[iu]>Uu[iu]}):hu.sort()),hu}function Zs(Ws,iu){for(var au,hu,_u=iu[0].toUpperCase()+iu.slice(1),Hu=0;Hu<Ss.length;){if((hu=(au=Ss[Hu])?au+_u:iu)in Ws)return hu;Hu++}return _a}var Ks=1;function Ys(Ws){var iu=Ws.ownerDocument||Ws;return iu.defaultView||iu.parentWindow||ca}var qs="ontouchstart"in ca,eu=Zs(ca,"PointerEvent")!==_a,Js=qs&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Xs="touch",ru="mouse",su=24,lu=["x","y"],cu=["clientX","clientY"];function xu(Ws,iu){var au=this;this.manager=Ws,this.callback=iu,this.element=Ws.element,this.target=Ws.options.inputTarget,this.domHandler=function(hu){Ds(Ws.options.enable,[Ws])&&au.handler(hu)},this.init()}function bu(Ws,iu,au){var hu=au.pointers.length,_u=au.changedPointers.length,Hu=1&iu&&hu-_u==0,Yu=12&iu&&hu-_u==0;au.isFirst=!!Hu,au.isFinal=!!Yu,Hu&&(Ws.session={}),au.eventType=iu,function(Sl,Uu){var Ml=Sl.session,Rl=Uu.pointers,Ul=Rl.length;Ml.firstInput||(Ml.firstInput=yu(Uu)),Ul>1&&!Ml.firstMultiple?Ml.firstMultiple=yu(Uu):Ul===1&&(Ml.firstMultiple=!1);var Ql=Ml.firstInput,zl=Ml.firstMultiple,Xl=zl?zl.center:Ql.center,Yl=Uu.center=fu(Rl);Uu.timeStamp=Ts(),Uu.deltaTime=Uu.timeStamp-Ql.timeStamp,Uu.angle=vu(Xl,Yl),Uu.distance=wu(Xl,Yl),function(Ll,El){var Dl=El.center,Nl=Ll.offsetDelta||{},Vl=Ll.prevDelta||{},Gl=Ll.prevInput||{};El.eventType!==1&&Gl.eventType!==4||(Vl=Ll.prevDelta={x:Gl.deltaX||0,y:Gl.deltaY||0},Nl=Ll.offsetDelta={x:Dl.x,y:Dl.y}),El.deltaX=Vl.x+(Dl.x-Nl.x),El.deltaY=Vl.y+(Dl.y-Nl.y)}(Ml,Uu),Uu.offsetDirection=Su(Uu.deltaX,Uu.deltaY);var Hl=gu(Uu.deltaTime,Uu.deltaX,Uu.deltaY);Uu.overallVelocityX=Hl.x,Uu.overallVelocityY=Hl.y,Uu.overallVelocity=Cs(Hl.x)>Cs(Hl.y)?Hl.x:Hl.y,Uu.scale=zl?function(Ll,El){return wu(El[0],El[1],cu)/wu(Ll[0],Ll[1],cu)}(zl.pointers,Rl):1,Uu.rotation=zl?function(Ll,El){return vu(El[1],El[0],cu)+vu(Ll[1],Ll[0],cu)}(zl.pointers,Rl):0,Uu.maxPointers=Ml.prevInput?Uu.pointers.length>Ml.prevInput.maxPointers?Uu.pointers.length:Ml.prevInput.maxPointers:Uu.pointers.length,function(Ll,El){var Dl,Nl,Vl,Gl,$l=Ll.lastInterval||El,Zl=El.timeStamp-$l.timeStamp;if(El.eventType!=8&&(Zl>25||$l.velocity===_a)){var Jl=El.deltaX-$l.deltaX,_c=El.deltaY-$l.deltaY,Wl=gu(Zl,Jl,_c);Nl=Wl.x,Vl=Wl.y,Dl=Cs(Wl.x)>Cs(Wl.y)?Wl.x:Wl.y,Gl=Su(Jl,_c),Ll.lastInterval=El}else Dl=$l.velocity,Nl=$l.velocityX,Vl=$l.velocityY,Gl=$l.direction;El.velocity=Dl,El.velocityX=Nl,El.velocityY=Vl,El.direction=Gl}(Ml,Uu);var Kl=Sl.element;Gs(Uu.srcEvent.target,Kl)&&(Kl=Uu.srcEvent.target),Uu.target=Kl}(Ws,au),Ws.emit("hammer.input",au),Ws.recognize(au),Ws.session.prevInput=au}function yu(Ws){for(var iu=[],au=0;au<Ws.pointers.length;)iu[au]={clientX:Es(Ws.pointers[au].clientX),clientY:Es(Ws.pointers[au].clientY)},au++;return{timeStamp:Ts(),pointers:iu,center:fu(iu),deltaX:Ws.deltaX,deltaY:Ws.deltaY}}function fu(Ws){var iu=Ws.length;if(iu===1)return{x:Es(Ws[0].clientX),y:Es(Ws[0].clientY)};for(var au=0,hu=0,_u=0;_u<iu;)au+=Ws[_u].clientX,hu+=Ws[_u].clientY,_u++;return{x:Es(au/iu),y:Es(hu/iu)}}function gu(Ws,iu,au){return{x:iu/Ws||0,y:au/Ws||0}}function Su(Ws,iu){return Ws===iu?1:Cs(Ws)>=Cs(iu)?Ws<0?2:4:iu<0?8:16}function wu(Ws,iu,au){au||(au=lu);var hu=iu[au[0]]-Ws[au[0]],_u=iu[au[1]]-Ws[au[1]];return Math.sqrt(hu*hu+_u*_u)}function vu(Ws,iu,au){au||(au=lu);var hu=iu[au[0]]-Ws[au[0]],_u=iu[au[1]]-Ws[au[1]];return 180*Math.atan2(_u,hu)/Math.PI}xu.prototype={handler:function(){},init:function(){this.evEl&&Ns(this.element,this.evEl,this.domHandler),this.evTarget&&Ns(this.target,this.evTarget,this.domHandler),this.evWin&&Ns(Ys(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Vs(this.element,this.evEl,this.domHandler),this.evTarget&&Vs(this.target,this.evTarget,this.domHandler),this.evWin&&Vs(Ys(this.element),this.evWin,this.domHandler)}};var pu={mousedown:1,mousemove:2,mouseup:4},Eu="mousedown",Tu="mousemove mouseup";function zu(){this.evEl=Eu,this.evWin=Tu,this.pressed=!1,xu.apply(this,arguments)}Os(zu,xu,{handler:function(Ws){var iu=pu[Ws.type];1&iu&&Ws.button===0&&(this.pressed=!0),2&iu&&Ws.which!==1&&(iu=4),this.pressed&&(4&iu&&(this.pressed=!1),this.callback(this.manager,iu,{pointers:[Ws],changedPointers:[Ws],pointerType:ru,srcEvent:Ws}))}});var Du={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Gu={2:Xs,3:"pen",4:ru,5:"kinect"},tu="pointerdown",ou="pointermove pointerup pointercancel";function Cu(){this.evEl=tu,this.evWin=ou,xu.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ca.MSPointerEvent&&!ca.PointerEvent&&(tu="MSPointerDown",ou="MSPointerMove MSPointerUp MSPointerCancel"),Os(Cu,xu,{handler:function(Ws){var iu=this.store,au=!1,hu=Ws.type.toLowerCase().replace("ms",""),_u=Du[hu],Hu=Gu[Ws.pointerType]||Ws.pointerType,Yu=Hu==Xs,Sl=Hs(iu,Ws.pointerId,"pointerId");1&_u&&(Ws.button===0||Yu)?Sl<0&&(iu.push(Ws),Sl=iu.length-1):12&_u&&(au=!0),Sl<0||(iu[Sl]=Ws,this.callback(this.manager,_u,{pointers:iu,changedPointers:[Ws],pointerType:Hu,srcEvent:Ws}),au&&iu.splice(Sl,1))}});var Mu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Wu="touchstart",Lu="touchstart touchmove touchend touchcancel";function Bu(){this.evTarget=Wu,this.evWin=Lu,this.started=!1,xu.apply(this,arguments)}function vl(Ws,iu){var au=Qs(Ws.touches),hu=Qs(Ws.changedTouches);return 12&iu&&(au=js(au.concat(hu),"identifier",!0)),[au,hu]}Os(Bu,xu,{handler:function(Ws){var iu=Mu[Ws.type];if(iu===1&&(this.started=!0),this.started){var au=vl.call(this,Ws,iu);12&iu&&au[0].length-au[1].length==0&&(this.started=!1),this.callback(this.manager,iu,{pointers:au[0],changedPointers:au[1],pointerType:Xs,srcEvent:Ws})}}});var Ku={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ju="touchstart touchmove touchend touchcancel";function Pu(){this.evTarget=ju,this.targetIds={},xu.apply(this,arguments)}function Ou(Ws,iu){var au=Qs(Ws.touches),hu=this.targetIds;if(3&iu&&au.length===1)return hu[au[0].identifier]=!0,[au,au];var _u,Hu,Yu=Qs(Ws.changedTouches),Sl=[],Uu=this.target;if(Hu=au.filter(function(Ml){return Gs(Ml.target,Uu)}),iu===1)for(_u=0;_u<Hu.length;)hu[Hu[_u].identifier]=!0,_u++;for(_u=0;_u<Yu.length;)hu[Yu[_u].identifier]&&Sl.push(Yu[_u]),12&iu&&delete hu[Yu[_u].identifier],_u++;return Sl.length?[js(Hu.concat(Sl),"identifier",!0),Sl]:void 0}Os(Pu,xu,{handler:function(Ws){var iu=Ku[Ws.type],au=Ou.call(this,Ws,iu);au&&this.callback(this.manager,iu,{pointers:au[0],changedPointers:au[1],pointerType:Xs,srcEvent:Ws})}});function Ru(){xu.apply(this,arguments);var Ws=Ls(this.handler,this);this.touch=new Pu(this.manager,Ws),this.mouse=new zu(this.manager,Ws),this.primaryTouch=null,this.lastTouches=[]}function Nu(Ws,iu){1&Ws?(this.primaryTouch=iu.changedPointers[0].identifier,uu.call(this,iu)):12&Ws&&uu.call(this,iu)}function uu(Ws){var iu=Ws.changedPointers[0];if(iu.identifier===this.primaryTouch){var au={x:iu.clientX,y:iu.clientY};this.lastTouches.push(au);var hu=this.lastTouches;setTimeout(function(){var _u=hu.indexOf(au);_u>-1&&hu.splice(_u,1)},2500)}}function $u(Ws){for(var iu=Ws.srcEvent.clientX,au=Ws.srcEvent.clientY,hu=0;hu<this.lastTouches.length;hu++){var _u=this.lastTouches[hu],Hu=Math.abs(iu-_u.x),Yu=Math.abs(au-_u.y);if(Hu<=25&&Yu<=25)return!0}return!1}Os(Ru,xu,{handler:function(Ws,iu,au){var hu=au.pointerType==Xs,_u=au.pointerType==ru;if(!(_u&&au.sourceCapabilities&&au.sourceCapabilities.firesTouchEvents)){if(hu)Nu.call(this,iu,au);else if(_u&&$u.call(this,au))return;this.callback(Ws,iu,au)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ku=Ms?Zs(Ms.style,"touchAction"):_a,Ju=ku!==_a,Fu="compute",yl="auto",xl="manipulation",_l="none",Bl="pan-x",Al="pan-y",Cl=function(){if(!Ju)return!1;var Ws={},iu=ca.CSS&&ca.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(au){Ws[au]=!iu||ca.CSS.supports("touch-action",au)}),Ws}();function Il(Ws,iu){this.manager=Ws,this.set(iu)}Il.prototype={set:function(Ws){Ws==Fu&&(Ws=this.compute()),Ju&&this.manager.element.style&&Cl[Ws]&&(this.manager.element.style[ku]=Ws),this.actions=Ws.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ws=[];return Ps(this.manager.recognizers,function(iu){Ds(iu.options.enable,[iu])&&(Ws=Ws.concat(iu.getTouchAction()))}),function(iu){if(Us(iu,_l))return _l;var au=Us(iu,Bl),hu=Us(iu,Al);return au&&hu?_l:au||hu?au?Bl:Al:Us(iu,xl)?xl:yl}(Ws.join(" "))},preventDefaults:function(Ws){var iu=Ws.srcEvent,au=Ws.offsetDirection;if(this.manager.session.prevented)iu.preventDefault();else{var hu=this.actions,_u=Us(hu,_l)&&!Cl.none,Hu=Us(hu,Al)&&!Cl["pan-y"],Yu=Us(hu,Bl)&&!Cl["pan-x"];if(_u){var Sl=Ws.pointers.length===1,Uu=Ws.distance<2,Ml=Ws.deltaTime<250;if(Sl&&Uu&&Ml)return}if(!Yu||!Hu)return _u||Hu&&6&au||Yu&&au&su?this.preventSrc(iu):void 0}},preventSrc:function(Ws){this.manager.session.prevented=!0,Ws.preventDefault()}};var Tl=32;function Pl(Ws){this.options=_s({},this.defaults,Ws||{}),this.id=Ks++,this.manager=null,this.options.enable=Fs(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Fl(Ws){return 16&Ws?"cancel":8&Ws?"end":4&Ws?"move":2&Ws?"start":""}function Ol(Ws){return Ws==16?"down":Ws==8?"up":Ws==2?"left":Ws==4?"right":""}function nu(Ws,iu){var au=iu.manager;return au?au.get(Ws):Ws}function mu(){Pl.apply(this,arguments)}function du(){mu.apply(this,arguments),this.pX=null,this.pY=null}function Au(){mu.apply(this,arguments)}function Iu(){Pl.apply(this,arguments),this._timer=null,this._input=null}function Xu(){mu.apply(this,arguments)}function qu(){mu.apply(this,arguments)}function Vu(){Pl.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qu(Ws,iu){return(iu=iu||{}).recognizers=Fs(iu.recognizers,Qu.defaults.preset),new Zu(Ws,iu)}Pl.prototype={defaults:{},set:function(Ws){return _s(this.options,Ws),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ws){if(Is(Ws,"recognizeWith",this))return this;var iu=this.simultaneous;return iu[(Ws=nu(Ws,this)).id]||(iu[Ws.id]=Ws,Ws.recognizeWith(this)),this},dropRecognizeWith:function(Ws){return Is(Ws,"dropRecognizeWith",this)||(Ws=nu(Ws,this),delete this.simultaneous[Ws.id]),this},requireFailure:function(Ws){if(Is(Ws,"requireFailure",this))return this;var iu=this.requireFail;return Hs(iu,Ws=nu(Ws,this))===-1&&(iu.push(Ws),Ws.requireFailure(this)),this},dropRequireFailure:function(Ws){if(Is(Ws,"dropRequireFailure",this))return this;Ws=nu(Ws,this);var iu=Hs(this.requireFail,Ws);return iu>-1&&this.requireFail.splice(iu,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ws){return!!this.simultaneous[Ws.id]},emit:function(Ws){var iu=this,au=this.state;function hu(_u){iu.manager.emit(_u,Ws)}au<8&&hu(iu.options.event+Fl(au)),hu(iu.options.event),Ws.additionalEvent&&hu(Ws.additionalEvent),au>=8&&hu(iu.options.event+Fl(au))},tryEmit:function(Ws){if(this.canEmit())return this.emit(Ws);this.state=Tl},canEmit:function(){for(var Ws=0;Ws<this.requireFail.length;){if(!(33&this.requireFail[Ws].state))return!1;Ws++}return!0},recognize:function(Ws){var iu=_s({},Ws);if(!Ds(this.options.enable,[this,iu]))return this.reset(),void(this.state=Tl);56&this.state&&(this.state=1),this.state=this.process(iu),30&this.state&&this.tryEmit(iu)},process:function(Ws){},getTouchAction:function(){},reset:function(){}},Os(mu,Pl,{defaults:{pointers:1},attrTest:function(Ws){var iu=this.options.pointers;return iu===0||Ws.pointers.length===iu},process:function(Ws){var iu=this.state,au=Ws.eventType,hu=6&iu,_u=this.attrTest(Ws);return hu&&(8&au||!_u)?16|iu:hu||_u?4&au?8|iu:2&iu?4|iu:2:Tl}}),Os(du,mu,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Ws=this.options.direction,iu=[];return 6&Ws&&iu.push(Al),Ws&su&&iu.push(Bl),iu},directionTest:function(Ws){var iu=this.options,au=!0,hu=Ws.distance,_u=Ws.direction,Hu=Ws.deltaX,Yu=Ws.deltaY;return _u&iu.direction||(6&iu.direction?(_u=Hu===0?1:Hu<0?2:4,au=Hu!=this.pX,hu=Math.abs(Ws.deltaX)):(_u=Yu===0?1:Yu<0?8:16,au=Yu!=this.pY,hu=Math.abs(Ws.deltaY))),Ws.direction=_u,au&&hu>iu.threshold&&_u&iu.direction},attrTest:function(Ws){return mu.prototype.attrTest.call(this,Ws)&&(2&this.state||!(2&this.state)&&this.directionTest(Ws))},emit:function(Ws){this.pX=Ws.deltaX,this.pY=Ws.deltaY;var iu=Ol(Ws.direction);iu&&(Ws.additionalEvent=this.options.event+iu),this._super.emit.call(this,Ws)}}),Os(Au,mu,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_l]},attrTest:function(Ws){return this._super.attrTest.call(this,Ws)&&(Math.abs(Ws.scale-1)>this.options.threshold||2&this.state)},emit:function(Ws){if(Ws.scale!==1){var iu=Ws.scale<1?"in":"out";Ws.additionalEvent=this.options.event+iu}this._super.emit.call(this,Ws)}}),Os(Iu,Pl,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[yl]},process:function(Ws){var iu=this.options,au=Ws.pointers.length===iu.pointers,hu=Ws.distance<iu.threshold,_u=Ws.deltaTime>iu.time;if(this._input=Ws,!hu||!au||12&Ws.eventType&&!_u)this.reset();else if(1&Ws.eventType)this.reset(),this._timer=Bs(function(){this.state=8,this.tryEmit()},iu.time,this);else if(4&Ws.eventType)return 8;return Tl},reset:function(){clearTimeout(this._timer)},emit:function(Ws){this.state===8&&(Ws&&4&Ws.eventType?this.manager.emit(this.options.event+"up",Ws):(this._input.timeStamp=Ts(),this.manager.emit(this.options.event,this._input)))}}),Os(Xu,mu,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_l]},attrTest:function(Ws){return this._super.attrTest.call(this,Ws)&&(Math.abs(Ws.rotation)>this.options.threshold||2&this.state)}}),Os(qu,mu,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return du.prototype.getTouchAction.call(this)},attrTest:function(Ws){var iu,au=this.options.direction;return 30&au?iu=Ws.overallVelocity:6&au?iu=Ws.overallVelocityX:au&su&&(iu=Ws.overallVelocityY),this._super.attrTest.call(this,Ws)&&au&Ws.offsetDirection&&Ws.distance>this.options.threshold&&Ws.maxPointers==this.options.pointers&&Cs(iu)>this.options.velocity&&4&Ws.eventType},emit:function(Ws){var iu=Ol(Ws.offsetDirection);iu&&this.manager.emit(this.options.event+iu,Ws),this.manager.emit(this.options.event,Ws)}}),Os(Vu,Pl,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xl]},process:function(Ws){var iu=this.options,au=Ws.pointers.length===iu.pointers,hu=Ws.distance<iu.threshold,_u=Ws.deltaTime<iu.time;if(this.reset(),1&Ws.eventType&&this.count===0)return this.failTimeout();if(hu&&_u&&au){if(Ws.eventType!=4)return this.failTimeout();var Hu=!this.pTime||Ws.timeStamp-this.pTime<iu.interval,Yu=!this.pCenter||wu(this.pCenter,Ws.center)<iu.posThreshold;if(this.pTime=Ws.timeStamp,this.pCenter=Ws.center,Yu&&Hu?this.count+=1:this.count=1,this._input=Ws,this.count%iu.taps===0)return this.hasRequireFailures()?(this._timer=Bs(function(){this.state=8,this.tryEmit()},iu.interval,this),2):8}return Tl},failTimeout:function(){return this._timer=Bs(function(){this.state=Tl},this.options.interval,this),Tl},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qu.VERSION="2.0.7",Qu.defaults={domEvents:!1,touchAction:Fu,enable:!0,inputTarget:null,inputClass:null,preset:[[Xu,{enable:!1}],[Au,{enable:!1},["rotate"]],[qu,{direction:6}],[du,{direction:6},["swipe"]],[Vu],[Vu,{event:"doubletap",taps:2},["tap"]],[Iu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Zu(Ws,iu){var au;this.options=_s({},Qu.defaults,iu||{}),this.options.inputTarget=this.options.inputTarget||Ws,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ws,this.input=new((au=this).options.inputClass||(eu?Cu:Js?Pu:qs?Ru:zu))(au,bu),this.touchAction=new Il(this,this.options.touchAction),wl(this,!0),Ps(this.options.recognizers,function(hu){var _u=this.add(new hu[0](hu[1]));hu[2]&&_u.recognizeWith(hu[2]),hu[3]&&_u.requireFailure(hu[3])},this)}function wl(Ws,iu){var au,hu=Ws.element;hu.style&&(Ps(Ws.options.cssProps,function(_u,Hu){au=Zs(hu.style,Hu),iu?(Ws.oldCssProps[au]=hu.style[au],hu.style[au]=_u):hu.style[au]=Ws.oldCssProps[au]||""}),iu||(Ws.oldCssProps={}))}return Zu.prototype={set:function(Ws){return _s(this.options,Ws),Ws.touchAction&&this.touchAction.update(),Ws.inputTarget&&(this.input.destroy(),this.input.target=Ws.inputTarget,this.input.init()),this},stop:function(Ws){this.session.stopped=Ws?2:1},recognize:function(Ws){var iu=this.session;if(!iu.stopped){var au;this.touchAction.preventDefaults(Ws);var hu=this.recognizers,_u=iu.curRecognizer;(!_u||_u&&8&_u.state)&&(_u=iu.curRecognizer=null);for(var Hu=0;Hu<hu.length;)au=hu[Hu],iu.stopped===2||_u&&au!=_u&&!au.canRecognizeWith(_u)?au.reset():au.recognize(Ws),!_u&&14&au.state&&(_u=iu.curRecognizer=au),Hu++}},get:function(Ws){if(Ws instanceof Pl)return Ws;for(var iu=this.recognizers,au=0;au<iu.length;au++)if(iu[au].options.event==Ws)return iu[au];return null},add:function(Ws){if(Is(Ws,"add",this))return this;var iu=this.get(Ws.options.event);return iu&&this.remove(iu),this.recognizers.push(Ws),Ws.manager=this,this.touchAction.update(),Ws},remove:function(Ws){if(Is(Ws,"remove",this))return this;if(Ws=this.get(Ws)){var iu=this.recognizers,au=Hs(iu,Ws);au!==-1&&(iu.splice(au,1),this.touchAction.update())}return this},on:function(Ws,iu){if(Ws!==_a&&iu!==_a){var au=this.handlers;return Ps(zs(Ws),function(hu){au[hu]=au[hu]||[],au[hu].push(iu)}),this}},off:function(Ws,iu){if(Ws!==_a){var au=this.handlers;return Ps(zs(Ws),function(hu){iu?au[hu]&&au[hu].splice(Hs(au[hu],iu),1):delete au[hu]}),this}},emit:function(Ws,iu){this.options.domEvents&&function(_u,Hu){var Yu=ga.createEvent("Event");Yu.initEvent(_u,!0,!0),Yu.gesture=Hu,Hu.target.dispatchEvent(Yu)}(Ws,iu);var au=this.handlers[Ws]&&this.handlers[Ws].slice();if(au&&au.length){iu.type=Ws,iu.preventDefault=function(){iu.srcEvent.preventDefault()};for(var hu=0;hu<au.length;)au[hu](iu),hu++}},destroy:function(){this.element&&wl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},_s(Qu,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Tl,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:su,DIRECTION_ALL:30,Manager:Zu,Input:xu,TouchAction:Il,TouchInput:Pu,MouseInput:zu,PointerEventInput:Cu,TouchMouseInput:Ru,SingleTouchInput:Bu,Recognizer:Pl,AttrRecognizer:mu,Tap:Vu,Pan:du,Swipe:qu,Pinch:Au,Rotate:Xu,Press:Iu,on:Ns,off:Vs,each:Ps,merge:$s,extend:ks,assign:_s,inherit:Os,bindFn:Ls,prefixed:Zs}),Qu}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function mr(ca,ga,ya){var _a=ga.offsetWidth,_s=ga.offsetHeight,Ss=ga.getBoundingClientRect(),Ms=Ss.top,Es=Ss.left;return ya&&(Es+=_a*ya.left,Ms+=_s*(1-ya.bottom-ya.height),_a*=ya.width,_s*=ya.height),new r$1.Vector2((ca.x-Es)/_a*2-1,-(ca.y-Ms)/_s*2+1)}var yr=new r$1.OrthographicCamera(-1,1,1,-1,0,1),wr=new r$1.BufferGeometry;wr.setAttribute("position",new r$1.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),wr.setAttribute("uv",new r$1.Float32BufferAttribute([0,2,0,0,2,0],2));var br=new r$1.Mesh(wr),xr=new r$1.Scene;xr.add(br);var Er=function(){function ca(ga,ya){var _a;this.renderer=ga,this.material=new r$1.ShaderMaterial({vertexShader:(_a=ya.vertex)!==null&&_a!==void 0?_a:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:ya.fragment,uniforms:Object.assign({inputBuffer:new r$1.Uniform(null)},ya.uniforms),defines:Object.assign({},ya.defines),blending:r$1.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,ya){var _a=this.renderer.getRenderTarget(),_s=br.material;this.material.uniforms.inputBuffer.value=ga.texture,br.material=this.material,this.renderer.setRenderTarget(ya||null),this.renderer.render(xr,yr),this.renderer.setRenderTarget(_a),br.material=_s},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Ir=function(){function ca(ga){this.renderer=ga,this.material=new r$1.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$1.Uniform(new r$1.Vector3)}),blending:r$1.NoBlending,depthWrite:!1,depthTest:!1})}return ca.prototype.render=function(ga,ya){var _a=this.renderer.getRenderTarget(),_s=br.material;this.material.uniforms.inputValue.value.copy(ga),br.material=this.material,this.renderer.setRenderTarget(ya||null),this.renderer.render(xr,yr),this.renderer.setRenderTarget(_a),br.material=_s},ca.prototype.dispose=function(){this.material.dispose()},ca}(),Cr=function(ca){function ga(ya){return ca.call(this,ya,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return e$1.__extends(ga,ca),ga}(Er),Sr=function(){function ca(ga){this.enable=!0,this.renderer=ga,this.copyPass=new Cr(this.renderer)}return ca.prototype.render=function(ga,ya){this.copyPass.render(ga,ya)},ca.prototype.dispose=function(){this.copyPass.dispose()},ca}(),Br=function(ca){function ga(ya){var _a,_s=this;_s=ca.call(this)||this;var Ss=ga.parseArgs(ya);return _s.pending=!0,_s.userAction=Ss.initial[3],_s.destroyed=!1,_s.ident=Ss.ident,_s.scene=Ss.scene,_s.helper=Ss.helper,_s.camera=Ss.camera,_s.renderer=Ss.renderer,_s.scissor=Ss.scissor,_s.element=Ss.element,_s.model=Ss.model,_s.enableIOSEDR=(_a=Ss.enableIOSEDR)!==null&&_a!==void 0&&_a,_s.work=Ss.work,_s.imageOptions=Ss.imageOptions,_s.videoTexture=Ss.videoTexture,_s.networkSubscribe=Ss.networkSubscribe,_s.needsRender=!0,_s.maxFov=120,_s.minFov=40,_s.maxLatitude=+Math.PI/2,_s.minLatitude=-Math.PI/2,_s.cameraMotion=new fn({longitude:{value:_s.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:_s.camera.pose.latitude,fov:_s.camera.pose.fov}),_s.eventUnbinds=[Ss.element].concat(Ss.extraElements||[]).map(function(Ms){return _s.bindEvents(Ms)}),se.shared.add(function(){return _s.initAnimation.apply(_s,Ss.initial)},!0),_s}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){return e$1.__assign({},ya)},ga.initAnimationEndState=function(ya){var _a=this.parseArgs(ya);return{longitude:_a.camera.pose.longitude,latitude:_a.camera.pose.latitude,fov:_a.camera.pose.fov,offset:_a.camera.pose.offset.clone()}},ga.prototype.destroy=function(){var ya;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var _a=0,_s=this.eventUnbinds;_a<_s.length;_a++)(0,_s[_a])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(ya=this.pressState)===null||ya===void 0||ya.stop(),delete this.pressState},ga.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},ga.prototype.bindExtraElement=function(ya){for(var _a=0,_s=this.eventUnbinds;_a<_s.length;_a++)if(_s[_a].element===ya)return;this.eventUnbinds.push(this.bindEvents(ya))},ga.prototype.unbindExtraElement=function(ya){for(var _a=[],_s=0,Ss=this.eventUnbinds;_s<Ss.length;_s++){var Ms=Ss[_s];Ms.element===ya?Ms():_a.push(Ms)}this.eventUnbinds=_a},ga.prototype.updateRenderSize=function(){this.needsRender=!0},ga.prototype.updateModel=function(ya){this.model=ya,this.needsRender=!0},ga.prototype.updateWork=function(ya,_a,_s,Ss,Ms){return this.work=ya,this.userAction=Ms,!1},ga.prototype.updateTime=function(ya,_a){if(!this.destroyed){var _s={};this.cameraMotion.ended&&(this.cameraMotion.update(ya),_s.longitude=this.cameraMotion.value.longitude,_s.latitude=this.cameraMotion.value.latitude,_s.fov=this.cameraMotion.value.fov),fr(_s)&&this.setCamera(_s)}},ga.prototype.render=function(){this.renderer.render(this.scene,this.camera)},ga.prototype.postProcessing=function(ya,_a){this.destroyed||(this.effect||(this.effect=new Sr(this.renderer)),this.effect.render(ya,_a))},ga.prototype.updateCamera=function(ya,_a,_s){return this.userAction=_s,this.cameraMotion.set(ya,_a)},ga.prototype.getTargetPose=function(){var ya=this.cameraMotion.getKeyFrameSegment(Ht())[1];return{longitude:ya.value.longitude,latitude:ya.value.latitude,fov:ya.value.fov,offset:this.camera.pose.offset.clone()}},ga.prototype.moveToPano=function(ya,_a,_s){_a===void 0&&(_a={}),this.userAction=_s;var Ss={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};_a.moveStartCallback&&_a.moveStartCallback(ya,Ss),this.emit("moveToPano",ya,this.userAction),this.emit("panoWillArrive",ya,Ss,this.userAction),this.emit("panoArrived",ya,Ss,this.userAction),_a.moveEndCallback&&_a.moveEndCallback(ya,Ss)},ga.prototype.initAnimation=function(ya,_a,_s,Ss){this.pending=!1,this.userAction=Ss},ga.prototype.setCamera=function(ya){var _a,_s,Ss,Ms,Es;ya===void 0&&(ya={});var Cs=(_a=ya.longitude)!==null&&_a!==void 0?_a:this.camera.pose.longitude,Ts=(_s=ya.latitude)!==null&&_s!==void 0?_s:this.camera.pose.latitude,Bs=(Ss=ya.fov)!==null&&Ss!==void 0?Ss:this.camera.pose.fov,Is=(Ms=ya.distance)!==null&&Ms!==void 0?Ms:this.camera.pose.distance,Ps=(Es=ya.offset)!==null&&Es!==void 0?Es:this.camera.pose.offset,Rs=this.camera.position.clone(),ks=$n(Cs,this.camera.pose.longitude,2*Math.PI)||$n(Ts,this.camera.pose.latitude),$s=$n(Bs,this.camera.pose.fov),Os=$n(Is,this.camera.pose.distance),Ls=er(Ps,this.camera.pose.offset);this.camera.setFromPose({longitude:Cs,latitude:Ts,fov:Bs,distance:Is,offset:Ps});var Ds=er(Rs,this.camera.position);$s&&this.emit("cameraFovUpdate",Bs,this.userAction),ks&&this.emit("cameraDirectionUpdate",{longitude:Cs,latitude:Ts},this.userAction),Ds&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),($s||ks||Ls||Os)&&this.emit("cameraUpdate",{longitude:Cs,latitude:Ts,fov:Bs,offset:Ps},this.userAction),this.needsRender=!0,(He||ze.length!==0)&&(He&&clearTimeout(He),He=window.setTimeout(_e,200))},ga.prototype.onPanGesture=function(ya){var _a=this.panState,_s=ya.pointers.length;if(ya.isFinal?delete this.panState:this.panState={pointerLength:_s,x:ya.center.x,y:ya.center.y},_a!==void 0&&_a.pointerLength===_s){var Ss=ya.pointers.map(function(Ms){return ei(Ms,["x","y"])});this.emit("wantsGesture","pan",Ss,ya.isFinal)||this.emit("gesture","pan",Ss,ya.isFinal)}},ga.prototype.onTapGesture=function(ya){var _a=ya.pointers.map(function(_s){return ei(_s,["x","y"])});this.emit("wantsGesture","tap",_a,!0)||this.emit("gesture","tap",_a,!0)},ga.prototype.onPressGesture=function(ya,_a){var _s,Ss=[ya];if(this.emit("wantsGesture","press",Ss,_a))return(_s=this.pressState)===null||_s===void 0||_s.stop(),void delete this.pressState;this.emit("gesture","press",Ss,_a)},ga.prototype.onPinchGesture=function(ya){var _a=ya.pointers.map(function(_s){return ei(_s,["x","y"])});this.emit("wantsGesture","pinch",_a,ya.isFinal)||this.emit("gesture","pinch",_a,ya.isFinal)},ga.prototype.onMouseWheel=function(ya){var _a=(Math.abs(ya.deltaY)>Math.abs(ya.deltaX)?ya.deltaY:ya.deltaX)/-60,_s=[{x:ya.clientX,y:ya.clientY,delta:_a}];this.emit("wantsGesture","mouseWheel",_s,!1)||this.emit("gesture","mouseWheel",_s,!1)},ga.prototype.onMouseMove=function(ya){},ga.prototype.onMouseOut=function(){},ga.prototype.relativeClientPosition=function(ya){return mr(ya,this.element,this.scissor)},ga.prototype.bindEvents=function(ya){var _a=this,_s=function($s){var Os=mr($s,_a.element,_a.scissor);return!(Math.abs(Os.x)>1||Math.abs(Os.y)>1)},Ss=new vr.Manager(ya),Ms=function($s){return $s.session.firstInput||null};Ss.add(new vr.Pan({threshold:10,pointers:0})),Ss.add(new vr.Tap({interval:410})),Ss.add(new vr.Pinch({threshold:0,pointers:2}).recognizeWith(Ss.get("pan"))),Ss.on("panstart pan",function($s){var Os=Ms(Ss);Os&&!_s(Os.center)||(_a.onPanGesture($s),Rs())}),Ss.on("tap",function($s){var Os=Ms(Ss);Os&&!_s(Os.center)||(_a.onTapGesture($s),Rs())}),Ss.on("pinchstart pinch pinchend",function($s){var Os=Ms(Ss);Os&&!_s(Os.center)||(_a.onPinchGesture($s),Rs())});var Es=function($s){var Os={x:$s.clientX,y:$s.clientY};_s(Os)&&(_a.onMouseWheel($s),Rs())},Cs=function($s){if(!hr()){var Os={x:$s.clientX,y:$s.clientY};_s(Os)?(_a.onMouseMove($s),_a.pressState&&Math.abs($s.clientX-_a.pressState.x)>10&&Math.abs($s.clientY-_a.pressState.y)>10&&Rs()):_a.onMouseOut()}},Ts=function(){_a.onMouseOut(),Rs()},Bs=function($s,Os){if(_s($s)){_a.pressState={x:$s.x,y:$s.y,time:_a.pressState?_a.pressState.time:Os,stop:Lt};var Ls=Os-_a.pressState.time;_a.onPressGesture({x:$s.x,y:$s.y,delta:Ls},!1),_a.pressState&&(_a.pressState.stop=se.shared.add(function(Ds){return Bs({x:$s.x,y:$s.y},Ds)},!0,1))}else Rs()},Is=function($s){Rs(),$s.touches.length>1||$s.changedTouches.length<=0||Bs({x:$s.changedTouches[0].clientX,y:$s.changedTouches[0].clientY},Ht())},Ps=function($s){Rs(),Bs({x:$s.clientX,y:$s.clientY},Ht())},Rs=function(){var $s;if(_a.pressState){var Os=Ht()-_a.pressState.time;_a.onPressGesture({x:_a.pressState.x,y:_a.pressState.y,delta:Os},!0),($s=_a.pressState)===null||$s===void 0||$s.stop(),delete _a.pressState}},ks=function($s){if($s&&typeof $s.preventDefault=="function"&&$s.currentTarget===ya&&$s.preventDefault(),typeof getSelection=="function"){var Os=getSelection();Os&&Os.focusNode&&(Os.removeAllRanges&&Os.removeAllRanges(),Os.empty&&Os.empty())}};return ya.addEventListener("wheel",Es,!1),ya.addEventListener("mousemove",Cs,!1),ya.addEventListener("mouseout",Ts,!1),ya.addEventListener("touchstart",Is,!1),ya.addEventListener("touchend",Rs,!1),ya.addEventListener("touchcancel",Rs,!1),ya.addEventListener("mousedown",Ps,!1),ya.addEventListener("mouseup",Rs,!1),ya.addEventListener("touchstart",ks,!1),Object.assign(function(){Ss.destroy(),ya.removeEventListener("wheel",Es,!1),ya.removeEventListener("mousemove",Cs,!1),ya.removeEventListener("mouseout",Ts,!1),ya.removeEventListener("touchstart",Is,!1),ya.removeEventListener("touchend",Rs,!1),ya.removeEventListener("touchcancel",Rs,!1),ya.removeEventListener("mousedown",Ps,!1),ya.removeEventListener("mouseup",Rs,!1),ya.removeEventListener("touchstart",ks,!1)},{element:ya})},ga}(Ot),Mr=function(ca){function ga(ya){var _a,_s,Ss,Ms,Es=this,Cs=ga.parseArgs(ya);return(Es=ca.call(this,Cs)||this).defaultLongitude=Cs.defaultLongitude,Es.defaultLatitude=Cs.defaultLatitude,Es.defaultFov=Cs.defaultFov,Es.maxFov=Cs.maxFov,Es.minFov=Cs.minFov,Es.maxLatitude=Cs.maxLatitude,Es.minLatitude=Cs.minLatitude,Es.locationMotion=new fn({x:Es.camera.pose.offset.x,y:Es.camera.pose.offset.y,z:Es.camera.pose.offset.z,distance:Es.camera.pose.distance,modelAlpha:(_s=(_a=Es.model.getMaterial())===null||_a===void 0?void 0:_a.modelAlpha)!==null&&_s!==void 0?_s:0,perspToOrtho:(Ms=(Ss=Es.model.getMaterial())===null||Ss===void 0?void 0:Ss.perspToOrtho)!==null&&Ms!==void 0?Ms:0}),Es}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a,_s,Ss,Ms,Es,Cs,Ts,Bs=ca.parseArgs.call(this,ya);return e$1.__assign(e$1.__assign({},Bs),{defaultLongitude:(_a=ya.defaultLongitude)!==null&&_a!==void 0?_a:Math.PI/4,defaultLatitude:(_s=ya.defaultLatitude)!==null&&_s!==void 0?_s:Math.PI/4,defaultFov:(Ss=ya.defaultFov)!==null&&Ss!==void 0?Ss:80,maxFov:(Ms=ya.maxFov)!==null&&Ms!==void 0?Ms:120,minFov:(Es=ya.minFov)!==null&&Es!==void 0?Es:40,maxLatitude:(Cs=ya.maxLatitude)!==null&&Cs!==void 0?Cs:+Math.PI/2,minLatitude:(Ts=ya.minLatitude)!==null&&Ts!==void 0?Ts:-Math.PI/2})},ga.initAnimationEndPose=function(ya){var _a,_s,Ss,Ms=this.parseArgs(ya),Es=ya.initial[1];return{longitude:(_a=Es.longitude)!==null&&_a!==void 0?_a:Ms.defaultLongitude,latitude:cn((_s=Es.latitude)!==null&&_s!==void 0?_s:Ms.defaultLatitude,Ms.minLatitude,Ms.maxLatitude),fov:(Ss=Es.fov)!==null&&Ss!==void 0?Ss:Ms.defaultFov,offset:ya.model.bounding.getCenter(new r$1.Vector3)}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(ya,_a,_s,Ss,Ms){return this.work=ya,!0},ga.prototype.updateModel=function(ya){ca.prototype.updateModel.call(this,ya);var _a=ya.bounding.getCenter(new r$1.Vector3),_s=this.cameraDistance(ya);this.locationMotion.set({x:_a.x,y:_a.y,z:_a.z,distance:_s},0).catch(Lt)},ga.prototype.updateTime=function(ya,_a){if(!this.destroyed){var _s={},Ss={};this.locationMotion.ended||(this.locationMotion.update(ya),_s.modelAlpha=this.locationMotion.value.modelAlpha,_s.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ss.distance=this.locationMotion.value.distance,Ss.offset=new r$1.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(ya),Ss.longitude=this.cameraMotion.value.longitude,Ss.latitude=this.cameraMotion.value.latitude,Ss.fov=this.cameraMotion.value.fov),fr(_s)||this.model.setMaterial(_s),fr(Ss)||this.setCamera(Ss)}},ga.prototype.getTargetPose=function(){var ya=this.cameraMotion.getKeyFrameSegment(Ht())[1],_a=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:ya.value.longitude,latitude:ya.value.latitude,fov:ya.value.fov,offset:new r$1.Vector3(_a.value.x,_a.value.y,_a.value.z)}},ga.prototype.initAnimation=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts=this;if(!this.destroyed){this.pending=!1,this.userAction=Ss;var Bs=this.model.bounding.getCenter(new r$1.Vector3),Is={longitude:(Ms=_a.longitude)!==null&&Ms!==void 0?Ms:this.defaultLongitude,latitude:cn((Es=_a.latitude)!==null&&Es!==void 0?Es:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((Cs=_a.fov)!==null&&Cs!==void 0?Cs:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$1.Vector3)},Ps=this.cameraDistance(this.model),Rs=ei(Is,["longitude","latitude","fov"]),ks={x:Bs.x,y:Bs.y,z:Bs.z,distance:Ps,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",ya,Is,this.userAction),this.cameraMotion.set(Rs,_s).catch(Lt),this.locationMotion.set(ks,_s).then(function(){Ts.emit("initAnimationEnded",ya,Is,Ts.userAction)},function($s){var Os=gr(Ts.camera.pose);Ts.emit("initAnimationEnded",ya,Os,Ts.userAction)})}},ga.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},ga.prototype.cameraDistance=function(ya){var _a=ya.bounding,_s=this.camera.aspect,Ss=Math.pow(Math.pow(_a.max.x-_a.min.x+1,2)+Math.pow(_a.max.y-_a.min.y+1,2)+Math.pow(_a.max.z-_a.min.z+1,2),.5),Ms=Ss/2/Math.tan(Math.PI*this.defaultFov/360);return _s<1&&(Ms/=_s),isNaN(Ms)?Ss:Ms},ga.prototype.getForwardPanoIndexOrNot=function(ya){var _a=this.work.observers.filter(function(Es){return Es.active}),_s=this.model.intersectRaycaster(ya)[0];if(!_s)return null;var Ss=Ar(_a,function(Es){return Es.standingPosition.distanceTo(_s.point)},!0),Ms=Ss[0];return Ss[1]<5?this.work.observers.indexOf(Ms):null},ga.prototype.coordinatesForOffset=function(ya){var _a=this.renderer.getSize(new r$1.Vector2);return{longitude:2*ya.x/(_a.x*this.scissor.width),latitude:2*ya.y/(_a.y*this.scissor.height)}},ga.prototype.requestInteriaMovement=function(ya,_a){var _s=this;if(this.interiaMovement!==!1){for(var Ss=e$1.__assign({},ya),Ms={longitude:0,latitude:0},Es=0;Es<_a;Es++)Ss.longitude*=.996,Ss.latitude*=.994008,Ms.longitude+=Ss.longitude,Ms.latitude+=Ss.latitude;var Cs=sr(this.cameraMotion.value.longitude+Ms.longitude),Ts=cn(this.cameraMotion.value.latitude+Ms.latitude,this.minLatitude,this.maxLatitude),Bs={longitude:Cs,latitude:Ts,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Cs,latitude:Ts},0).catch(Lt);var Is=Ss.longitude>1e-4||Ss.longitude<-1e-4||Ss.latitude>1e-4||Ss.latitude<-1e-4;this.emit("interiaPan",Bs,!Is),Is?se.shared.add(function(Ps,Rs){_s.requestInteriaMovement(Ss,0|Rs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(ya){var _a=this.panState,_s=ya.pointers.length;if(ya.isFinal?delete this.panState:this.panState={pointerLength:_s,x:ya.center.x,y:ya.center.y},_a!==void 0&&_a.pointerLength===_s){var Ss=ya.pointers.map(function($s){return ei($s,["x","y"])});if(!this.emit("wantsGesture","pan",Ss,ya.isFinal)){var Ms={x:ya.center.x-_a.x,y:ya.center.y-_a.y},Es=this.relativeClientPosition(ya.center),Cs=this.camera.pose.latitude<Math.PI/6||Es.y<0?-1:1;Ms.x*=Cs;var Ts=this.coordinatesForOffset(Ms),Bs=sr(this.cameraMotion.value.longitude+Ts.longitude),Is=cn(this.cameraMotion.value.latitude+Ts.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(ya.overallVelocityX)>.2&&Math.atan2(Math.abs(ya.overallVelocityY),Math.abs(ya.overallVelocityX))<Math.PI/6.923&&(Is=this.cameraMotion.value.latitude);var Ps={longitude:Bs,latitude:Is,fov:this.camera.pose.fov,offset:this.camera.pose.offset};if(!this.emit("wantsPanGesture",Ps,ya.isFinal)&&(this.emit("gesture","pan",Ss,ya.isFinal),this.emit("panGesture",Ps,ya.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:Ps.longitude,latitude:Ps.latitude,fov:Ps.fov},0).catch(Lt),ya.isFinal&&!this.emit("wantsInteriaPan",Ps))){this.interiaMovement=!0;var Rs=ya.velocityX*Cs,ks=ya.velocityY;this.requestInteriaMovement(this.coordinatesForOffset({x:Rs,y:ks}),0)}}}},ga.prototype.onPinchGesture=function(ya){var _a,_s=(_a=this.pinchState)===null||_a===void 0?void 0:_a.fov,Ss=!1;if(ya.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ya.type==="pinchend"&&(Ss=!0,delete this.panState,delete this.pinchState),_s!==void 0){var Ms=ya.pointers.map(function(Cs){return ei(Cs,["x","y"])});if(!this.emit("wantsGesture","pinch",Ms,Ss)){var Es=cn(_s/ya.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",ya.scale,Es,Ss)||this.emit("wantsChangeCameraFov",Es)||(this.emit("gesture","pinch",Ms,Ss),this.emit("pinchGesture",ya.scale,Es,Ss),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Es},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(ya){var _a=this,_s=(Math.abs(ya.deltaY)>Math.abs(ya.deltaX)?ya.deltaY:ya.deltaX)/-60,Ss=[{x:ya.clientX,y:ya.clientY,delta:_s}];if(!this.emit("wantsGesture","mouseWheel",Ss,!1)){var Ms=this.minFov,Es=this.maxFov,Cs=cn(this.camera.fov-_s,Ms,Es);this.emit("wantsMouseWheel",_s,Cs,!1)||this.emit("wantsChangeCameraFov",Cs)||(this.emit("gesture","mouseWheel",Ss,!1),this.emit("mouseWheel",_s,Cs,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Cs},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete _a.mouseWheelState,_a.emit("wantsGesture","mouseWheel",Ss,!0)||_a.emit("wantsMouseWheel",_s,Cs,!0)||(_a.emit("gesture","mouseWheel",Ss,!0),_a.emit("mouseWheel",0,Cs,!0))},200)})}},ga.prototype.onTapGesture=function(ya){var _a=ya.pointers.map(function(Cs){return ei(Cs,["x","y"])});if(!this.emit("wantsGesture","tap",_a,!0)){var _s=this.relativeClientPosition(ya.center),Ss=new r$1.Raycaster;if(Ss.setFromCamera(_s,this.camera),!this.emit("wantsTapGesture",Ss,_s,!0)){this.emit("gesture","tap",_a,!0),this.emit("tapGesture",Ss,_s,!0),this.interiaMovement=!1;var Ms=this.getForwardPanoIndexOrNot(Ss);if(!qi(Ms)){this.emit("panoSelected",Ms);var Es={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",Ms,Es,!0)}}}},ga.prototype.onPressGesture=function(ya,_a){var _s,Ss,Ms=[ya];if(this.emit("wantsGesture","press",Ms,_a))return(_s=this.pressState)===null||_s===void 0||_s.stop(),void delete this.pressState;var Es=this.relativeClientPosition(ya),Cs=new r$1.Raycaster;if(Cs.setFromCamera(Es,this.camera),this.emit("wantsPressGesture",Cs,Es,ya.delta,_a))return(Ss=this.pressState)===null||Ss===void 0||Ss.stop(),void delete this.pressState;this.emit("gesture","press",Ms,_a),this.emit("pressGesture",Cs,Es,ya.delta,_a)},ga}(Br),Pr=function(ca){function ga(ya){var _a=ga.parseArgs(ya);return ca.call(this,_a)||this}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a=[ya.initial[0],e$1.__assign(e$1.__assign({},ya.initial[1]),{longitude:0,latitude:Math.PI/2}),ya.initial[2],ya.initial[3]],_s=e$1.__assign(e$1.__assign({},ya),{initial:_a,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return ca.parseArgs.call(this,_s)},ga.initAnimationEndPose=function(ya){var _a=this.parseArgs(ya);return ca.initAnimationEndPose.call(this,_a)},ga.prototype.updateModel=function(ya){this.model=ya,this.needsRender=!0;var _a=ya.bounding.getCenter(new r$1.Vector3);this.locationMotion.set({x:_a.x,y:_a.y,z:_a.z,distance:this.cameraDistance(ya)},0).catch(Lt)},ga.prototype.initAnimation=function(ya,_a,_s,Ss){var Ms,Es=this;if(!this.destroyed){this.pending=!1,this.userAction=Ss;var Cs=this.model.bounding.getCenter(new r$1.Vector3),Ts={longitude:0,latitude:Math.PI/2,fov:cn((Ms=_a.fov)!==null&&Ms!==void 0?Ms:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$1.Vector3)},Bs=this.cameraDistance(this.model),Is=ei(Ts,["longitude","latitude","fov"]),Ps={x:Cs.x,y:Cs.y,z:Cs.z,distance:Bs,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(Is,_s).catch(Lt),this.locationMotion.set(Ps,_s).then(function(){Es.emit("initAnimationEnded",ya,Ts,Es.userAction)},function(Rs){var ks=gr(Es.camera.pose);Es.emit("initAnimationEnded",ya,ks,Es.userAction)})}},ga.prototype.getZoomOffsetFromFov=function(ya,_a,_s){var Ss=new r$1.Vector3(0,-1,0),Ms=Math.tan(_s/2*Math.PI/180),Es=Math.tan(_a.fov/2*Math.PI/180),Cs=(Es-Ms)/Es,Ts=new r$1.Raycaster;Ts.setFromCamera(ya,_a);var Bs=Ts.ray.direction,Is=Bs.angleTo(Ss),Ps=this.cameraDistance(this.model),Rs=Ps*Math.tan(Is),ks=Bs.clone().setLength(Ps*Math.cos(Is)).projectOnPlane(Ss),$s=ks.length(),Os=Cs/$s*ks.x*Rs,Ls=Cs/$s*ks.z*Rs;return new r$1.Vector3(Os,0,Ls)},ga.prototype.requestInteriaMovement=function(ya,_a){},ga.prototype.onPanGesture=function(ya){var _a=this.renderer.getSize(new r$1.Vector2),_s=this.panState,Ss=ya.pointers.length;if(ya.isFinal?delete this.panState:this.panState={pointerLength:Ss,x:ya.center.x,y:ya.center.y},_s!==void 0&&_s.pointerLength===Ss){var Ms=ya.pointers.map(function(Os){return ei(Os,["x","y"])});if(!this.emit("wantsGesture","pan",Ms,ya.isFinal)){var Es=ya.center.x-_s.x,Cs=ya.center.y-_s.y,Ts=new r$1.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Bs=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);Ts.add(function(Os,Ls){var Ds=new r$1.Vector3;return Ds.setFromMatrixColumn(Ls,0),Ds.multiplyScalar(-Os),Ds}(2*Es*Bs/_a.y,this.camera.matrix)),Ts.add(function(Os,Ls,Ds){var Fs=new r$1.Vector3;return Fs.setFromMatrixColumn(Ds,0),Fs.crossVectors(Ls,Fs),Fs.multiplyScalar(Os),Fs}(2*Cs*Bs/_a.y,this.camera.up,this.camera.matrix));var Is=this.model.bounding,Ps=Is.getCenter(new r$1.Vector3),Rs=(Is.max.x-Is.min.x)/this.defaultFov*this.cameraMotion.value.fov,ks=(Is.max.y,Is.min.y,this.defaultFov,this.cameraMotion.value.fov,(Is.max.z-Is.min.z)/this.defaultFov*this.cameraMotion.value.fov);Ts.x=cn(Ts.x,Ps.x-Rs,Ps.x+Rs),Ts.z=cn(Ts.z,Ps.z-ks,Ps.z+ks),Ts.y=Ps.y;var $s={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:Ts};this.emit("wantsPanGesture",$s,ya.isFinal)||(this.emit("gesture","pan",Ms,ya.isFinal),this.emit("panGesture",$s,ya.isFinal),this.userAction=!0,this.locationMotion.set({x:Ts.x,y:Ts.y,z:Ts.z},0).catch(Lt))}}},ga.prototype.onPinchGesture=function(ya){var _a,_s=(_a=this.pinchState)===null||_a===void 0?void 0:_a.fov,Ss=!1;if(ya.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ya.type==="pinchend"&&(Ss=!0,delete this.panState,delete this.pinchState),_s!==void 0){var Ms=ya.pointers.map(function(Is){return ei(Is,["x","y"])});if(!this.emit("wantsGesture","pinch",Ms,Ss)){var Es=cn(_s/ya.scale,this.minFov,this.maxFov),Cs=this.relativeClientPosition({x:ya.center.x,y:ya.center.y}),Ts=this.getZoomOffsetFromFov(Cs,this.camera,Es),Bs=this.camera.pose.offset.clone().add(Ts);this.emit("wantsPinchGesture",ya.scale,Es,Ss)||this.emit("wantsChangeCameraFov",Es)||(this.emit("gesture","pinch",Ms,Ss),this.emit("pinchGesture",ya.scale,Es,Ss),this.userAction=!0,this.locationMotion.set({x:Bs.x,y:Bs.y,z:Bs.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Es},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(ya){var _a=this,_s=(Math.abs(ya.deltaY)>Math.abs(ya.deltaX)?ya.deltaY:ya.deltaX)/-60,Ss=[{x:ya.clientX,y:ya.clientY,delta:_s}];if(!this.emit("wantsGesture","mouseWheel",Ss,!1)){var Ms=cn(this.cameraMotion.value.fov-_s,this.minFov,this.maxFov),Es=this.relativeClientPosition({x:ya.clientX,y:ya.clientY}),Cs=this.getZoomOffsetFromFov(Es,this.camera,Ms),Ts=this.camera.pose.offset.clone().add(Cs);this.emit("wantsMouseWheel",_s,Ms,!1)||this.emit("wantsChangeCameraFov",Ms)||(this.emit("gesture","mouseWheel",Ss,!1),this.emit("mouseWheel",_s,Ms,!1),this.userAction=!0,this.locationMotion.set({x:Ts.x,y:Ts.y,z:Ts.z},0).catch(Lt),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:Ms},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete _a.mouseWheelState,_a.emit("wantsGesture","mouseWheel",Ss,!0)||_a.emit("wantsMouseWheel",_s,Ms,!0)||_a.emit("wantsChangeCameraFov",Ms)||(_a.emit("gesture","mouseWheel",Ss,!0),_a.emit("mouseWheel",0,Ms,!0))},200)})}},ga}(Mr);function Tr(ca,ga){ga===void 0&&(ga=!1);var ya=typeof ca;if(ya==="string")return JSON.stringify(ca);if(ca===!0)return"true";if(ca===!1)return"false";if(ca===null)return"null";if(ca instanceof Array){for(var _a="[",_s=ca.length-1,Ss=0;Ss<_s;Ss++)_a+=Tr(ca[Ss],!1)+",";return _s>-1&&(_a+=Tr(ca[Ss],!1)),_a+"]"}if(ca instanceof Object){if(typeof ca.toJSON=="function")return Tr(ca.toJSON(),ga);var Ms=Object.keys(ca).sort(),Es=Ms.length;for(_a="",Ss=0;Ss<Es;){var Cs=Ms[Ss],Ts=Tr(ca[Cs],!0);Ts!==void 0&&(Ss&&_a!==""&&(_a+=","),_a+=JSON.stringify(Cs)+":"+Ts),Ss++}return"{"+_a+"}"}switch(ya){case"function":case"undefined":return ga?void 0:null;case"number":return ca;default:return isFinite(ca)?ca:null}}function Qr(ca){return Pt(String(Tr(ca,!1)))}var Rr,Dr=function(ca){function ga(ya){var _a=this,_s=ga.parseArgs(ya);return(_a=ca.call(this,_s)||this).defaultLongitude=_s.defaultLongitude,_a.defaultLatitude=_s.defaultLongitude,_a.defaultFov=_s.defaultFov,_a.maxFov=_s.maxFov,_a.minFov=_s.minFov,_a.maxLatitude=_s.maxLatitude,_a.minLatitude=_s.minLatitude,_a.moveSpeed=_s.moveSpeed,_a.intersectMeshCreator=_s.intersectMeshCreator,_a.interiaMovement=!1,_a.intersectMesh=_a.intersectMeshCreator(),_a.intersectMesh.name="intersect",_a.intersectMesh.visible=!1,_a.helper.add(_a.intersectMesh),_a}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps=ca.parseArgs.call(this,ya);return e$1.__assign(e$1.__assign({},Ps),{defaultLongitude:(_a=ya.defaultLongitude)!==null&&_a!==void 0?_a:0,defaultLatitude:(_s=ya.defaultLatitude)!==null&&_s!==void 0?_s:0,defaultFov:(Ss=ya.defaultFov)!==null&&Ss!==void 0?Ss:90,maxFov:(Ms=ya.maxFov)!==null&&Ms!==void 0?Ms:120,minFov:(Es=ya.minFov)!==null&&Es!==void 0?Es:40,maxLatitude:(Cs=ya.maxLatitude)!==null&&Cs!==void 0?Cs:+Math.PI/2,minLatitude:(Ts=ya.minLatitude)!==null&&Ts!==void 0?Ts:-Math.PI/2,moveSpeed:(Bs=ya.moveSpeed)!==null&&Bs!==void 0?Bs:3.2,intersectMeshCreator:(Is=ya.intersectMeshCreator)!==null&&Is!==void 0?Is:function(){return new Xn}})},ga.initAnimationEndPose=function(ya){var _a,_s,Ss,Ms=this.parseArgs(ya),Es=ya.initial,Cs=Es[0],Ts=Es[1];return{longitude:(_a=Ts.longitude)!==null&&_a!==void 0?_a:Ms.defaultLongitude,latitude:cn((_s=Ts.latitude)!==null&&_s!==void 0?_s:Ms.defaultLatitude,Ms.minLatitude,Ms.maxLatitude),fov:cn((Ss=Ts.fov)!==null&&Ss!==void 0?Ss:Ms.defaultFov,Ms.minFov,Ms.maxFov),offset:Ms.work.observers[Cs].position.clone()}},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},ga.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&ca.prototype.isReady.call(this)},ga.prototype.calculateMovingDuration=function(ya,_a){switch(typeof ya){case"function":return ya(_a,this.moveSpeed);case"number":return ya;case"string":return Number(ya);default:return Math.floor(Math.max(Math.min(_a/this.moveSpeed*1e3,1500),500))}},ga.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},ga.prototype.coordinatesForOffset=function(ya){var _a=this.cameraMotion.value.fov,_s=this.camera.aspect,Ss=this.renderer.getSize(new r$1.Vector2);return{longitude:2*ya.x/(Ss.x*this.scissor.width)*_a/95*_s,latitude:-2*ya.y/(Ss.y*this.scissor.height)*_a/95}},ga.prototype.cameraBounce=function(){var ya=this.cameraMotion.value,_a=ya.longitude,_s=ya.latitude,Ss=ya.fov,Ms=[{progress:0,value:{longitude:_a,latitude:_s,fov:Ss}},{progress:.5,value:{longitude:_a,latitude:_s,fov:.98*Ss}},{progress:1,value:{longitude:_a,latitude:_s,fov:Ss}}];this.cameraMotion.setKeyframes(Ms,500).catch(Lt)},ga.prototype.requestInteriaMovement=function(ya,_a){var _s=this;if(this.interiaMovement!==!1){for(var Ss=e$1.__assign({},ya),Ms={longitude:0,latitude:0},Es=0;Es<_a;Es++)Ss.longitude*=.996,Ss.latitude*=.98604,Ms.longitude+=Ss.longitude,Ms.latitude+=Ss.latitude;var Cs=sr(this.cameraMotion.value.longitude+Ms.longitude),Ts=cn(this.cameraMotion.value.latitude+Ms.latitude,this.minLatitude,this.maxLatitude),Bs={longitude:Cs,latitude:Ts,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:Cs,latitude:Ts},0).catch(Lt);var Is=Ss.longitude>1e-4||Ss.longitude<-1e-4||Ss.latitude>1e-4||Ss.latitude<-1e-4;this.emit("interiaPan",Bs,!Is),Is?se.shared.add(function(Ps,Rs){_s.requestInteriaMovement(Ss,0|Rs)},!0,1):this.interiaMovement=!1}},ga.prototype.onPanGesture=function(ya){var _a=this.panState,_s=ya.pointers.length;if(ya.isFinal?delete this.panState:this.panState={pointerLength:_s,x:ya.center.x,y:ya.center.y},_a!==void 0&&_a.pointerLength===_s){var Ss=ya.pointers.map(function(ks){return ei(ks,["x","y"])});if(!this.emit("wantsGesture","pan",Ss,ya.isFinal)){var Ms={x:ya.center.x-_a.x,y:ya.center.y-_a.y},Es=this.coordinatesForOffset(Ms),Cs=sr(this.cameraMotion.value.longitude+Es.longitude),Ts=cn(this.cameraMotion.value.latitude+Es.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(ya.overallVelocityX)>.2&&Math.atan2(Math.abs(ya.overallVelocityY),Math.abs(ya.overallVelocityX))<Math.PI/6.923&&(Ts=this.cameraMotion.value.latitude);var Bs={longitude:Cs,latitude:Ts,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",Bs,ya.isFinal)){this.emit("gesture","pan",Ss,ya.isFinal),this.emit("panGesture",Bs,ya.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var Is={longitude:Bs.longitude,latitude:Bs.latitude,fov:Bs.fov};if(this.cameraMotion.set(Is,0).catch(Lt),ya.isFinal&&!this.emit("wantsInteriaPan",Bs)){this.interiaMovement=!0;var Ps=ya.velocityX,Rs=.6*ya.velocityY;Math.abs(Rs)>.5&&Math.abs(Ps)<.5&&(Ps=0),this.requestInteriaMovement(this.coordinatesForOffset({x:Ps,y:Rs}),0)}}}}},ga.prototype.onPinchGesture=function(ya){var _a,_s=(_a=this.pinchState)===null||_a===void 0?void 0:_a.fov,Ss=ya.scale,Ms=!1;if(ya.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ya.type==="pinchend"&&(Ms=!0,delete this.panState,delete this.pinchState),_s!==void 0){var Es=ya.pointers.map(function(Ts){return ei(Ts,["x","y"])});if(!this.emit("wantsGesture","pinch",Es,Ms)){var Cs=cn(_s/Ss,this.minFov,this.maxFov);this.emit("wantsPinchGesture",Ss,Cs,Ms)||this.emit("wantsChangeCameraFov",Cs)||(this.emit("gesture","pinch",Es,Ms),this.emit("pinchGesture",Ss,Cs,Ms),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Cs},0).catch(Lt))}}},ga.prototype.onMouseWheel=function(ya){var _a=this,_s=(Math.abs(ya.deltaY)>Math.abs(ya.deltaX)?ya.deltaY:ya.deltaX)/-60,Ss=[{x:ya.clientX,y:ya.clientY,delta:_s}];if(!this.emit("wantsGesture","mouseWheel",Ss,!1)){var Ms=cn(this.cameraMotion.value.fov-_s,this.minFov,this.maxFov);this.emit("wantsMouseWheel",_s,Ms,!1)||this.emit("wantsChangeCameraFov",Ms)||(this.emit("gesture","mouseWheel",Ss,!1),this.emit("mouseWheel",_s,Ms,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:Ms},0).catch(Lt),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete _a.mouseWheelState,_a.emit("wantsGesture","mouseWheel",Ss,!0)||_a.emit("wantsMouseWheel",_s,Ms,!0)||_a.emit("wantsChangeCameraFov",Ms)||(_a.emit("gesture","mouseWheel",Ss,!0),_a.emit("mouseWheel",0,Ms,!0))},200)})}},ga.prototype.onMouseMove=function(ya){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var _a=this.relativeClientPosition({x:ya.clientX,y:ya.clientY}),_s=new r$1.Raycaster;if(_s.setFromCamera(_a,this.camera),this.emit("wantsShowIntersectionOnModel",_s))this.hideIntersectMesh();else{var Ss=this.model.intersectRaycaster(_s)[0];if(Ss&&Ss.face){var Ms=Ss.face.normal,Es=Ms.clone().multiplyScalar(.05),Cs=Ss.point.clone().add(Es);this.intersectMesh.position.copy(Cs);var Ts=Cs.clone().add(Es);if(this.intersectMesh.lookAt(Ts),Math.abs(Ms.y)>.99){var Bs=this.camera.position.clone().sub(Cs);this.intersectMesh.rotation.z=-Math.atan2(Bs.z,Bs.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",Ss,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:ya.clientX,clientY:ya.clientY}}}},ga.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},ga.prototype.onPressGesture=function(ya,_a){var _s,Ss,Ms=[ya];if(this.emit("wantsGesture","press",Ms,_a))return(_s=this.pressState)===null||_s===void 0||_s.stop(),void delete this.pressState;var Es=this.relativeClientPosition(ya),Cs=new r$1.Raycaster;if(Cs.setFromCamera(Es,this.camera),this.emit("wantsPressGesture",Cs,Es,ya.delta,_a))return(Ss=this.pressState)===null||Ss===void 0||Ss.stop(),void delete this.pressState;this.emit("gesture","press",Ms,_a),this.emit("pressGesture",Cs,Es,ya.delta,_a)},ga}(Br),kr,Nr=function(ca){function ga(ya,_a){return _a===void 0&&(_a=.5),ca.call(this,ya,{uniforms:{inputBuffer:new r$1.Uniform(null),scale:new r$1.Uniform(_a)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return e$1.__extends(ga,ca),ga}(Er),Fr=function(ca){function ga(ya,_a){_a===void 0&&(_a=.002);var _s=ca.call(this,ya,{uniforms:{targetBuffer:new r$1.Uniform(null),inputBuffer:new r$1.Uniform(null),step:new r$1.Uniform(_a)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return _s.material.extensions.shaderTextureLOD=!0,_s}return e$1.__extends(ga,ca),Object.defineProperty(ga.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(ya){this.material.uniforms.targetBuffer.value=ya},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(ya){this.material.uniforms.step.value=ya},enumerable:!1,configurable:!0}),ga}(Er),Or=function(ca){function ga(ya){var _a=ca.call(this,ya,{uniforms:{inputBuffer:new r$1.Uniform(null),luminanceAdaptiveBuffer:new r$1.Uniform(null),progress:new r$1.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 1.5;
          float whitePoint = 13.0;
          float exposure = 1.4;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return _a.material.transparent=!0,_a}return e$1.__extends(ga,ca),Object.defineProperty(ga.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(ya){this.material.uniforms.luminanceAdaptiveBuffer.value=ya},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(ya){this.material.uniforms.progress.value=ya},enumerable:!1,configurable:!0}),ga}(Er),Lr=function(ca){function ga(ya){var _a=ca.call(this,ya)||this;return _a.enableTime=Ht(),_a.renderer=ya,_a.valuePass=new Ir(_a.renderer),_a.luminancePass=new Nr(_a.renderer,Math.sqrt(1/3)),_a.nextStepPass=new Fr(_a.renderer,.01),_a.luminanceAdaptivePass=new Or(_a.renderer),_a}return e$1.__extends(ga,ca),ga.prototype.render=function(ya,_a){if(!this.enable)return this.enableTime=null,void this.copyPass.render(ya);this.enableTime===null&&(this.enableTime=Ht()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$1.WebGLRenderTarget(128,128,{minFilter:r$1.LinearMipmapLinearFilter,magFilter:r$1.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$1.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(ya,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$1.WebGLRenderTarget(1,1,{minFilter:r$1.NearestFilter,magFilter:r$1.NearestFilter,type:r$1.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$1.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$1.WebGLRenderTarget(1,1,{minFilter:r$1.NearestFilter,magFilter:r$1.NearestFilter,type:r$1.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$1.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Ht()-this.enableTime)/100,1),this.luminanceAdaptivePass.render(ya,_a)},ga.prototype.dispose=function(){var ya,_a,_s;(ya=this.luminanceTargetBuffer)===null||ya===void 0||ya.dispose(),(_a=this.luminancePrevBuffer)===null||_a===void 0||_a.dispose(),(_s=this.luminanceNextBuffer)===null||_s===void 0||_s.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},ga}(Sr),Vr=["up","down","left","right","front","back"],Hr=(kr=Math.SQRT1_2)!==null&&kr!==void 0?kr:Math.sqrt(2),Kr={up:new r$1.Quaternion(Hr,0,0,Hr),down:new r$1.Quaternion(-Hr,0,0,Hr),left:new r$1.Quaternion(0,Hr,0,Hr),right:new r$1.Quaternion(0,-Hr,0,Hr),front:new r$1.Quaternion(0,0,0,1),back:new r$1.Quaternion(0,1,0,0)},zr=new r$1.Quaternion().setFromAxisAngle(new r$1.Vector3(0,1,0),Math.PI),qr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),_r=new Float32Array([0,0,1,0,0,1,1,1]),jr=new Uint8Array([0,1,2,1,3,2]),Ur=new r$1.BufferGeometry;Ur.setAttribute("position",new r$1.BufferAttribute(qr,3)),Ur.setAttribute("uv",new r$1.BufferAttribute(_r,2)),Ur.setIndex(new r$1.BufferAttribute(jr,1));var Gr=function(ca){function ga(){var ya=ca.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return ya.depthTest=!1,ya.depthWrite=!1,ya.blending=r$1.NoBlending,ya.map=ya.uniforms.map.value,ya.luminanceMap=ya.uniforms.luminanceMap.value,Object.defineProperties(ya,{map:{get:function(){return this.uniforms.map.value},set:function(_a){this.uniforms.map.value=_a}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(_a){this.uniforms.luminanceMap.value=_a,this.defines.USE_LUMINANCE=_a!==null,this.needsUpdate=!0}}}),ya}return e$1.__extends(ga,ca),ga}(r$1.ShaderMaterial),Wr=function(ca){function ga(){var ya=ca!==null&&ca.apply(this,arguments)||this;return ya.level=0,ya.sideCount=0,ya.col=0,ya.row=0,ya.index=0,ya.type="up",ya}return e$1.__extends(ga,ca),ga}(r$1.Box3),Xr=function(ca){function ga(ya,_a){var _s=this,Ss=new Gr;return Ss.visible=!1,(_s=ca.call(this,Ur,Ss)||this).position.copy(ya.getCenter(new r$1.Vector3)),_s.quaternion.copy(Kr[ya.type]),_s.scale.setScalar(1/Math.pow(2,ya.level)),_s.level=ya.level,_s.activeTime=-1,_s.disposed=!1,_s.needsRender=!1,_s.frustumCulled=!1,_a.then(function(Ms){var Es=Ms[0],Cs=Ms[1];_s.disposed?(Es.dispose(),Cs==null||Cs.dispose()):(_s.material.map=Es,_s.material.luminanceMap=Cs,_s.material.needsUpdate=!0,_s.material.visible=!0)}).catch(Lt),_s}return e$1.__extends(ga,ca),ga.getBox=function(ya,_a,_s){var Ss=new Wr,Ms=Math.pow(2,ya),Es=1/Ms,Cs=_s%Ms,Ts=Math.floor(_s/Ms);switch(Ss.level=ya,Ss.index=_s,Ss.sideCount=Ms,Ss.row=Ts,Ss.col=Cs,Ss.type=_a,_a){case"up":Ss.min.y=.5,Ss.max.y=.5,Ss.min.x=+Cs*Es-.5,Ss.max.x=+Cs*Es-.5+Es,Ss.min.z=-Ts*Es+.5-Es,Ss.max.z=-Ts*Es+.5;break;case"down":Ss.min.y=-.5,Ss.max.y=-.5,Ss.min.x=+Cs*Es-.5,Ss.max.x=+Cs*Es-.5+Es,Ss.min.z=+Ts*Es-.5,Ss.max.z=+Ts*Es-.5+Es;break;case"left":Ss.min.x=-.5,Ss.max.x=-.5,Ss.min.z=-Cs*Es+.5-Es,Ss.max.z=-Cs*Es+.5,Ss.min.y=-Ts*Es+.5-Es,Ss.max.y=-Ts*Es+.5;break;case"right":Ss.min.x=.5,Ss.max.x=.5,Ss.min.z=+Cs*Es-.5,Ss.max.z=+Cs*Es-.5+Es,Ss.min.y=-Ts*Es+.5-Es,Ss.max.y=-Ts*Es+.5;break;case"front":Ss.min.z=-.5,Ss.max.z=-.5,Ss.min.x=+Cs*Es-.5,Ss.max.x=+Cs*Es-.5+Es,Ss.min.y=-Ts*Es+.5-Es,Ss.max.y=-Ts*Es+.5;break;case"back":Ss.min.z=.5,Ss.max.z=.5,Ss.min.x=-Cs*Es+.5-Es,Ss.max.x=-Cs*Es+.5,Ss.min.y=-Ts*Es+.5-Es,Ss.max.y=-Ts*Es+.5}return Ss},ga.prototype.updateTime=function(ya){},ga.prototype.dispose=function(){var ya;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(ya=this.material.luminanceMap)===null||ya===void 0||ya.dispose()),this.material.dispose()},ga}(r$1.Mesh),Yr=function(ca){function ga(){var ya=ca.call(this)||this;return ya.needsRender=!1,ya.name="tiling",ya}return e$1.__extends(ga,ca),ga}(r$1.Group),Zr=function(){function ca(ga,ya){this.disposed=!1,this.textureLoader=new Ii(ga),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=ya,this.object=new Yr}return ca.prototype.setAllowHosts=function(ga){this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.cleanup=function(){for(var ga=0;ga<this.tiles.length;ga++)if(this.tiles[ga]){var ya=this.tiles[ga],_a="level-group:"+ga,_s=this.object.getObjectByName(_a);for(var Ss in ya){var Ms=ya[Ss];Ms.dispose(),_s.remove(Ms),delete ya[Ss],this.object.needsRender=!0}}},ca.prototype.setRotation=function(ga){if(!this.disposed){var ya=new r$1.Quaternion().multiplyQuaternions(ga,zr);this.object.quaternion.equals(ya)||(this.object.quaternion.copy(ya),this.object.needsRender=!0)}},ca.prototype.setPosition=function(ga){this.disposed||this.object.position.equals(ga)||(this.object.position.copy(ga),this.object.needsRender=!0)},ca.prototype.setResource=function(ga){if(!this.disposed&&this.resource!==ga){this.cleanup(),this.resource=ga;for(var ya=0;ya<ga.length;ya++){var _a=ga[ya].level;this.tiles[_a]={};var _s="level-group:"+_a,Ss=this.object.getObjectByName(_s);Ss||((Ss=new r$1.Group).name=_s,Ss.renderOrder=-2),this.object.add(Ss)}this.object.needsRender=!0}},ca.prototype.setLuminance=function(ga){this.luminance=ga},ca.prototype.getTileResources=function(ga){for(var ya,_a=(ya=this.imageOptions.size)!==null&&ya!==void 0?ya:2048,_s=[],Ss=this.resource.length-1;Ss>=0;Ss--)this.resource[Ss].level<=ga&&512*Math.pow(2,this.resource[Ss].level)>_a&&_s.unshift(this.resource[Ss]);return _s},ca.prototype.update=function(ga,ya,_a){var _s=this;if(!this.disposed){this.level=ya;var Ss=new r$1.PerspectiveCamera().copy(ga);Ss.position.set(0,0,0),Ss.quaternion.premultiply(this.object.quaternion.clone().inverse()),Ss.updateMatrixWorld(!0),Ss.updateProjectionMatrix();for(var Ms=Ss.getWorldDirection(new r$1.Vector3),Es=new r$1.Frustum().setFromProjectionMatrix(new r$1.Matrix4().multiplyMatrices(Ss.projectionMatrix,Ss.matrixWorldInverse)),Cs=this.getTileResources(ya),Ts=function(Os){if(Os){for(var Ls=[],Ds=Os.level,Fs=Math.pow(2,Ds),Ns=Fs*Fs,Vs=Bs.object.getObjectByName("level-group:"+Ds),Gs=0,Us=Vr;Gs<Us.length;Gs++)for(var zs=Us[Gs],Hs=0;Hs<Ns;Hs++){var Qs=Xr.getBox(Ds,zs,Hs);Es.intersectsBox(Qs)&&Ls.push(Qs)}Ls.sort(function(Du,Gu){return Du.getCenter(new r$1.Vector3).angleTo(Ms)-Gu.getCenter(new r$1.Vector3).angleTo(Ms)});for(var js=[],Zs=0,Ks=Ls;Zs<Ks.length;Zs++){var Ys=(Qs=Ks[Zs]).sideCount,qs=Qs.row,eu=Qs.col,Js=(zs=Qs.type,"tile-level:".concat(Ds,"-face:").concat(zs,"-row:").concat(qs,"-col:").concat(eu));if(!Bs.tiles[Ds][Js]){var Xs=Os[zs],ru=Os.size,su=ru/Ys,lu=[su*eu,su*qs,su,su],cu=e$1.__assign({key:"pano_tile.".concat(Bs.panoIndex,".").concat(zs,".").concat(Ds,".").concat(qs,".").concat(eu),basisLoaderInitialized:xi.isInitialized(),cut:lu},ei(Bs.imageOptions,["format","mappings"]));Ds<=1&&(cu.format==="jpg"||/\.jpg$/.test(Xs))?(su!==1024&&(cu.size=1024),cu.quality=70):su!==512&&(cu.size=512);var xu=Bs.imageOptions.transform?Bs.imageOptions.transform(Xs,cu):he(Xs,cu),bu=Bs.textureLoader.load(xu,{preInit:!0}).then(function(Du){return Du.body}),yu=null;if(Bs.luminance){var fu=Bs.luminance[zs],gu=fu.match(/\/cube_(\d+)\//),Su=!!gu&&Number(gu[1]);if(Su!==!1){var wu=ru/Su,vu=e$1.__assign(e$1.__assign({},cu),{size:256,cut:[lu[0]/wu,lu[1]/wu,lu[2]/wu,lu[3]/wu],key:"pano_tile_luminance.".concat(Bs.panoIndex,".").concat(zs,".").concat(Ds,".").concat(qs,".").concat(eu)}),pu=Bs.imageOptions.transform?Bs.imageOptions.transform(fu,vu):he(fu,vu);yu=Bs.textureLoader.load(pu,{format:r$1.LuminanceFormat,preInit:!0}).then(function(Du){return Du.body}).catch(function(){return null})}}(zu=Bs.tiles[Ds][Js]=new Xr(Qs,Promise.all([bu,yu]))).name=Js,zu.renderOrder=Ds,Vs.add(zu)}Bs.tiles[Ds][Js].activeTime=_a,js.push(Js)}for(var Eu=0,Tu=Object.keys(Bs.tiles[Ds]).sort(function(Du,Gu){return _s.tiles[Ds][Gu].activeTime-_s.tiles[Ds][Du].activeTime}).slice(Math.max(24,js.length));Eu<Tu.length;Eu++){Js=Tu[Eu];var zu=Bs.tiles[Ds][Js];Vs.remove(zu),zu.dispose(),delete Bs.tiles[Ds][Js],Bs.object.needsRender=!0}}},Bs=this,Is=0,Ps=Cs;Is<Ps.length;Is++)Ts(Ps[Is]);for(var Rs=0;Rs<this.tiles.length;Rs++)if(this.tiles[Rs]){var ks=Cs.length>0&&Rs<=Cs[Cs.length-1].level;for(var $s in this.tiles[Rs])this.tiles[Rs][$s].visible!==ks&&(this.tiles[Rs][$s].visible=ks,this.tiles[Rs][$s].needsRender=!0),this.tiles[Rs][$s].updateTime(_a)}}},ca.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},ca}(),Jr=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),$r=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),to=new r$1.BufferGeometry;to.setAttribute("position",new r$1.BufferAttribute(Jr,3)),to.setIndex(new r$1.BufferAttribute($r,1));var eo=function(){function ca(){this.material=new r$1.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$1.Uniform(null),matrix:new r$1.Uniform(null),alpha:new r$1.Uniform(null),map:new r$1.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$1.CustomBlending,blendSrc:r$1.SrcAlphaFactor,blendDst:r$1.OneMinusSrcAlphaFactor,blendSrcAlpha:r$1.OneFactor,blendDstAlpha:r$1.OneMinusSrcAlphaFactor}),this.object=new r$1.Mesh(to,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new fn({alpha:0})}return ca.prototype.setMaterial=function(ga){ga?(this.material.uniforms.size.value=ga.size,this.material.uniforms.matrix.value=ga.matrix,this.material.uniforms.map.value=ga.map,this.alphaMotion.set({alpha:ga.alpha},500).catch(Lt),this.material.uniforms.alpha.value=ga.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Lt));var ya=ga!==null;ya!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=ya,this.material.needsUpdate=!0,this.object.visible=ga!==null)},ca.prototype.updateTime=function(ga){this.alphaMotion.ended||(this.alphaMotion.update(ga),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},ca.prototype.dispose=function(){this.material.dispose()},ca}(),io=new r$1.Matrix4().makeRotationAxis(new r$1.Vector3(0,1,0),Math.PI),no=new r$1.Vector3(-1,1,1),ro=function(ca){function ga(ya){var _a,_s,Ss,Ms,Es,Cs,Ts,Bs=this,Is=ga.parseArgs(ya);(Bs=ca.call(this,Is)||this).initAnimationed=!1,Bs.currentPanoIndex=Is.initial[0],Bs.maxAccessibleDistance=Is.maxAccessibleDistance,Bs.panoTapTriggerRadius=Is.panoTapTriggerRadius,Bs.panoCircleMeshCreator=Is.panoCircleMeshCreator,Bs.tileLevelForFov=Is.tileLevelForFov;var Ps=Bs.model.getMaterial()||{},Rs=Ps.pano0,ks=Ps.pano1;Rs&&(ks==null?void 0:ks.map)!==Rs.map&&(Bs.model.setMaterial({pano0:ks}),Rs.map.dispose(),(_a=Rs.luminanceMap)===null||_a===void 0||_a.dispose()),Bs.boundingMesh=Bs.generateBoundingMesh(),Bs.boundingMesh.setMaterial(Bs.model.getMaterial()||{}),Bs.boundingMesh.visible=!1,Bs.scene.add(Bs.boundingMesh),Bs.panoMeshes=[],Bs.updatePanoMeshes(),Bs.locationMotion=new fn({count:0,distance:Bs.camera.pose.distance,modelAlpha:(Ss=(_s=Bs.model.getMaterial())===null||_s===void 0?void 0:_s.modelAlpha)!==null&&Ss!==void 0?Ss:0,perspToOrtho:(Es=(Ms=Bs.model.getMaterial())===null||Ms===void 0?void 0:Ms.perspToOrtho)!==null&&Es!==void 0?Es:0}),Bs.panoResources={},Bs.panoResources[Bs.locationMotion.keyframes[0].key=Bs.locationMotion.keyframes[1].key=Zn()]={panoIndex:Bs.currentPanoIndex,workCode:Bs.work.workCode,panoPicture:(Ts=(Cs=Bs.model.getMaterial())===null||Cs===void 0?void 0:Cs.pano1)!==null&&Ts!==void 0?Ts:null,position:Bs.camera.pose.offset.clone(),effect:"fly"};var $s={allowHosts:Bs.work.allowHosts,networkSubscribe:Bs.networkSubscribe};return Bs.textureLoader=new Ii($s),Bs.tiling=new Zr($s,Bs.imageOptions),Bs.scene.add(Bs.tiling.object),Bs.panoVideo=new eo,Bs.scene.add(Bs.panoVideo.object),Bs}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a,_s,Ss,Ms,Es=ca.parseArgs.call(this,ya);return e$1.__assign(e$1.__assign({},Es),{maxAccessibleDistance:(_a=ya.maxAccessibleDistance)!==null&&_a!==void 0?_a:5,panoTapTriggerRadius:(_s=ya.panoTapTriggerRadius)!==null&&_s!==void 0?_s:.5,panoCircleMeshCreator:(Ss=ya.panoCircleMeshCreator)!==null&&Ss!==void 0?Ss:function(){return new jn},tileLevelForFov:(Ms=ya.tileLevelForFov)!==null&&Ms!==void 0?Ms:function(Cs,Ts){var Bs=2*Math.atan(Math.tan(Cs/180*Math.PI/2)*(Ts.width/Ts.height))/Math.PI*180,Is=Math.max(Ts.width/Bs,Ts.height/Cs),Ps=Es.imageOptions.size;if(Ps===void 0&&Es.work.observers[0]){var Rs=Es.work.observers[0].images.up.match(/\/cube_(\d+)\//);Rs&&(Ps=Number(Rs[1]))}return Ps===void 0&&(Ps=2048),Ps<8192&&Is>40?4:Ps<4096&&Is>24?3:Ps<2048&&Is>10?2:Ps<1024&&Is>6?1:0}})},ga.initAnimationEndPose=function(ya){var _a=this.parseArgs(ya);return ca.initAnimationEndPose.call(this,_a)},ga.prototype.destroy=function(){var ya,_a,_s=this;ca.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(ks){_s.helper.remove(ks),ks.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var Ss=this.videoTexture.image;Ss.pause(),Ss.oncanplay=function(){},Ss.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var Ms=(ya=this.model.getMaterial())!==null&&ya!==void 0?ya:{},Es=Ms.pano0,Cs=Ms.pano1,Ts=0,Bs=Object.keys(this.panoResources);Ts<Bs.length;Ts++){var Is=Bs[Ts],Ps=this.panoResources[Is];if(Ps.panoPicture){var Rs=Ps.panoPicture.map;Rs&&Rs!==(Es==null?void 0:Es.map)&&Rs!==(Cs==null?void 0:Cs.map)&&(Rs.dispose(),(_a=Ps.panoPicture.luminanceMap)===null||_a===void 0||_a.dispose(),Ps.panoPicture=null)}delete this.panoResources[Is]}},ga.prototype.isReady=function(){return this.locationMotion.ended===!0&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(ya,_a,_s,Ss,Ms){var Es=this;this.userAction=Ms,this.work=ya,this.currentPanoIndex=_a,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var Cs={},Ts=!0;this.boundingMesh&&(Cs=this.boundingMesh.getMaterial()||{},Ts=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Ts,this.boundingMesh.setMaterial(Cs),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Bs=0,Is=this.panoMeshes;Bs<Is.length;Bs++)Is[Bs].visible=!1;return this.moveToPano(_a,{effect:"fade",duration:Ss,longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov,moveEndCallback:function(){Es.initAnimationed=!0},moveCancelCallback:function(){Es.initAnimationed=!0}},Ms),!0},ga.prototype.updateModel=function(ya){this.model=ya;var _a={},_s=!0;this.boundingMesh&&(_a=this.boundingMesh.getMaterial()||{},_s=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=_s,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(_a),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},ga.prototype.updateTime=function(ya,_a){var _s,Ss,Ms,Es,Cs,Ts,Bs;if(!this.destroyed){var Is={},Ps={},Rs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ks=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),$s=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(ya);var Os=this.locationMotion.getKeyFrameSegment(ya),Ls=Os[0],Ds=Os[1],Fs=this.panoResourceFromLocationMotionKeyframe(Ls),Ns=this.panoResourceFromLocationMotionKeyframe(Ds),Vs=new r$1.Vector3().copy(Fs.position),Gs=new r$1.Vector3().copy(Ns.position),Us=this.locationMotion.value.count-Ds.value.count+1;Is.progress=Us,Is.modelAlpha=this.locationMotion.value.modelAlpha,Is.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ns.panoPicture&&(Us<1?Fs.panoPicture&&(Is.pano0=Fs.panoPicture):Is.pano0=Ns.panoPicture,Is.pano1=Ns.panoPicture),$s=Is.useBlackTransition=Ns.effect==="instant"||Ns.effect==="montage",Ns.effect!=="fade"&&Ns.effect!=="montage"||(Is.pano0&&Fs.panoPicture&&(Is.pano0={map:Is.pano0.map,luminanceMap:Is.pano0.luminanceMap,matrix:Fs.panoPicture.matrix.clone().setPosition(Ns.position)}),Vs.copy(Gs)),Ps.distance=this.locationMotion.value.distance,Ps.offset=new r$1.Vector3(Vs.x+(Gs.x-Vs.x)*Us,Vs.y+(Gs.y-Vs.y)*Us,Vs.z+(Gs.z-Vs.z)*Us);for(var zs=[],Hs=[],Qs=0,js=this.locationMotion.keyframes;Qs<js.length;Qs++){var Zs=js[Qs],Ks=Zs.key,Ys=Zs.progress;Ks!==void 0&&(zs.push(Ks),Ys>=this.locationMotion.progress&&Hs.push(Ks))}for(var qs=0,eu=Object.keys(this.panoResources);qs<eu.length;qs++){var Js=eu[qs];if(!(Hs.indexOf(Js)>=0)){var Xs=this.panoResources[Js];if(Xs.panoPicture){var ru=Xs.panoPicture.map;if(ru){if(ru===((_s=Is.pano0)===null||_s===void 0?void 0:_s.map)||ru===((Ss=Is.pano1)===null||Ss===void 0?void 0:Ss.map))continue;ru.dispose(),(Ms=Xs.panoPicture.luminanceMap)===null||Ms===void 0||Ms.dispose(),Xs.panoPicture=null}}zs.indexOf(Js)>=0||delete this.panoResources[Js]}}Fs.workCode===Ns.workCode?this.currentPanoIndex=Us<.5?Fs.panoIndex:Ns.panoIndex:this.currentPanoIndex=Ns.panoIndex,this.emit("movingToPano",ks.panoIndex,Rs.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(ya),Ps.longitude=this.cameraMotion.value.longitude,Ps.latitude=this.cameraMotion.value.latitude,Ps.fov=this.cameraMotion.value.fov),fr(Is)===!1&&(this.model.setMaterial(Is),this.boundingMesh.setMaterial(Is)),fr(Ps)===!1&&this.setCamera(Ps),this.camera.pose.distance>.1)for(var su=0;su<this.work.observers.length;su++)(bu=this.panoMeshes[su])&&(bu.visible=!1);else{var lu=this.work.observers[this.currentPanoIndex];if(lu){var cu=lu.visibleNodes.concat(this.currentPanoIndex),xu=this.getForwardPanoIndexOrNot();for(su=0;su<this.work.observers.length;su++){var bu,yu=this.work.observers[su];if(bu=this.panoMeshes[su])if(yu.loadable||yu.active)if(cu.indexOf(su)!==-1)if($s)bu.visible=!1,bu.setOpacity(0);else{bu.visible=!0;var fu=bu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);bu.setCurrent(xu===su),bu.setOpacity(fu<.01?0:cn(1.4/fu,.5,.7)),bu.updateTime&&bu.updateTime(ya,_a)}else bu.visible=!1,bu.setOpacity(0);else bu.visible=!1,bu.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Es=this.boundingMesh.getMaterial())===null||Es===void 0?void 0:Es.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var gu=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var Su=ks.panoIndex,wu=this.work.observers[Su];if(wu)if(tr(this.camera.position,wu.position)&&this.locationMotion.ended){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((Cs=wu.images.luminance)!==null&&Cs!==void 0?Cs:null),this.tiling.panoIndex!==Su&&this.tiling.cleanup(),this.tiling.panoIndex=Su,this.tiling.setResource((Bs=(Ts=wu.images)===null||Ts===void 0?void 0:Ts.tiles)!==null&&Bs!==void 0?Bs:[]),this.tiling.setRotation(wu.quaternion),this.tiling.setPosition(wu.position);var vu=this.renderer.getSize(new r$1.Vector2);vu.width*=this.scissor.width,vu.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,vu),ya)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;gu!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(ya)}},ga.prototype.render=function(){var ya=this.work.observers[this.currentPanoIndex];ya&&ya.video&&(this.needsRender=!0),ca.prototype.render.call(this)},ga.prototype.postProcessing=function(ya,_a){if(!this.destroyed)return this.effect||(this.effect=new Lr(this.renderer)),this.effect.render(ya,_a)},ga.prototype.getTargetPose=function(){var ya=this.cameraMotion.getKeyFrameSegment(Ht())[1],_a=this.locationMotion.getKeyFrameSegment(Ht())[1],_s=this.panoResourceFromLocationMotionKeyframe(_a),Ss=this.work.observers[_s.panoIndex];return{longitude:ya.value.longitude,latitude:ya.value.latitude,fov:ya.value.fov,offset:Ss?Ss.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(ya,_a,_s){var Ss,Ms,Es,Cs=this,Ts=this.work.observers[ya],Bs=e$1.__assign({key:"pano.".concat(ya),basisLoaderInitialized:xi.isInitialized()},ei(this.imageOptions,["format","size","quality","sharpen","mappings"])),Is=(Ss=this.imageOptions.transform)!==null&&Ss!==void 0?Ss:he,Ps={right:Is(Ts.images.right,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".right")})),left:Is(Ts.images.left,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".left")})),up:Is(Ts.images.up,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".up")})),down:Is(Ts.images.down,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".down")})),front:Is(Ts.images.front,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".front")})),back:Is(Ts.images.back,e$1.__assign(e$1.__assign({},Bs),{key:"".concat(Bs.key,".back")}))},Rs={key:"pano_luminance.".concat(ya),basisLoaderInitialized:xi.isInitialized(),size:Bs.size?Bs.size/2:1024},ks=this.enableIOSEDR&&Ts.images.luminance?{right:Is(Ts.images.luminance.right,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".right")})),left:Is(Ts.images.luminance.left,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".left")})),up:Is(Ts.images.luminance.up,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".up")})),down:Is(Ts.images.luminance.down,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".down")})),front:Is(Ts.images.luminance.front,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".front")})),back:Is(Ts.images.luminance.back,e$1.__assign(e$1.__assign({},Rs),{key:"".concat(Rs.key,".back")}))}:null,$s="pano:"+Qr(Ps);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===$s)return;var Os=this.pendingTextureTask.panoIndex;(Ms=this.panoMeshes[Os])===null||Ms===void 0||Ms.setProgress(0),this.emit("textureAbort",Os,Ts),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0;var Ls,Ds=this.model.getMaterial()||{},Fs=Ds.pano0,Ns=Ds.pano1;if(Fs&&Fs.map.name===$s&&Fs.luminanceMap!==null===this.enableIOSEDR?Ls=Fs:(Ns==null?void 0:Ns.map.name)===$s&&Ns.luminanceMap!==null===this.enableIOSEDR&&(Ls=Ns),Ls){var Vs={panoIndex:ya,workCode:this.work.workCode,effect:(Es=_a.effect)!==null&&Es!==void 0?Es:"fly",panoPicture:{map:Ls.map,luminanceMap:Ls.luminanceMap,matrix:new r$1.Matrix4().compose(Ts.position,Ts.quaternion,no)},position:Ts.position.clone()};se.shared.add(function(){Cs.pending=!1,Cs.emit("panoLoaded",ya),Cs.doMoveToPano(ya,Vs,_a,_s)},!0,1)}else{this.pendingTextureTask={panoIndex:ya,hash:$s,onLoad:function(Us,zs){var Hs,Qs;if(Cs.pending=!1,Cs.destroyed)Us.body.dispose();else{Us.body.name=$s,Cs.emit("panoLoaded",ya);var js={panoIndex:ya,workCode:Cs.work.workCode,effect:(Hs=_a.effect)!==null&&Hs!==void 0?Hs:"fly",panoPicture:{map:Us.body,luminanceMap:(Qs=zs==null?void 0:zs.body)!==null&&Qs!==void 0?Qs:null,matrix:new r$1.Matrix4().compose(Ts.position,Ts.quaternion,no)},position:Ts.position.clone()};Cs.doMoveToPano(ya,js,_a,_s)}},onError:function(Us){Cs.pending=!1,_a.moveCancelCallback&&_a.moveCancelCallback(),Cs.emit("panoLoadError",Us,ya),Cs.emit("moveToPanoCanceled",ya)}};var Gs=this.panoMeshes[ya];Gs&&Gs.tap&&Gs.tap(),Promise.all([this.textureLoader.loadCube(Ps,{format:r$1.RGBFormat,viaAjax:!0},void 0,void 0,function(Us){var zs,Hs;Cs.emit("textureLoading",Us,ya,Ts),((zs=Cs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===$s&&((Hs=Cs.panoMeshes[ya])===null||Hs===void 0||Hs.setProgress(Us))},this.renderer),ks?this.textureLoader.loadCube(ks,{format:r$1.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(Us){var zs,Hs,Qs=Us[0],js=Us[1];((zs=Cs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===$s?(Cs.pendingTextureTask.onLoad(Qs,js),(Hs=Cs.panoMeshes[ya])===null||Hs===void 0||Hs.setProgress(0),delete Cs.pendingTextureTask,Cs.emit("textureLoaded",ya,Ts,Qs.meta)):(Qs.body.dispose(),js==null||js.body.dispose())}).catch(function(Us){var zs,Hs;((zs=Cs.pendingTextureTask)===null||zs===void 0?void 0:zs.hash)===$s&&(Cs.pendingTextureTask.onError(Us),(Hs=Cs.panoMeshes[ya])===null||Hs===void 0||Hs.setProgress(0),delete Cs.pendingTextureTask,Cs.emit("textureError",Us,ya,Ts),Cs.emit("error",Us))}),this.emit("textureStartLoad",ya,Ts)}},ga.prototype.initAnimation=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts=this;if(!this.destroyed){var Bs=!1;this.pending=!1,this.userAction=Ss,this.moveToPano(ya,{longitude:(Ms=_a.longitude)!==null&&Ms!==void 0?Ms:this.defaultLongitude,latitude:cn((Es=_a.latitude)!==null&&Es!==void 0?Es:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((Cs=_a.fov)!==null&&Cs!==void 0?Cs:this.defaultFov,this.minFov,this.maxFov),duration:_s,moveStartCallback:function(Is,Ps){Bs=!0,Ts.emit("initAnimationWillStart",Is,Ps,Ts.userAction)},moveEndCallback:function(Is,Ps){Ts.emit("initAnimationEnded",Is,Ps,Ts.userAction),Ts.initAnimationed=!0},moveCancelCallback:function(){var Is={longitude:Ts.camera.pose.longitude,latitude:Ts.camera.pose.latitude,fov:Ts.camera.pose.fov,offset:Ts.camera.pose.offset.clone()};Bs===!1&&Ts.emit("initAnimationWillStart",Ts.currentPanoIndex,Is,Ts.userAction),Ts.emit("initAnimationEnded",Ts.currentPanoIndex,Is,Ts.userAction),Ts.initAnimationed=!0}},Ss)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(ya){return this.panoResources[ya.key]},ga.prototype.locationMotionKeyframesLength=function(ya){for(var _a=0,_s=1;_s<ya.length;_s++){var Ss=this.panoResourceFromLocationMotionKeyframe(ya[_s-1]).position,Ms=this.panoResourceFromLocationMotionKeyframe(ya[_s]).position;_a+=Ss.distanceTo(Ms)*(ya[_s].value.count-ya[_s-1].value.count)}return _a},ga.prototype.updatePanoMeshes=function(ya){ya===void 0&&(ya=!0);for(var _a={},_s=0,Ss=this.panoMeshes;_s<Ss.length;_s++)_a[(Ts=Ss[_s]).name]=Ts;this.panoMeshes.length=0;for(var Ms=0;Ms<this.work.observers.length;Ms++){var Es="panoCircle_".concat(this.work.workCode,"_").concat(Ms),Cs=this.work.observers[Ms],Ts=void 0;if(_a[Es]?(Ts=_a[Es],delete _a[Es]):((Ts=this.panoCircleMeshCreator()).name=Es,this.helper.add(Ts)),Ts.position.copy(Cs.standingPosition),ya&&this.model.loaded&&this.model.bvhs.loaded){var Bs=new r$1.Vector3(0,-1,0),Is=new r$1.Vector3(0,.1,0).add(Ts.position),Ps=new r$1.Raycaster(Is,Bs,0,.2),Rs=this.model.intersectRaycaster(Ps)[0];Rs&&Rs.point.distanceTo(Is)<.1&&Ts.position.copy(Rs.point)}this.panoMeshes[Ms]=Ts}for(var ks=0,$s=Object.keys(_a);ks<$s.length;ks++){var Os=$s[ks];this.helper.remove(_a[Os]),_a[Os].dispose(),delete _a[Os]}},ga.prototype.generateBoundingMesh=function(ya){ya===void 0&&(ya=!1);for(var _a=this.model.bounding.clone(),_s=0,Ss=this.work.observers;_s<Ss.length;_s++){var Ms=Ss[_s];_a.expandByPoint(Ms.standingPosition),_a.expandByPoint(new r$1.Vector3().fromArray([Ms.position.x,2*Ms.position.y-Ms.standingPosition.y,Ms.position.z]))}ya&&_a.expandByPoint(this.camera.position);var Es=rr(_a,new r$1.Vector3(1,0,1));return Es.name="panorama_bounding",Es},ga.prototype.doMoveToPano=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts=this;_s===void 0&&(_s={}),this.userAction=Ss;var Bs=Ht(),Is=Zn();this.tiling.cleanup(),this.panoResources[Is]=_a;var Ps,Rs,ks;if(this.locationMotion.ended){var $s=this.locationMotion.getKeyFrameSegment(Bs);$s[0];var Os=$s[1],Ls=this.locationMotion.value,Ds=this.panoResourceFromLocationMotionKeyframe(Os).position,Fs=_a.position;Ps=Math.max(Ds.distanceTo(Fs),1),Rs=[{key:Os.key,progress:0,value:e$1.__assign(e$1.__assign({},Ls),{count:0})},{key:Is,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],ks=0}else{var Ns=this.locationMotion.getKeyFrameSegment(Bs),Vs=Ns[0],Gs=(Os=Ns[1],Ls=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(Vs).position),Us=(Ds=this.panoResourceFromLocationMotionKeyframe(Os).position,Fs=_a.position,Os.value.count-Ls.count),zs=Math.max(Gs.distanceTo(Ds),1)*Us;Ps=zs+Math.max(Ds.distanceTo(Fs),1),Rs=[{key:Vs.key,progress:0,value:e$1.__assign({},Ls)},{key:Os.key,progress:zs/Ps,value:Os.value},{key:Is,progress:1,value:{count:Os.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Hs=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Qs=this.locationMotionKeyframesLength(Rs);ks=Hs===0||Hs===0?0:this.locationMotion.getProgressVelocity(Bs)*Hs/Qs}var js=this.calculateMovingDuration(_s.duration,_s.effect==="fade"||_s.effect==="montage"?0:Ps),Zs={longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov},Ks={longitude:(Ms=Zs.longitude)!==null&&Ms!==void 0?Ms:this.camera.pose.longitude,latitude:(Es=Zs.latitude)!==null&&Es!==void 0?Es:this.camera.pose.latitude,fov:(Cs=Zs.fov)!==null&&Cs!==void 0?Cs:this.camera.pose.fov,offset:_a.position.clone()};_s.moveStartCallback&&_s.moveStartCallback(ya,Ks),this.emit("panoWillArrive",ya,Ks,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Lt,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Zs,js).catch(Lt),this.locationMotion.setKeyframes(Rs,js,ks).then(function(){var Ys,qs,eu,Js={longitude:Ts.camera.pose.longitude,latitude:Ts.camera.pose.latitude,fov:Ts.camera.pose.fov,offset:Ts.camera.pose.offset.clone()};_s.moveEndCallback&&_s.moveEndCallback(ya,Js),Ts.emit("panoArrived",ya,Js,Ss);var Xs=Ts.work.observers[Ts.currentPanoIndex];if(Xs&&Xs.video&&Ts.videoTexture&&Ts.videoTexture.image instanceof HTMLVideoElement){var ru=io.clone().multiply((eu=(qs=(Ys=Ts.model.getMaterial())===null||Ys===void 0?void 0:Ys.pano1)===null||qs===void 0?void 0:qs.matrix)!==null&&eu!==void 0?eu:new r$1.Matrix4).multiply(Xs.video.matrix),su={map:Ts.videoTexture,size:Xs.video.size,matrix:ru,alpha:1},lu=Zn(),cu=Ts.videoTexture.image;cu.setAttribute("uuid",lu),(Rr||(Rr=new Promise(function(xu){var bu,yu=document.createElement("video");yu.muted=!0,yu.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",yu.addEventListener("timeupdate",function fu(){yu.removeEventListener("timeupdate",fu,!1),clearTimeout(bu);var gu=document.createElement("canvas");gu.width=gu.height=1;var Su=gu.getContext("2d");Su?(Su.drawImage(yu,0,0,1,1),Su.getImageData(0,0,1,1).data[3]>10?xu(!0):xu(!1)):xu(!1)},!1),yu.addEventListener("canplay",function fu(){yu.removeEventListener("canplay",fu,!1),yu.play()},!1),bu=window.setTimeout(function(){return xu(!1)},1e3)}))).then(function(xu){xu&&Xs.video&&cu.getAttribute("uuid")===lu&&(cu.oncanplay=function(){cu.oncanplay=Lt,cu.play()},cu.ontimeupdate=function(){cu.currentTime>.5&&(cu.ontimeupdate=Lt,Ts.panoVideo.setMaterial(su))},cu.src=Xs.video.source)}).catch(function(){cu.removeAttribute("uuid")})}},function(){_s.moveCancelCallback&&_s.moveCancelCallback(),Ts.emit("moveToPanoCanceled",ya)})},ga.prototype.getForwardPanoIndexOrNot=function(ya){var _a=this,_s=this.camera.getWorldDirection(new r$1.Vector3),Ss=this.camera.position.clone(),Ms=this.work.observers[this.currentPanoIndex];if(!Ms)return null;var Es=Ms.accessibleNodes.filter(function(Ls){if(Ls===_a.currentPanoIndex)return!1;var Ds=_a.work.observers[Ls],Fs=Ds.standingPosition.clone().sub(Ss);return Fs.length()!==0&&!(Fs.angleTo(new r$1.Vector3(0,-1,0))<Math.PI/12)&&(Ds.loadable||Ds.active)}),Cs=(ya?ya.ray.direction.clone():_s.clone()).setY(0);if(Cs.length()===0)return null;for(var Ts=Es.slice().sort(function(Ls,Ds){var Fs=_a.work.observers[Ls].position.clone().setY(Ss.y),Ns=_a.work.observers[Ds].position.clone().setY(Ss.y);return Fs.distanceTo(Ss)-Ns.distanceTo(Ss)}),Bs=0,Is=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Bs<Is.length;Bs++)for(var Ps=Is[Bs],Rs=0,ks=Ts;Rs<ks.length;Rs++){var $s=ks[Rs],Os=this.work.observers[$s].position.clone().setY(Ss.y).sub(Ss);if(Os.length()!==0&&Cs.angleTo(Os)<Ps)return $s}return null},ga.prototype.onTapGesture=function(ya){var _a=this,_s=ya.pointers.map(function(Js){return ei(Js,["x","y"])});if(!this.emit("wantsGesture","tap",_s,!0)){var Ss=this.relativeClientPosition(ya.center),Ms=new r$1.Raycaster;if(Ms.setFromCamera(Ss,this.camera),!this.emit("wantsTapGesture",Ms,Ss,!0)){this.emit("gesture","tap",_s,!0),this.emit("tapGesture",Ms,Ss,!0),this.interiaMovement=!1;var Es=this.camera.getWorldDirection(new r$1.Vector3).setY(0),Cs=null,Ts=this.work.observers[this.currentPanoIndex];if(Ts){var Bs=Ts.accessibleNodes.filter(function(Js){if(Js===_a.currentPanoIndex)return!1;var Xs=_a.work.observers[Js];return!(Xs.position.distanceTo(_a.camera.position)>_a.maxAccessibleDistance)&&(Xs.loadable||Xs.active)}),Is=this.model.intersectRaycaster(Ms)[0];if(Is){var Ps=Ar(Bs,function(Js){var Xs=_a.work.observers[Js].standingPosition.clone();return Xs.clone().sub(_a.camera.position).setY(0).angleTo(Es)>Math.PI/2?1/0:Xs.distanceTo(Is.point)},!0),Rs=Ps[0];Ps[1]<this.panoTapTriggerRadius&&(Cs=Rs)}qi(Cs)&&(Cs=this.getForwardPanoIndexOrNot(Ms));for(var ks=0,$s=this.locationMotion.keyframes;ks<$s.length;ks++){var Os=$s[ks],Ls=this.panoResourceFromLocationMotionKeyframe(Os);if(!(Os.progress<this.locationMotion.progress)&&Ls.panoIndex===Cs){Cs=null;break}}if(this.emit("panoSelected",Cs),qi(Cs))this.locationMotion.ended===!0&&this.cameraBounce();else{var Ds=this.work.observers[Cs];if(Ds.active){for(var Fs={},Ns=Math.PI/6,Vs=Math.PI/12,Gs=new r$1.Vector3(0,1,0),Us=Ds.position.clone().setY(0).sub(Ts.position.clone().setY(0)).normalize(),zs=Us.clone().applyAxisAngle(Gs,Ns),Hs=Us.clone().applyAxisAngle(Gs,-Ns),Qs=[],js=[],Zs=[],Ks=0,Ys=Ds.accessibleNodes;Ks<Ys.length;Ks++)if((Rs=Ys[Ks])!==this.currentPanoIndex&&Rs!==Cs){var qs=this.work.observers[Rs].position.clone().sub(Ds.position).setY(0);Us.angleTo(qs)<Ns?Zs.push(qs):zs.angleTo(qs)<Ns?Qs.push(qs):Hs.angleTo(qs)<Ns&&js.push(qs)}var eu=(Zs.length>0?Zs:e$1.__spreadArray(e$1.__spreadArray([],Qs,!0),js,!0)).slice().sort(function(Js,Xs){return Js.angleTo(Us)-Xs.angleTo(Us)})[0];eu&&eu.angleTo(Es)>Vs&&(Fs.longitude=Math.atan2(-eu.x,-eu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Fs.latitude=cn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Fs.fov=this.defaultFov),this.emit("wantsMoveToPano",Cs,Fs,!0)}else this.panoMeshes[Cs]&&(this.panoMeshes[Cs].setDisabled(!1),this.panoMeshes[Cs].setLoading(!0))}}}}},ga}(Dr),oo=Math.PI/180,so=180/Math.PI,ao=function(){var ca=typeof navigator!="undefined"&&/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ca}}(),uo=function(){var ca=typeof navigator!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ca}}(),lo=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ca}}(),ho=function(){var ca=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9]+)/):null,ga=ca?parseInt(ca[1],10):null;return function(){return ga}}(),co=function(){var ca=!1;if(ho()===65){var ga=typeof navigator!="undefined"?navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/):null;if(ga){var ya=ga[1].split(".");ya[0],ya[1];var _a=ya[2],_s=ya[3];ca=parseInt(_a,10)===3325&&parseInt(_s,10)<148}}return function(){return ca}}(),po=function(){var ca=ao()&&uo()&&typeof navigator!="undefined"&&navigator.userAgent.indexOf("13_4")!==-1;return function(){return ca}}(),Ao=function(){var ca=typeof navigator!="undefined"&&navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ca}}();function fo(){var ca=typeof window!="undefined"&&(window.orientation==90||window.orientation==-90);return Ao()?!ca:ca}var go,vo=(go={},function(ca,ga){go[ca]===void 0&&(console.warn("cardboard: "+ga),go[ca]=!0)});function mo(ca){var ga,ya=ca.indexOf("://");ga=ya!==-1?ya+3:0;var _a=ca.indexOf("/",ga);return _a===-1&&(_a=ca.length),ca.substring(0,_a)}var yo,wo=function(ca,ga,ya){var _a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps,Rs,ks,$s,Os,Ls,Ds,Fs,Ns,Vs,Gs,Us,zs,Hs,Qs,js,Zs,Ks,Ys,qs,eu,Js;(function(Xs,ru,su){var lu=ru?ru[0]:0,cu=ru?ru[1]:0,xu=ru?ru[2]:0,bu=ru?ru[3]:1,yu=lu+lu,fu=cu+cu,gu=xu+xu,Su=lu*yu,wu=lu*fu,vu=lu*gu,pu=cu*fu,Eu=cu*gu,Tu=xu*gu,zu=bu*yu,Du=bu*fu,Gu=bu*gu;Xs[0]=1-(pu+Tu),Xs[1]=wu+Gu,Xs[2]=vu-Du,Xs[3]=0,Xs[4]=wu-Gu,Xs[5]=1-(Su+Tu),Xs[6]=Eu+zu,Xs[7]=0,Xs[8]=vu+Du,Xs[9]=Eu-zu,Xs[10]=1-(Su+pu),Xs[11]=0,Xs[12]=su?su[0]:0,Xs[13]=su?su[1]:0,Xs[14]=su?su[2]:0,Xs[15]=1})(ca,ga),ya&&function(Xs,ru,su){var lu,cu,xu,bu,yu,fu,gu,Su,wu,vu,pu,Eu,Tu=su[0],zu=su[1],Du=su[2];ru===Xs?(Xs[12]=ru[0]*Tu+ru[4]*zu+ru[8]*Du+ru[12],Xs[13]=ru[1]*Tu+ru[5]*zu+ru[9]*Du+ru[13],Xs[14]=ru[2]*Tu+ru[6]*zu+ru[10]*Du+ru[14],Xs[15]=ru[3]*Tu+ru[7]*zu+ru[11]*Du+ru[15]):(lu=ru[0],cu=ru[1],xu=ru[2],bu=ru[3],yu=ru[4],fu=ru[5],gu=ru[6],Su=ru[7],wu=ru[8],vu=ru[9],pu=ru[10],Eu=ru[11],Xs[0]=lu,Xs[1]=cu,Xs[2]=xu,Xs[3]=bu,Xs[4]=yu,Xs[5]=fu,Xs[6]=gu,Xs[7]=Su,Xs[8]=wu,Xs[9]=vu,Xs[10]=pu,Xs[11]=Eu,Xs[12]=lu*Tu+yu*zu+wu*Du+ru[12],Xs[13]=cu*Tu+fu*zu+vu*Du+ru[13],Xs[14]=xu*Tu+gu*zu+pu*Du+ru[14],Xs[15]=bu*Tu+Su*zu+Eu*Du+ru[15])}(ca,ca,ya),_a=ca,Ss=(_s=ca)[0],Ms=_s[1],Es=_s[2],Cs=_s[3],Ts=_s[4],Bs=_s[5],Is=_s[6],Ps=_s[7],Rs=_s[8],ks=_s[9],$s=_s[10],Os=_s[11],Ls=_s[12],Ds=_s[13],Fs=_s[14],Ns=_s[15],(Js=(Vs=Ss*Bs-Ms*Ts)*(eu=$s*Ns-Os*Fs)-(Gs=Ss*Is-Es*Ts)*(qs=ks*Ns-Os*Ds)+(Us=Ss*Ps-Cs*Ts)*(Ys=ks*Fs-$s*Ds)+(zs=Ms*Is-Es*Bs)*(Ks=Rs*Ns-Os*Ls)-(Hs=Ms*Ps-Cs*Bs)*(Zs=Rs*Fs-$s*Ls)+(Qs=Es*Ps-Cs*Is)*(js=Rs*Ds-ks*Ls))&&(Js=1/Js,_a[0]=(Bs*eu-Is*qs+Ps*Ys)*Js,_a[1]=(Es*qs-Ms*eu-Cs*Ys)*Js,_a[2]=(Ds*Qs-Fs*Hs+Ns*zs)*Js,_a[3]=($s*Hs-ks*Qs-Os*zs)*Js,_a[4]=(Is*Ks-Ts*eu-Ps*Zs)*Js,_a[5]=(Ss*eu-Es*Ks+Cs*Zs)*Js,_a[6]=(Fs*Us-Ls*Qs-Ns*Gs)*Js,_a[7]=(Rs*Qs-$s*Us+Os*Gs)*Js,_a[8]=(Ts*qs-Bs*Ks+Ps*js)*Js,_a[9]=(Ms*Ks-Ss*qs-Cs*js)*Js,_a[10]=(Ls*Hs-Ds*Us+Ns*Vs)*Js,_a[11]=(ks*Us-Rs*Hs-Os*Vs)*Js,_a[12]=(Bs*Zs-Ts*Ys-Is*js)*Js,_a[13]=(Ss*Ys-Ms*Zs+Es*js)*Js,_a[14]=(Ds*Gs-Ls*zs-Fs*Vs)*Js,_a[15]=(Rs*zs-ks*Gs+$s*Vs)*Js)},bo=function(){function ca(ga,ya){ga===void 0&&(ga=new r$1.Vector3),ya===void 0&&(ya=0),this.sample=ga,this.timestampS=ya}return ca.prototype.set=function(ga,ya){this.sample=ga,this.timestampS=ya},ca.prototype.copy=function(ga){this.set(ga.sample,ga.timestampS)},ca}(),xo=function(){function ca(ga,ya){this.kFilter=ga,this.isDebug=ya,this.currentAccelMeasurement=new bo,this.currentGyroMeasurement=new bo,this.previousGyroMeasurement=new bo,ao()?this.filterQ=new r$1.Quaternion(-1,0,0,1):this.filterQ=new r$1.Quaternion(1,0,0,1),this.previousFilterQ=new r$1.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new r$1.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new r$1.Vector3,this.measuredGravity=new r$1.Vector3,this.gyroIntegralQ=new r$1.Quaternion}return ca.prototype.addAccelMeasurement=function(ga,ya){this.currentAccelMeasurement.set(ga,ya)},ca.prototype.addGyroMeasurement=function(ga,ya){this.currentGyroMeasurement.set(ga,ya);var _a,_s=ya-this.previousGyroMeasurement.timestampS;_a=_s,isNaN(_a)||_a<=.001||_a>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ca.prototype.getOrientation=function(){return this.filterQ},ca.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var ga=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ya=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ga);this.gyroIntegralQ.multiply(ya),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ya);var _a=new r$1.Quaternion;_a.copy(this.filterQ),_a.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(_a),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var _s,Ss=new r$1.Quaternion;Ss.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ss.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",so*((_s=Ss).w>1?0:2*Math.acos(_s.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ms=new r$1.Quaternion;Ms.copy(this.filterQ),Ms.multiply(Ss),this.filterQ.slerp(Ms,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ca.prototype.accelToQuaternion_=function(ga){var ya=new r$1.Vector3;ya.copy(ga),ya.normalize();var _a=new r$1.Quaternion;return _a.setFromUnitVectors(new r$1.Vector3(0,0,-1),ya),_a.inverse(),_a},ca.prototype.gyroToQuaternionDelta_=function(ga,ya){var _a=new r$1.Quaternion,_s=new r$1.Vector3;return _s.copy(ga),_s.normalize(),_a.setFromAxisAngle(_s,ga.length()*ya),_a},ca}(),Eo=function(){function ca(ga,ya){this.predictionTimeS=ga,this.isDebug=ya,this.previousQ=new r$1.Quaternion,this.previousTimestampS=null,this.deltaQ=new r$1.Quaternion,this.outQ=new r$1.Quaternion}return ca.prototype.getPrediction=function(ga,ya,_a){if(!this.previousTimestampS)return this.previousQ.copy(ga),this.previousTimestampS=_a,ga;var _s=new r$1.Vector3;_s.copy(ya),_s.normalize();var Ss=ya.length();if(Ss<20*oo)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(so*Ss).toFixed(1)),this.outQ.copy(ga),this.previousQ.copy(ga),this.outQ;var Ms=Ss*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(_s,Ms),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ga),this.previousTimestampS=_a,this.outQ},ca}(),Io=function(){function ca(ga){this.coefficients=ga}return ca.prototype.distortInverse=function(ga){for(var ya=0,_a=1,_s=ga-this.distort(ya);Math.abs(_a-ya)>1e-4;){var Ss=ga-this.distort(_a),Ms=_a-Ss*((_a-ya)/(Ss-_s));ya=_a,_a=Ms,_s=Ss}return _a},ca.prototype.distort=function(ga){for(var ya=ga*ga,_a=0,_s=0;_s<this.coefficients.length;_s++)_a=ya*(_a+this.coefficients[_s]);return(_a+1)*ga},ca}(),Co=function(){this.angularAcceleration=null,this.angularVelocity=null,this.linearAcceleration=null,this.linearVelocity=null,this.orientation=null,this.position=null},So=function(){this.leftDegrees=0,this.rightDegrees=0,this.upDegrees=0,this.downDegrees=0},Bo=function(){function ca(ga,ya,_a,_s){this.viewer={id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},this.device={widthMeters:.11,heightMeters:.062,bevelMeters:.004},this.depthNear=.01,this.depthFar=1e4,this.yawOnly=_a,this.accelerometer=new r$1.Vector3,this.gyroscope=new r$1.Vector3,this.filter=new xo(ga,_s),this.posePredictor=new Eo(ya,_s),this.isFirefoxAndroid=lo(),this.isIOS=ao();var Ss=ho();this.isDeviceMotionInRadians=!this.isIOS&&Ss!==null&&Ss<66,this.isWithoutDeviceMotion=co()||po(),this.filterToWorldQ=new r$1.Quaternion,ao()?this.filterToWorldQ.setFromAxisAngle(new r$1.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new r$1.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new r$1.Quaternion,this.worldToScreenQ=new r$1.Quaternion,this.originalPoseAdjustQ=new r$1.Quaternion;var Ms=typeof window!="undefined"?-window.orientation*Math.PI/180:0;this.originalPoseAdjustQ.setFromAxisAngle(new r$1.Vector3(0,0,1),Ms),this.setScreenTransform_(),fo()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new r$1.Quaternion,this.orientationOut_=new Float32Array(4),this.previousTimestampS=Date.now()}return ca.prototype.getPosition=function(){return null},ca.prototype.getOrientation=function(){var ga;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ms=new r$1.Quaternion().setFromAxisAngle(new r$1.Vector3(0,0,-1),0),Es=new r$1.Quaternion;return typeof window!="undefined"&&window.orientation===-90?Es.setFromAxisAngle(new r$1.Vector3(0,1,0),Math.PI/-2):Es.setFromAxisAngle(new r$1.Vector3(0,1,0),Math.PI/2),Ms.multiply(Es)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((_a=new r$1.Quaternion).setFromAxisAngle(new r$1.Vector3(1,0,0),-Math.PI/2),_a),ga=this._deviceOrientationQ;var ya=new r$1.Quaternion;return ya.copy(ga),ya.multiply(this.deviceOrientationFilterToWorldQ),ya.multiply(this.resetQ),ya.multiply(this.worldToScreenQ),ya.multiplyQuaternions(this.deviceOrientationFixQ,ya),this.yawOnly&&(ya.x=0,ya.z=0,ya.normalize()),this.orientationOut_[0]=ya.x,this.orientationOut_[1]=ya.y,this.orientationOut_[2]=ya.z,this.orientationOut_[3]=ya.w,this.orientationOut_}var _a,_s=this.filter.getOrientation();ga=this.posePredictor.getPrediction(_s,this.gyroscope,this.previousTimestampS);var Ss=new r$1.Quaternion;return Ss.copy(this.filterToWorldQ),Ss.multiply(this.resetQ),Ss.multiply(ga),Ss.multiply(this.worldToScreenQ),this.yawOnly&&(Ss.x=0,Ss.z=0,Ss.normalize()),this.orientationOut_[0]=Ss.x,this.orientationOut_[1]=Ss.y,this.orientationOut_[2]=Ss.z,this.orientationOut_[3]=Ss.w,this.orientationOut_},ca.prototype.getPose=function(){var ga=new Co;return ga.orientation=this.getOrientation(),ga},ca.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),fo()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ca.prototype.getFrameData=function(ga){var ya=this.getOrientation(),_a=this.getEyeOffset(),_s=this.getEyeProjectionMatrix();return ga.pose.angularAcceleration=null,ga.pose.angularVelocity=null,ga.pose.linearAcceleration=null,ga.pose.linearVelocity=null,ga.pose.orientation=ya,ga.pose.position=null,ga.timestamp=this.previousTimestampS,ga.leftProjectionMatrix.set(_s.left),ga.rightProjectionMatrix.set(_s.right),wo(ga.leftViewMatrix,ya,_a.left),wo(ga.rightViewMatrix,ya,_a.right),ga},ca.prototype.start=function(){if(typeof window=="undefined")return function(){};var ga=this.onDeviceMotion_.bind(this),ya=this.onOrientationChange_.bind(this),_a=this.onMessage_.bind(this),_s=this.onDeviceOrientation_.bind(this);return ao()&&function(){if(typeof window=="undefined"||typeof document=="undefined")return!1;var Ss=window.self!==window.top,Ms=mo(document.referrer),Es=mo(window.location.href);return Ss&&Ms!==Es}()&&window.addEventListener("message",_a),window.addEventListener("orientationchange",ya),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",_s):window.addEventListener("devicemotion",ga),function(){window.removeEventListener("devicemotion",ga),window.removeEventListener("deviceorientation",ya),window.removeEventListener("orientationchange",ya),window.removeEventListener("message",_a)}},ca.prototype.getEyeOffset=function(){return{left:[.5*-this.viewer.interLensDistance,0,0],right:[.5*this.viewer.interLensDistance,0,0]}},ca.prototype.getEyeProjectionMatrix=function(){var ga=this.getEyeFieldOfView(),ya=this.depthNear,_a=this.depthFar,_s={left:[],right:[]},Ss=ga.left.upDegrees*oo,Ms=ga.left.downDegrees*oo,Es=2/((Ts=ga.left.leftDegrees*oo)+(Bs=ga.left.rightDegrees*oo)),Cs=2/(Ss+Ms);_s.left[0]=Es,_s.left[1]=0,_s.left[2]=0,_s.left[3]=0,_s.left[4]=0,_s.left[5]=Cs,_s.left[6]=0,_s.left[7]=0,_s.left[8]=-(Ts-Bs)*Es*.5,_s.left[9]=(Ss-Ms)*Cs*.5,_s.left[10]=_a/(ya-_a),_s.left[11]=-1,_s.left[12]=0,_s.left[13]=0,_s.left[14]=_a*ya/(ya-_a),_s.left[15]=0;var Ts,Bs;return Ss=ga.right.upDegrees*oo,Ms=ga.right.downDegrees*oo,Es=2/((Ts=ga.right.leftDegrees*oo)+(Bs=ga.right.rightDegrees*oo)),Cs=2/(Ss+Ms),_s.right[0]=Es,_s.right[1]=0,_s.right[2]=0,_s.right[3]=0,_s.right[4]=0,_s.right[5]=Cs,_s.right[6]=0,_s.right[7]=0,_s.right[8]=-(Ts-Bs)*Es*.5,_s.right[9]=(Ss-Ms)*Cs*.5,_s.right[10]=_a/(ya-_a),_s.right[11]=-1,_s.right[12]=0,_s.right[13]=0,_s.right[14]=_a*ya/(ya-_a),_s.right[15]=0,_s},ca.prototype.getEyeFieldOfView=function(){var ga=this.viewer,ya=this.device,_a=new Io(ga.distortionCoefficients),_s=ga.screenLensDistance,Ss=(ya.widthMeters-ga.interLensDistance)/2,Ms=ga.interLensDistance/2,Es=ga.baselineLensDistance-ya.bevelMeters,Cs=ya.heightMeters-Es,Ts=so*Math.atan(_a.distort(Ss/_s)),Bs=so*Math.atan(_a.distort(Ms/_s)),Is=so*Math.atan(_a.distort(Es/_s)),Ps=so*Math.atan(_a.distort(Cs/_s)),Rs=new So,ks=new So;return Rs.leftDegrees=Math.min(Ts,ga.fov),Rs.rightDegrees=Math.min(Bs,ga.fov),Rs.downDegrees=Math.min(Is,ga.fov),Rs.upDegrees=Math.min(Ps,ga.fov),ks.leftDegrees=Rs.rightDegrees,ks.rightDegrees=Rs.leftDegrees,ks.upDegrees=Rs.upDegrees,ks.downDegrees=Rs.downDegrees,{left:Rs,right:ks}},ca.prototype.onDeviceOrientation_=function(ga){this._deviceOrientationQ=this._deviceOrientationQ||new r$1.Quaternion;var ya=ga.alpha,_a=ga.beta,_s=ga.gamma;ya=(ya||0)*Math.PI/180,_a=(_a||0)*Math.PI/180,_s=(_s||0)*Math.PI/180,this._deviceOrientationQ.setFromEuler(new r$1.Euler(ya,_a,-_s,"YXZ"))},ca.prototype.onDeviceMotion_=function(ga){this.updateDeviceMotion_(ga)},ca.prototype.updateDeviceMotion_=function(ga){var ya=ga.accelerationIncludingGravity,_a=ga.rotationRate,_s=ga.timeStamp/1e3,Ss=_s-this.previousTimestampS;return Ss<0?(vo("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=_s)):Ss<=.001||Ss>1?(vo("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=_s)):(ya&&(this.accelerometer.set(-ya.x,-ya.y,-ya.z),_a&&(Ao()?this.gyroscope.set(-_a.beta,_a.alpha,_a.gamma):this.gyroscope.set(_a.alpha,_a.beta,_a.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,_s)),this.filter.addAccelMeasurement(this.accelerometer,_s)),void(this.previousTimestampS=_s))},ca.prototype.onOrientationChange_=function(){this.setScreenTransform_()},ca.prototype.onMessage_=function(ga){var ya=ga.data;ya&&ya.type&&ya.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(ya.deviceMotionEvent)},ca.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),typeof window!="undefined"?window.orientation:0){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new r$1.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new r$1.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ca}(),Mo=[0,0,.5,1],Po=[.5,0,.5,1],To=function(){function ca(ga){var ya=this;this.renderer=ga,this.sensor=new Bo(.98,.04,!1,!1),this.scale=1,this.cameraL=new r$1.PerspectiveCamera,this.cameraR=new r$1.PerspectiveCamera;var _a=this.sensor.start();this.dispose=function(){var _s=ya.renderer.getSize(new r$1.Vector2);ya.renderer.setScissor(0,0,_s.width,_s.height),ya.renderer.setViewport(0,0,_s.width,_s.height),ya.renderer.setScissorTest(!1),_a()}}return ca.prototype.render=function(ga,ya){var _a=this.renderer.getSize(new r$1.Vector2);if(_a.width>_a.height){var _s=ga.autoUpdate;_s&&(ga.updateMatrixWorld(),ga.autoUpdate=!1);var Ss={x:Math.round(_a.width*Mo[0]),y:Math.round(_a.height*Mo[1]),width:Math.round(_a.width*Mo[2]),height:Math.round(_a.height*Mo[3])},Ms={x:Math.round(_a.width*Po[0]),y:Math.round(_a.height*Po[1]),width:Math.round(_a.width*Po[2]),height:Math.round(_a.height*Po[3])};this.renderer.setScissorTest(!0),this.renderer.autoClear&&this.renderer.clear(),ya.parent===null&&ya.updateMatrixWorld(),ya.matrixWorld.decompose(this.cameraL.position,this.cameraL.quaternion,this.cameraL.scale),ya.matrixWorld.decompose(this.cameraR.position,this.cameraR.quaternion,this.cameraR.scale);var Es=this.sensor.getEyeOffset();this.cameraL.translateOnAxis(new r$1.Vector3().fromArray(Es.left),this.scale),this.cameraR.translateOnAxis(new r$1.Vector3().fromArray(Es.right),this.scale);var Cs=this.sensor.getEyeProjectionMatrix();this.cameraL.projectionMatrix.elements=Cs.left.slice(),this.cameraR.projectionMatrix.elements=Cs.right.slice(),this.renderer.setViewport(Ss.x,Ss.y,Ss.width,Ss.height),this.renderer.setScissor(Ss.x,Ss.y,Ss.width,Ss.height),this.renderer.render(ga,this.cameraL),this.renderer.setViewport(Ms.x,Ms.y,Ms.width,Ms.height),this.renderer.setScissor(Ms.x,Ms.y,Ms.width,Ms.height),this.renderer.render(ga,this.cameraR),this.renderer.setViewport(0,0,_a.width,_a.height),this.renderer.setScissor(0,0,_a.width,_a.height),this.renderer.setScissorTest(!1),_s&&(ga.autoUpdate=!0)}else this.renderer.render(ga,ya)},ca.prototype.dispose=function(){},ca}(),Qo={zh:{TITLE:"\u773C\u955C\u6A21\u5F0F",HIT:"\u8BF7\u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165 VR \u773C\u955C\u4E2D"},en:{TITLE:"GLASSES MODE",HIT:"Please put the mobile phone horizontally into the VR glasses."},ja:{TITLE:"\u30E1\u30AC\u30CD\u30E2\u30FC\u30C9",HIT:"\u643A\u5E2F\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002"}},Ro=typeof navigator!="undefined"&&(yo=Qo[navigator.language.split("-")[0]])!==null&&yo!==void 0?yo:Qo.zh,Do=`
<style>
.$id {
  all: initial;
  position: absolute;
  overflow: hidden;
  display: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.$id-modal {
  width: 100%;
  height: 332px;
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  overflow: hidden;
  pointer-events: none;
  will-change: transform;
  animation: $id-modal-fade-in 0.3s ease 1;
}
.$id-modal-bg {
  background: rgba(0, 0, 0, 0.75);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
}
.$id-modal-bg-line {
  height: 1px;
  background-image: linear-gradient(
    85deg,
    rgba(162, 177, 255, 0.3) 1%,
    rgba(120, 126, 255, 0.8) 30%,
    rgba(147, 218, 255, 0.8) 66%,
    rgba(250, 255, 184, 0.3) 92%
  );
}
.$id-modal-bg-wave svg {
  width: 375px;
  height: 61px;
  display: block;
}
.$id-modal-content {
  color: #ffffff;
  padding: 0 14px;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  overflow: hidden;
}
.$id-modal-content-title {
  font-size: 17px;
  font-family: sans-serif;
  line-height: 18px;
  padding: 20px 0;
  font-weight: bold;
}
.$id-modal-content-hit {
  font-size: 14px;
  font-family: sans-serif;
  line-height: 24px;
  opacity: 0.85;
}
.$id-modal-content-guide {
  position: relative;
  width: 168px;
  height: 139px;
  margin: 36px auto 0;
}
.$id-modal-content-guide-cardboard {
  position: absolute;
  width: 100px;
  height: 82px;
  left: 68px;
  top: 57px;
}
.$id-modal-content-guide-cardboard-image {
  width: 100px;
  height: 82px;
  background-image: url(`.concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADqCAMAAAAvZYhaAAAC/VBMVEUAAAD///99fX37+/v5+fn29vbx8fHv7+/Nzc3o6Ojq6urh4eHU1NTR0dGDg4Pl5eWSkpLHx8fj4+Pe3t7X19fAwMDZ2dnCwsKrq6uioqLb29uNjY2enp67u7t5eXmAgIC2traWlpa5ubnKysqmpqZycnKHh4eurq6ysrKKioqDg4Pd3d12dnb9/f1vb2/s7OxlZWXz8/OoqKiZmZlpaWmbm5teXl7W1tbJycnExMRiYmJsbGywsLCPj49aWlq9vb1UVFRYWFhra2t+fn7t7e1RUVFOTk6Dg4OAgICCgoKKioqEhISIiIhqamqCgoKIiIiQkJCIiIiWlpawsLBmZmaAgICenp6Li4uBgYGTk5OMjIyVlZWFhYWCgoKvr6+Ojo59fX2SkpKvr6+Ojo6QkJCurq6BgYGxsbF8fHx4eHitra2enp6srKyJiYmurq54eHj5+fl+fn57e3v////5+fnS0tLAwMCVlZWwsLCurq5QUFCtra2EhISUlJSwsLCUlJSUlJSlpaWVlZW3t7diYmLAwMCFhYV3d3f///+tra3///9XV1eampqnp6d8fHz///////9VVVVlZWVtbW3+/v5SUlKcnJytra28vLzGxsbR0dHX19doaGiWlpafn5/Hx8ezs7Nzc3Nubm7AwMCIiIjj4+NTU1P29vZbW1vl5eVkZGTMzMxYWFjq6upfX1/k5OT////4+PjV1dWkpKRoaGj4+Pizs7Pm5ubAwMCfn5+vr6+urq4wMDCxsbG2tra5ubliYmIuLi6zs7NHR0empqY0NDRCQkKqqqo5OTmoqKg7OztfX19dXV1oaGikpKRkZGStra0hISE/Pz89PT0pKSlmZmZJSUlERERbW1s2NjZVVVUmJia7u7uEhIRXV1dZWVlLS0tOTk6srKxqamojIyNTU1MrKyuAgICCgoJRUVFra2ttbW13d3dxcXFvb299fX1zc3N2dnZ5eXl8fHyHh4eSkpKenp6Ojo6VlZWMjIyYmJihoaGcnJyJiYmamprZ2YdEAAAAunRSTlMAs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7P9s7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Oz+QSzswb9DiH3FyI57Jn1ajgu7uHYmIgr8OHHwqVOQybv6OZuUvTt3dHPrIeFSNVgLCAWD9/UqKebiH1iXVTczcvKvambhnBuY/vGrKqjlHlzVDj37s/Fw7+tpJGAeN7VzcWTgGJNQ8O9u7iko5aVjvbNsa+so1pd3mNGAAAqAElEQVR42uzZzWvTYBwH8DxNmvRlfVNr17Wl05a9dISyiugO4qVQ2g1pVyx2Q7QKCoIivgxF1HnTXbbDDnNDJ8iQHcQX8O3We1t6GnjJyYPSuTmdf4C/ZE260U5rl6bJ2g8Pu2zP5cvz++ZJhilOcOxcfPHq/NuFhVcftK8WXizeCGItFWKKX5x/23Zk3/6OPr1+j0mr1fkpkuxXv5luBbbZWPzevEWjMRja2iCrvXs3stJRFGRFEDhOT1xv5QWCkYvPPtosFg+XFZyrvSYdRUJEBA4Igg2LRuBhk+cVOndv3uWyWm0DlqMajWafXkcSNNrexA2sSQ1dvPK+86DruNUGWRn6dGoa/dvk9BjWbMLxZ7e7e3ogK5fVZtBTOKrew6Y6Xufu3Qm0d3f3dEJWGj1Fo/81dbU52isUf2T3etvZrHoG9vtxVKOJm9guF049ddrt3gBkdVCzh0DlWtO4YejT00OHnU44VwHXPgqJ4PV1bFeKDD8xH4Cs7PaAtY9AYpncfeUFSR0zc1l5B/Q4EhW9q+KCpHodXFYBjxZxWnFtk9SZrl4uK6/Hj+pmWvlxDQ2fMRq7eh0OSIpCW7Ti2iJ8/4zK7WazcloqJtUaxqLweFSl4rI6ZNOhylpxsUKpqFsF3EazS4ukNLmIKcuJpFHF6erUI8lNKeiaGrl7WcUxtu+nUUO8VsZLEDz8VBy33YCjxnko+1dsrtI5hz1q1GATcm76YCrpVnHMVgrJgWwfjCN3u1Sc3k4TkgtZNv3QcLHS3Wyly4ncqis8/qSYlFNDINl5IZ9ZDKaifFHZSCRLkzKZxZEkX1QHtUi+ZDCLQlEZ2/uQzDX2c0T4vjzuntWaatiVPiQU1YEBoahoRMNCNRBzv9zuqCNJo1BUdGU4jcOiqyDhfgmLvryoOnClkfRwhcehqDh2A4ErkGTNBa9+paLClUqSK2rkrnCjMhFK9mYMqy+4Jwhf8wjlIWcvjcYGGYbxxUZvmd6V93w9XmicHpJQmD0zifM+ZovYzFWsjMifiB0urVpRyMeJmI+pyBnCxBcaF8avQ60kL58nYkyJ78f3leUvXwqrP9e/MqzBCCaykWRp/NTKQT0fHfzN8L79WlteSm9S+MUdt2t16XR4+vVXTd2vhtVfRrL9cw9ijGB9rZDOgPRm+XxunQGnRD9Ubm8bqRgvZ0Z9woFaX81lNqQzW7MCKwy4IE5T8YfKbNWRSmG6FCtN3upSNpspKosKLBXY6jorxuPPyF+pSKWYezDIFP1YyWXYpLJlSeWFqNi0fFD7O235VFTFOWbVUjUiKRIWBaTZP5vgk/r2vZDOgkylAczD4tMCy5DW6R2V+vBlvqkohZhN8DX1dY09UkJW5b0uJMXJ/dzRIEaKpe5wmShlmEv4hOHLf84WlU8gEKLi5Zagtk5itTkR5f/trvNvj/JTsKr4Xf3366GnhKSy2WJWmZJKpypfDCoHVmHriZpu6hvzZ+zu0HH8kBj8+KvKfyfN/j/UnclvG1UcxxGnhGxKaVIIioBEosi9gVAaCSkHkFhFgAOrBEIgDixCnOAAAgmVG1cEZ7jxHzi2YzvYcWyP3cRNY6e1J2sdJ7bjbLXTLOL73rzFz88TGqip+cyLZ+kMJB++v988jwN0fSJMFb1JIFxxXXq3kq4wCIjWw/+gVT3G6+++/wOtP7wmMuUVooASqtmNQim/6djd36tUyuX9o930WnZrXagCJdwQnz3lc+JvrVb16MXW+/4P/PaRg3X0AstUUm1WRil7VIn5xzkeD74EU4fl3c0CVC0bG/iLvHi6rs7vf60ncR9E4kXbVvcbf724+a2VZpMUdCuhysgfHS5xR1KVR+dyZQdvrNdOdT9851X+IWnr/wDR0h15I2kmuSwK8eQetwG+dGP+4200rW9Oq+r8/a3NT9cPH/K3x+tRSJKx8haObvqvXx8fx8CLrokOLBp/7q69daq5An5BtrWL0trVitHFkcea4M9/FY2qGBGhQreKFNI3x68TdFXSGIaO3+P3e6a+vK1Uvc+ev7R1NT1i7pktxU3AVEU2HIee64JxDCy1lrgqrBVV3Ne7r/ztZMFq6w+NtHWdUeg604Vhu62f2/Dr277m8wQ0KqkqvnkMUSo2uWKFWKvKTxaMy1+c7Oq7Tuu9ctuZZucX/mnD5kbUpCSBkT6AG00VXNkJ0/BzYeCxk2L1Ki3AnjNtZzDaFGqPnXROw6//46vnHWmHNaMyhari/iS86EAThgYNVd0ZBM0V5U37mdXnZF51/kJbc9Mr5wmzTJSZjG7tuXVTateyK0U9WXR1oq0PHiaz9fa25kY0qp31ZIaHKn8LEYEOLDpSVI0w2dv5SvoS/F5/wkBcPYH/Is791WC3DcNuXz+3oddXzxMyXFUBmQJWZ1Kxb1oeeVPUVPF82dt6Ea4e7r+/iRnCPIG6Wit5M1zV+v6YNMDE6NiUIPmqh99aGPrs9OXH4GoY39KF+y9o4KB+XD8HNOz6vs9ek40qg4Vg7E5JUdZig83NUE7h9ZuhYLJ2vvUs6e0DfVVc6LtAwErsY9gepzTs+l8/WuPzhCQyRWPlzR6M12Bri/4Rhh6setGCKMXWz8/VzK/g6nxfczLE737ZQiQDiKpoibZ0NVeQYhcs20Kki4rfGsQY0G+JL6BhPdnX19vXS8BKbst9sVaQ5zTm+h9G0w5HGsvWbIZhzh45x+tio4pmyq4SdagqDI7br3zq+jYaVktv8/HHG8+z8ltPilBt36Sh0pNFZdzmNMvjnIzdPK5Ubh0fHsRik6oq4Fei9XP1nRBF+EDvWYXes70YyrZyTDt+56/HM2KaKtz95rkqY99pdWUdmyJURTljt/Y3C7ORqMB6ompsrZUP3doMntMpZX2L5zHtZ5uLDv5AYdswM4zk9oEw5dFUKcL0jjVWLpq5mXDIlUpM5PhDeWEMzkwzshlTmrxUNiUeMj/XiWCdBUNnhwTYwbDbVtaUO3s9OhXBkS1G55Eqind3TE636+pi9aZNGpbKxZxrenpl5Uo4HE75XC5XYC4TEb4iUpdZONBuh8DtFj3+A9Kx2sFQ+xAFGwLsYNhuC+7g9QiV1dS3Z2GKsVHxezgyWZov7Z4Y21kNTFNWgA+2Ai5CYAKf9AhhEalrR86zJO7Jl5msV3ErbG8aLrFnL1aosJD624kJUWypmyzZ6qm0qWwGgWKsEK4FwuGQJcsVMr0WoiKT1FaexkpNlt/dyaoQ84aB9uag47OXECmwbWTmCRkQP3J6JGp71xsXS9ZSOpqaBqqra1dC4USKuAKpjBdIXyRcNFtIFhC+3BjuGHsHTaqwg9De0Y5B14BuA2Xf7pw7cv2ljzBTgKxsKQJPzJWxJ+pP6lKipfs63JiBH10VcKEQ4YqSMr0CIouHa1/t7sgVhvUW8XU8Re5oAj57ic+pTOqJpqp4rImCKm5Kr0Ow5w1M18JcXQGkxwcYoSj9CF+my7KVPKhtWRjv8pb1YMfd5hKefZJUkTkVsGSZedGqVF+gfo937mZuMD+aKyaLdC3mKhWYicOVECYaVxx2PGq03JdfILLQsh7p6GjpaMGgawX1mN05//L6H0bp3S+dRagY6OrZSevGpCCCpatypxeuTduoYrkCrnAiHOC2Urk4gCvFlmkeacGy6vBlTN+7tR+QLjp25/2b61s+hSaSqq34vMBSRVuHrqtez/KXvSGIsXXFZd24weswRUC0KN64Yis6SaIlVRE+svp7Z8vdA/VnzRQ2kqurMlVrl627Ud0iBDVPPPeMYDi1cmKs4MqSFbLqMEUJRfHLRlXhYm3edCjJosKW8Hs13+PznJa7xXujaTpVwPSzSlXUAVUED1noi16JUtgtIxGGAKUEtdbOVIFAOBGCKiZrdRayLF1xflckn9M6FVtu0rbwbxN8jF/Uxrc92DKIYa0BVicfA+r26a8f/PQlqwC3IsSU7FVjXBXXpCNq8KAQ9LlCiitNFZCufIFEIsxzFQpdhSyqS9qihVjmomSLf4w+nnlq8C7QjfojqcpumKsyVfPm9pRf4lGalpYsZ3bB5fP5UgjWFRtXTJV05XNBFhEFVSA4q9mihVjA31h44k2LzhwGL14cvDhIwQaGsmaIff3c019/CQ+KHaz+qmNViklR9Lu1D5anEgn4XD7MMOHKZ+NKVQWxVFYCrhhhwzCYL2JLFuJYdRVSZQf33PMjHjngB+m+2E3BBoayBnxbX1NOe/17L1lPP0uov2pXxZt+BXE71J1NbgXhicpCEQbsVNWXNROStuIGELbkLbGi1iDwv0hldf+nkFYFWdmiSU0J4hV62wF/27PKpgv4YApFWL9haaq4K9fMTDAk8RrSFtNFu9amlMV9fUxkne/+7xjGVJ2kKrucWaWIiVXayfKu2tJ9TRUSSBRVhVdShDdOaFcM6coVDEpZ4VDUkLZEISJa62qwAKalnUTWMKV7uJuCDQxlDcS2ft5tX49WRVOFVqWqyuSnSNAxavDU+tozXdQUf4GrgH2srimqAFpclSxcnDQseLJ414q6hS0erd+JrMeH8X/UODeMcQ7IbbwAbVs/9zavHxh1ULZYq5IlaBy6qStVkx6tpe0gc4SBxSrCldtrV8AFAnNzc0wVkWUajNpoxVgFimjhcenDkHXuv+C9Uev9XzGphAqYu043hf9TlCgzh0NvgBcfXuiPXq8IV6avKa5uSFeE1NzcBI8VMJeXZbRmq6J1LBoW84UHD/fiffS5xvMTujppVeu8VUlbxZjbggdeLUEmy7+f8wFY4g2LBStVq2paUwVXMlihiYk5pgokMsvVtiCLt/g9tWWBnyFLJKvnXI8CDgiwg6GstXPsr/8UXR1kDThSSzATKbsFfvqlNS1weTtIJbHyoyvW3a+oroDqSlUVCIQhK8xVJSALCFmA1+GuejMEB1RWT2NhqnbisKS6ymQKU+5q1Dr0sNeYEWB5wop90X1tiqXfBVVXYObq1SBTJWQpXYvJyrJYyWjFGi5rBKpIr8p7V3PClZgv7ON7cApRdBG3RA+rxMOIiyCDhQFEsPRYAZtYgbmFhSCPFZivKwu2xERL6Joisp7uGRnpGenBoGsNebz+OSP214+QaRVk5SM57mpeulqOOYFbhaqSuioZmiQ2A1WGOndHt1Jc6d3K4ipkcVdqstRZ/DYVVc0SldU/Iugf6SdgpW4DrPTj9Jjd9f3szXIpmsvxUMkKNNc0VVrHKi8SR0wTT5XQhh9Zzt0VVbauUqGFxcUZ4WpmBrJAtay41eHzRJXa4oms8/2NgfWqUjIHVxzhKnqLqHLSFylLMVZegBjpCJvKfgrBkqki6K5UVZCVWFxcJKY0WUDp8HnpqfGyfnrGAdYKJlelPF7IrP/ppKI0xORhfwFCmCTmSN1nHcv+LsiQrvBoZm5x8SoTBVVclt60aLKsRZU1MDDQP9CPQdcCdV85DsQ1QL9+YDRNVBUzMCVKcFW62hyzTPFcqdECe0QVF0M3a/fJ5zQiVnbtClTFCiws5ia4KhA8QRa+Dz1ZDwzccf6i7Wx60zjCON5PEPVoq5WcRFGd+ugoN/fUSy9VT1UPTXuu1EPVr5B7T/02wAG0ZrFZMAjMshCVBRziXTCOncR2Xtqq/3nZfXZmdrdJtf15CsYiCvzyf56dmd3iH3msLv2kqvGCTnK9KcVAmNbfMf4e8xSRoor5GO29JlTlzq5UV028Ipu5EtiZyXIuKVP/r6zfWLd6Xg0ByQLUrqQo9mXqetep14D0wi3pj6m9K0dBmlw909uV2Ege4gUlVNm2nyWL9aw0Wbfv3r199zbGXUDfp9wDeh491v78Y97XF0qzwojOMw+OSgQKUWtZjXUfnVtEiVbNxuO6WOlAFLnKjFW86T5bLKZwJbFJljF3OIMqNihgJSGrWH5m3aoNU2Zj5639sKzI0nS9rD05aMJWnCQxKtpjUYVP02IFjKOgPD/Rx2sZkqocWa0zocpMVqH8FmAV2AoBqUq4Om+UFNQavOohLMzWQSV70hBPsqAqyxWeRLKEKWAh4mRKkaVPtDLLUHD/9n2M24T2c/qe7s3nRa7SGju46JZLZUOXFHbYEoUlL9GrKY7Ux/xYCFm5rurkittqLsaTKalieFClL6VlsjRKvAx37xcJjoNBNX2+AC5MVRiSPyrRKeQabFWAsn9Fj8EIT8ieiFY4SgWC5hCvwOaNPcbPkZWWrHtFuvpmJ4CrDFVwBUoYiitRi0dh4nQ7XByY+1fyMQOV+kw7h0qySBXVIGiGvh+qroZZyXLMZCmy9u7vcfANBr+X0GP6efpzfsZc9DyUpqgCJes5c0XZSs61dmqRKsCjpe9fyccCrO6eGCcGZQkKDFVN2/d9y04wHJIshiJLC1ZJytrb3t7b3vtg8Icw6J6BCdbzlKOgYNngwUrT1ZioV+ixHj8y9q8SJpC8FFdKCequmgvf8xVVubIUU/yGy9ouir3vMGtwVFOTCL+zXxaUjGRd1bUp03EFNvT9q0pEnbWskdKujlNjBejkxNBrtdzYFFylyBpklWFJytrcLoyvsHI25wsc33kHT13Zs9Sp1sUTc+9O1GEtMRLUR81+XTw5P1cHUhbfbve8ieLKlAXSZfHGymVtbCtsbG9g0L3AfGz+DMEKfNnYSRTwJ773ttyFKoZWhQ3e2RVXgO3sqftXMlR1puKg368oqgD5NHIF+pbXclxhKlZlWSmyqjkNHrKKAh1rrbgax678V1DVFclS29b1QeqqhS1nlKkoIBXNvl0zF86mKnLV8x1nbAukKbh6H1liBQuKlLX9eCc4pQv4FFX+ZVfUoJGtmxq19mRd8aZF+1cUKw7WdzWtBOk5HM1Vf4rFsStFkSur9T6yMNh/hSbr252dM2VuRa46h10AX1HTinj+xFBFsmj/KqIuwVTpmXJunlzRslkg9pDtllMdQ5USq3xZpCqRrE83dnc3djc4+AaD7kH69wT9mdOdYBD3dYnP8f7sCihYGGBtlqA0wGdaVIEUKw7e8zN1O4ZUyRIckSowgQDLpmYVkS+LhGEIWbvF8BjtfUKqkrL+mHNT+Ooq04e2VoLJsEhZZqwAzsGTLHPdzKBYgV4IAaGq6v2TVRIjlnVv9x5Gjgl6jvaYvkcVXgpVlCvBct6VtqJgiduqkiutXeNd1pOx4pAsqyYTyEjaVEtQbLdbeP9eXIGEazm5sshXXIb3igHHQlmFZIrjXXNXZYzIF6/DTnasuKxePVYFyBR84B3XUtqV2q+aUa7sFvZdrKEkocp1nZx5FonCbbGyNoOdoJUswUiVFyBYXJc6e1iqsyv9hHu/J2XVKVjSBpdVORbdioJl5Eqe7uotOp3BLBJFuMD51+VOKRL2n2Vt3tvEUH6EiUMwmcSpIledxnwOVaIQqRQv8nIFcMCrU2OnVAlZrjtiz8xuVwhVJGsKV75ZgS6YVvNk0RwrTtbDzQ8GogweYeJAswVy5b2BK6ji0Gzr1VNylXrdmU2yDFcHtus2a0oJGjPROFduZzCoWqqpmGr+Fk0JQ/giWUXwbbBzThUo8ECbu5pryXp7DFV5ripox5DFRgx1JHs6tckVSHfVA1Zn0B5MaWYF3FjXtJMnq0TJKlgWtkjbhilwI13FTYuxX08/DJKrOt4bTOnNSuro4cQyyapndHaosodVaAgVVZIpY5CzU0ozB5L1oBhZ2HHoKK6EreW8MQdQlZg/dMOnubkCIws9XK9AmmvikgW2GMpy1U+6OlkYzQqqhCxypcsSoZKmSNanRbDJtrLiXuVhCP5qxLLk/AGyXuS2q/hyxmSqaFrOmYZhP32PoZl0ZTvtk5NxiirhajY7yT4VBleA6yJZdwqR9SAIdjytBoFzCFGNuAzn3NWfx6kLHEVW33JtowRJlhWGrrp1BVRXYIj+vfRJFfUqwSxUZAE6yQpV0XGwcFmPg+DUFyQ/sveMqeLQEXHeI1dmu5IGcLzrGc2KsLETNKKjIKkiV7ZtdZbLZUtLFUxJUMqTrAk8ZJGqFFkPP32I8Z9l4XShVoEtjLeNhm6rfGLmSnMFrOm0KVxpoZJOwvHYUkrQdDVtL5erhCuJNDWdAT9TVkbPuvOwCLBL+tIHpIoFq81UUYfnvM09CkpXB3g/IzVWZIpJGWKtcJCUSapkv1qcLFcrzyhAyhXIWhqKnhVDsj5+8GFaHjx8gKF//10QvFRccU4bgFciNflQqCJZhivQw9shVXqsQD/0/YXZregw6EDVapKnCnSMCTzJolApsooAyXohRZErVOG8S1XIm/zrfzkMCqzZbGi4IlUwMsS/y1SLFR0GwxOoWoYZfV26ov5uXlN6SaqKl/UoCM6oswucKg8WG7Jn4Wb2Pq5GeCN9vQKpK3ErM/xFbl1tV1KVW12BgZsbq4z+LibwkAVSZN0pgkfsSj9SJbiAK64qttW9TlFlbqD3wzA8SDdFK+QJ/oaZ3q6gyvJWDD/jEEiEmS0LZaiKKmNA1lZxsmRjp9/e8gqqulKXtLXObVfSFZtGTXVXTXIltNg+/gq/py1w3NYKnHdm2jKQKlCCf492xvydl6FGGcnaKkjWt0FwQaakrOsGo5s4JM6beq5SN9DDxcJWelWTXAlTgNnCW5tY9GNrMmCmzpdjbXvBzBVceeSKggXgytNllVGGW1tbX3xcBNhUXsMUpQoMeKgYcSG+1qYMRqyYIj7lRBUarihV0ta4WsVmVdVf4N0vJk57xThf+i65Sq3BcBaCQWzK/L8zLzVT2AkXsu4U8IVkrePGLmWtSRRuOOdmripaCYLZYjxLqcB+BF3oOHUGoA3YDJSnaqCmapqeKuC1iYGy1mkZZVgWsm4VlCzIIleC5w2gHhCHWTUY5wr0sTttG65IlnJVaNhqA6wBIet8NfBmlkCqipuV4Wqiu1I+rOCFago3hx9t3br1ScGy6NcnvWkA0gX2kwvn9HYF3MlkYajSChAjwgonLQfv1PFDV18HZsQKjAe6q2SwvD+MYB19dKtAWeeaq+p1QpVo8jfHuisJ5Qp2sCtm6Y29T644NqGcj3+vZgX8DFcyWP6NMmtgXHNZXxTBT7jkT/t1i51GgjnP1lq7kkNr7YIptsWapCq9/kiVJHsfJkXVuKqp0j9fxb+OXTFZ7Ot7LiuFL2AQNwr5z2HJckgWY9VQmMNXKGXJvavU/fM+NsXcgxxZdhI9VUBVhaHLWjgkKuOTezrJboVb8IjLKoSfgmBFseK80GRhjPTODvQz7ljGTJLLQF1VzzBFqvKPgYJFa8AtER3jM6H8QG3vZfBDobLOhSoMwU5Dt3VE7SrzOlmbLfnSZ6HATutWZqqymxVUqXSUz8+SRei/k6IAbkC3/AuT9XkhsnByZ8XrD0NyYwTrylg3V8zLZFstv5k9tSJRdmZbp1QRslc5eqRErvRP/XvBTQlfksbXXJbGJ7CHG+NxPl/KMqwSfzc05qdQlZcr2Bni5VoyVn1KlV6Bw+liylWRK5dildHYJ06y8MSd+Zl/kNXaj0qQovX6I8j67PMCkLKqBF7B/uGhZuuEYpVx7WfPbzl+/mzBcs5ujso4nVC+Wrt5qlRXC6+ajBRhfvamfxNNGOQd6P4KWbBVmKwqgRfQNoLVmNQEGbGCnxCbYMMcV8OTqzK2MCP21yQrt7GPW51UqqSKXJ1Sa2eI0+i/C1kJPoc53KSS/xwui2KFsTxs6MlyyVVdm10JPxbCGZIqo1d1jqSpEh/gapYWK0LWn2mJ00n5BFz/MpqJ8iF9/UPdufy4FMVx/MYf4E9ghURELMQCEa/Em3gl4hWPeEYICfGKJREiQbARwULEwoYVG4nGdWk7DUHTpEbbSKudajvtdDpjiO9533POvUXNovOZ03tvaybRT76/X29Oz22HFzvOZLgaFfRk9YAqVBm+XofWIPODhVQvou9NV6pZ9Yl3XCBKbOKfIatdqlJJ4UShdNmfrVyBKAypiq0rQxU655GsUZaFVFH6XatnSVd2CQK68hNFGNrYS/rVwriRjRfVp/f0XoUpr0BMVfJTu4fUrAxTRcvQewhZmyYjW+P/CH4Jo92xkKW+nLnieUawmsKVWr6gvQmRwd9mQpoVSGWpKYrbHPn14znLl/tCr0BFKvn2z6JAVLarYlNkSgFXiTUOODt+FJCyVKzwwpx2abQwBC0RKztXdJoTf55sc2L16xkn0UrX6/VKJf+Lta5E7ItExeorXlgZ7TyBqKzAF0MsUloRYiSy1x2wdzRl+VX1fBjyzKbVCHcFW5/IH78SqmxXVeGqWahX4IrQ4k2sZKr6+jmp5tZszK+wIPTGBhNSk4AvsV7rEHaOoqzvSIbv+9EHPbMOK1IVMFcnvCITxF/0SSv/+XrG5a7ieRIrThOuSLz6NFOpXu2dEwzbEtkwkkRWD2JKMHQxV+4xh7ByPJhoMX7ieIx/eYzI0r93vwVVTJcwVtVipbl69+otWSXLVGGItq5s/XzGSdcr3FU+X5ma4E2s1StNiWVPXJhC1Jz5tTvF/qEfwhJumih62+pQFp+XrjrHkPWBEhuBKKZLUISsQFewk8RffOOuguasPgtXkYoEtvL8839wa5VTeFOILZeWvgA1YsD+4W2sXME3vBuz7eqknW5Ac5UDeNMaTVkfhKsPPzyKqxrXC7tdEZirWCxFVYXMhMqZy2FpqpIHaf+Viz9+9hejKeFLCdN0vYiVapX0UKvp6ZLIjeBTxVb9ZI84nOVE1jj8UHBggofsx+3fYbI+SFexGG9ZdMPola6YKVWD5I2WJDElZBmqECxBi5mSNOWZFycbHx78ma7U+2u1avk7KFf76pV8+ufgwPBIHIaC4ReNajXIxlFHsonI+m+kLOmq6HFcaetrmCvMXObeolUFpIrbasgLyYaoK6WL9zKurBNYm2I7lSn2Qgi2LHEkqxGtUZKlVElZvGlhgIxWgkIVrqyJ5YpRX6iMXIFMVs4vpVkBKnjP6VzYczp8mVLtCsQ3Oz7OTkS0JozDmEBRx9p9sQ8CD0tZMbgilDyOOjd9yVQZrf0bVBWTsGRXoJw37ucXdGKDUGmuCqKbdZoqtgU4Yqp4pNh2nUNQXQu2JvwvkFWWqkCu7ElcLuwVZL3mqHYFVcWUZsqeNI6TOqFPx9ViVSDEO1dFN2xIEmzw9cJ3HJ1j49HBR11WVakCLuG9cKVi9eVDEWTet3EFWz1EFQtAxG+K2po69B/Bko3KbuzAdAUWn8Xr4KjIinGw4CJX8wTy5PT1a721v3sZhalSz0tblRRF+cmvu8OI533AFEiPdGBJDtxUosSOxyp7xrFYdoVEa9qEaRLcwQg7Nh8TsqQrdKFcn67KxU7UIFf1qbdI+Bz0GkhVCVlf3OeAxWAEiiAJgzKVfL1mw+3Ektjo9ccjxWwddkK+cxu2/odF+XyZq6IUIcvQFddq8GMyR2P1UU5Z2Y2dU3quGC5I8ixXYPBfMqV2ovz08wXFRSeQ5ePAf8kSycpRW9DQ7wFN1483cpLhZaqnCEq5b/Y7p/ZbXAPi0js8tQGRLLqHK0qTS7BRZjD8Z1X22TobuCFTuN3a54SwGZWEaE2aNkmAQ3VfYf473wtZOaYK1D0D90dPNPWNLTorUlXFVFizAsrV1yxXRdi97ezeYzv2btq2gqWL2GqkG54qMrPo9DwxUdp8FdtiT1WJEjy0ywll1RVia1LHkDKkqopwRah4Js0ecXIPSqWeb6+Eq/bLPMp4BrL/yqeweMe2pdQXsdUYpI1a5gZH1n3ey7kms1OpMyuYIu1qsdOGlReQrM5tIVnVWIyqCpHljlBXOWYq9fIdxzZlXJk0wOqDPTH/c1i2aSnt9JDVGGalBrgZ677csKHBSlBxaL3TniVHaFl1LqsMVUJWqZiPeBFPo/UpQ+Yvk5+/fnylFqUZbd12lXETgL9SHTRex8+TUkQxNhpxJkKLkryv7TVFdKuRTRzc54Sigk1VTfcxafokjND76jGaLCJKuCoVInCly8LscQfrrGKsQJix7VZBjC/kQSHfiHBH8rRAv6+EAX+3Ms4Ysof2ifS2Z/kF4qoj0LOqyhUoQI/ua8CWFe4KprisRgIIYWcC/tPbWLrSEV909HNzw5DogapPgSwzddgswHCWXJ/+37JKjKmGKshqs35PmrKClYknfNx1Alh2diNk5ac2lSpgqbLbFDY8sbdObj91+OL6E84/sWrSnOlzMJgCHAB2v83jAGVYU65AOuIZXWuQuQqvwMBFoaVE1hetsG6y+ey2rSumYsGIhpkoYYjYOXhy+5RTZw5fPLdv/a7jRuH9Q7jmdALpWdSUkgU8U1bQREzblY6ZEchSvv5UJLsunpm7/eTBPZyDB08eOrR9+1xoOXP48F2Y2bd+/S5bTudsuD1n4ZyFFBxQcIBB90HgYVKGJSHrOwZk0aalhA3JVGmEqqKy8uJTIRgnnG5jyfWZC2diLMSYyVH3sQHiWOxJskrSFWa+GzRZRJiUxVWFL3S01+8Vhaosve1xupANt2f+I0hWjasCTJan6xoSrmxVGNyUvoI25mYpohK3O93Ikmv/KGs/GjxVpWSxaPnKMGx6L2z53reSuqiTHRx2uhOEawZl5oyZGHQPxLHYa7KUq3K5wWIl4wVZfzqzErK4qlRNXqkoivGc06UsucZU/R378/k+WoJKlkCWoW0K2C+BGETV57wLU9SWzNcup2vZcHvGX4Nk9clYwRVkCVHY0O2QPb1nNytAVJFPNiWuXP7DuOV0MSRc/5AsnyozWRiQZTWr4AtuMlDVOwBHTJfilNPVbJg9e8ZspgMHGHyvHuMcgCzlyp8ssqUHg393bdI38qEj0WEXJKgvDC6ta1uWDNfs9ihZ/T5V1XI6IvHYGNBOQkMueMO1g3D19he1BF3UlajE7jsltcL117KkKsiqTo1oQNeAOWllX5uUgSq46vmhXafIo9XtVcjDNWv2rNkYs+QeGI8dKBQgi4vCqBYMV16kpdefHSuooq5ycSFJ9i2ycdc7Y4ENj2f9CSSrXhZUQT5i4A0HTcT4U8VX7dcirglsjY1g0XBd+pOse5AlTYXI4t3KMsVVcVfpIFVgz3FnrLDq8R9lVZQqUImYNImq4NfAr0lxNciLlhvMky4+IbVYfGnerFnzZs3DCJRVKFSUqlqtVo/EDVnxb8SUfWUSQiWvyPoed4O5OXZyRVl5dV4495Gsalm4Av1wZZAMUIVQ+a5eS7NVgjZblzhjjYdtZeWlKmoLdgxfL4zP/mKhArwGY7+gCsMicsUZgyx7wNQsmLcAQ5rC4VMpq8aJWHxI4mMqpCryPr66eg1UInLJrs7lY87YZMPpBYE8giyVKtAXj5vJKiahpPcz/QrpqH71WjL6YdgD3JSWsN0rnbHKkkuhsmqQVeWq+oisiO6rytejv6XAEweuVKzUVRlc23hnLLPyKtUzf8F8DLbHEWT1iVBRWSMRostvq94LW/rVRzxXMcRKiBI/LFvNvc4Y5wb8mGASvi5l9YGBOGRp0Wr0MlvUl9whVr/bO3fdtmEoDPNJ0r1P0UW+oKC1GGjRJoCBdKinwB09B/DgIICHvELRIQ+RQYuHnqxdjI42ejMqVWpguUWPKNJHFKtKBZJBlD5YpucPh8c/aRLeeHSOK/vgFHzBak93bsgaY3ZIVUl+eQCgVdZPcTsE5RCJqs+/lSrSJUvrhFkBX+RkJdmBXCFr1bRA+drjpp52uS35fPPDWxYQnzFbuJo6zhPnIOt6g5s06QxEfN8PAPGytQUf0JbQRbK+x4YjlR9eDpg9dOdOFjEPv0hXiMgOoJXWe7rblnIbLuWms8mz+oX2kozqEOdrLC1hSpJWVjZB+HS1TSjbgDyWZALPmXXwhdNxOvhCWz20JVyluoIYQKiiyRhqNwG/RvLsiGdW18WI2chw2pEkpRWgLEUICk9V1zf6X56bMKMqz6s+s5QrpWuc2PIlQbBSogAO+XR1Ky6afvy0AuGKniXhPWIWI3U5vdRW4AcCkJArJN7d7SLtlx9VW8pXbdfN/6frfJPYUq58cqWivBpIlTrFRcJOObOe4SKx1Vsj20Cwjam01JODjiUpcbaE9jL4W9Hkla7tNgTI9XgxmtChiMie0F5G/930+vX6wOOsKvinKDlaFdrL4XOcipIACOpcxco820J7BfhsLH1F+jyUQxE2hvYqdEezo8lk8hQIavQFwiwN7ZV5Awa0+Mnh1nen/Z44BkLv9DljYHVorwbfgwGtf4iL2u+03weXYKJKi5pXE0J7FU5Bw8zz+N6Q0F4OD4EwvhWRJoX2UoZhUY9PZ2PYrNBewuAODLzDUMPjMQ8Kd6GIaMZaclxG8FfcIWsxGLkxGOzazl7AYKLn09idtd2qmP7ZiZsK24fHR20MLafPB6O2UTWAP1yGz7GpTmekAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-content-guide-phone {
  position: absolute;
  width: 58px;
  height: 56px;
  left: 0;
  top: 0;
}
.$id-modal-content-guide-phone-move-x {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-x 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-move-y {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  animation: $id-guide-move-y 4s cubic-bezier(0.42, 0, 0.23, 0.98) 0.5s infinite;
}
.$id-modal-content-guide-phone-blink {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  will-change: opacity;
  animation: $id-guide-blink 4s 0.5s infinite;
}
.$id-modal-content-guide-phone-image {
  width: 58px;
  height: 56px;
  background-image: url(`).concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAAClCAMAAADyFTYfAAAC+lBMVEUAAABISEhKSkpGRkZERERCQkJOTk45OTlBQUFQUFBSUlJUVFQ7OztYWFg/Pz8/Pz9aWlpkZGQ3NzdcXFxeXl5MTExHR0dhYWFJSUk9PT1WVlZMTEygoKBERERFRUVmZmZQUFA9PT1LS0tra2tPT09ubm5SUlI2NjZXV1czMzOpqalTU1O3t7dVVVVoaGhaWlpqamq1tbWhoaGenp6lpaWurq6ysrJZWVmjo6OgoKBUVFRdXV1cXFyvr6+0tLSwsLCrq6ubm5syMjKbm5twcHCQkJCLi4uGhobLy8uCgoJ9fX1ycnLPz894eHizs7NxcXFgYGCVlZWYmJh7e3umpqa3t7fOzs7JycnFxcWvr6+JiYl0dHRra2uSkpKNjY2IiIi4uLiUlJSsrKx3d3fDw8OHh4eQkJB9fX2dnZ2UlJR/f3++vr6RkZFzc3ODg4OioqKcnJyUlJSCgoJ4eHirq6u4uLh4eHiBgYF2dnaLi4uMjIyjo6OZmZm1tbWwsLCcnJyxsbF6enqAgICwsLC9vb26urqjo6OKioqsrKyWlpaoqKhbW1u2traCgoJ6enqZmZmbm5t+fn6JiYmgoKC0tLS4uLhmZma0tLSYmJhxcXF1dXWlpaWfn5+IiIicnJyzs7Ofn5+xsbGampq7u7vAwMCMjIxgYGChoaGgoKCQkJCOjo5vb2+RkZG1tbWOjo6Hh4d6enq1tbV8fHzGxsZubm5mZmanp6eZmZmvr6+Hh4eTk5Ojo6NwcHCenp6mpqZ6enqlpaWWlpaJiYmlpaVjY2OcnJyKiop9fX1/f3+CgoKlpaV4eHiUlJSIiIixsbGqqqqGhoZxcXGPj4+ysrK1tbWurq63t7eBgYG2tra2tralpaV+fn6enp6tra2EhISZmZmVlZWGhoZycnKhoaHV1dXX19fW1tbZ2dmrq6upqamwsLDa2trU1NSzs7Ovr6+ysrKurq6tra3S0tLGxsa9vb3Q0NDDw8PNzc3BwcG/v7/IyMi6urq4uLi1tbVYe8d+AAAA5HRSTlMA4+Pj4+Dj4OPj4+Pg4+Pg4+Pg4+Pj4OPg4OPg7+Dg4+Dj4OPg4+Dg4ODM4Mzg4+DjzPDwzMzM4MzM4ODgzMzMzMzg7uPMzMz+zMzM/swD4+DNzMz0/vz8+fXNzerMzAr58dPN9fLs7MzMzPn05My3j1w/Lff07+7MLRH77+7u7uVbJfr39PPr6eno6Ofn59W7jl9ZVxAK+ffr6dXVuHNAQCYm/Prx6uff3NLNuaePjX9zc/vq6d/f3NbUyK6rqaeNjXMR6ufc2tG9vLynp4xzWUnn0ry8t6WZemFLNxrRyMjIxGrWwvApAAASsUlEQVR42uzW12tTYRjH8aMQvLDiJDa2aimigqiQ3NjLIjVpTQutrba2FkupthXqIA6caNUaxYUXDlTcWhUVB+LeCxXUGy8EFxlocoxohokJ+Hvfk9Pn4q1By/EYwe9f8OHhd4b0P40qmXfm6vuJV8/Mk/6BVp19XD2Rd+Lq8xIprVu88kY1sEnuCYCltK1k3tbi+kXV8HLsgzpHIuFwnpHSMowA2EXVi7j2wYzA9/j3eLyioiL7lZRuYQTFxcX19fDiuNVtju+sOLio9ayUTmEERZO4lk9hoyUYDALburBXd8ORhkSF/DmN7osRTJoELcJtHzgrgqx43V1TRkYPtOFDQrZI6RFGAKuqrX9RFY1GgV2yYEgGsEqDErKcDs8bRtBcVFTEucDeXxv9FkWBhp4ZiLwNstwu6Z04gkdFPK59uDT+jRXccaG3KYntOK8sl0t/tcXPXhY2N6vahy9aw+EwsI4FRhNL4aoZZPmzpH80gtOFhdA2K9r75V+/htH0w4N6m3h0XF4/WQ5If6tVtx8VshTtpRWHvqJw1FJj6I0ELrT6c2kET1usHdqHzu2xGNNWzcwEFQlTgFb369II3lmtLS2Fire9PGaLgXvwcC9+WOLy6Li6cmkEe6ysFu69lB222aANm2sMLOISVkeuOALrVCsP2NfO6ZGIDbXOzDIoqVjUCTfwUdIvjGDCVGCTt22vskWQ7VBdL4OaOAXSMq5+18UIJkzo4B5fe85ut0cisbXnB6vW1FtAAb24i+c+hRVazp16b3UoZEfbF2YNNhCXsDQF3a+LEZyq5VjluBerQl9CqLKu/5DByEDcVMdFAR22e+D2ydraWlXbvn7Kly/Q2sp3GocIWuG4+nIxgicFKKk9fvSQy8+00xtygOXaX1+uyNV6BLcKOBbhsheX+T0uv99/bukAI7BMK16X3mLicUcEPv457oG9J6cV8Bj28rrJbrfH5Qo5dmUa0U+PS1hEWoGr9QiapqnaguNHK71uaD2rG0YZFWzqKZg61Y74+Ee4JftuvS2FVvHWXpzv9jHtlPEDM3FZgUta8UkjLbj96LpajmBLaWlTUxK7eZ3dh7wux67cTGjVJbB+TUveGs25d7Y9KS0rZdwmaC8frfR5YfXNahvNsHRc1m+9FtAYM8ag7QjelJVBq1z32Hw3qF7fZEvfXI6l4xpTLFf8Lef1mWHWlIsR5JexuHbzcrvPizxVm7JykcKlKYjeVJ+IHmOcZgSuViO4lp+fr2DR+kovuysbQZagRZ1gSStuoRsuqxkXI5jTmM/jXIzAi3w2S98sxLW5xE35iQA4Q3gtmOrMKveTFiNQsQgj4FaMIAfWJJe0qlc4boop1CS12XTdro8gr7ERXN7m9ZU4LJrVNnLYMEFLxyUvaVniFvqhNlA1GEPJvptX8vIa85K35SNANsvQnGGIYclLWjou1YGl1wJ5l2pwXYxgdh6PH3f3crsbny6vHyMAlrTCcUmb+rjEXZHUgvupqyO4Pm5cUgssRuCGFiMYm4NScVP+OIpbIG62mbi/PQIVC+6xNR4vw9osY4bDqnrFKSjRcAVvZw8acbt23f0/SLV7n6aiMAzg8SMkSkwkaPz+SPwqbbHcXAVjpRJ1cFIGAjJqTB1IR+IiyiDRBRZhkYGYuDK4ECb/AAcd/IgObscGk8YAf4Hve96ePj19r+e28eEf+OXJc889bfn04cqlK47LI+CYyYXc+dPCTRpu+uXmiNWq5XrcPx1yl169v0RhLVt5BJypcuE8x3VLSeOqbvVywWUtuO2PIHtJtMxdmzZMpREM5HLQppTLadHWvYlaxz3O+aO4wRFks1mnXX46bq10EvTnOJ2UywmUK1Rwb3bc7tLi+yzFlfuyPoLn5eLV3NVcR+WeONnBFITLWOFutjOClY8jI9kGd21ORjARn+nv7xcutLpcSYArCXAxBs3VI/g6cjlb12YxgkeZfqu1QbsWeza4XEon5V7gdsENj2D1MqVe7vLLxklQzGQyrKVAaxMqFw8a0g73OLjBEQxftrHaphFkBIt29RY4Spv25QK4wF5or903775eHx4erne7PDNe/UV/NIJCRsJY4upyj6XfHBH1imgEXJIKd3PrnyMYHCStlPuAR1C1IxgdGhpq1oIrWJu0m6OHDX25wPG4m8kjKA2SVrgja3O1KoVGcK4wREG5BGZs6BSTBMoVbahccDeJq0fwpVQi7KCdwgMaQZWq3Z6cL1BYK162SrfeoYtyrdfDhk4xlOtryeu1q0YQRYS15V6nEZgqZ6rcY7EFaDngkla3i49oTpv+iVKV67Xrb/fnj1I+KpWEO7xOI+BMxHevFSTYArR6C4JFuekXR30Xg7avL5m79COfz0d1rh2BqRoaQfEatF656lgIXcvDXH2KwZvMXfkWRaSNSHt99mGVsKb6vHyKsNDiQRMt2gUXWmA7vy645frtbjW4i9SslPt5ZrtqKBNxpVgkrea65bZebrxDt4Obo+ai3L5E7ru6NhqcZmqVR8C5xlFab7rhKegHLV2L6frtbglXtJa7fpu1U+WLo0UbT4stoNxcMtfXYrr6Z6kwty9pDIsRdcvaWW52en501Gk5oi0ka9X7V50LwVMsrFVj2LBvBrYSuDRD2tsvCKu4arl40Nq6iqX/zqMvN4q7JdxVovKxwNq5AWC1ViLDtd4WrXih/a+LrmjBjYW7mJfM1kxtsoewvle/Ijih96+N1qaXq7U+d4O4d77lbbfr28ZMVyqVu3eLo6FycYgprTrE2rvcHAl0q8awwlgS3zPm3gJhKbco5zhJZ24GN0fRSgJclNvJp4hWbiztfs/bdulQ2J7ncimMRc5w/Cl45QIradGCm/r61VpwY+EuUbXc7rgxYwR1adIiA5RD2IJg4YXWRbCdlKu3cKPB3SDuCmO53NptbhZSaIGlXOSc4hwIfhUiVl2u/hQRKBftxjIG90J7yOVSdLO+V7CSHpfe0/61HN0GD139UwS0/2r3u32jfTamtkBQR9Va1yv9OS1yyOWs0oa2EFgutMKN69xV+0ajLbxVxXqRZrUUWs6BQwc4vb29x/zLjY+FNjQFcNHuF7uFGdoCtOAOuFyEVheLkFa8kv2cw+Rt99tyF48rWOHaM5enW4ZUtJ5XqGJVWkiBFa5kXz3OG/jPQbXcFi5Z6W/CmHmxetQzVKp+wMLaXq1FjnK6u7t9beLlRrTCjcG1BxmduhW9WnFKUC7ScMpm1Q5IStZWbrfN3nr8LahyKU+auXLRNcYkvRRgBRRBraBKudB6te7rdlyA9+zdw+nq6iKtOhaEGzvub+JGFFNzXEyWmYob3KyTIl6tVgoruOJ1OXiwhRs3ceViLu1Ci6fLST2tgkILbwPqsNA6qkS04FJ22uzYDe4zx40oNeImnwXt70CCdvVeEXAhVVzyco6PjY097rpx5PXGb+JGBC7RzRxYHLHQpjQLK6T7odVQaD2oSKHl9Nx/tGcXx223xGMAF3sNbdZz+lxILfRvc2f2clMUhvGNkzFucOPOrTtD4kJcupArc8oQURQyJZI5U5nKzI1ZQiFTpkLxDyhxZZ91bHPmsbzvWmftd6/1rGWT4zjP58Plr6ffftdwPptHyylI0Al7FVQOkxrczLjLuC+clRZMiI/ZPPCE4dNleX1ne0qCsBVKu4qRodCuKdahDIogY6sQz1iNC8L+iratNNvWa7bCyTKWgS/x6FHTxfrbGAElVMaFXg0pzoOu8Hh5sFYAkTZPjkq/Ca1pV1/oUruwLyiZBdArLLc+p8MLukocDQyqtKuvn2mZcOdskFbW2hzTpxVnXVrsVXARVXBz2o4dO2pc2y6vYUAbecBCT5eHK6hxXk3q4BZBg7hsrsFFUhOcXPS7MRZmgQ1qEFjAfFCkzUk5BpfL5UctZoHg4sYAcB1UjxaXMNAAaAG3r22XUAO8uIShBbCbhUEA5cooAFyXlH5Z3DZZtjQh2rzdAmV40EoKuEIbHVtC6k8EwQzj2nTr1q1zlvVPBjLuUG438nAFaIWzWC5uuFxaO2froEhrFZDhJbCUo1k2RXBjswAONeEhS9+wj/Hi4DKpZkVcgXVwF2XZhIRoPdzQydZDRVyeswaUvrv4tIWHS6wFUEb1abvl6Tg7y7Yl5uNfcvcPDgpdveATBr06xmK1MGQtrgDTk5bNTwZKuxo0RGtIi7wwDNwDo88ptIEFoQ19wehymrUubEgSXa7gFijNX9ADKBZPX3k8VtjGwJAVWMHtzem4lF0wuEM0buR+QzyAjUFeLgsLWxigrcdwurA4DDSt4FK5SycRLtMyrmxiJNE5i4fFPMFezbqAtUpwzhpS+sXpROY+SDSuaVeqRVzoVWhttbKCAS3H2xigr4Y155VejQq7s2xZYnCHcLsKaC0qDFrvrAiPWM4JHuDk4oSc9XCn09Z8JeNyt0aGHl6gWLjf8EB9WpPgZlY4Jb4Gkm5MeyPhmJ+5SVUqkE7gMiZ2pEFnXVx8xAqkdnSBB5zKbLodu5zoEK2RAZ+uQoC2ZDebc3q0QupW6wwDD/f2UqFNzA80kQxQbWgWdI01i7QOKEjroIoH0GyHTVzt03tJPUzLuEpooyeFAmVx0KKySItLwi8esJy348Tdb+inGJaeTXzcVHCjqy1IAL2GN97uoaZQqkMLzW6a/vTVK/qpgBOrkjxsLuGq1HRqElEWeONDNu4Bbr2DyrZftPTZM6LN7jpvHCJYIwM8XRYXDouS6GERcUMS4OgSCV4+o7zqf2A+QyJu6gorEgCtkCItYMITJmMLcEWCZy9f0z/9y07yyhDBNajIG7mMKXMWUIUWQE2sBNlLerPBy2cbtu1MMJp2GLkbmAX0HTvSeLi4L4gfaULWigT0NiTCXWckwGjaYeRuoNnwaiuBBQx79QetA+rhbjrycjTlxxuRAHE1r0pTC+ntEb1eQ6Or3IKKJDYLOs1YoF819eMOSBBqNw19XNfrF8XSd6zYdh6uR4q7rsr5/of0m7FAgiBuH3LXoS2bBbkHfKAJWOClSGtJhfbo7NHfGHb1FZAAwrTa3RLa6NE2uB5gsRoXeiUJFq/WL/L6fucMSoBhWi2DsMIuJnKm4V+5tYCKHuCeq7Jn3Zf3nFEgQSTaBZah0G35p0q4mUXa+AJW33QfnX3oC9PuAgni0bR9VKry5cs5gQGog/uLYv2LLju3RILX+j1e74+BBCW4xEsyWFq49o59DOrhuq0WyoViWYKl9GYswl1wCiT4dZiWZaB2cdDG14Tf23hTKrgvODrls36R1+Qt25M/Dbug2xUFOLEjjaMBbLhKlgTG7Tx98rt3THvsNEpQHi5XP2qOsBxZwkqPto6uYIGwVvaO+qpf5DUeJPgjXJUqBxeURVy53wiLgLPr9u6PGvZQVILyMC3jmnbLP60TWtxwSWBykQSHvn5l2o0swV/ipkoFL2PgIC6o3vwC0CJuu0UL9Hu8vu4iCf4qxGrc7QwiiAW61PiaAFPLlfZC/7H6RV6H97MEDcFN1W9/WifBy0NcwDofmTXiE9NqCRqDO0CpFM40MV6oFou1C1ibRatHjGDahVtJgkZE0w5QqXJoQVko1y3Wpc0lGPOBaceJBA1ql93NSfHyCD9Uil512j97HfnM7/Ea8Wn96UkNQpV2U6V0tUAaXW7jNwYswYxdL94y7VqSoKFhWiMDXnUBaHBwoQT9Prx4Szm3TyRodLupoMJHH5LyK+9es8+l/CKvDytukQQND8FSlFIOreGM0/omiATVapVo12xd0jhExKW5294RAc40RVoftY47cd2LKtMOFwkajzuAeVOlIhfJeKahLyiWJRhLr3Ai2BVzQYKG4lLYXfg8HCSI33a2nTH5OaVWmzYHJGhsdLmDuN2exAonBTzZIuzEUS+ec0ZMBQn+Ea5KlXNI4C/UAO/k6hKwBptJgn8fgmVckgFXML9YEEFLUKMvlqAp0eWyDEAL65dLqyWo6RekTZ2XNCsD6rgpTK/4p3WcrrPH1ghWJGhONC3JoGAkRHH1JKjpNEcCxOV2I8MWyiUJqNVajSVodgiWcVMVLVeSS1ATCZoc88qjVKlSc3kSLJ5c5V6rTZQAcVkGbBeuOkgCgq2CBM3MoFwGr1tvim2aMpZZqyBBc3N1UF2GX90j9SQJKCBB83OfYAcNVjFcSrvzo95WOShB83Ody5V24fqzO0nAUSzB/89Nph38VqmuOa3gticJOP9fApuHTDt4nFJ7AXdPC0lg8/gq8y5XapSrgpUgbQ0JpF5u97hS1fOC26nlJJA8Yd41Sg3fU4dtRQkKeXSN3jo4Qqm0397OmyZOGatoDrScBIWM3DFn5kXi1ZyqRSUoZtKOa1vWKArztqgEnhIHty4f9/btuEstKwGkxf+XuCT5CbTFnFRuxktuAAAAAElFTkSuQmCC",`);
  background-size: 100%;
  background-repeat: no-repeat;
}
.$id-modal-close {
  position: absolute;
  top: 20px;
  right: 14px;
  width: 14px;
  height: 14px;
}
.$id-modal-close svg {
  width: 14px;
  height: 14px;
  display: block;
}

@keyframes $id-modal-fade-in {
  0% { transform: translate3d(0, 100%, 0); opacity: 0.5; }
  100% { transform: translate3d(0, 0, 0);  opacity: 1; }
}
@keyframes $id-guide-blink {
  0% { opacity: 0; }
  7% { opacity: 0; }
  12% { opacity: 1; }
  29% { opacity: 1; }
  34% { opacity: 0.3; }
  39% { opacity: 1; }
  44% { opacity: 0.3; }
  49% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
@keyframes $id-guide-move-x {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(70px, 0, 0); }
  100% { transform: translate3d(70px, 0, 0); }
}
@keyframes $id-guide-move-y {
  0% { transform: translate3d(0, 0, 0); }
  57% { transform: translate3d(0, 0, 0); }
  80% { transform: translate3d(0, 58px, 0); }
  100% { transform: translate3d(0, 58px, 0); }
}
@media screen and (orientation: portrait) {
  .$id {
    display: block;
  }
}
</style>
<div class="$id-modal">
  <div class="$id-modal-bg">
    <div class="$id-modal-bg-line"></div>
    <div class="$id-modal-bg-wave">
      <svg width="375" height="61" viewBox="0 0 375 61" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient x1="0" y1="0%" x2="0" y2="100%" id="$id-2y6_dj_hgp">
            <stop stop-color="#8598FF" stop-opacity="0.15" offset="0%"></stop>
            <stop stop-color="#000" stop-opacity="0" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path transform="translate(187.5, 30.5) scale(-1, 1) translate(-187.5, -30.5)" fill="url(#$id-2y6_dj_hgp)" d="
M0,1
C83.001,1.706 140.146,4.164 171.435,8.374
C218.369,14.688 253.467,26.308 273.002,33
C292.536,39.691323.501,51 343.709,56
C357.182,59.333 367.612,61 375,61
L375,0
L0,0
L0,1
Z
"></path>
      </svg>
    </div>
  </div>
  <div class="$id-modal-content">
    <div class="$id-modal-content-title">`).concat(Ro.TITLE,`</div>
    <div class="$id-modal-content-hit">`).concat(Ro.HIT,`</div>
    <div class="$id-modal-content-guide">
      <div class="$id-modal-content-guide-phone">
        <div class="$id-modal-content-guide-phone-move-x">
          <div class="$id-modal-content-guide-phone-move-y">
            <div class="$id-modal-content-guide-phone-blink">
              <div class="$id-modal-content-guide-phone-image"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="$id-modal-content-guide-cardboard">
        <div class="$id-modal-content-guide-cardboard-image"></div>
      </div>
    </div>
  </div>
  <div class="$id-modal-close">
    <svg width="14" height="14" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70%" id="$id-ho0itsc4p9">
          <stop stop-color="#FFF" stop-opacity="0.75" offset="0%"></stop>
          <stop stop-color="#FFF" stop-opacity="0.22" offset="100%"></stop>
        </radialGradient>
      </defs>
      <path transform="translate(-3, -3)" fill="url(#$id-ho0itsc4p9)" fill-rule="nonzero" d="
M16.791,3.198
C17.044,3.438 17.067,3.814 16.860,4.080
L16.791,4.156
L12.144,9.331
C11.803,9.711 11.803,10.288 12.144,10.668
L16.791,15.843
C17.044,16.084 17.067,16.460 16.860,16.725
L16.791,16.801
C16.538,17.042 16.142,17.063 15.864,16.867
L15.784,16.801
L10.000,11.250
L4.215,16.801
L4.135,16.867
C3.857,17.063 3.461,17.042 3.208,16.801
L3.208,16.801
L3.139,16.725
C2.932,16.460 2.955,16.084 3.208,15.843
L3.208,15.843
L7.855,10.668
C8.196,10.288 8.196,9.711 7.855,9.331
L7.855,9.331
L3.208,4.156
L3.139,4.080
C2.932,3.814 2.955,3.438 3.208,3.198
C3.486,2.933 3.937,2.933 4.215,3.198
L4.215,3.198 L9.999,8.749
L15.784,3.198
C16.062,2.933 16.513,2.933 16.791,3.198
Z
"></path>
    </svg>
  </div>
</div>
`);function ko(ca){for(var ga=1,ya=document.getElementsByTagName("meta"),_a=0;_a<ya.length;_a++){var _s=ya[_a];if(_s.getAttribute("name")==="viewport"){var Ss=(_s.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);Ss&&(ga=Number(Ss[1])),isNaN(ga)&&(ga=1)}}return Do.replace(/\n/g," ").replace(/\ +/g," ").replace(/\$id/g,ca).replace(/(\d+)px/g,function(Ms,Es){return function(Cs){return Math.floor(Cs*ga)+"px"}(Number(Es))})}var No=new r$1.CircleBufferGeometry(.12,16),Fo=function(){var ca=ge(),ga=new r$1.Texture;return ca.onload=function(){if(typeof document!="undefined"){var ya=256,_a=document.createElement("canvas");_a.setAttribute("width",String(ya)),_a.setAttribute("height",String(ya));var _s=_a.getContext("2d");if(_s){_s.drawImage(ca,0,0,ya,ya),_s.globalCompositeOperation="source-out";var Ss=128;_s.beginPath(),_s.lineWidth=6.4,_s.arc(Ss,Ss,83.2,0,2*Math.PI),_s.strokeStyle="rgba(255, 255, 255, 1.0)",_s.closePath(),_s.stroke(),ga.image=_a,ga.needsUpdate=!0}}},ca.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",ga}(),Oo=function(){if(typeof document!="undefined"){var ca=document.createElement("canvas");ca.setAttribute("width",String(512)),ca.setAttribute("height",String(512));var ga=ca.getContext("2d");if(ga){var ya=256;return ga.beginPath(),ga.arc(ya,ya,192,0,2*Math.PI),ga.fillStyle="rgba(255, 255, 255, 0.1)",ga.closePath(),ga.fill(),ga.save(),ga.beginPath(),ga.arc(ya,ya,192,0,2*Math.PI),ga.strokeStyle="rgba(255, 255, 255, 0.5)",ga.lineWidth=10.24,ga.closePath(),ga.stroke(),new r$1.CanvasTexture(ca)}}return null}(),Lo=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var ya=ga.getContext("2d");if(ya){var _a=256;ya.arc(_a,_a,192,0,2*Math.PI),ya.fillStyle="rgba(85, 90, 255, 0.6)",ya.shadowBlur=25.6,ya.shadowColor="rgba(255, 255, 255, 0.6)",ya.fill(),ya.arc(_a,_a,192,0,2*Math.PI);var _s=ya.createRadialGradient(_a,_a,0,_a,_a,_a);_s.addColorStop(0,"rgba(255, 255, 255, 0.0)"),_s.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),_s.addColorStop(1,"rgba(255, 255, 255, 0.2)"),ya.fillStyle=_s,ya.fill(),ya.lineWidth=4.8,ya.arc(_a,_a,187.2,0,2*Math.PI);var Ss=ya.createLinearGradient(0,0,0,ca);return Ss.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ss.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ss.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ss.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),ya.strokeStyle=Ss,ya.stroke(),new r$1.CanvasTexture(ga)}}return null}(),Vo=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var ya=ga.getContext("2d");if(ya){var _a=256,_s=179.2;ya.arc(_a,_a,_s,0,2*Math.PI),ya.fillStyle="rgba(255, 255, 255, 0.4)",ya.shadowBlur=25.6,ya.shadowColor="rgba(255, 255, 255, 0.6)",ya.fill(),ya.arc(_a,_a,_s,0,2*Math.PI);var Ss=ya.createRadialGradient(_a,_a,0,_a,_a,_a);Ss.addColorStop(0,"rgba(255, 255, 255, 0.0)"),Ss.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),Ss.addColorStop(1,"rgba(255, 255, 255, 0.5)"),ya.fillStyle=Ss,ya.fill(),ya.lineWidth=4.8,ya.arc(_a,_a,_s-4.8,0,2*Math.PI);var Ms=ya.createLinearGradient(0,0,0,ca);return Ms.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Ms.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.8,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),ya.strokeStyle=Ms,ya.stroke(),new r$1.CanvasTexture(ga)}}return null}(),Ho=function(){if(typeof document!="undefined"){var ca=512,ga=document.createElement("canvas");ga.setAttribute("width",String(ca)),ga.setAttribute("height",String(ca));var ya=ga.getContext("2d");if(ya){var _a=256,_s=217.6,Ss=64;ya.lineWidth=Ss,ya.arc(_a,_a,_s,0,2*Math.PI),ya.strokeStyle="rgba(147, 162, 255, 0.3)",ya.shadowBlur=25.6,ya.shadowColor="rgba(255, 255, 255, 0.6)",ya.stroke(),ya.lineWidth=Ss,ya.arc(_a,_a,_s,0,2*Math.PI);var Ms=ya.createRadialGradient(_a,_a,185.6,_a,_a,249.6);Ms.addColorStop(0,"rgba(255, 255, 255, 0.5)"),Ms.addColorStop(.3,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(.7,"rgba(255, 255, 255, 0.0)"),Ms.addColorStop(1,"rgba(255, 255, 255, 0.5)"),ya.strokeStyle=Ms,ya.stroke(),ya.beginPath(),ya.lineWidth=4,ya.arc(_a,_a,245.6,0,2*Math.PI);var Es=ya.createLinearGradient(0,0,ca,0);return Es.addColorStop(.02,"rgba(255, 255, 255, 1.0)"),Es.addColorStop(.1,"rgba(255, 255, 255, 0.0)"),Es.addColorStop(.9,"rgba(255, 255, 255, 0.0)"),Es.addColorStop(.98,"rgba(255, 255, 255, 1.0)"),ya.strokeStyle=Es,ya.stroke(),new r$1.CanvasTexture(ga)}}return null}(),Ko=function(ca){function ga(){var ya=ca.call(this)||this;ya.progress=0,ya.opacity=0,ya.loading=!1,ya.current=!1,ya.disabled=!1,ya.opacityMotion=new fn({opacity:0}),ya.loadingMotion=new fn({opacity:0}),ya.currentMotion=new fn({ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1});var _a={blending:r$1.CustomBlending,blendSrc:r$1.SrcAlphaFactor,blendDst:r$1.OneMinusSrcAlphaFactor,blendSrcAlpha:r$1.OneFactor,blendDstAlpha:r$1.OneMinusSrcAlphaFactor,depthWrite:!1,transparent:!0};return ya.hitTestMesh=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{color:0,opacity:0}))),ya.hitTestMesh.scale.set(1.5,1.5,1.5),ya.centerMesh=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Lo,opacity:0}))),ya.centerMesh2=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Vo,opacity:0}))),ya.ringMesh=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Ho,opacity:0}))),ya.loadingMesh=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Fo,opacity:.8}))),ya.disableMesh=new r$1.Mesh(No,new r$1.MeshBasicMaterial(e$1.__assign(e$1.__assign({},_a),{map:Oo}))),ya.loadingMesh.visible=!1,ya.disableMesh.visible=!1,ya.hitTestMesh.position.z=0,ya.ringMesh.position.z=.003,ya.disableMesh.position.z=.002,ya.centerMesh.position.z=.002,ya.centerMesh2.position.z=.002,ya.loadingMesh.position.z=.005,ya.hitTestMesh.frustumCulled=!1,ya.centerMesh.frustumCulled=!1,ya.centerMesh2.frustumCulled=!1,ya.ringMesh.frustumCulled=!1,ya.loadingMesh.frustumCulled=!1,ya.disableMesh.frustumCulled=!1,ya.add(ya.hitTestMesh),ya.add(ya.centerMesh),ya.add(ya.centerMesh2),ya.add(ya.ringMesh),ya.add(ya.loadingMesh),ya.add(ya.disableMesh),ya.renderOrder=1e4,ya.needsRender=!0,ya}return e$1.__extends(ga,ca),ga.prototype.setProgress=function(ya){this.progress=ya,this.setLoading(ya>0)},ga.prototype.setOpacity=function(ya){this.opacity!==ya&&(this.opacity=ya=cn(ya,0,1),this.opacityMotion.set({opacity:ya},30).catch(Lt))},ga.prototype.setCurrent=function(ya){if(this.current!==ya){if(ya){var _a=[{progress:0,value:{ringScale:2,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.05,value:{ringScale:1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.15,value:{ringScale:1.2,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.25,value:{ringScale:1.1,ringOpacity:1,circleFade:0,circleOpacity:.5,circleScale:1}},{progress:.8,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:1}},{progress:.9,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:.92,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:1,circleScale:.8}},{progress:1,value:{ringScale:1.1,ringOpacity:1,circleFade:1,circleOpacity:.3,circleScale:1.1}}];this.currentMotion.setKeyframes(_a,1500).catch(Lt)}else _a=[{progress:0,value:e$1.__assign({},this.currentMotion.value)},{progress:1,value:{ringScale:1.1,ringOpacity:0,circleFade:0,circleOpacity:.5,circleScale:1}}],this.currentMotion.setKeyframes(_a,200).catch(Lt);this.current=ya}},ga.prototype.setLoading=function(ya){this.loading!==ya&&(ya?this.loadingMotion.setKeyframes([{progress:0,value:{opacity:0}},{progress:.3,value:{opacity:0}},{progress:1,value:{opacity:.8}}],500):this.loadingMotion.set({opacity:0},0),this.loading=ya,this.disabled===!0&&this.setDisabled(!1),this.needsRender=!0)},ga.prototype.setDisabled=function(ya){this.disabled!==ya&&(this.disabled=ya,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=ya,this.centerMesh.visible=!ya,this.needsRender=!0)},ga.prototype.tap=function(){return Promise.resolve()},ga.prototype.updateTime=function(ya,_a){this.opacityMotion.update(ya),this.currentMotion.update(ya),this.loadingMotion.update(ya);var _s=this.opacityMotion.value.opacity,Ss=this.currentMotion.value,Ms=Ss.ringScale,Es=Ss.ringOpacity,Cs=Ss.circleFade,Ts=Ss.circleOpacity,Bs=Ss.circleScale;if(this.ringMesh.scale.set(Ms,Ms,Ms),this.centerMesh.scale.set(Bs,Bs,Bs),this.centerMesh2.scale.set(Bs,Bs,Bs),this.ringMesh.material.opacity=Es*_s,this.centerMesh.material.opacity=(1-Cs)*_s,this.centerMesh2.material.opacity=Cs*Ts*_s,this.loadingMotion.value.opacity>0){this.loadingMesh.visible=!0,this.loadingMesh.material.opacity=this.loadingMotion.value.opacity,this.loadingMesh.rotateZ(-_a/200);var Is=this.opacityMotion.value.opacity,Ps=1.1;this.centerMesh.scale.set(Ps,Ps,Ps),this.centerMesh2.scale.set(Ps,Ps,Ps),this.centerMesh.material.opacity=0*Is,this.centerMesh2.material.opacity=.2*Is}else this.loadingMesh.visible=!1;this.needsRender=!0},ga.prototype.dispose=function(){this.currentMotion.dispose(),this.opacityMotion.dispose(),this.loadingMotion.dispose(),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose()},ga}(r$1.Object3D),zo=function(ca){function ga(ya){var _a=this,_s=ga.parseArgs(ya);(_a=ca.call(this,_s)||this).cardboard=new To(_a.renderer);var Ss,Ms,Es,Cs=(Ss="five_vr_helper_"+Zn(),Ms=ko(Ss),(Es=document.createElement("div")).className=Ss,Es.innerHTML=Ms,Es);_a.helperElement=Cs;var Ts=new vr(Cs);return _a.element.parentNode&&(_a.element.parentNode.insertBefore(Cs,_a.element),_a.setHelperElementSize(),Ts.on("tap",function(){return _a.emit("vrWantsToExit")})),_a.destroyHelper=function(){Ts.destroy(),Cs.parentNode&&Cs.parentNode.removeChild(Cs),delete _a.helperElement},_a.boundingMesh.visible=!0,_a}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a=e$1.__assign(e$1.__assign({},ya),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return ca.parseArgs.call(this,_a)},ga.initAnimationEndPose=function(ya){var _a=this.parseArgs(ya);return ca.initAnimationEndPose.call(this,_a)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.cardboard.dispose(),this.destroyHelper();for(var ya=0,_a=this.panoMeshes;ya<_a.length;ya++){var _s=_a[ya];this.helper.remove(_s),_s.dispose()}this.panoMeshes.length=0},ga.prototype.isReady=function(){return!1},ga.prototype.updateRenderSize=function(){this.needsRender=!0,this.setHelperElementSize()},ga.prototype.updatePanoMeshes=function(){var ya=this;this.panoMeshes.forEach(function(Ms){ya.helper.remove(Ms),Ms.dispose()}),this.panoMeshes.length=0;for(var _a=0;_a<this.work.observers.length;_a++){var _s=this.work.observers[_a],Ss=new Ko;Ss.name="panoSphere_".concat(this.work.workCode,"_").concat(_a),Ss.position.copy(_s.position),Ss.needsRender=!0,this.helper.add(Ss),this.panoMeshes[_a]=Ss}},ga.prototype.updateTime=function(ya,_a){var _s,Ss;if(!this.destroyed){this.needsRender=!0;var Ms={},Es={};if(this.locationMotion.ended===!1){this.locationMotion.update(ya);var Cs=this.locationMotion.getKeyFrameSegment(ya),Ts=Cs[0],Bs=Cs[1],Is=this.panoResourceFromLocationMotionKeyframe(Ts),Ps=this.panoResourceFromLocationMotionKeyframe(Bs),Rs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),ks=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),$s=Is.position,Os=Ps.position,Ls=this.locationMotion.value.count-Bs.value.count+1;Ms.modelAlpha=this.locationMotion.value.modelAlpha,Ms.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ms.useBlackTransition=Ps.effect==="instant",Ps.panoPicture&&(Ls<1?Is.panoPicture&&(Ms.pano0=Is.panoPicture):Ms.pano0=Ps.panoPicture,Ms.pano1=Ps.panoPicture),Ps.effect==="fade"&&(Ms.pano0&&Is.panoPicture&&(Ms.pano0={map:Ms.pano0.map,luminanceMap:Ms.pano0.luminanceMap,matrix:Is.panoPicture.matrix.clone().setPosition(Ps.position)}),$s.copy(Os)),Ms.progress=Ls,Es.distance=this.locationMotion.value.distance,Es.offset=new r$1.Vector3($s.x+(Os.x-$s.x)*Ls,$s.y+(Os.y-$s.y)*Ls,$s.z+(Os.z-$s.z)*Ls);for(var Ds=[],Fs=[],Ns=0,Vs=this.locationMotion.keyframes;Ns<Vs.length;Ns++){var Gs=Vs[Ns],Us=Gs.key,zs=Gs.progress;Us!==void 0&&(Ds.push(Us),zs>=this.locationMotion.progress&&Fs.push(Us))}for(var Hs=0,Qs=Object.keys(this.panoResources);Hs<Qs.length;Hs++){var js=Qs[Hs];if(!(Fs.indexOf(js)>=0)){var Zs=this.panoResources[js];if(Zs.panoPicture){var Ks=Zs.panoPicture.map;if(Ks){if(Ks===((_s=Ms.pano0)===null||_s===void 0?void 0:_s.map)||Ks===((Ss=Ms.pano1)===null||Ss===void 0?void 0:Ss.map))continue;Ks.dispose(),Zs.panoPicture=null}}Ds.indexOf(js)>=0||delete this.panoResources[js]}}this.currentPanoIndex=Ls<.5?Is.panoIndex:Ps.panoIndex,this.emit("movingToPano",ks.panoIndex,Rs.panoIndex,this.locationMotion.progress)}fr(Ms)===!1&&(this.model.setMaterial(Ms),this.boundingMesh.setMaterial(Ms)),Es.offset&&this.camera.position.copy(Es.offset);var Ys=this.camera.pose.longitude,qs=this.camera.pose.latitude;this.camera.quaternion.fromArray(this.cardboard.sensor.getOrientation()),this.camera.updateMatrixWorld(),this.camera.computePose();for(var eu=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),Js=0;Js<this.work.observers.length;Js++){var Xs=this.work.observers[Js];if((lu=this.panoMeshes[Js]).visible=!0,Xs.loadable||Xs.active){if(eu.indexOf(Js)===-1)lu.visible=!1;else{lu.visible=!0;var ru=lu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);ru<.05?lu.setOpacity(0):lu.setOpacity(cn(1.5/ru,0,1)),this.currentPanoIndex===Js&&lu.setOpacity(0)}lu.lookAt(this.camera.position)}else lu.visible=!0}var su=this.intersect(ya);for(Js=0;Js<this.work.observers.length;Js++)(lu=this.panoMeshes[Js])==null||lu.setCurrent(lu===su);for(Js=0;Js<this.work.observers.length;Js++){var lu;(lu=this.panoMeshes[Js])&&lu.updateTime&&lu.updateTime(ya,_a)}Ys===this.camera.pose.longitude&&qs===this.camera.pose.latitude||(this.cameraMotion.set(ei(this.camera.pose,["longitude","latitude"]),0).catch(Lt),this.emit("cameraDirectionUpdate",ei(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",gr(ei(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},ga.prototype.render=function(){this.cardboard.render(this.scene,this.camera)},ga.prototype.setCamera=function(ya){},ga.prototype.destroyHelper=function(){},ga.prototype.setHelperElementSize=function(){if(this.helperElement){var ya=new r$1.Vector2(this.element.offsetWidth,this.element.offsetHeight),_a=ya.x*this.scissor.left,_s=ya.y*(1-this.scissor.bottom-this.scissor.height),Ss=ya.x*this.scissor.width,Ms=ya.y*this.scissor.height;this.helperElement.style.marginLeft=_a+"px",this.helperElement.style.marginTop=_s+"px",this.helperElement.style.width=Ss+"px",this.helperElement.style.height=Ms+"px"}},ga.prototype.intersect=function(ya){var _a;if(this.locationMotion.ended===!1)return this.intersectMesh.visible=!1,delete this.activePanoMesh,void delete this.activeTime;if(this.activePanoMesh&&this.activeTime&&ya-this.activeTime>1500){var _s=this.activePanoMesh;return(Bs=this.panoMeshes.indexOf(_s))>=0&&this.moveToPano(Bs,{},!0),delete this.activePanoMesh,delete this.activeTime,_s}for(var Ss=this.camera.getWorldDirection(new r$1.Vector3),Ms=new r$1.Raycaster(this.camera.position,Ss),Es=void 0,Cs=[],Ts=this.work.observers[this.currentPanoIndex].visibleNodes,Bs=0;Bs<this.work.observers.length;Bs++){var Is=this.panoMeshes[Bs];if(Ts.indexOf(Bs)!==-1){var Ps=Ms.intersectObject((_a=Is.hitTestMesh)!==null&&_a!==void 0?_a:Is,!0)[0];Ps&&Cs.push({panoMesh:Is,intersection:Ps})}}var Rs=Cs.sort(function(Ds,Fs){return Ds.intersection.distance-Fs.intersection.distance})[0];if(Rs?(Es=Rs.intersection,this.activePanoMesh!==Rs.panoMesh&&(this.activePanoMesh=Rs.panoMesh,this.activeTime=ya),this.intersectMesh.position.copy(Rs.panoMesh.position),this.intersectMesh.lookAt(this.camera.position),this.intersectMesh.visible=!1):(this.activePanoMesh=void 0,this.activeTime=void 0),!Es)if((Es=this.model.intersectRaycaster(Ms)[0])&&Es.face){var ks=Es.face.normal,$s=new r$1.Quaternion;$s.setFromUnitVectors(new r$1.Vector3(0,0,1),ks),this.intersectMesh.quaternion.copy($s);var Os=ks.clone().multiplyScalar(.05),Ls=Es.point.clone().add(Os);this.intersectMesh.position.copy(Ls),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",Es,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden");return Rs==null?void 0:Rs.panoMesh},ga.prototype.onPanGesture=function(){},ga.prototype.onTapGesture=function(){},ga.prototype.onPinchGesture=function(){},ga.prototype.onMouseMove=function(){},ga.prototype.onMouseOut=function(){},ga}(ro),qo=function(ca){function ga(ya){var _a,_s,Ss,Ms,Es=this,Cs=ga.parseArgs(ya);return(Es=ca.call(this,Cs)||this).currentPanoIndex=Cs.initial[0],Es.locationMotion=new fn({x:Es.camera.pose.offset.x,y:Es.camera.pose.offset.y,z:Es.camera.pose.offset.z,distance:Es.camera.pose.distance,modelAlpha:(_s=(_a=Es.model.getMaterial())===null||_a===void 0?void 0:_a.modelAlpha)!==null&&_s!==void 0?_s:0,perspToOrtho:(Ms=(Ss=Es.model.getMaterial())===null||Ss===void 0?void 0:Ss.perspToOrtho)!==null&&Ms!==void 0?Ms:0}),Es}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){return ca.parseArgs.call(this,ya)},ga.initAnimationEndPose=function(ya){var _a=this.parseArgs(ya);return ca.initAnimationEndPose.call(this,_a)},ga.prototype.destroy=function(){ca.prototype.destroy.call(this),this.locationMotion.dispose()},ga.prototype.isReady=function(){return this.locationMotion.ended!==!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(ya,_a,_s,Ss,Ms){this.work=ya,this.currentPanoIndex=_a,this.hideIntersectMesh();var Es={duration:0,longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov};return this.moveToPano(_a,Es,Ms),!0},ga.prototype.updateTime=function(ya,_a){if(!this.destroyed){var _s={},Ss={};if(!this.locationMotion.ended){this.locationMotion.update(ya),_s.modelAlpha=this.locationMotion.value.modelAlpha,_s.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),Ss.distance=this.locationMotion.value.distance,Ss.offset=new r$1.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var Ms=new r$1.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),Es=Ar(this.work.observers,function(Cs){return Cs.position.distanceTo(Ms)});this.currentPanoIndex=this.work.observers.indexOf(Es)}this.cameraMotion.ended||(this.cameraMotion.update(ya),Ss.longitude=this.cameraMotion.value.longitude,Ss.latitude=this.cameraMotion.value.latitude,Ss.fov=this.cameraMotion.value.fov),fr(_s)||this.model.setMaterial(_s),fr(Ss)||this.setCamera(Ss)}},ga.prototype.initAnimation=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts=this;this.destroyed||(this.pending=!1,this.userAction=Ss,this.moveToPano(ya,{longitude:(Ms=_a.longitude)!==null&&Ms!==void 0?Ms:this.defaultLongitude,latitude:cn((Es=_a.latitude)!==null&&Es!==void 0?Es:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((Cs=_a.fov)!==null&&Cs!==void 0?Cs:this.defaultFov,this.minFov,this.maxFov),duration:_s,moveStartCallback:function(Bs,Is){Ts.emit("initAnimationWillStart",Bs,Is,Ts.userAction)},moveEndCallback:function(Bs,Is){Ts.emit("initAnimationEnded",Bs,Is,Ts.userAction)},moveCancelCallback:function(){var Bs=Ts.currentPanoIndex,Is={longitude:Ts.camera.pose.longitude,latitude:Ts.camera.pose.latitude,fov:Ts.camera.pose.fov,offset:Ts.camera.pose.offset.clone()};Ts.emit("initAnimationEnded",Bs,Is,Ts.userAction)}},Ss))},ga.prototype.getTargetPose=function(){var ya=this.cameraMotion.getKeyFrameSegment(Ht())[1],_a=this.locationMotion.getKeyFrameSegment(Ht())[1];return{longitude:ya.value.longitude,latitude:ya.value.latitude,fov:ya.value.fov,offset:new r$1.Vector3(_a.value.x,_a.value.y,_a.value.z)}},ga.prototype.moveToPano=function(ya,_a,_s){_a===void 0&&(_a={});var Ss=this.work.observers[ya];Ss&&this.moveToPosition(Ss.position,_a,_s)},ga.prototype.moveToPosition=function(ya,_a,_s){var Ss,Ms,Es,Cs=this;_a===void 0&&(_a={}),this.userAction=_s;for(var Ts=Ht(),Bs=new r$1.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(ya),Is=this.locationMotion.getProgressVelocity(Ts),Ps=0,Rs=1;Rs<this.locationMotion.keyframes.length;Rs++){var ks=this.locationMotion.keyframes[Rs-1].value,$s=ks.x,Os=ks.y,Ls=ks.z,Ds=this.locationMotion.keyframes[Rs].value,Fs=Ds.x,Ns=Ds.y,Vs=Ds.z;Ps+=Math.sqrt(Math.pow(Fs-$s,2)+Math.pow(Ns-Os,2)+Math.pow(Vs-Ls,2))}var Gs=Bs===0?0:Is*Ps/Bs,Us=this.calculateMovingDuration(_a.duration,Bs),zs={x:ya.x,y:ya.y,z:ya.z,distance:0,modelAlpha:1,perspToOrtho:0},Hs={longitude:_a.longitude,latitude:_a.latitude,fov:_a.fov},Qs={longitude:(Ss=Hs.longitude)!==null&&Ss!==void 0?Ss:this.camera.pose.longitude,latitude:(Ms=Hs.latitude)!==null&&Ms!==void 0?Ms:this.camera.pose.latitude,fov:(Es=Hs.fov)!==null&&Es!==void 0?Es:this.camera.pose.fov,offset:ya.clone()},js=Ar(this.work.observers,function(Ks){return Ks.position.distanceTo(ya)}),Zs=this.work.observers.indexOf(js);this.emit("moveToPano",Zs,this.userAction),_a.moveStartCallback&&_a.moveStartCallback(Zs,Qs),this.emit("panoWillArrive",Zs,Qs,this.userAction),this.cameraMotion.set(Hs,Us).catch(Lt),this.locationMotion.set(zs,Us,Gs).then(function(){var Ks=gr(Cs.camera.pose);_a.moveEndCallback&&_a.moveEndCallback(Zs,Ks),Cs.emit("panoArrived",Zs,Ks,Cs.userAction)},function(){_a.moveCancelCallback&&_a.moveCancelCallback(),Cs.emit("moveToPanoCanceled",Zs)})},ga.prototype.onTapGesture=function(ya){var _a=ya.pointers.map(function(ks){return ei(ks,["x","y"])});if(!this.emit("wantsGesture","tap",_a,!0)){var _s=this.relativeClientPosition(ya.center),Ss=new r$1.Raycaster;if(Ss.setFromCamera(_s,this.camera),!this.emit("wantsTapGesture",Ss,_s,!0)){this.emit("gesture","tap",_a,!0),this.emit("tapGesture",Ss,_s,!0),this.interiaMovement=!1;var Ms=this.model.intersectRaycaster(Ss)[0];if(Ms&&Ms.face){var Es=Ms.face.normal,Cs=Ms.point;if(new r$1.Vector3(0,1,0).angleTo(Es)>Math.PI/3){var Ts=this.camera.position.clone().setY(Cs.y),Bs=Cs.clone().sub(Ts).setLength(.3),Is=Cs.clone().sub(Bs);Ss.set(Is,new r$1.Vector3(0,-1,0)),Ms=this.model.intersectRaycaster(Ss)[0]}}if(Ms){var Ps=Ms.point.clone(),Rs=Ar(this.work.observers.filter(function(ks){return Math.abs(ks.standingPosition.y-Ps.y)<1}),function(ks){return ks.standingPosition.distanceTo(Ps)});if(Rs)return Ps.y=Rs.position.y,void this.moveToPosition(Ps,{},!0)}this.cameraBounce()}}},ga}(Dr),_o=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),jo=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];var ya=113,_a=126,_s=0,Ss="";return arguments[_s].split(Ss).map(function(Ms){return Ms.charCodeAt(_s)>_a?Ms:String.fromCharCode((Ms.charCodeAt(_s)+ya)%_a)}).join(Ss)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),Uo=Object.assign({opacity:new r$1.Uniform(1),scale:new r$1.Uniform(13.1),panoMap:new r$1.Uniform(null),panoDisplacementMap:new r$1.Uniform(null),panoPosition:new r$1.Uniform(new r$1.Vector3),panoMatrix:new r$1.Uniform(new r$1.Matrix4)},{emissive:new r$1.Uniform(new r$1.Color(0)),emissiveMap:new r$1.Uniform(null),specular:new r$1.Uniform(new r$1.Color(1118481)),specularMap:new r$1.Uniform(null),normalMap:new r$1.Uniform(null),bumpMap:new r$1.Uniform(null),shininess:new r$1.Uniform(30)},r$1.UniformsLib.common,r$1.UniformsLib.lights),Go=new r$1.SphereBufferGeometry(.01,128,128),Wo=function(){function ca(ga){ga===void 0&&(ga={}),this.textureLoader=new Ii({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=ga.allowHosts,this.networkSubscribe=ga.networkSubscribe}return ca.prototype.setAllowHosts=function(ga){this.allowHosts=ga,this.textureLoader.setAllowHosts(ga)},ca.prototype.setNetworkSubscribe=function(ga){this.networkSubscribe=ga,this.textureLoader.setNetworkSubscribe(ga)},ca.prototype.load=function(ga,ya,_a,_s,Ss,Ms,Es,Cs){var Ts=[0,0],Bs=function(Ps,Rs){Ts[Rs]=Ps,Es(.8*Ts[0]+.2*Ts[1])},Is=[this.textureLoader.load(ga,{viaAjax:!0},void 0,void 0,function(Ps){return Bs(Ps,1)},Cs),this.textureLoader.loadCube(ya,{viaAjax:!0},void 0,void 0,function(Ps){return Bs(Ps,0)},Cs)];return Promise.all(Is).then(function(Ps){var Rs=Ps[0],ks=Ps[1],$s={body:function(Os,Ls,Ds,Fs){var Ns=new r$1.ShaderMaterial({side:r$1.BackSide,vertexShader:_o,fragmentShader:jo,transparent:!0,uniforms:r$1.UniformsUtils.clone(Uo)}),Vs=Ls;return Vs.needsUpdate=!0,Vs.minFilter=r$1.LinearFilter,Vs.magFilter=r$1.LinearFilter,Os.needsUpdate=!0,Os.minFilter=r$1.LinearFilter,Os.magFilter=r$1.LinearFilter,Ns.uniforms.opacity.value=0,Ns.uniforms.panoMap.value=Vs,Ns.uniforms.panoDisplacementMap.value=Os,Ns.uniforms.panoPosition.value=Ds,Ns.uniforms.panoMatrix.value=Fs,Object.assign(new r$1.Mesh(Go,Ns),{frustumCulled:!1,dispose:function(){this.material instanceof r$1.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(Rs.body,ks.body,_a,_s),meta:e$1.__spreadArray([Rs.meta],ks.meta,!0)};return Ss($s),$s}).catch(function(Ps){for(var Rs=0,ks=Is;Rs<ks.length;Rs++)ks[Rs].then(function($s){return $s.body.dispose()}).catch(Lt);return Ms(Ps),Promise.reject(Ps)})},ca}(),Xo=new r$1.Vector3(-1,1,1),Yo=function(ca){function ga(ya){var _a,_s,Ss,Ms,Es,Cs,Ts,Bs=this,Is=ga.parseArgs(ya);return(Bs=ca.call(this,Is)||this).currentPanoIndex=Is.initial[0],Bs.maxAccessibleDistance=Is.maxAccessibleDistance,Bs.panoTapTriggerRadius=Is.panoTapTriggerRadius,Bs.panoCircleMeshCreator=Is.panoCircleMeshCreator,Bs.boundingMesh=Bs.generateBoundingMesh(),Bs.boundingMesh.setMaterial(Bs.model.getMaterial()||{}),Bs.boundingMesh.visible=!1,Bs.scene.add(Bs.boundingMesh),Bs.panoModelGroup=new r$1.Group,Bs.panoModelGroup.name="panoModels",Bs.scene.add(Bs.panoModelGroup),Bs.panoMeshes=[],Bs.updatePanoMeshes(),Bs.helper.remove(Bs.intersectMesh),Bs.locationMotion=new fn({count:0,distance:Bs.camera.pose.distance,modelAlpha:(_s=(_a=Bs.model.getMaterial())===null||_a===void 0?void 0:_a.modelAlpha)!==null&&_s!==void 0?_s:0,perspToOrtho:(Ms=(Ss=Bs.model.getMaterial())===null||Ss===void 0?void 0:Ss.perspToOrtho)!==null&&Ms!==void 0?Ms:0}),Bs.panoResources={},Bs.panoResources[Bs.locationMotion.keyframes[0].key=Bs.locationMotion.keyframes[1].key=Zn()]={panoIndex:Bs.currentPanoIndex,workCode:Bs.work.workCode,matrix:(Ts=(Cs=(Es=Bs.model.getMaterial())===null||Es===void 0?void 0:Es.pano1)===null||Cs===void 0?void 0:Cs.matrix)!==null&&Ts!==void 0?Ts:new r$1.Matrix4,position:Bs.camera.pose.offset.clone(),effect:"fly"},Bs.depthTextureLoader=new Wo({allowHosts:Bs.work.allowHosts,networkSubscribe:Bs.networkSubscribe}),Bs}return e$1.__extends(ga,ca),ga.parseArgs=function(ya){var _a,_s,Ss,Ms=ca.parseArgs.call(this,ya);return e$1.__assign(e$1.__assign({},Ms),{maxAccessibleDistance:(_a=ya.maxAccessibleDistance)!==null&&_a!==void 0?_a:5,panoTapTriggerRadius:(_s=ya.panoTapTriggerRadius)!==null&&_s!==void 0?_s:1,panoCircleMeshCreator:(Ss=ya.panoCircleMeshCreator)!==null&&Ss!==void 0?Ss:function(){return new jn}})},ga.initAnimationEndPose=function(ya){var _a=this.parseArgs(ya);return ca.initAnimationEndPose.call(this,_a)},ga.prototype.destroy=function(){var ya,_a=this;if(ca.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var _s=0,Ss=this.panoModelGroup.children;_s<Ss.length;_s++){var Ms=Ss[_s];typeof Ms.dispose=="function"&&Ms.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(ks){_a.helper.remove(ks),ks.dispose()}),this.panoMeshes.length=0);for(var Es=(ya=this.model.getMaterial())!==null&&ya!==void 0?ya:{},Cs=Es.pano0,Ts=Es.pano1,Bs=0,Is=Object.keys(this.panoResources);Bs<Is.length;Bs++){var Ps=Is[Bs],Rs=this.panoResources[Ps];Rs.panoModel&&Rs.panoModel.material.uniforms.panoMap.value!==(Cs==null?void 0:Cs.map)&&Rs.panoModel.material.uniforms.panoMap.value!==(Ts==null?void 0:Ts.map)&&(this.panoModelGroup.remove(Rs.panoModel),Rs.panoModel.material.uniforms.panoMap.value.dispose(),Rs.panoModel.dispose(),delete Rs.panoModel),delete this.panoResources[Ps]}this.interiaMovement=!1},ga.prototype.isReady=function(){return this.locationMotion.ended===!1&&ca.prototype.isReady.call(this)},ga.prototype.updateWork=function(ya,_a,_s,Ss,Ms){this.userAction=Ms,this.work=ya,this.currentPanoIndex=_a,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var Es={},Cs=!0;this.boundingMesh&&(Es=this.boundingMesh.getMaterial()||{},Cs=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=Cs,this.boundingMesh.setMaterial(Es),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var Ts=0,Bs=this.panoMeshes;Ts<Bs.length;Ts++)Bs[Ts].visible=!1;return this.moveToPano(_a,{effect:"fade",duration:Ss,longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov},Ms),!0},ga.prototype.updateTime=function(ya,_a){var _s,Ss,Ms;if(!this.destroyed){var Es={},Cs={},Ts=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),Bs=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Is=!1;if(this.locationMotion.ended===!1){this.locationMotion.update(ya);var Ps=this.locationMotion.getKeyFrameSegment(ya),Rs=Ps[0],ks=Ps[1],$s=this.panoResourceFromLocationMotionKeyframe(Rs),Os=this.panoResourceFromLocationMotionKeyframe(ks),Ls=new r$1.Vector3().copy($s.position),Ds=new r$1.Vector3().copy(Os.position),Fs=this.locationMotion.value.count-ks.value.count+1;Es.progress=Fs,Es.modelAlpha=this.locationMotion.value.modelAlpha,Es.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1);for(var Ns=0,Vs=this.panoModelGroup.children;Ns<Vs.length;Ns++){var Gs=Vs[Ns];Gs.visible=Gs===$s.panoModel||Gs===Os.panoModel}$s.panoModel&&($s.panoModel.material.uniforms.opacity.value=1-Fs,$s.panoModel.material.depthTest=Fs!==0),Os.panoModel&&(Os.panoModel.material.uniforms.opacity.value=Fs,Os.panoModel.material.depthTest=Fs!==1),Os.panoModel&&(Fs<1?$s.panoModel&&(Es.pano0={map:$s.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:$s.matrix}):Es.pano0={map:Os.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Os.matrix},Es.pano1={map:Os.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:Os.matrix}),Is=Es.useBlackTransition=Os.effect==="instant"||Os.effect==="montage",Os.effect!=="fade"&&Os.effect!=="montage"||(Es.pano0&&(Es.pano0={map:Es.pano0.map,luminanceMap:null,matrix:$s.matrix.clone().setPosition(Os.position)}),Ls.copy(Ds)),Cs.distance=this.locationMotion.value.distance,Cs.offset=new r$1.Vector3(Ls.x+(Ds.x-Ls.x)*Fs,Ls.y+(Ds.y-Ls.y)*Fs,Ls.z+(Ds.z-Ls.z)*Fs);for(var Us=[],zs=[],Hs=0,Qs=this.locationMotion.keyframes;Hs<Qs.length;Hs++){var js=Qs[Hs],Zs=js.key,Ks=js.progress;Zs!==void 0&&(Us.push(Zs),Ks>=this.locationMotion.progress&&zs.push(Zs))}for(var Ys=0,qs=Object.keys(this.panoResources);Ys<qs.length;Ys++){var eu=qs[Ys];if(!(zs.indexOf(eu)>=0)){var Js=this.panoResources[eu];if(Js.panoModel){if(Js.panoModel.material.uniforms.panoMap.value===((_s=Es.pano0)===null||_s===void 0?void 0:_s.map)||Js.panoModel.material.uniforms.panoMap.value===((Ss=Es.pano1)===null||Ss===void 0?void 0:Ss.map))continue;this.panoModelGroup.remove(Js.panoModel),Js.panoModel.material.uniforms.panoMap.value.dispose(),Js.panoModel.dispose(),delete Js.panoModel}Us.indexOf(eu)>=0||delete this.panoResources[eu]}}$s.workCode===Os.workCode?this.currentPanoIndex=Fs<.5?$s.panoIndex:Os.panoIndex:this.currentPanoIndex=Os.panoIndex,this.emit("movingToPano",Bs.panoIndex,Ts.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(ya),Cs.longitude=this.cameraMotion.value.longitude,Cs.latitude=this.cameraMotion.value.latitude,Cs.fov=this.cameraMotion.value.fov),fr(Es)===!1&&(this.model.setMaterial(Es),this.boundingMesh.setMaterial(Es)),fr(Cs)===!1&&this.setCamera(Cs),this.camera.pose.distance>.1)for(var Xs=0;Xs<this.work.observers.length;Xs++)(cu=this.panoMeshes[Xs])&&(cu.visible=!1);else{var ru=this.work.observers[this.currentPanoIndex];if(ru){var su=ru.visibleNodes.concat(this.currentPanoIndex),lu=this.getForwardPanoIndexOrNot();for(Xs=0;Xs<this.work.observers.length;Xs++){var cu,xu=this.work.observers[Xs];if(cu=this.panoMeshes[Xs])if(xu.loadable||xu.active)if(su.indexOf(Xs)!==-1)if(Is)cu.visible=!1,cu.setOpacity(0);else{cu.visible=!0;var bu=cu.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);cu.setCurrent(lu===Xs),cu.setOpacity(bu<.01?0:cn(1.4/bu,.5,.7)),cu.updateTime&&cu.updateTime(ya,_a)}else cu.visible=!1,cu.setOpacity(0);else cu.visible=!1,cu.setOpacity(0)}}}this.boundingMesh.visible=Boolean((Ms=this.boundingMesh.getMaterial())===null||Ms===void 0?void 0:Ms.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},ga.prototype.getTargetPose=function(){var ya=this.cameraMotion.getKeyFrameSegment(Ht())[1],_a=this.locationMotion.getKeyFrameSegment(Ht())[1],_s=this.panoResourceFromLocationMotionKeyframe(_a),Ss=this.work.observers[_s.panoIndex];return{longitude:ya.value.longitude,latitude:ya.value.latitude,fov:ya.value.fov,offset:Ss?Ss.position.clone():this.camera.position.clone()}},ga.prototype.moveToPano=function(ya,_a,_s){var Ss,Ms,Es=this;_a===void 0&&(_a={});var Cs=this.work.observers[ya].images.depth,Ts=e$1.__assign({key:"pano.".concat(ya),basisLoaderInitialized:xi.isInitialized()},ei(this.imageOptions,["format","size","quality","sharpen","mappings"])),Bs=(Ss=this.imageOptions.transform)!==null&&Ss!==void 0?Ss:he,Is={right:Bs(this.work.observers[ya].images.right,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".right")})),left:Bs(this.work.observers[ya].images.left,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".left")})),up:Bs(this.work.observers[ya].images.up,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".up")})),down:Bs(this.work.observers[ya].images.down,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".down")})),front:Bs(this.work.observers[ya].images.front,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".front")})),back:Bs(this.work.observers[ya].images.back,e$1.__assign(e$1.__assign({},Ts),{key:"pano.".concat(ya,".back")}))},Ps=this.work.observers[ya],Rs=Ps.position,ks=Ps.quaternion,$s=new r$1.Matrix4().compose(Rs,ks,new r$1.Vector3(-1,1,1)),Os="pano:"+Qr(Is);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Os)return;var Ls=this.pendingTextureTask.panoIndex;(Ms=this.panoMeshes[Ls])===null||Ms===void 0||Ms.setProgress(0),this.emit("textureAbort",Ls,this.work.observers[Ls]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:ya,hash:Os,onLoad:function(Fs){Es.pending=!1,Es.destroyed?Fs.body.dispose():(Fs.body.name=Os,Es.emit("panoLoaded",ya),Es.doMoveToPano(ya,Fs.body,_a,_s))},onError:function(Fs){Es.pending=!1,_a.moveCancelCallback&&_a.moveCancelCallback(),Es.emit("panoLoadError",Fs,ya),Es.emit("moveToPanoCanceled",ya)}};var Ds=this.panoMeshes[ya];Ds&&Ds.tap&&Ds.tap(),this.depthTextureLoader.load(Cs,Is,Rs,$s,function(Fs){var Ns,Vs;((Ns=Es.pendingTextureTask)===null||Ns===void 0?void 0:Ns.hash)===Os?(Es.pendingTextureTask.onLoad(Fs),(Vs=Es.panoMeshes[ya])===null||Vs===void 0||Vs.setProgress(0),delete Es.pendingTextureTask,Es.emit("textureLoaded",ya,Es.work.observers[ya],Fs.meta)):Fs.body.dispose()},function(Fs){var Ns,Vs;((Ns=Es.pendingTextureTask)===null||Ns===void 0?void 0:Ns.hash)===Os&&(Es.pendingTextureTask.onError(Fs),(Vs=Es.panoMeshes[ya])===null||Vs===void 0||Vs.setProgress(0),delete Es.pendingTextureTask,Es.emit("textureError",Fs,ya,Es.work.observers[ya]),Es.emit("error",Fs))},function(Fs){var Ns,Vs;Es.emit("textureLoading",Fs,ya,Es.work.observers[ya]),((Ns=Es.pendingTextureTask)===null||Ns===void 0?void 0:Ns.hash)===Os&&((Vs=Es.panoMeshes[ya])===null||Vs===void 0||Vs.setProgress(Fs))},this.renderer),this.emit("textureStartLoad",ya,this.work.observers[ya])},ga.prototype.initAnimation=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts=this;if(!this.destroyed){var Bs=!1;this.pending=!1,this.userAction=Ss,this.moveToPano(ya,{longitude:(Ms=_a.longitude)!==null&&Ms!==void 0?Ms:this.defaultLongitude,latitude:cn((Es=_a.latitude)!==null&&Es!==void 0?Es:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((Cs=_a.fov)!==null&&Cs!==void 0?Cs:this.defaultFov,this.minFov,this.maxFov),duration:_s,moveStartCallback:function(Is,Ps){Bs=!0,Ts.emit("initAnimationWillStart",Is,Ps,Ts.userAction)},moveEndCallback:function(Is,Ps){Ts.emit("initAnimationEnded",Is,Ps,Ts.userAction)},moveCancelCallback:function(){var Is=gr(Ts.camera.pose);Bs===!1&&Ts.emit("initAnimationWillStart",Ts.currentPanoIndex,Is,Ts.userAction),Ts.emit("initAnimationEnded",Ts.currentPanoIndex,Is,Ts.userAction)}},Ss)}},ga.prototype.panoResourceFromLocationMotionKeyframe=function(ya){return this.panoResources[ya.key]},ga.prototype.locationMotionKeyframesLength=function(ya){for(var _a=0,_s=1;_s<ya.length;_s++){var Ss=this.panoResourceFromLocationMotionKeyframe(ya[_s-1]).position,Ms=this.panoResourceFromLocationMotionKeyframe(ya[_s]).position;_a+=Ss.distanceTo(Ms)*(ya[_s].value.count-ya[_s-1].value.count)}return _a},ga.prototype.updatePanoMeshes=function(){for(var ya={},_a=0,_s=this.panoMeshes;_a<_s.length;_a++)ya[(Cs=_s[_a]).name]=Cs;this.panoMeshes.length=0;for(var Ss=0;Ss<this.work.observers.length;Ss++){var Ms="panoCircle_".concat(this.work.workCode,"_").concat(Ss),Es=this.work.observers[Ss],Cs=void 0;ya[Ms]?(Cs=ya[Ms],delete ya[Ms]):((Cs=this.panoCircleMeshCreator()).name=Ms,this.helper.add(Cs)),Cs.position.copy(Es.standingPosition),this.panoMeshes[Ss]=Cs}for(var Ts=0,Bs=Object.keys(ya);Ts<Bs.length;Ts++){var Is=Bs[Ts];this.helper.remove(ya[Is]),ya[Is].dispose(),delete ya[Is]}},ga.prototype.generateBoundingMesh=function(ya){ya===void 0&&(ya=!1);for(var _a=this.model.bounding.clone(),_s=0,Ss=this.work.observers;_s<Ss.length;_s++){var Ms=Ss[_s];_a.expandByPoint(Ms.standingPosition),_a.expandByPoint(new r$1.Vector3().fromArray([Ms.position.x,2*Ms.position.y-Ms.standingPosition.y,Ms.position.z]))}ya&&_a.expandByPoint(this.camera.position);var Es=rr(_a,new r$1.Vector3(1,0,1));return Es.name="panorama_bounding",Es.frustumCulled=!1,Es},ga.prototype.doMoveToPano=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts,Bs=this;_s===void 0&&(_s={}),this.userAction=Ss;var Is=Ht(),Ps=Zn(),Rs=this.work.observers[ya],ks=this.panoResources[Ps]={panoIndex:ya,workCode:this.work.workCode,effect:(Ms=_s.effect)!==null&&Ms!==void 0?Ms:"fly",panoModel:_a,matrix:new r$1.Matrix4().compose(Rs.position,Rs.quaternion,Xo),position:Rs.position.clone()};_a.visible=!1,_a.renderOrder=-1,this.panoModelGroup.add(_a);var $s,Os,Ls;if(this.locationMotion.ended){var Ds=this.locationMotion.getKeyFrameSegment(Is);Ds[0];var Fs=Ds[1],Ns=this.locationMotion.value,Vs=this.panoResourceFromLocationMotionKeyframe(Fs).position,Gs=ks.position;$s=Math.max(Vs.distanceTo(Gs),1),Os=[{key:Fs.key,progress:0,value:e$1.__assign(e$1.__assign({},Ns),{count:0})},{key:Ps,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],Ls=0}else{var Us=this.locationMotion.getKeyFrameSegment(Is),zs=Us[0],Hs=(Fs=Us[1],Ns=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(zs).position),Qs=(Vs=this.panoResourceFromLocationMotionKeyframe(Fs).position,Gs=ks.position,Fs.value.count-Ns.count),js=Math.max(Hs.distanceTo(Vs),1)*Qs;$s=js+Math.max(Vs.distanceTo(Gs),1),Os=[{key:zs.key,progress:0,value:e$1.__assign({},Ns)},{key:Fs.key,progress:js/$s,value:Fs.value},{key:Ps,progress:1,value:{count:Fs.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Zs=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Ks=this.locationMotionKeyframesLength(Os);Ls=Zs===0||Zs===0?0:this.locationMotion.getProgressVelocity(Is)*Zs/Ks}var Ys=this.calculateMovingDuration(_s.duration,_s.effect==="fade"||_s.effect==="montage"?0:$s),qs={longitude:_s.longitude,latitude:_s.latitude,fov:_s.fov},eu={longitude:(Es=qs.longitude)!==null&&Es!==void 0?Es:this.camera.pose.longitude,latitude:(Cs=qs.latitude)!==null&&Cs!==void 0?Cs:this.camera.pose.latitude,fov:(Ts=qs.fov)!==null&&Ts!==void 0?Ts:this.camera.pose.fov,offset:Rs.position.clone()};_s.moveStartCallback&&_s.moveStartCallback(ya,eu),this.emit("panoWillArrive",ya,eu,this.userAction),this.cameraMotion.set(qs,Ys).catch(Lt),this.locationMotion.setKeyframes(Os,Ys,Ls).then(function(){var Js={longitude:Bs.camera.pose.longitude,latitude:Bs.camera.pose.latitude,fov:Bs.camera.pose.fov,offset:Bs.camera.pose.offset.clone()};_s.moveEndCallback&&_s.moveEndCallback(ya,Js),Bs.emit("panoArrived",ya,Js,Ss)},function(){_s.moveCancelCallback&&_s.moveCancelCallback(),Bs.emit("moveToPanoCanceled",ya)})},ga.prototype.getForwardPanoIndexOrNot=function(ya){var _a=this,_s=this.camera.getWorldDirection(new r$1.Vector3),Ss=this.camera.position.clone(),Ms=this.work.observers[this.currentPanoIndex];if(!Ms)return null;var Es=Ms.accessibleNodes.filter(function(Ls){if(Ls===_a.currentPanoIndex)return!1;var Ds=_a.work.observers[Ls],Fs=Ds.standingPosition.clone().sub(Ss);return Fs.length()!==0&&!(Fs.angleTo(new r$1.Vector3(0,-1,0))<Math.PI/12)&&(Ds.loadable||Ds.active)}),Cs=(ya?ya.ray.direction.clone():_s.clone()).setY(0);if(Cs.length()===0)return null;for(var Ts=Es.slice().sort(function(Ls,Ds){var Fs=_a.work.observers[Ls].position.clone().setY(Ss.y),Ns=_a.work.observers[Ds].position.clone().setY(Ss.y);return Fs.distanceTo(Ss)-Ns.distanceTo(Ss)}),Bs=0,Is=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];Bs<Is.length;Bs++)for(var Ps=Is[Bs],Rs=0,ks=Ts;Rs<ks.length;Rs++){var $s=ks[Rs],Os=this.work.observers[$s].position.clone().setY(Ss.y).sub(Ss);if(Os.length()!==0&&Cs.angleTo(Os)<Ps)return $s}return null},ga.prototype.onTapGesture=function(ya){var _a=this,_s=ya.pointers.map(function(Js){return ei(Js,["x","y"])});if(!this.emit("wantsGesture","tap",_s,!0)){var Ss=this.relativeClientPosition(ya.center),Ms=new r$1.Raycaster;if(Ms.setFromCamera(Ss,this.camera),!this.emit("wantsTapGesture",Ms,Ss,!0)){this.emit("gesture","tap",_s,!0),this.emit("tapGesture",Ms,Ss,!0),this.interiaMovement=!1;var Es=this.camera.getWorldDirection(new r$1.Vector3).setY(0),Cs=null,Ts=this.work.observers[this.currentPanoIndex];if(Ts){var Bs=Ts.accessibleNodes.filter(function(Js){if(Js===_a.currentPanoIndex)return!1;var Xs=_a.work.observers[Js];return!(Xs.position.distanceTo(_a.camera.position)>_a.maxAccessibleDistance)&&(Xs.loadable||Xs.active)}),Is=Ms.intersectObject(this.boundingMesh,!0)[0];if(Is){var Ps=Ar(Bs,function(Js){var Xs=_a.work.observers[Js].standingPosition.clone();return Xs.clone().sub(_a.camera.position).setY(0).angleTo(Es)>Math.PI/2?1/0:Xs.distanceTo(Is.point)},!0),Rs=Ps[0];Ps[1]<this.panoTapTriggerRadius&&(Cs=Rs)}qi(Cs)&&(Cs=this.getForwardPanoIndexOrNot(Ms));for(var ks=0,$s=this.locationMotion.keyframes;ks<$s.length;ks++){var Os=$s[ks],Ls=this.panoResourceFromLocationMotionKeyframe(Os);if(!(Os.progress<this.locationMotion.progress)&&Ls.panoIndex===Cs){Cs=null;break}}if(this.emit("panoSelected",Cs),qi(Cs))this.locationMotion.ended===!0&&this.cameraBounce();else{var Ds=this.work.observers[Cs];if(Ds.active){for(var Fs={},Ns=Math.PI/6,Vs=Math.PI/12,Gs=new r$1.Vector3(0,1,0),Us=Ds.position.clone().setY(0).sub(Ts.position.clone().setY(0)).normalize(),zs=Us.clone().applyAxisAngle(Gs,Ns),Hs=Us.clone().applyAxisAngle(Gs,-Ns),Qs=[],js=[],Zs=[],Ks=0,Ys=Ds.accessibleNodes;Ks<Ys.length;Ks++)if((Rs=Ys[Ks])!==this.currentPanoIndex&&Rs!==Cs){var qs=this.work.observers[Rs].position.clone().sub(Ds.position).setY(0);Us.angleTo(qs)<Ns?Zs.push(qs):zs.angleTo(qs)<Ns?Qs.push(qs):Hs.angleTo(qs)<Ns&&js.push(qs)}var eu=(Zs.length>0?Zs:e$1.__spreadArray(e$1.__spreadArray([],Qs,!0),js,!0)).slice().sort(function(Js,Xs){return Js.angleTo(Us)-Xs.angleTo(Us)})[0];eu&&eu.angleTo(Es)>Vs&&(Fs.longitude=Math.atan2(-eu.x,-eu.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Fs.latitude=cn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",Cs,Fs,!0)}else this.panoMeshes[Cs]&&(this.panoMeshes[Cs].setDisabled(!1),this.panoMeshes[Cs].setLoading(!0))}}}}},ga}(Dr),Zo=["Panorama","DepthPanorama","Model"],Jo={Floorplan:Mr,Topview:Pr,Panorama:ro,VRPanorama:zo,Model:qo,DepthPanorama:Yo};function $o(ca){for(var ga=0,ya=Zo;ga<ya.length;ga++){var _a=ya[ga];if(typeof ca=="string"){if(_a===ca)return!0}else if(ca instanceof Br&&ca instanceof Jo[_a])return!0}return!1}var ts=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function es(ca){for(var ga,ya,_a={},_s=0,Ss=ca.split(/(\;|\,)/);_s<Ss.length;_s++){var Ms=Ss[_s].split("="),Es=(ga=Ms[0])===null||ga===void 0?void 0:ga.trim(),Cs=(ya=Ms[1])===null||ya===void 0?void 0:ya.trim();Es&&Cs&&(_a[Es]=Cs)}return _a}function is(){for(var ca,ga=document.getElementsByTagName("meta"),ya=0;ya<ga.length;ya++){var _a=ga[ya];if(_a.getAttribute("name")==="viewport"){var _s=es((ca=_a.getAttribute("content"))!==null&&ca!==void 0?ca:""),Ss=Number(_s["initial-scale"]);if(!isNaN(Ss))return Ss}}return 1}var ns=[351,63],rs=[20,20],os=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),ss=new Float32Array([0,0,1,0,0,1,1,1]),as=new Uint8Array([0,1,2,1,3,2]),us=new r$1.BufferGeometry;us.setAttribute("position",new r$1.BufferAttribute(os,3)),us.setAttribute("uv",new r$1.BufferAttribute(ss,2)),us.setIndex(new r$1.BufferAttribute(as,1));var ls=new r$1.MeshBasicMaterial({transparent:!0,depthTest:!1}),hs=new r$1.Mesh(us,ls),cs=new r$1.Scene;cs.add(hs);var ds=new r$1.OrthographicCamera(-.5,.5,.5,-.5,.1,1);ds.position.set(0,0,.5),ds.lookAt(0,0,0);var ps=new r$1.Vector4,As=new r$1.Vector4;function fs(ca){if(ls.map){var ga=ca.getViewport(ps),ya=ca.getScissor(As),_a=ca.getScissorTest(),_s=ca.autoClear;ca.setViewport(ya.x+rs[0]/3,ya.y+rs[1]/3,ns[0]/3,ns[1]/3),ca.setScissor(ya.x+rs[0]/3,ya.y+rs[1]/3,ns[0]/3,ns[1]/3),ca.setScissorTest(!0),ca.autoClear=!1,ca.render(cs,ds),ca.setViewport(ga),ca.setScissor(ya),ca.setScissorTest(_a),ca.autoClear=_s}else{var Ss=new r$1.Texture,Ms=new Image;Ms.onload=function(){Ss.image=Ms,Ss.wrapS=r$1.ClampToEdgeWrapping,Ss.wrapT=r$1.ClampToEdgeWrapping,Ss.minFilter=r$1.LinearFilter,Ss.needsUpdate=!0,ls.needsUpdate=!0,Ms.onload=function(){}},Ms.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",ls.map=Ss}}var gs=new r$1.Box3(new r$1.Vector3(-50,-50,-50),new r$1.Vector3(50,50,50)),vs=new r$1.Vector2,ms=new r$1.Frustum,ys=new r$1.Matrix4,ws=new WeakMap,bs=new WeakMap,xs=function(ca){function ga(ya){ya===void 0&&(ya={});var _a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps,Rs=this;if((Rs=ca.call(this)||this).ident=Zn(),Rs.renderSwitch01=0,Rs.panoIndex=0,Rs.needsRender=!1,Rs.onlyRenderIfNeeds=(_a=ya.onlyRenderIfNeeds)===null||_a===void 0||_a,Rs.imageOptions=e$1.__assign({},(_s=ya.imageOptions)!==null&&_s!==void 0?_s:{}),Rs.textureOptions=e$1.__assign({},(Ss=ya.textureOptions)!==null&&Ss!==void 0?Ss:{}),Rs.poweredByRealsee=(Ms=ya.poweredByRealsee)===null||Ms===void 0||Ms,Rs.extraElements=[],Rs.controllerInits={Panorama:Object.assign({},ya.panorama),Model:Object.assign({},ya.model),Floorplan:Object.assign({},ya.floorplan),Topview:Object.assign({},ya.topview),DepthPanorama:Object.assign({},ya.depthPanorama),VRPanorama:Object.assign({},ya.vrPanorama)},Rs.fps={testCount:0,testTime:Ht()},Rs.modeChangeDuration=(Es=ya.modeChangeDuration)!==null&&Es!==void 0?Es:1e3,Rs.panoramaLikeSavedPose={},typeof window!="undefined")if(ya.renderer)ya.renderer instanceof xe&&Rs.throwError(new Error("cannot render a internal renderer")),Rs.renderer=ya.renderer;else try{Rs.renderer=new xe({preserveDrawingBuffer:ya.preserveDrawingBuffer,backgroundColor:ya.backgroundColor,backgroundAlpha:ya.backgroundAlpha,antialias:ya.antialias,webgl2:ya==null?void 0:ya.webgl2});var ks=is();Rs.renderer.setPixelRatio(ks===1?window.devicePixelRatio:1),Rs.renderer.setSize(512,512)}catch(zs){zs instanceof Error&&Rs.throwError(zs)}Rs.getPixelsRenderTarget=new r$1.WebGLRenderTarget(1,1,{encoding:(Ts=(Cs=Rs.renderer)===null||Cs===void 0?void 0:Cs.outputEncoding)!==null&&Ts!==void 0?Ts:r$1.sRGBEncoding}),Rs.scissor=Object.assign({left:0,bottom:0,width:1,height:1},ya.scissor),Rs.camera=new Qe(80),Rs.scene=new Ee,Rs.lastLoadWorkTask=Promise.resolve(),Rs.networkSubscribe=new te,Rs.networkSubscribe.on("network",function(zs,Hs,Qs,js){var Zs;Rs.emit("network",zs,Hs,Qs,js),(Zs=Rs.analysis)===null||Zs===void 0||Zs.network(Rs.work,zs,Hs,Qs,js)}),Rs.model=new Gi({allowHosts:[],networkSubscribe:Rs.networkSubscribe});var $s=rr(gs);$s.name="model_empty",Rs.model.add($s),Rs.model.visible=!1,Rs.readyCallbacks=[],Rs.modelPending=!1,Rs.syncingState=!1,Rs.scene.add(Rs.model),Rs.helperGroup=new r$1.Group,Rs.helperGroup.name="helper",Rs.scene.add(Rs.helperGroup),Rs.videoTexture=new r$1.VideoTexture(ya.videoInstance||function(){var zs=document.createElement("video");zs.loop=!0,zs.autoplay=!0,zs.playsInline=!0,zs.muted=!0,zs.crossOrigin="";var Hs=function(){document.removeEventListener("touchstart",Hs,!1),document.removeEventListener("mousedown",Hs,!1),zs.muted=!1};return document.addEventListener("touchstart",Hs,!1),document.addEventListener("mousedown",Hs,!1),zs}()),function(zs){(Hs=new r$1.DirectionalLight(16777215,.5)).position.copy(new r$1.Vector3(1,1,1)),zs.add(Hs);var Hs=new r$1.DirectionalLight(16777215,.3);zs.add(Hs),Hs=new r$1.AmbientLight(16777215,.3),zs.add(Hs)}(Rs.scene),Rs.state={mode:(Bs=Rs.currentMode)!==null&&Bs!==void 0?Bs:"Panorama",panoIndex:(Is=Rs.panoIndex)!==null&&Is!==void 0?Is:0,longitude:Rs.camera.pose.longitude,latitude:Rs.camera.pose.latitude,fov:Rs.camera.pose.fov,offset:Rs.camera.pose.offset.clone()},Rs.stateSynced=!1,Rs._enableIOSEDR=!1,Rs.destroyed=!1,Rs.paused=!0,typeof window!="undefined"&&(ya.play!==!1&&Rs.play(),((Ps=ya.initialBasisLoader)!==null&&Ps!==void 0&&Ps)!==!1&&(typeof ya.initialBasisLoader=="string"?Rs.initBasisLoader(ya.initialBasisLoader):Rs.initBasisLoader()),Rs.stopAnimationLoop=se.shared.add(function(zs,Hs){Rs.updateTime(zs,Hs)},!1,0,10));var Os=function(){typeof document!="undefined"&&document.fullscreenElement===null&&Rs.currentMode==="VRPanorama"&&Rs.controller.emit("vrWantsToExit")};if(typeof document!="undefined"&&document.addEventListener("fullscreenchange",Os,!1),Rs.removeEventListeners=function(){typeof document!="undefined"&&document.removeEventListener("fullscreenchange",Os,!1)},Rs.plugins={},ya.plugins&&ya.plugins.length)for(var Ls=0,Ds=ya.plugins;Ls<Ds.length;Ls++){var Fs=Ds[Ls];if(typeof Fs=="function")Fs(Rs);else if(Array.isArray(Fs)){var Ns=Fs[0],Vs=Fs[1],Gs=Fs[2];if(typeof Ns=="function"){var Us=Ns(Rs,Gs);typeof Vs=="string"&&(Rs.plugins[Vs]?Rs.throwError(new Error("plugin name ".concat(Vs," is exists."))):Rs.plugins[Vs]=Us)}}}return Rs}return e$1.__extends(ga,ca),ga.prototype.dispose=function(){var ya;if(this.destroyed!==!0){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var _a=this.getElement();_a&&_a.parentNode&&_a.parentNode.removeChild(_a),this.scene.remove(this.model);var _s=this.model.getMaterial();_s&&(_s.pano0&&_s.pano0.map.dispose(),_s.pano1&&_s.pano1.map!==((ya=_s.pano0)===null||ya===void 0?void 0:ya.map)&&_s.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof xe&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},ga.prototype.setScissor=function(ya){Object.assign(this.scissor,ya),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(ga.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(ya){this.helperGroup.visible!==ya&&(this.helperGroup.visible=ya,this.emit("helpersVisibleChange",ya),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(ya){this._enableIOSEDR!==ya&&(this._enableIOSEDR=ya,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(ya){var _a,_s;if(ya){if(!this.screenBuffer){var Ss=this.getDrawingBufferSize(vs);this.screenBuffer=new r$1.WebGLRenderTarget(Ss.x,Ss.y,{encoding:(_s=(_a=this.renderer)===null||_a===void 0?void 0:_a.outputEncoding)!==null&&_s!==void 0?_s:r$1.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),ga.prototype.updateConfiguration=function(ya){var _a=!1;ya.panorama&&(Object.assign(this.controllerInits.Panorama,ya.panorama),this.currentMode==="Panorama"&&(_a=!0)),ya.model&&(Object.assign(this.controllerInits.Model,ya.model),this.currentMode==="Model"&&(_a=!0)),ya.floorplan&&(Object.assign(this.controllerInits.Floorplan,ya.floorplan),this.currentMode==="Floorplan"&&(_a=!0)),ya.topview&&(Object.assign(this.controllerInits.Topview,ya.topview),this.currentMode==="Topview"&&(_a=!0)),ya.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,ya.depthPanorama),this.currentMode==="DepthPanorama"&&(_a=!0)),ya.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,ya.vrPanorama),this.currentMode==="VRPanorama"&&(_a=!0)),ya.imageOptions&&(Object.assign(this.imageOptions,ya.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(_a=!0)),_a&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},ga.prototype.appendTo=function(ya,_a){if(_a===void 0&&(_a={}),this.renderer)if(this.renderer instanceof xe){var _s=this.getElement();if(_s){ya.appendChild(_s),this.refresh(_a);var Ss=window.getComputedStyle(ya).position;Ss!=="relative"&&Ss!=="absolute"&&Ss!=="fixed"&&Ss!=="sticky"&&(ya.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},ga.prototype.refresh=function(ya,_a){if(ya===void 0&&(ya={}),this.renderer){var _s=this.getElement();if(_s){var Ss=_s.parentNode;if(Ss&&Ss.nodeName){var Ms=ya.width,Es=Ms===void 0?Ss.offsetWidth:Ms,Cs=ya.height,Ts=Cs===void 0?Ss.offsetHeight:Cs;this.renderer instanceof xe&&(_a&&this.renderer.setPixelRatio(_a),this.renderer.setSize(Es,Ts))}var Bs=this.renderer.getSize(new r$1.Vector2);this.camera.aspect=Bs.x*this.scissor.width/(Bs.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},ga.prototype.addExtraElement=function(ya){var _a=this;return this.extraElements.indexOf(ya)===-1&&(this.extraElements.push(ya),this.controller&&this.controller.bindExtraElement(ya)),function(){return _a.removeExtraElement(ya)}},ga.prototype.removeExtraElement=function(ya){var _a=this.extraElements.indexOf(ya);_a!==-1&&(this.extraElements.splice(_a,1),this.controller&&this.controller.unbindExtraElement(ya))},ga.prototype.getPose=function(){var ya=this.camera.copyPose();return{longitude:ya.longitude,latitude:ya.latitude,fov:ya.fov,offset:ya.offset}},ga.prototype.getSize=function(ya){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(ya),ya.x*=this.scissor.width,ya.y*=this.scissor.height,ya},ga.prototype.getDrawingBufferSize=function(ya){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(ya),ya.x*=this.scissor.width,ya.y*=this.scissor.height,ya},ga.prototype.updateCamera=function(ya,_a,_s){return _s===void 0&&(_s=!0),this.controller?this.controller.updateCamera(ya,_a,_s):Promise.reject(new Error("controller is not initialized."))},ga.prototype.getLongitudeAndLatitude=function(){var ya=this.getPose();return{longitude:ya.longitude,latitude:ya.latitude}},ga.prototype.getOffset=function(){return this.getPose().offset},ga.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var ya=this.work.observers[this.panoIndex],_a=new r$1.Object3D;return _a.position.copy(ya.position),_a.quaternion.copy(ya.quaternion),_a.scale.set(1,1,1),_a.updateMatrixWorld(!0),function(_s,Ss){var Ms=new r$1.Vector3(0,0,-1);Ms.applyQuaternion(_s.quaternion);var Es=Ss.quaternion.clone().inverse();return Ms.applyQuaternion(Es),{theta:Math.atan2(Ms.x,-Ms.z),phi:-Math.asin(Ms.y),lookAtVector:Ms}}(this.camera,_a)}},ga.prototype.initBasisLoader=function(ya){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof ya=="string"&&xi.setTranscoderPath(ya),xi.workerConfig.format||xi.detectSupport(this.renderer),xi._allocateWorker(0)}catch(_a){_a instanceof Error&&this.throwError(_a)}},Object.defineProperty(ga.prototype,"work",{get:function(){var ya=bs.get(this);if(ya&&on.get(ya))return ya},enumerable:!1,configurable:!0}),ga.prototype.load=function(ya,_a,_s,Ss){var Ms=this;if(Ss===void 0&&(Ss=!0),!this.renderer)throw new Error("renderer is not initialized");var Es=this.lastLoadWorkTask.then(function(){return!(Cs=ya)||typeof Cs!="object"&&typeof Cs!="function"||typeof Cs.then!="function"?Ms.load_(ya,_a,_s,Ss):ya.then(function(Ts){return Ms.load_(Ts,_a,_s,Ss)});var Cs});return this.lastLoadWorkTask=Es.catch(function(Cs){Ms.throwError(Cs)}),Es},ga.prototype.load_=function(ya,_a,_s,Ss){var Ms,Es,Cs,Ts,Bs,Is,Ps,Rs,ks,$s=this;Ss===void 0&&(Ss=!0);var Os,Ls,Ds,Fs=hn(ya),Ns=this.work;_a===void 0&&(_a=Ns?"inherit":"initial"),_a==="inherit"?(Os=typeof this.panoIndex=="number"&&Fs.observers[this.panoIndex]?this.panoIndex:Fs.initial.panoIndex,Ls=(Ms=this.currentMode)!==null&&Ms!==void 0?Ms:Fs.initial.mode,Ds={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):_a==="initial"?(Ls=(Es=this.currentMode)!==null&&Es!==void 0?Es:Fs.initial.mode,Os=Fs.initial.panoIndex,Ds=Ls===ga.Mode.Panorama||Ls===ga.Mode.DepthPanorama||Ls===ga.Mode.Model||Ls===ga.Mode.VRPanorama?{longitude:Fs.initial.longitude,latitude:Fs.initial.latitude,fov:Fs.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Os=(Cs=_a.panoIndex)!==null&&Cs!==void 0?Cs:Fs.initial.panoIndex,Ls=(Bs=(Ts=_a.mode)!==null&&Ts!==void 0?Ts:this.currentMode)!==null&&Bs!==void 0?Bs:"Panorama",Ds={longitude:(Is=_a.longitude)!==null&&Is!==void 0?Is:Fs.initial.longitude,latitude:(Ps=_a.latitude)!==null&&Ps!==void 0?Ps:Fs.initial.latitude,fov:(Rs=_a.fov)!==null&&Rs!==void 0?Rs:Fs.initial.fov}),this.emit("willLoad",ya,Fs,{panoIndex:Os,mode:Ls,longitude:Ds.longitude,latitude:Ds.latitude,fov:Ds.fov});var Vs=function(){var Us;$s.panoIndex=Os,$s.panoramaLikeSavedPose.longitude=Fs.initial.longitude,$s.panoramaLikeSavedPose.latitude=Fs.initial.latitude,$s.panoramaLikeSavedPose.fov=Fs.initial.fov;var zs=$s.controller?_s!=null?_s:$s.modeChangeDuration:0,Hs=e$1.__assign(e$1.__assign({initial:[Os,Ds,zs,Ss]},$s.commonParams()),$s.controllerInits[Ls]);$s.controller?$s.controller.updateWork(Fs,Os,Ds,zs,Ss)===!1&&($s.controller.destroy(),$s.controller=$s.applyController(Ls,Hs)):$s.controller=$s.applyController(Ls,Hs),$s.emit("load",ya,Fs,{panoIndex:Os,mode:Ls,longitude:Ds.longitude,latitude:Ds.latitude,fov:Ds.fov}),(Us=$s.analysis)===null||Us===void 0||Us.work(Fs)},Gs=function(Us){var zs;Us===void 0&&(Us=Lt),Fs.model&&($s.model.name!==((zs=Fs.model)===null||zs===void 0?void 0:zs.file)?($s.emit("modelWillLoad",Fs.model),$s.loadModel(Fs.model,Fs.allowHosts,Us,!0)):Us&&Us())};return bs.set(this,Fs),Ls===ga.Mode.Floorplan||Ls===ga.Mode.Topview||Ls===ga.Mode.Model?Gs(function(){Vs(),$s.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Fs.initial.fov,longitude:Fs.initial.longitude,latitude:Fs.initial.latitude,offset:Fs.observers[Fs.initial.panoIndex].position}),this.needsRender=!0),Vs(),(ks=this.controller)===null||ks===void 0||ks.once("panoLoaded",function(){$s.needsRender=!0,$s.emit("cameraUpdate",$s.camera.copyPose(),Ss),Gs()})),this.ready().then(function(){$s.emit("loaded",ya,$s.work)})},ga.prototype.changeMode=function(ya,_a,_s,Ss,Ms){var Es=this;if(_a===void 0&&(_a={}),_s===void 0&&(_s=this.modeChangeDuration),Ss===void 0&&(Ss=!0),Ms===void 0&&(Ms=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(Cs,Ts){if(!ga.Mode.hasOwnProperty(ya)){var Bs=new Error('mode "'.concat(ya,'" is not existed'));return Es.throwError(Bs),void Ts(Bs)}if((ya===ga.Mode.Floorplan||ya===ga.Mode.Topview||ya===ga.Mode.Model)&&(qi(Es.model)||Es.model.loaded!==!0))return Bs=new Error("model is not ready."),Es.throwError(Bs),void Ts(Bs);if(qi(Es.controller))return Bs=new Error("controller is not ready."),Es.throwError(Bs),void Ts(Bs);var Is=Es.controller,Ps=Es.currentMode,Rs=function(){var ks,$s,Os,Ls;if(Es.emit("wantsChangeMode",ya,Ps))Ts(new Error("change mode canceled."));else{if(Es.controller&&Ms===!1&&Ps===ya)ya===ga.Mode.Panorama||ya===ga.Mode.DepthPanorama||ya===ga.Mode.Model||ya===ga.Mode.VRPanorama?typeof _a.panoIndex=="number"&&_a.panoIndex!==Es.panoIndex?Es.controller.moveToPano(($s=(ks=_a.panoIndex)!==null&&ks!==void 0?ks:Es.panoIndex)!==null&&$s!==void 0?$s:0,e$1.__assign({duration:_s},_a),Ss):Es.controller.updateCamera(_a,_s,Ss).catch(Lt):(typeof _a.panoIndex=="number"&&_a.panoIndex!==Es.panoIndex&&(Es.panoIndex=_a.panoIndex),Es.controller.updateCamera(_a,_s,Ss).catch(Lt));else{Is.destroy();var Ds=(Ls=(Os=_a.panoIndex)!==null&&Os!==void 0?Os:Es.panoIndex)!==null&&Ls!==void 0?Ls:0,Fs=$o(ya)?Es.panoramaLikeSavedPose:{};typeof _a.longitude!="number"&&typeof _a.latitude!="number"||(Fs.longitude=_a.longitude,Fs.latitude=_a.latitude),typeof _a.fov=="number"&&(Fs.fov=_a.fov);var Ns=e$1.__assign(e$1.__assign({initial:[Ds,Fs,_s,Ss]},Es.commonParams()),Es.controllerInits[ya]);Es.saveControllerPose(Is),Es.controller=Es.applyController(ya,Ns);var Vs=Jo[ya].initAnimationEndPose(Ns);Es.emit("modeChange",ya,Ps,Ds,Vs)}Cs()}};ya===ga.Mode.VRPanorama?(Es.requestFullscreen(),(typeof location=="undefined"||location.protocol!=="https:"?Promise.reject(new Error("Request DeviceOrientation Permission denied.")):typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(ks){if(ks=="granted")return Promise.resolve();var $s=new Error("Request DeviceOrientation Permission denied.");return Promise.reject($s)}):Promise.resolve()).then(function(){return Rs()}).catch(function(ks){ks instanceof Error&&(Es.exitFullscreen(),Es.throwError(ks),Ts(ks))})):Rs()})},ga.prototype.getPixels=function(ya,_a,_s,Ss,Ms){if(Ms===void 0&&(Ms=1),!this.renderer)throw new Error("renderer is not initialized.");var Es=this.getPixelsRenderTarget,Cs=this.renderer.getSize(new r$1.Vector2);ya=cn(ya,Math.floor(_s/2),Math.floor(Cs.x-_s)),_a=cn(_a,Math.floor(Ss/2),Math.floor(Cs.y-Ss)),ya*=Ms,_a*=Ms,_s*=Ms,Ss*=Ms,Es.setSize(Cs.x*Ms,Cs.y*Ms),Es.scissor.set(ya,_a,_s,Ss),Es.scissorTest=!0,this.renderer.setRenderTarget(Es);var Ts=new Uint8Array(_s*Ss*4);return this.controller?this.controller.render():this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(Es,ya,_a,_s,Ss,Ts),this.renderer.setRenderTarget(null),Es.setSize(1,1),Es.scissor.set(0,0,0,0),Es.scissorTest=!1,Ts},ga.prototype.getElement=function(){var ya;return(ya=this.renderer)===null||ya===void 0?void 0:ya.domElement},ga.prototype.render=function(ya,_a){var _s=this;if(_a===void 0&&(_a=!1),!this.renderer)return null;if(_a){var Ss=this.renderer.getSize(vs);this.scene.traverseVisible(function(Es){Es.setResolution&&Es.setResolution(Ss.x,Ss.y)})}if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var Ms=this.getDrawingBufferSize(vs);return this.screenBuffer.setSize(Ms.x,Ms.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(),this.renderer.setRenderTarget(null),this.currentMode!=="VRPanorama"&&this.poweredByRealsee&&fs(this.renderer),this.renderer.setRenderTarget(null),ya&&se.shared.add(ya,!0),this.screenBuffer}return this.aroundScissor(function(){_s.renderer&&(_s.controller?_s.controller.render():_s.renderer.render(_s.scene,_s.camera),_s.currentMode!=="VRPanorama"&&_s.poweredByRealsee&&fs(_s.renderer)),ya&&se.shared.add(ya,!0)}),null},ga.prototype.updateTime=function(ya,_a){var _s=this;if(!this.destroyed){this.syncingState=this.syncState(ya,_a),this.controller&&this.controller.updateTime(ya,_a),this.syncingState=!1;var Ss=new r$1.Vector2(512,512),Ms=new r$1.Vector2(512,512);this.renderer&&(this.renderer.getSize(Ss),Ss.x*=this.scissor.width,Ss.y*=this.scissor.height,this.renderer.getDrawingBufferSize(Ms),Ms.x*=this.scissor.width,Ms.y*=this.scissor.height);var Es=[];if(ys.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),ms.setFromProjectionMatrix(ys),this.scene.traverse(function(ks){if(ks.setResolution&&ks.setResolution(Ss.x,Ss.y),ks.mixer instanceof r$1.AnimationMixer){var $s=ws.get(ks.mixer);$s||($s=new r$1.Clock,ws.set(ks.mixer,$s)),ks.mixer.update($s.getDelta())}(ks instanceof r$1.Mesh||ks instanceof r$1.Line||ks instanceof r$1.Points)&&(ks instanceof r$1.ImmediateRenderObject||!ks.frustumCulled||ms.intersectsObject(ks))&&Es.push(ks)}),Ms.width*Ms.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var Cs=void 0;if(this.onlyRenderIfNeeds!==!0)Cs=this.render();else{for(var Ts=0,Bs=Es;Ts<Bs.length;Ts++){var Is=Bs[Ts],Ps=function(ks){ks.needsRender===!0?(ks.needsRender=!1,_s.needsRender=!0):ks.mixer&&ks.mixer.stats.actions.inUse>0&&(_s.needsRender=!0)};Ps(Is),Is.traverseAncestors(Ps)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(Cs=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return _s.controller.postProcessing(_s.screenBuffer,void 0)}),this.hasListener("renderFrame")&&this.emit("renderFrame",Cs!==void 0)}if(this.fps.testTime&&ya-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=ya,this.fps.testCount=0,this.renderer){var Rs=function(ks){var $s=ks.getError();if($s===ks.NO_ERROR)return null;switch($s){case ks.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case ks.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case ks.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case ks.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case ks.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case ks.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());Rs&&this.throwError(Rs)}}},ga.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof xe&&this.renderer.clear(!0,!0,!0)},ga.prototype.play=function(){this.needsRender=!0,this.paused=!1},ga.prototype.moveToPano=function(ya,_a,_s){_a===void 0&&(_a={}),_s===void 0&&(_s=!0);var Ss=this,Ms=Ss.controller,Es=Ss.currentMode,Cs=Ss.renderer;Ms?Cs?Es===ga.Mode.Floorplan||Es===ga.Mode.Topview?qi(ya)||(this.panoIndex=ya,this.changeMode(ga.Mode.Panorama,_a,void 0,_s)):Ms.moveToPano(ya,_a,_s):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},ga.prototype.preloadPano=function(ya,_a){var _s=this;if(_a===void 0&&(_a=Lt),!this.work)return Promise.reject(new Error("work never loaded"));var Ss=this.work.observers[ya],Ms=Ht();return Promise.all(["right","left","up","down","front","back"].map(function(Es){var Cs=e$1.__assign({key:"pano.".concat(ya,".").concat(Es),basisLoaderInitialized:xi.isInitialized()},ei(_s.imageOptions,["size","format","quality","mappings"])),Ts=Ss.images[Es];return function(Bs,Is){return Is===void 0&&(Is={}),Bs in ie?ie[Bs]:ie[Bs]=new Promise(function(Ps,Rs){var ks=document.createElement("link");ks.href=Bs,ks.rel=ks.relList&&ks.relList.supports("prefetch")?"prefetch":"preload",ks.as="fetch",ks.crossOrigin="";var $s=Ht(),Os=document.head||document.getElementsByTagName("head")[0];Os&&Os.appendChild(ks);var Ls=!1;ks.onload=function(){var Ds;if(Ls!==!0){Ls=!0,Ps();var Fs=Ht(),Ns={source:Bs,requestTime:$s,responseTime:Fs,costs:Fs-$s,headers:{}};(Ds=Is.networkSubscribe)===null||Ds===void 0||Ds.emit("network",Bs,"Link","preload",JSON.stringify(Ns))}},ks.onerror=function(Ds){var Fs;if(Ls!==!0){Ls=!0;var Ns=new Wt(Bs,"Link",0);Rs(Ns),(Fs=Is.networkSubscribe)===null||Fs===void 0||Fs.emit("network",Bs,"Link","error",Ns.message)}}})}(_s.imageOptions.transform?_s.imageOptions.transform(Ts,Cs):he(Ts,Cs),{networkSubscribe:_s.networkSubscribe})})).then(function(){var Es=Ht()-Ms;return _a(Es),Es})},ga.prototype.project2d=function(ya,_a){if(_a===void 0&&(_a=!1),!this.renderer)return null;if(this.model.empty===!1&&_a){var _s=this.camera.position,Ss=ya.clone().sub(_s),Ms=new r$1.Raycaster(_s,Ss.clone().normalize()),Es=this.model.intersectRaycaster(Ms)[0];if(Es&&Es.distance+.01<Ss.length())return null}var Cs=ya.clone().project(this.camera);if(Math.abs(Cs.z)>1)return null;var Ts=this.renderer.getSize(new r$1.Vector2),Bs=Ts.x*this.scissor.width,Is=Ts.y*this.scissor.height,Ps=Ts.x*this.scissor.left+(Cs.x+1)/2*Bs,Rs=Ts.y*(1-this.scissor.bottom-this.scissor.height)+(1-Cs.y)/2*Is;return new r$1.Vector2(Ps,Rs)},ga.prototype.getRenderObjects=function(ya){ys.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),ms.setFromProjectionMatrix(ys),ya||(ya=this.scene);var _a=[];return ya.traverseVisible(function(_s){(_s instanceof r$1.Mesh||_s instanceof r$1.Line||_s instanceof r$1.Points)&&(_s instanceof r$1.ImmediateRenderObject||!_s.frustumCulled||ms.intersectsObject(_s))&&_a.push(_s)}),_a},ga.prototype.getCurrentState=function(){return e$1.__assign(e$1.__assign({},this.getPose()),{mode:this.currentMode||ga.Mode.Panorama,panoIndex:this.panoIndex||0})},ga.prototype.setState=function(ya,_a,_s){var Ss,Ms,Es,Cs,Ts,Bs,Is,Ps;_a===void 0&&(_a=!1),_s===void 0&&(_s=!0),!(ya=Object.assign({},ya)).offset||ya instanceof r$1.Vector3||(ya.offset=new r$1.Vector3(ya.offset.x,ya.offset.y,ya.offset.z));var Rs,ks,$s,Os,Ls=(Ss=ya.panoIndex)!==null&&Ss!==void 0?Ss:this.state.panoIndex,Ds=(Ms=ya.mode)!==null&&Ms!==void 0?Ms:this.state.mode;if(this.work)if(this.work.observers[Ls])if(ya.mode!==ga.Mode.Floorplan&&ya.mode!==ga.Mode.Topview&&ya.mode!==ga.Mode.Model||!qi(this.model)&&this.model.loaded===!0){if(this.state.mode!==Ds){if(Ds==="VRPanorama")return void this.changeMode("VRPanorama",void 0,void 0,!0);var Fs=void 0;Fs=$o(this.state.mode)&&$o(Ds)?e$1.__assign({},this.state):$o(Ds)?e$1.__assign({},this.panoramaLikeSavedPose):e$1.__assign({},ya),typeof ya.longitude=="number"&&(Fs.longitude=ya.longitude),typeof ya.latitude=="number"&&(Fs.latitude=ya.latitude),typeof ya.fov=="number"&&(Fs.fov=ya.fov);var Ns=e$1.__assign(e$1.__assign({initial:[Ls,Fs,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[Ds]),Vs=Jo[Ds].initAnimationEndPose(Ns);Rs=Vs.longitude,ks=Vs.latitude,$s=Vs.fov,Os=Vs.offset}else Rs=(Es=ya.longitude)!==null&&Es!==void 0?Es:this.state.longitude,ks=(Cs=ya.latitude)!==null&&Cs!==void 0?Cs:this.state.latitude,$s=(Ts=ya.fov)!==null&&Ts!==void 0?Ts:this.state.fov,Os=(Bs=ya.offset)!==null&&Bs!==void 0?Bs:this.state.offset;var Gs={panoIndex:Ls,mode:Ds,longitude:Rs,latitude:ks,fov:$s,offset:Os};this.emit("setState",Gs),dr(this.state,Gs)||(cr(this.state,Gs),this.controller&&(this.controller.userAction=_s),_a&&this.state.mode===Gs.mode&&(this.syncingState=this.syncState(Ht(),0,_a),this.syncingState&&((Is=this.controller)===null||Is===void 0||Is.updateTime(Ht(),0),this.syncingState=!1)),this.emit("stateChange",this.state,_s),(Ps=this.analysis)===null||Ps===void 0||Ps.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},ga.prototype.aroundScissor=function(ya){if(this.renderer){var _a=new r$1.Vector2,_s=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(_s){this.renderer.getSize(_a);var Ss=Math.floor(_a.x*this.scissor.left),Ms=Math.floor(_a.y*this.scissor.bottom),Es=Math.floor(_a.x*this.scissor.width),Cs=Math.floor(_a.y*this.scissor.height);this.renderer.setViewport(Ss,Ms,Es,Cs),this.renderer.setScissor(Ss,Ms,Es,Cs),this.renderer.setScissorTest(!0)}ya(),_s&&(this.renderer.setViewport(0,0,_a.x,_a.y),this.renderer.setScissor(0,0,_a.x,_a.y),this.renderer.setScissorTest(!1))}},ga.prototype.syncState=function(ya,_a,_s){_s===void 0&&(_s=!1);var Ss=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var Ms={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,Ms,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var Es=this.currentMode;if(!(Es===ga.Mode.Floorplan||Es===ga.Mode.Topview||Es===ga.Mode.Model)||!this.modelPending)for(var Cs=void 0;Cs=this.readyCallbacks.shift();)Cs()}if(this.controller instanceof Jo.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var Ts={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,Ts,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return Ts={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,Ts,!1),!0;if(this.controller instanceof Jo.Topview){var Bs=1,Is=_s?this.state.fov:lr(this.camera.pose.fov,this.state.fov,Bs),Ps=_s?new r$1.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$1.Vector3(lr(this.camera.pose.offset.x,this.state.offset.x,.2),lr(this.camera.pose.offset.y,this.state.offset.y,.2),lr(this.camera.pose.offset.z,this.state.offset.z,.2));if($n(Is,this.camera.pose.fov)||er(Ps,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:Is},0).catch(Lt),this.controller.locationMotion.set({x:Ps.x,y:Ps.y,z:Ps.z},0).catch(Lt),!0}else{Bs=1;var Rs=Math.PI/45,ks=(Is=_s?this.state.fov:lr(this.camera.pose.fov,this.state.fov,Bs),_s?{longitude:this.state.longitude,latitude:this.state.latitude}:function(Ls,Ds,Fs){if(Ls.longitude===Ds.longitude&&Ls.latitude===Ds.latitude)return{longitude:Ds.longitude,latitude:Ds.latitude};var Ns=sr(Ls.longitude),Vs=Ls.latitude,Gs=sr(Ds.longitude),Us=Ds.latitude;Gs-Ns>ar?Ns+=ur:Ns-Gs>ar&&(Ns-=ur);var zs=Fs/Math.sqrt(Math.pow(Gs-Ns,2)+Math.pow(Us-Vs,2));return zs>=1?{longitude:Ds.longitude,latitude:Ds.latitude}:{longitude:Ns+(Gs-Ns)*zs,latitude:Vs+(Us-Vs)*zs}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},Rs)),$s=ks.longitude,Os=ks.latitude;if($n($s,this.camera.pose.longitude,2*Math.PI)||$n(Os,this.camera.pose.latitude)||$n(Is,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:$s,latitude:Os,fov:Is},0).catch(Lt),!0}return this.stateSynced=!0,Ss===!1&&this.emit("stateSynced",this.state),!1},ga.prototype.ready=function(){var ya=this;return new Promise(function(_a){return ya.readyCallbacks.push(_a)})},ga.prototype.requestFullscreen=function(){var ya;if(hr()){var _a=(ya=this.getElement())===null||ya===void 0?void 0:ya.parentNode;_a&&"requestFullscreen"in _a&&typeof document!="undefined"&&document.fullscreenElement===null&&_a.requestFullscreen()}},ga.prototype.exitFullscreen=function(){typeof document!="undefined"&&document.fullscreenElement&&"exitFullscreen"in document&&document.exitFullscreen()},ga.prototype.throwError=function(ya){this.hasListener("error")?this.emit("error",ya):console.error(ya)},ga.prototype.loadModel=function(ya,_a,_s,Ss){var Ms=this,Es=ya.file;this.emit("modelWillLoad",ya);var Cs=new Gi({allowHosts:_a,networkSubscribe:this.networkSubscribe});Cs.once("bvhLoaded",function(){var Ts,Bs;Ms.destroyed||Es===((Bs=(Ts=Ms.work)===null||Ts===void 0?void 0:Ts.model)===null||Bs===void 0?void 0:Bs.file)&&Ms.emit("modelBvhLoaded",Cs)}),Cs.once("materialLoaded",function(){var Ts,Bs;Ms.destroyed||Es===((Bs=(Ts=Ms.work)===null||Ts===void 0?void 0:Ts.model)===null||Bs===void 0?void 0:Bs.file)&&Ms.emit("modelMaterialLoaded",Cs)}),Cs.once("geometryLoaded",function(){var Ts,Bs,Is,Ps;if(!Ms.destroyed&&Es===((Bs=(Ts=Ms.work)===null||Ts===void 0?void 0:Ts.model)===null||Bs===void 0?void 0:Bs.file)){Cs.bounding.max.y-Cs.bounding.min.y<1.5&&(Cs.bounding.max.y=Cs.bounding.min.y+10);var Rs,ks=Ms.model;ks&&(ks.show(),Rs=ks.getMaterial()||{},Ms.scene.remove(ks),ks.dispose(),Cs.setTransparent(ks.getTransparent())),Rs&&Cs.setMaterial(Rs),ya.bvh&&Cs.buildBVH(),Ms.model=Cs,Ms.scene.add(Cs),(Is=Ms.controller)===null||Is===void 0||Is.updateModel(Cs),(Ps=Ms.renderer)===null||Ps===void 0||Ps.compile(Ms.scene,Ms.camera),Ms.needsRender=!0,Ms.modelPending=!1,Ms.emit("modelGeometryLoaded",Cs)}}),Cs.once("loaded",function(){var Ts,Bs;Ms.destroyed||Es===((Bs=(Ts=Ms.work)===null||Ts===void 0?void 0:Ts.model)===null||Bs===void 0?void 0:Bs.file)&&(_s(),Ms.emit("modelLoaded",Cs))}),Cs.on("shownFloorChange",function(Ts,Bs){var Is,Ps;Ms.destroyed||Es===((Ps=(Is=Ms.work)===null||Is===void 0?void 0:Is.model)===null||Ps===void 0?void 0:Ps.file)&&Ms.emit("modelShownFloorChange",Ts,Bs)}),Cs.on("error",function(Ts){var Bs,Is,Ps,Rs;if(!Ms.destroyed&&Es===((Is=(Bs=Ms.work)===null||Bs===void 0?void 0:Bs.model)===null||Is===void 0?void 0:Is.file)){Cs.bounding.makeEmpty();for(var ks=0,$s=Ms.work.observers;ks<$s.length;ks++){var Os=$s[ks];Cs.bounding.expandByPoint(Os.standingPosition),Cs.bounding.expandByPoint(new r$1.Vector3().fromArray([Os.position.x,2*Os.position.y-Os.standingPosition.y,Os.position.z]))}var Ls=rr(Cs.bounding,new r$1.Vector3(1,0,1));Ls.visible=!0,Ls.name="model_empty",Cs.add(Ls);var Ds,Fs=Ms.model;Fs&&(Fs.show(),Ds=Fs.getMaterial()||{},Ms.scene.remove(Fs),Fs.dispose(),Cs.setTransparent(Fs.getTransparent())),Ds&&Cs.setMaterial(Ds),Ms.model=Cs,Ms.scene.add(Cs),(Ps=Ms.controller)===null||Ps===void 0||Ps.updateModel(Cs),(Rs=Ms.renderer)===null||Rs===void 0||Rs.compile(Ms.scene,Ms.camera),Ms.emit("modelLoadError",Ts,Cs),Ms.throwError(Ts),Ms.modelPending=!1,_s()}}),this.modelPending=!0,Cs.load(ya,this.textureOptions).catch(Lt)},ga.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},ga.prototype.saveControllerPose=function(ya){ya===void 0&&(ya=this.controller),ya&&$o(ya)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},ga.prototype.applyController=function(ya,_a){var _s=this;if(!this.renderer)throw new Error("renderer is not initialized.");var Ss=Jo[ya];ya===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(ya===ga.Mode.Floorplan||ya===ga.Mode.Topview||ya===ga.Mode.Model),this.currentMode=ya;for(var Ms=new Ss(_a),Es=function(Rs){Ms.on(Rs,function(){for(var ks=[],$s=0;$s<arguments.length;$s++)ks[$s]=arguments[$s];var Os=_s.emit.apply(_s,e$1.__spreadArray([Rs],ks,!1));if(Os)return!1})},Cs=0,Ts=ts;Cs<Ts.length;Cs++)Es(Ts[Cs]);var Bs=Jo[ya].initAnimationEndPose(_a),Is=_a.initial[3],Ps={panoIndex:_a.initial[0],mode:ya,longitude:Bs.longitude,latitude:Bs.latitude,fov:Bs.fov,offset:Bs.offset};return dr(this.state,Ps)||(cr(this.state,Ps),this.emit("stateChange",this.state,Is)),this.emit("currentStateChange",this.getCurrentState(),Is),Ms.on("cameraUpdate",function(Rs,ks){var $s;if(_s.controller){var Os=e$1.__assign(e$1.__assign({},_s.controller.getTargetPose()),{panoIndex:_s.panoIndex,mode:ya});ks&&_s.syncingState===!1&&_s.state.mode===Os.mode&&!dr(_s.state,Os)&&(cr(_s.state,Os),_s.emit("stateChange",_s.state,ks),($s=_s.analysis)===null||$s===void 0||$s.state(_s.work,_s.state))}_s.emit("currentStateChange",_s.getCurrentState(),ks)}),Ms.on("initAnimationWillStart",function(Rs,ks,$s){var Os,Ls=e$1.__assign(e$1.__assign({},ks),{panoIndex:Rs,mode:ya});$s&&_s.state.mode===Ls.mode&&!dr(_s.state,Ls)&&(cr(_s.state,Ls),_s.emit("stateChange",_s.state,$s),(Os=_s.analysis)===null||Os===void 0||Os.state(_s.work,_s.state))}),Ms.on("initAnimationEnded",function(Rs,ks,$s){var Os,Ls=e$1.__assign(e$1.__assign({},ks),{panoIndex:Rs,mode:ya});$s&&_s.state.mode===Ls.mode&&!dr(_s.state,Ls)&&(cr(_s.state,Ls),_s.emit("stateChange",_s.state,$s),(Os=_s.analysis)===null||Os===void 0||Os.state(_s.work,_s.state))}),Ms.on("panoWillArrive",function(Rs,ks,$s){var Os;_s.panoIndex=Rs;var Ls=e$1.__assign(e$1.__assign({},ks),{panoIndex:Rs,mode:ya});$s&&_s.state.mode===Ls.mode&&!dr(_s.state,Ls)&&(cr(_s.state,Ls),_s.emit("stateChange",_s.state,$s),(Os=_s.analysis)===null||Os===void 0||Os.state(_s.work,_s.state))}),Ms.on("panoArrived",function(Rs,ks,$s){var Os,Ls=e$1.__assign(e$1.__assign({},ks),{panoIndex:Rs,mode:ya});$s&&_s.state.mode===Ls.mode&&!dr(_s.state,Ls)&&(cr(_s.state,Ls),_s.emit("stateChange",_s.state,$s),(Os=_s.analysis)===null||Os===void 0||Os.state(_s.work,_s.state))}),Ms.on("moveToPano",function(Rs,ks){_s.emit("currentStateChange",_s.getCurrentState(),ks)}),Ms.on("wantsMoveToPano",function(Rs,ks,$s){var Os=_s.emit("wantsMoveToPano",Rs,ks,$s);Os||(Os=_s.emit("wantsToMoveToPano",Rs,ks,$s)),Os||_s.moveToPano(Rs,ks,$s)}),Ms.on("vrWantsToExit",function(){_s.currentMode===ga.Mode.VRPanorama&&(_s.exitFullscreen(),_s.changeMode(ga.Mode.Panorama))}),Ms.on("error",function(Rs){return _s.throwError(Rs)}),Ms},ga.prototype.removeEventListeners=function(){},ga.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},ga.Line=null,ga}(Ot);five.AnimationFrameLoop=se,five.BVH=Ve,five.BVHIntersect=ke,five.BVHNode=De,five.BVHVector3=Re,five.Camera=Qe,Five=five.Five=xs,five.InternalWebGLRenderer=xe,five.IntersectMesh=Xn,five.LegacyPanoCircleMesh=Tn,five.Model=Gi,five.NetworkSubscribe=te,five.PBMContainer=de,five.PBMGroup=pe,five.PBMMaterial=be,five.PBMMesh=ce,five.PROXY_CONTROLLER_EVENT_NAMES=ts,five.PanoCircleMesh=jn,five.Scene=Ee,five.Subscribe=Ot,five.Work=sn,five.defaultImageURLTransform=he,five.getViewportScale=is,parseWork=five.parseWork=hn;var react={},useFiveState,useFiveSceneEffect,unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e=tslib.exports,t=react$1.exports,n$1=require$$2$1,r=five;function o(ca){if(ca&&ca.__esModule)return ca;var ga=Object.create(null);return ca&&Object.keys(ca).forEach(function(ya){if(ya!=="default"){var _a=Object.getOwnPropertyDescriptor(ca,ya);Object.defineProperty(ga,ya,_a.get?_a:{enumerable:!0,get:function(){return ca[ya]}})}}),ga.default=ca,Object.freeze(ga)}var u=o(t),i=o(n$1),a=[],f$1=[],c=u.createContext(null);function s(){var ca=u.useContext(c);if(!ca)throw new Error("FiveProvider never found.");return ca.five}function l$1(){var ca=u.useContext(c);if(!ca)throw new Error("FiveProvider never found.");return ca.loadWork}var d={display:"inline-block",overflow:"hidden"};function v(ca,ga){var ya=s(),_a=[ya];ga!==void 0&&(_a=_a.concat(ga)),u.useLayoutEffect(function(){return ca(ya.scene)},_a)}var p$1=v;function h(ca){return e.__assign({},ca.state)}function m$1(ca){var ga=ca.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(ca.camera.position,ga)}function y(ca){return ca.camera.getWorldDirection(new i.Vector3)}function g(ca){return ca.model.empty?"Empty":"Loaded"}function S(ca,ga){return ga.indexOf(ca)>=0}function b(ca,ga){for(var ya=0,_a=Object.keys(ga);ya<_a.length;ya++){var _s=_a[ya];ga[_s]!==void 0&&(ca[_s]=ga[_s])}}function C(ca,ga){if(S("loadWork",ga))return ca}function w(ca,ga){if(S("setState",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.setState.apply(ca,ya)}}function k$1(ca,ga){if(S("on",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.on.apply(ca,ya)}}function x(ca,ga){if(S("on",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.once.apply(ca,ya)}}function E(ca,ga){if(S("off",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.off.apply(ca,ya)}}function L(ca,ga){if(S("intersectRaycaster",ga))return function(){for(var ya,_a=[],_s=0;_s<arguments.length;_s++)_a[_s]=arguments[_s];return(ya=ca.model).intersectRaycaster.apply(ya,_a)}}function F(ca,ga){if(S("project2d",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.project2d.apply(ca,ya)}}function _(ca,ga){if(S("updateCamera",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.updateCamera.apply(ca,ya)}}function P(ca,ga){if(S("initBasisLoader",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.initBasisLoader.apply(ca,ya)}}function R(ca,ga){if(S("getPixels",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.getPixels.apply(ca,ya)}}function V(ca,ga){if(S("render",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.render.apply(ca,ya)}}function W(ca,ga){if(S("needsRender",ga))return function(){ca.needsRender=!0}}function M(ca,ga){if(S("preloadPano",ga))return function(){for(var ya=[],_a=0;_a<arguments.length;_a++)ya[_a]=arguments[_a];return ca.preloadPano.apply(ca,ya)}}function O(ca,ga){if(S("showFloor",ga))return function(ya){typeof ya=="number"?ca.model.show(ya):ca.model.show()}}function j(ca,ga){if(S("toggleHelperVisible",ga))return function(ya){ca.helperVisible=ya}}function A(ca,ga){for(var ya={},_a=ga.length,_s=-1;++_s<_a;){var Ss=ga[_s];Ss in ca&&(ya[Ss]=ca[Ss])}return ya}function N(ca,ga){for(var ya=0;ya<ca.length;ya++)for(var _a=0;_a<ga.length;_a++)if(ca[ya]===ga[_a])return!0;return!1}var U=function(){function ca(ga,ya){this.values=ga,this.listeners=[],this.onValuesChange=ya}return ca.prototype.on=function(ga,ya){var _a=this,_s=[ga,ya];return this.listeners.push(_s),function(){var Ss=_a.listeners.indexOf(_s);Ss>=0&&_a.listeners.splice(Ss,1)}},ca.prototype.getValues=function(ga){return A(this.values,ga)},ca.prototype.setValues=function(ga,ya){var _a,_s,Ss=[];for(var Ms in ya)ga.indexOf(Ms)>=0&&(_a=ya[Ms],_s=this.values[Ms],!(typeof _a=="number"&&typeof _s=="number"&&isNaN(_a)&&isNaN(_s)||_a===_s))&&Ss.push(Ms);if(Ss.length!==0){for(var Es=e.__assign({},this.values),Cs=0,Ts=Ss;Cs<Ts.length;Cs++){var Bs=Ts[Cs];this.values[Bs]=ya[Bs]}this.onValuesChange&&this.onValuesChange(this.values,Es);for(var Is=0,Ps=this.listeners;Is<Ps.length;Is++){var Rs=Ps[Is],ks=Rs[0],$s=Rs[1];if(N(ks,Ss)){var Os=A(Es,ks);$s(A(this.values,ks),Os)}}}},ca}();FiveCanvas=react.FiveCanvas=function(ca){var ga=ca.width,ya=ca.height,_a=s(),_s=u.createRef(),Ss=e.__assign({width:ga,height:ya},d);return u.useLayoutEffect(function(){if(_s.current&&_a.renderer){if(_a.renderer.domElement.parentNode!==null&&_a.renderer.domElement.parentNode!==_s.current)throw new Error("There are more than 2 fiveCanvas in this context.");_a.renderer.domElement.parentNode!==_s.current&&_s.current.appendChild(_a.renderer.domElement),_a.camera.aspect=ga/ya,_a.camera.updateProjectionMatrix(),_a.renderer.setSize(ga,ya),_a.needsRender=!0}},[ga,ya,_s.current]),u.createElement("div",{ref:_s,style:Ss})},react.INJECTION_PROPNAME="$five",react.Store=U,react.createFiveFeature=function(){for(var ca=[],ga=0;ga<arguments.length;ga++)ca[ga]=arguments[ga];return ca},createFiveProvider=react.createFiveProvider=function(ca){return ca===void 0&&(ca={}),function(ga){function ya(_a){var _s,Ss=this;Ss=ga.call(this,_a)||this;var Ms=function(Es){var Cs=Es===void 0?{}:Es,Ts=Cs.backgroundColor,Bs=Ts===void 0?1579548:Ts,Is=Cs.backgroundAlpha,Ps=Is===void 0?1:Is,Rs=Cs.pixelRatio,ks=Rs===void 0?1:Rs,$s=Cs.webgl2,Os=$s!==void 0&&$s;if(typeof window!="undefined"){var Ls=null;if(!(Ls=Os?a.shift():f$1.shift())){if(Os){var Ds=document.createElement("canvas"),Fs=Ds.getContext("webgl2");if(Fs===null)throw new Error("error occurred when getting webgl2 canvas context");Ls=new i.WebGLRenderer({antialias:!1,alpha:!0,canvas:Ds,context:Fs})}else Ls=new i.WebGLRenderer({antialias:!1,alpha:!0});Ls.outputEncoding=i.sRGBEncoding}return Ls.setPixelRatio(ks),Ls.setClearColor(Bs,Ps),Ls.autoClear=!0,Ls}}({pixelRatio:r.getViewportScale()===1?window.devicePixelRatio:1,backgroundAlpha:ca.backgroundAlpha,backgroundColor:ca.backgroundColor,webgl2:ca==null?void 0:ca.webgl2});return Ss.five=new r.Five(e.__assign({renderer:Ms},ca)),(_a.work||_a.initialWork)&&Ss.five.load(_a.work||_a.initialWork,_a.initialState,void 0,(_s=_a.initialUserAction)===null||_s===void 0||_s),Ss.five.on("load",function(){var Es;Ss.props.onWorkChange&&Ss.props.onWorkChange((Es=Ss.five)===null||Es===void 0?void 0:Es.work)}),Ss.five.on("stateChange",function(Es,Cs){Ss.props.onStateChange&&Ss.props.onStateChange(Es,Cs)}),Ss.five.on("currentStateChange",function(Es,Cs){Ss.props.onCurrentStateChange&&Ss.props.onCurrentStateChange(Es,Cs)}),Ss.five.on("error",function(Es){Ss.props.onError?Ss.props.onError(Es):console.warn(Es.message)}),Ss}return e.__extends(ya,ga),ya.prototype.loadWork=function(_a,_s,Ss,Ms){if(Ms===void 0&&(Ms=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(_a,_s,Ss,Ms)},ya.prototype.shouldComponentUpdate=function(_a){var _s,Ss;return _a.work&&_a.work!==((_s=this.five)===null||_s===void 0?void 0:_s.work)&&((Ss=this.five)===null||Ss===void 0||Ss.load(_a.work,_a.initialState)),!0},ya.prototype.componentWillUnmount=function(){var _a;this.five&&(this.five.dispose(),(_a=this.five.renderer)&&(_a.capabilities.isWebGL2?f$1.indexOf(_a)===-1&&f$1.push(_a):a.indexOf(_a)===-1&&a.push(_a)),delete this.five)},ya.prototype.render=function(){var _a=this;return u.createElement(c.Provider,{value:{five:this.five,loadWork:function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];return _a.loadWork.apply(_a,_s)}}},this.props.children)},ya}(u.Component)},react.createStore=function(ca){var ga=u.createContext(null);return{useStore:function(ya){var _a=u.useContext(ga);if(_a===null)throw new Error("StoreProvider never found.");var _s=u.useRef(!0),Ss=u.useState(_a.getValues(ya)),Ms=Ss[0],Es=Ss[1],Cs=e.__spreadArray([_a],ya,!0);return u.useLayoutEffect(function(){return _s.current?_s.current=!1:Es(_a.getValues(ya)),_a.on(ya,function(Ts){return Es(Ts)})},Cs),[Ms,u.useCallback(function(Ts){return _a.setValues(ya,Ts)},Cs)]},useStoreSetter:function(ya){var _a=u.useContext(ga);if(_a===null)throw new Error("StoreProvider never found.");return u.useCallback(function(_s){return _a.setValues(ya,_s)},e.__spreadArray([_a],ya,!0))},watchStore:function(ya,_a,_s){var Ss=u.useContext(ga);if(Ss===null)throw new Error("StoreProvider never found.");var Ms=e.__spreadArray([Ss],ya,!0);_s!==void 0&&(Ms=Ms.concat(_s)),u.useLayoutEffect(function(){return Ss.on(ya,_a)},Ms)},useStoreAction:function(ya){var _a=u.useContext(ga);if(_a===null)throw new Error("StoreProvider never found.");return u.useCallback(function(){for(var _s=[],Ss=0;Ss<arguments.length;Ss++)_s[Ss]=arguments[Ss];var Ms=ca[ya],Es=Ms[0],Cs=Ms.slice(1),Ts=function(){return _a.getValues(Cs)},Bs=function(Is){return _a.setValues(Cs,Is)};return Es.apply(void 0,e.__spreadArray([Ts,Bs],_s,!1))},[])},StoreProvider:function(ya){function _a(_s){var Ss=ya.call(this,_s)||this;return Ss.store=new U(_s.initialValue,function(){for(var Ms,Es=[],Cs=0;Cs<arguments.length;Cs++)Es[Cs]=arguments[Cs];Ss.props.onValuesChange&&(Ms=Ss.props).onValuesChange.apply(Ms,Es)}),Ss}return e.__extends(_a,ya),_a.prototype.shouldComponentUpdate=function(_s){return _s.children!==this.props.children},_a.prototype.render=function(){return u.createElement(ga.Provider,{value:this.store},this.props.children)},_a}(u.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s()},react.useFiveAction=function(){var ca=s();return{updateCamera:u.useCallback(function(ga,ya){return ca.updateCamera(ga,ya)},[ca]),initBasisLoader:u.useCallback(function(ga){return ca.initBasisLoader(ga)},[ca]),getPixels:u.useCallback(function(ga,ya,_a,_s,Ss){return ca.getPixels(ga,ya,_a,_s,Ss)},[ca]),render:u.useCallback(function(ga){return ca.render(ga)},[ca]),needsRender:u.useCallback(function(){return ca.needsRender=!0},[ca]),preloadPano:u.useCallback(function(ga,ya){return ca.preloadPano(ga,ya)},[ca])}},react.useFiveCameraDirection=function(){var ca=s(),ga=u.useState(function(){return y(ca)}),ya=ga[0],_a=ga[1];return u.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return _a(y(ca))})},[ca]),ya},react.useFiveCameraRaycaster=function(){var ca=s(),ga=u.useState(function(){return m$1(ca)}),ya=ga[0],_a=ga[1];return u.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return _a(m$1(ca))})},[ca]),ya},react.useFiveCurrentObserver=function(){var ca=s(),ga=u.useState(function(){return ca.getCurrentState()}),ya=ga[0],_a=ga[1];return u.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return _a(ca.getCurrentState())})},[ca]),ca.work?ca.work.observers[ya.panoIndex]:null},react.useFiveCurrentState=function(){var ca=s(),ga=u.useState(function(){return ca.getCurrentState()}),ya=ga[0],_a=ga[1],_s=u.useCallback(function(Ss,Ms,Es){Ms===void 0&&(Ms=!1),Es===void 0&&(Es=!0);var Cs=typeof Ss=="function"?Ss(ca.getCurrentState()):Ss;ca.setState(Cs,Ms,Es)},[ca]);return u.useLayoutEffect(function(){return ca.on("currentStateChange",function(){return _a(ca.getCurrentState())})},[ca]),[ya,_s]},react.useFiveEventCallback=function(ca,ga,ya){var _a=s(),_s=[_a,ca];ya!==void 0&&(_s=_s.concat(ya)),u.useLayoutEffect(function(){return _a.on(ca,ga)},_s)},react.useFiveFloor=function(){var ca=s(),ga=u.useState(ca.model.shownFloor),ya=ga[0],_a=ga[1],_s=u.useState(ca.model.floorLength),Ss=_s[0],Ms=_s[1],Es=u.useCallback(function(Cs){typeof Cs=="number"?ca.model.show(Cs):ca.model.show()},[ca]);return u.useLayoutEffect(function(){var Cs=[];return Cs.push(ca.on("modelShownFloorChange",function(){return _a(ca.model.shownFloor)})),Cs.push(ca.on("modelLoaded",function(){return Ms(ca.model.floorLength)})),function(){for(var Ts;Ts=Cs.shift();)Ts()}},[ca]),[ya,Ss,Es]},react.useFiveHelper=function(){var ca=s(),ga=u.useState(ca.helperVisible),ya=ga[0],_a=ga[1],_s=u.useCallback(function(Ss){ca.helperVisible=Ss},[ca]);return u.useLayoutEffect(function(){return ca.on("helpersVisibleChange",function(Ss){return _a(Ss)})},[ca]),[ya,_s]},react.useFiveModelIntersectRaycaster=function(){var ca=s();return u.useCallback(function(ga){return ca.model.intersectRaycaster(ga)},[ca])},react.useFiveModelReadyState=function(){var ca=s(),ga=u.useState(function(){return g(ca)}),ya=ga[0],_a=ga[1];return u.useLayoutEffect(function(){return ca.on("modelLoaded",function(){return _a(g(ca))})},[ca]),ya},react.useFiveProject2d=function(){var ca=s(),ga=u.useState(function(){return Symbol()});ga[0];var ya=ga[1];return u.useLayoutEffect(function(){return ca.on("cameraUpdate",function(){return ya(Symbol())})},[ca]),u.useCallback(function(_a,_s){return ca.project2d(_a,_s)},[ca])},react.useFiveScene=p$1,useFiveSceneEffect=react.useFiveSceneEffect=v,useFiveState=react.useFiveState=function(){var ca=s(),ga=u.useState(function(){return h(ca)}),ya=ga[0],_a=ga[1],_s=u.useCallback(function(Ss,Ms,Es){Ms===void 0&&(Ms=!1),Es===void 0&&(Es=!0);var Cs=typeof Ss=="function"?Ss(ca.getCurrentState()):Ss;ca.setState(Cs,Ms,Es)},[ca]);return u.useLayoutEffect(function(){return ca.on("stateChange",function(){return _a(h(ca))})},[ca]),[ya,_s]},react.useFiveWork=function(){var ca=s(),ga=l$1(),ya=u.useState(function(){return ca.work}),_a=ya[0],_s=ya[1];return u.useLayoutEffect(function(){return ca.on("load",function(){return _s(ca.work)})},[ca]),[_a,ga]},react.withFive=function(ca){return function(ga){return u.forwardRef(function(ya,_a){var _s=s(),Ss=l$1(),Ms=function(gu,Su){return[S("unsafe__fiveInstance",Su)?gu:void 0]}(_s,ca)[0],Es=function(gu,Su){var wu=S("state",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return e.__assign({},gu.state)},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("stateChange",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Cs=Es[0],Ts=Es[1],Bs=function(gu,Su){var wu=S("currentState",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.getCurrentState()},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("currentStateChange",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Is=Bs[0],Ps=Bs[1],Rs=function(gu,Su){var wu=S("currentObserver",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.getCurrentState()},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("currentStateChange",function(){return Eu(Symbol())})},[gu]),[Tu?gu.work?gu.work.observers[Tu.panoIndex]:null:void 0,pu]}(_s,ca),ks=Rs[0],$s=Rs[1],Os=function(gu,Su){var wu=S("work",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.work},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("load",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Ls=Os[0],Ds=Os[1],Fs=function(gu,Su){var wu=S("model",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.model},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("modelLoaded",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Ns=Fs[0],Vs=Fs[1],Gs=function(gu,Su){return[S("scene",Su)?gu.scene:void 0]}(_s,ca)[0],Us=function(gu,Su){var wu=S("cameraDirection",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.camera.getWorldDirection(new i.Vector3)},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("cameraUpdate",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),zs=Us[0],Hs=Us[1],Qs=function(gu,Su){var wu=S("cameraRaycaster",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu){var zu=gu.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(gu.camera.position,zu)}},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("cameraUpdate",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),js=Qs[0],Zs=Qs[1],Ks=function(gu,Su){var wu=S("modelReadyState",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.model.empty?"Empty":"Loaded"},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("modelLoaded",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Ys=Ks[0],qs=Ks[1],eu=function(gu,Su){var wu=S("shownFloor",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.model.shownFloor},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("modelShownFloorChange",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),Js=eu[0],Xs=eu[1],ru=function(gu,Su){var wu=S("totalFloorLength",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.model.hasFloors()},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("modelLoaded",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),su=ru[0],lu=ru[1],cu=function(gu,Su){var wu=S("helperVisible",Su),vu=u.useState(Symbol()),pu=vu[0],Eu=vu[1],Tu=u.useMemo(function(){if(wu)return gu.helperVisible},[gu,pu]);return u.useLayoutEffect(function(){if(wu)return gu.on("helpersVisibleChange",function(){return Eu(Symbol())})},[gu]),[Tu,pu]}(_s,ca),xu=cu[0],bu=cu[1],yu=u.useMemo(function(){var gu={};return b(gu,{setState:w(_s,ca),loadWork:C(Ss,ca),on:k$1(_s,ca),once:x(_s,ca),off:E(_s,ca),intersectRaycaster:L(_s,ca),project2d:F(_s,ca),updateCamera:_(_s,ca),initBasisLoader:P(_s,ca),getPixels:R(_s,ca),render:V(_s,ca),needsRender:W(_s,ca),preloadPano:M(_s,ca),showFloor:O(_s,ca),toggleHelperVisible:j(_s,ca)}),gu},[_s,Ss]),fu=u.useMemo(function(){var gu=e.__assign({},yu);return b(gu,{unsafe__fiveInstance:Ms,state:Cs,currentState:Is,currentObserver:ks,work:Ls,model:Ns,scene:Gs,cameraDirection:zs,cameraRaycaster:js,modelReadyState:Ys,shownFloor:Js,totalFloorLength:su,helperVisible:xu}),gu},[_s,yu,Ts,Ps,$s,Ds,Vs,Hs,Zs,qs,Xs,lu,bu]);return u.createElement(ga,e.__assign({ref:_a,$five:fu},ya))})}};const _signature="df1B9VfGiJZdworoUFPi+uCmR9vLjPN/qlgHG2Ub1j1rgO5qzDuJh9NtJompnJiR9ZB1gT7hxnK5QhrKx1FgvMPSE1E6+qYVnRVK2Ay7lUBNH91hm2Jr9DvZlQdDeBdYrg7EV9yvGiEuDrkx/a0MRwKdmeN+M/KO9Ow+w8thbKk=",allow_hosts=["*"],base_url="https://vrlab-public.ljcdn.com/",certificate=`-----BEGIN CERTIFICATE-----
MIIEMzCCAhsCCQDYAS/7ATZRmTANBgkqhkiG9w0BAQsFADCBkzELMAkGA1UEBhMC
Q04xEDAOBgNVBAgMB0JlaWppbmcxEDAOBgNVBAcMB0JlaWppbmcxFDASBgNVBAoM
C2xpYW5qaWEuY29tMRAwDgYDVQQLDAdSZWFsc2VlMREwDwYDVQQDDAhIYXJkd2Fy
ZTElMCMGCSqGSIb3DQEJARYWbml1aGFpcWluZ0BsaWFuamlhLmNvbTAeFw0yMTA5
MTAwNTIwMDBaFw0zMTA5MDgwNTIwMDBaMIGmMQswCQYDVQQGEwJDTjEQMA4GA1UE
CAwHQmVpSmluZzEQMA4GA1UEBwwHQmVpSmluZzEQMA4GA1UECgwHUmVhbHNlZTEZ
MBcGA1UECwwQUmVhbHNlZUFwcEdldHdheTEgMB4GA1UEAwwXYXBwLWdhdGV3YXku
cmVhbHNlZS5jb20xJDAiBgkqhkiG9w0BCQEWFWRldmVsb3BlckByZWFsc2VlLmNv
bTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAuv/y3Ezsy/wh3LCA8vomPbgI
SO9iO5kyR+oAetklD+epMU6J/ZbvTDEomZxuS5iyyKGBupzAh2ZFLIy7tsE71Vx1
IIvT7Kdyq66lMU4YzdrpKUcxv7oOQnO8DA1orKluNa4jkyXBywHKs/Q+20LVc+RD
gKXqFGJUdo8mAxEScs0CAwEAATANBgkqhkiG9w0BAQsFAAOCAgEAkMxsU4VLPd4J
0rElBNBIyqPtvnlTs6VkhIK0l4oM58wtDKc1uG9UPSX5j29NguZM6LOe0jCsU2Vg
EpUseMWQjx4o2yBg7MokQyjWc1zu6PppKhQ+RqHQy/biJ2zsIMpX3oMASXffvnW5
n4Bjyo1JdDJiLm1fLvLlVVxQoraJD+rtpqWDEYixGVREUo5OIL5Y5dVjkHG2r9RQ
Quu3yEiyr9gAW8yhz3YR6/sJ6boyGK8NC0v8Jih7NnCdT+9ML+3jn3P5F3TeXdSf
VeYIm5oWAOTe3AjjKP8ARMb2RYACjg80/AcowD/dvRRjbwQmyucUNug2pXJynXpD
Nfx1IBmUmzSAT1Z5yNuY/f3VRBJvmIQ6Jpmef+g0/wUJpyS4SObguItyYlFPLqRH
K1oKqNX/uV0GWWEQl6Lml986TzlHxc4ljtHBhjzlKYIYYZLWWipk4JiB8hxJcTK+
crgvclEQSxFlmAyoqxYFClrOOsPqZJdBhDTvoUWnnWuJLQt7DLHpyInp+S75Gg3o
0zgHpt9m26B3YbjQGYMQlYmhl2VLQa+Ey0W8UZQXLcTvoRT4p+8crqr6cNNsxCyZ
m08vBbEMIMvhBeLQvpM75oaMBmelegipFl2eelxVIHdGJWoyJSZQUdXN0uSidhZp
I7AIgzhqK1Ku/IXK0OSXJonn+/9X/VI=
-----END CERTIFICATE-----`,create_time=null,expire_at="1962863990236",initial={flag_position:[.6746045842729615,-1.2089233753318267,1.3300031501580651],fov:95,heading:0,latitude:0,longitude:3.1788114508806444,pano_index:4},model={file_url:"vrframework/release/ue4_decoration_plan/980RNawnbCVaLz0a/vrproc-ue4/render/model.at3d",material_base_url:"https://vrlab-public.ljcdn.com/",material_textures:["release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_0.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_1.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_2.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_3.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_4.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_5.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_6.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_7.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_8.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_9.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_10.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_11.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_12.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_13.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_14.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_15.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_16.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_17.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_18.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_19.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_20.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_21.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_22.jpg","release/ue4/734d69eada062f470abf994c9fd58d72/at3d_results/texture_23.jpg"]},observers=[{accessible_nodes:[1,2,3,7,8],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819252,index:0,position:[-1.1471500396728516,1.2595172252827322,-2.9560000896453857],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-1.1471500396728516,.003843792376677868,-2.9560000896453857],visible_nodes:[1,2,3,7,8]},{accessible_nodes:[0,2],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819253,index:1,position:[-.4050529897212982,1.2622653235071337,-2.9069700241088867],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-.4050529897212982,.005209713846283881,-2.9069700241088867],visible_nodes:[0,2]},{accessible_nodes:[0,1],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819254,index:2,position:[.509223997592926,1.2607101265662348,-2.7160398960113525],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[.509223997592926,.008413218465164407,-2.7160398960113525],visible_nodes:[0,1]},{accessible_nodes:[0,4,5,6,7,8],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819255,index:3,position:[-1.1379599571228027,1.2596812237375414,-.38462498784065247],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-1.1379599571228027,.007186223806642245,-.38462498784065247],visible_nodes:[0,4,5,6,7,8]},{accessible_nodes:[3,5,7,8],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819256,index:4,position:[-.2030850052833557,1.26507052298123,-1.0641900300979614],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-.2030850052833557,.010003649377699597,-1.0641900300979614],visible_nodes:[3,5,7,8]},{accessible_nodes:[3,4,6,7,8],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819257,index:5,position:[-2.0148398876190186,1.2684817228787577,-.46604299545288086],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-2.0148398876190186,.017366112248266008,-.46604299545288086],visible_nodes:[3,4,6,7,8]},{accessible_nodes:[3,5],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819258,index:6,position:[-3.2475099563598633,1.2689763259463942,-.5061079859733582],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-3.2475099563598633,.020978365658474774,-.5061079859733582],visible_nodes:[3,5]},{accessible_nodes:[0,3,4,5,8,9,11],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819259,index:7,position:[-.3714909851551056,1.2617097262614405,.8949059844017029],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-.3714909851551056,.009678024320517009,.8949059844017029],visible_nodes:[0,3,4,5,8,9,11]},{accessible_nodes:[0,3,4,5,7],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819260,index:8,position:[-.30071499943733215,1.2597065259092486,2.312999963760376],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-.30071499943733215,.015915265006209545,2.312999963760376],visible_nodes:[0,3,4,5,7]},{accessible_nodes:[7,10,11],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819261,index:9,position:[-2.568079948425293,1.2574344229274428,1.0545799732208252],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-2.568079948425293,.01135612497064975,1.0545799732208252],visible_nodes:[7,10,11]},{accessible_nodes:[9,11],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819262,index:10,position:[-2.305609941482544,1.2655910242670214,2.2460100650787354],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-2.305609941482544,0,2.2460100650787354],visible_nodes:[9,11]},{accessible_nodes:[7,9,10],create_time:"2022-02-20T19:16:47+08:00",floor_index:0,id:79819263,index:11,position:[-3.5368499755859375,1.2585685242288744,1.1347500085830688],quaternion:{w:.7071067811865475,x:0,y:.7071067811865475,z:0},standing_position:[-3.5368499755859375,.002737360336769523,1.1347500085830688],visible_nodes:[7,9,10]}],panorama={count:12,list:[{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_f.jpg",index:0,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/0/0_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_f.jpg",index:1,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/1/1_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_f.jpg",index:2,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/2/2_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_f.jpg",index:3,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/3/3_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_f.jpg",index:4,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/4/4_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_f.jpg",index:5,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/5/5_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_f.jpg",index:6,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/6/6_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_f.jpg",index:7,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/7/7_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_f.jpg",index:8,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/8/8_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_f.jpg",index:9,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/9/9_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_f.jpg",index:10,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/10/10_u.jpg"},{back:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_b.jpg",down:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_d.jpg",front:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_f.jpg",index:11,left:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_l.jpg",right:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_r.jpg",tiles:[1,2],up:"release/ue4/e21b9d23b72abe48fbe5b5c1a009dff9/ue4_result/cube_2048/11/11_u.jpg"}]},picture_url="vrframework/release/ue4_decoration_plan/980RNawnbCVaLz0a/vrproc-ue4/render/picture.jpg";var work={_signature,allow_hosts,base_url,certificate,create_time,expire_at,initial,model,observers,panorama,picture_url},index$1="";const debounce$1=(ca,ga=1e3/60)=>{let ya=null;const _a=ca;return(...Ss)=>{ya&&clearTimeout(ya),ya=setTimeout(()=>{_a==null||_a(...Ss),ya&&clearTimeout(ya),ya=null},ga)}};var jsxRuntime$1={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react$1.exports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(ca,ga,ya){var _a,_s={},Ss=null,Ms=null;ya!==void 0&&(Ss=""+ya),ga.key!==void 0&&(Ss=""+ga.key),ga.ref!==void 0&&(Ms=ga.ref);for(_a in ga)m.call(ga,_a)&&!p.hasOwnProperty(_a)&&(_s[_a]=ga[_a]);if(ca&&ca.defaultProps)for(_a in ga=ca.defaultProps,ga)_s[_a]===void 0&&(_s[_a]=ga[_a]);return{$$typeof:k,type:ca,key:Ss,ref:Ms,props:_s,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime$1.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime$1.exports.jsx,jsxs=jsxRuntime$1.exports.jsxs,Fragment=jsxRuntime$1.exports.Fragment;var jsxRuntime=Object.freeze(Object.defineProperty({__proto__:null,jsx,jsxs,Fragment},Symbol.toStringTag,{value:"Module"}));function ResponsiveFiveCanvas(){const[ca,ga]=react$1.exports.useState({width:0,height:0}),ya=react$1.exports.useRef(null);return react$1.exports.useEffect(()=>{if(!ya.current)return;ga({width:ya.current.offsetWidth,height:ya.current.offsetHeight});const _a=debounce$1(({width:Ss,height:Ms})=>{ga({width:Ss,height:Ms})}),_s=new ResizeObserver(Ss=>{const Ms=Ss[0],Es=Ms.contentRect.width,Cs=Ms.contentRect.height;_a({width:Es,height:Cs})});return _s.observe(ya.current),()=>{ya.current&&_s.unobserve(ya.current),_s.disconnect()}},[]),jsx("div",{className:"ResponsiveFiveCanvas",ref:ya,style:{width:"100%",height:"100%",position:"absolute",left:0,right:0,zIndex:0,opacity:ca.width===0||ca.height===0?0:1},children:jsx(FiveCanvas,{width:ca.width,height:ca.height})})}function CubePos(){return useFiveSceneEffect(ca=>{[].forEach(ya=>{const _a=new BoxGeometry(.5,.5,.5),_s=new MeshBasicMaterial({color:16711680,wireframe:!0}),Ss=new Mesh(_a,_s);Ss.position.set(ya[0],ya[1],ya[2]),ca.add(Ss)})},[]),jsx(Fragment,{})}var GridOn={},interopRequireDefault={exports:{}};(function(ca){function ga(ya){return ya&&ya.__esModule?ya:{default:ya}}ca.exports=ga,ca.exports.__esModule=!0,ca.exports.default=ca.exports})(interopRequireDefault);var createSvgIcon$1={};const defaultGenerator=ca=>ca,createClassNameGenerator=()=>{let ca=defaultGenerator;return{configure(ga){ca=ga},generate(ga){return ca(ga)},reset(){ca=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();var ClassNameGenerator$1=ClassNameGenerator;function _extends(){return _extends=Object.assign||function(ca){for(var ga=1;ga<arguments.length;ga++){var ya=arguments[ga];for(var _a in ya)Object.prototype.hasOwnProperty.call(ya,_a)&&(ca[_a]=ya[_a])}return ca},_extends.apply(this,arguments)}function isPlainObject(ca){return ca!==null&&typeof ca=="object"&&ca.constructor===Object}function deepmerge(ca,ga,ya={clone:!0}){const _a=ya.clone?_extends({},ca):ca;return isPlainObject(ca)&&isPlainObject(ga)&&Object.keys(ga).forEach(_s=>{_s!=="__proto__"&&(isPlainObject(ga[_s])&&_s in ca&&isPlainObject(ca[_s])?_a[_s]=deepmerge(ca[_s],ga[_s],ya):_a[_s]=ga[_s])}),_a}function formatMuiErrorMessage(ca){let ga="https://mui.com/production-error/?code="+ca;for(let ya=1;ya<arguments.length;ya+=1)ga+="&args[]="+encodeURIComponent(arguments[ya]);return"Minified MUI error #"+ca+"; visit "+ga+" for the full message."}function capitalize(ca){if(typeof ca!="string")throw new Error(formatMuiErrorMessage(7));return ca.charAt(0).toUpperCase()+ca.slice(1)}function createChainedFunction(...ca){return ca.reduce((ga,ya)=>ya==null?ga:function(..._s){ga.apply(this,_s),ya.apply(this,_s)},()=>{})}function debounce(ca,ga=166){let ya;function _a(..._s){const Ss=()=>{ca.apply(this,_s)};clearTimeout(ya),ya=setTimeout(Ss,ga)}return _a.clear=()=>{clearTimeout(ya)},_a}function deprecatedPropType(ca,ga){return()=>null}function isMuiElement(ca,ga){return react$1.exports.isValidElement(ca)&&ga.indexOf(ca.type.muiName)!==-1}function ownerDocument(ca){return ca&&ca.ownerDocument||document}function ownerWindow(ca){return ownerDocument(ca).defaultView||window}function requirePropFactory(ca,ga){return()=>null}function setRef(ca,ga){typeof ca=="function"?ca(ga):ca&&(ca.current=ga)}const useEnhancedEffect=typeof window!="undefined"?react$1.exports.useLayoutEffect:react$1.exports.useEffect;var useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(ca){const[ga,ya]=react$1.exports.useState(ca),_a=ca||ga;return react$1.exports.useEffect(()=>{ga==null&&(globalId+=1,ya(`mui-${globalId}`))},[ga]),_a}const maybeReactUseId=React$1["useId"];function useId(ca){if(maybeReactUseId!==void 0){const ga=maybeReactUseId();return ca!=null?ca:ga}return useGlobalId(ca)}function unsupportedProp(ca,ga,ya,_a,_s){return null}function useControlled({controlled:ca,default:ga,name:ya,state:_a="value"}){const{current:_s}=react$1.exports.useRef(ca!==void 0),[Ss,Ms]=react$1.exports.useState(ga),Es=_s?ca:Ss,Cs=react$1.exports.useCallback(Ts=>{_s||Ms(Ts)},[]);return[Es,Cs]}function useEventCallback(ca){const ga=react$1.exports.useRef(ca);return useEnhancedEffect$1(()=>{ga.current=ca}),react$1.exports.useCallback((...ya)=>(0,ga.current)(...ya),[])}function useForkRef(ca,ga){return react$1.exports.useMemo(()=>ca==null&&ga==null?null:ya=>{setRef(ca,ya),setRef(ga,ya)},[ca,ga])}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(ca){const{type:ga,tagName:ya}=ca;return!!(ya==="INPUT"&&inputTypesWhitelist[ga]&&!ca.readOnly||ya==="TEXTAREA"&&!ca.readOnly||ca.isContentEditable)}function handleKeyDown(ca){ca.metaKey||ca.altKey||ca.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(ca){ca.addEventListener("keydown",handleKeyDown,!0),ca.addEventListener("mousedown",handlePointerDown,!0),ca.addEventListener("pointerdown",handlePointerDown,!0),ca.addEventListener("touchstart",handlePointerDown,!0),ca.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(ca){const{target:ga}=ca;try{return ga.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(ga)}function useIsFocusVisible(){const ca=react$1.exports.useCallback(_s=>{_s!=null&&prepare(_s.ownerDocument)},[]),ga=react$1.exports.useRef(!1);function ya(){return ga.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),ga.current=!1,!0):!1}function _a(_s){return isFocusVisible(_s)?(ga.current=!0,!0):!1}return{isFocusVisibleRef:ga,onFocus:_a,onBlur:ya,ref:ca}}function resolveProps(ca,ga){const ya=_extends({},ga);return Object.keys(ca).forEach(_a=>{ya[_a]===void 0&&(ya[_a]=ca[_a])}),ya}function _objectWithoutPropertiesLoose(ca,ga){if(ca==null)return{};var ya={},_a=Object.keys(ca),_s,Ss;for(Ss=0;Ss<_a.length;Ss++)_s=_a[Ss],!(ga.indexOf(_s)>=0)&&(ya[_s]=ca[_s]);return ya}function toVal(ca){var ga,ya,_a="";if(typeof ca=="string"||typeof ca=="number")_a+=ca;else if(typeof ca=="object")if(Array.isArray(ca))for(ga=0;ga<ca.length;ga++)ca[ga]&&(ya=toVal(ca[ga]))&&(_a&&(_a+=" "),_a+=ya);else for(ga in ca)ca[ga]&&(_a&&(_a+=" "),_a+=ga);return _a}function clsx(){for(var ca=0,ga,ya,_a="";ca<arguments.length;)(ga=arguments[ca++])&&(ya=toVal(ga))&&(_a&&(_a+=" "),_a+=ya);return _a}function composeClasses(ca,ga,ya){const _a={};return Object.keys(ca).forEach(_s=>{_a[_s]=ca[_s].reduce((Ss,Ms)=>(Ms&&(ya&&ya[Ms]&&Ss.push(ya[Ms]),Ss.push(ga(Ms))),Ss),[]).join(" ")}),_a}const globalStateClassesMapping={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function generateUtilityClass(ca,ga){return globalStateClassesMapping[ga]||`${ClassNameGenerator$1.generate(ca)}-${ga}`}function generateUtilityClasses(ca,ga){const ya={};return ga.forEach(_a=>{ya[_a]=generateUtilityClass(ca,_a)}),ya}function memoize$1(ca){var ga=Object.create(null);return function(ya){return ga[ya]===void 0&&(ga[ya]=ca(ya)),ga[ya]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(ca){return reactPropsRegex.test(ca)||ca.charCodeAt(0)===111&&ca.charCodeAt(1)===110&&ca.charCodeAt(2)<91});function sheetForTag(ca){if(ca.sheet)return ca.sheet;for(var ga=0;ga<document.styleSheets.length;ga++)if(document.styleSheets[ga].ownerNode===ca)return document.styleSheets[ga]}function createStyleElement(ca){var ga=document.createElement("style");return ga.setAttribute("data-emotion",ca.key),ca.nonce!==void 0&&ga.setAttribute("nonce",ca.nonce),ga.appendChild(document.createTextNode("")),ga.setAttribute("data-s",""),ga}var StyleSheet=function(){function ca(ya){var _a=this;this._insertTag=function(_s){var Ss;_a.tags.length===0?_a.insertionPoint?Ss=_a.insertionPoint.nextSibling:_a.prepend?Ss=_a.container.firstChild:Ss=_a.before:Ss=_a.tags[_a.tags.length-1].nextSibling,_a.container.insertBefore(_s,Ss),_a.tags.push(_s)},this.isSpeedy=ya.speedy===void 0?!0:ya.speedy,this.tags=[],this.ctr=0,this.nonce=ya.nonce,this.key=ya.key,this.container=ya.container,this.prepend=ya.prepend,this.insertionPoint=ya.insertionPoint,this.before=null}var ga=ca.prototype;return ga.hydrate=function(_a){_a.forEach(this._insertTag)},ga.insert=function(_a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var _s=this.tags[this.tags.length-1];if(this.isSpeedy){var Ss=sheetForTag(_s);try{Ss.insertRule(_a,Ss.cssRules.length)}catch{}}else _s.appendChild(document.createTextNode(_a));this.ctr++},ga.flush=function(){this.tags.forEach(function(_a){return _a.parentNode&&_a.parentNode.removeChild(_a)}),this.tags=[],this.ctr=0},ca}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(ca,ga){return(((ga<<2^charat(ca,0))<<2^charat(ca,1))<<2^charat(ca,2))<<2^charat(ca,3)}function trim(ca){return ca.trim()}function match(ca,ga){return(ca=ga.exec(ca))?ca[0]:ca}function replace(ca,ga,ya){return ca.replace(ga,ya)}function indexof(ca,ga){return ca.indexOf(ga)}function charat(ca,ga){return ca.charCodeAt(ga)|0}function substr(ca,ga,ya){return ca.slice(ga,ya)}function strlen(ca){return ca.length}function sizeof(ca){return ca.length}function append(ca,ga){return ga.push(ca),ca}function combine(ca,ga){return ca.map(ga).join("")}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(ca,ga,ya,_a,_s,Ss,Ms){return{value:ca,root:ga,parent:ya,type:_a,props:_s,children:Ss,line,column,length:Ms,return:""}}function copy(ca,ga){return assign(node("",null,null,"",null,null,0),ca,{length:-ca.length},ga)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(ca,ga){return substr(characters,ca,ga)}function token(ca){switch(ca){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(ca){return line=column=1,length=strlen(characters=ca),position$1=0,[]}function dealloc(ca){return characters="",ca}function delimit(ca){return trim(slice(position$1-1,delimiter(ca===91?ca+2:ca===40?ca+1:ca)))}function whitespace(ca){for(;(character=peek())&&character<33;)next();return token(ca)>2||token(character)>3?"":" "}function escaping(ca,ga){for(;--ga&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(ca,caret()+(ga<6&&peek()==32&&next()==32))}function delimiter(ca){for(;next();)switch(character){case ca:return position$1;case 34:case 39:ca!==34&&ca!==39&&delimiter(character);break;case 40:ca===41&&delimiter(ca);break;case 92:next();break}return position$1}function commenter(ca,ga){for(;next()&&ca+character!==47+10;)if(ca+character===42+42&&peek()===47)break;return"/*"+slice(ga,position$1-1)+"*"+from(ca===47?ca:next())}function identifier(ca){for(;!token(peek());)next();return slice(ca,position$1)}function compile(ca){return dealloc(parse("",null,null,null,[""],ca=alloc(ca),0,[0],ca))}function parse(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs){for(var Ts=0,Bs=0,Is=Ms,Ps=0,Rs=0,ks=0,$s=1,Os=1,Ls=1,Ds=0,Fs="",Ns=_s,Vs=Ss,Gs=_a,Us=Fs;Os;)switch(ks=Ds,Ds=next()){case 40:if(ks!=108&&Us.charCodeAt(Is-1)==58){indexof(Us+=replace(delimit(Ds),"&","&\f"),"&\f")!=-1&&(Ls=-1);break}case 34:case 39:case 91:Us+=delimit(Ds);break;case 9:case 10:case 13:case 32:Us+=whitespace(ks);break;case 92:Us+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),ga,ya),Cs);break;default:Us+="/"}break;case 123*$s:Es[Ts++]=strlen(Us)*Ls;case 125*$s:case 59:case 0:switch(Ds){case 0:case 125:Os=0;case 59+Bs:Rs>0&&strlen(Us)-Is&&append(Rs>32?declaration(Us+";",_a,ya,Is-1):declaration(replace(Us," ","")+";",_a,ya,Is-2),Cs);break;case 59:Us+=";";default:if(append(Gs=ruleset(Us,ga,ya,Ts,Bs,_s,Es,Fs,Ns=[],Vs=[],Is),Ss),Ds===123)if(Bs===0)parse(Us,ga,Gs,Gs,Ns,Ss,Is,Es,Vs);else switch(Ps){case 100:case 109:case 115:parse(ca,Gs,Gs,_a&&append(ruleset(ca,Gs,Gs,0,0,_s,Es,Fs,_s,Ns=[],Is),Vs),_s,Vs,Is,Es,_a?Ns:Vs);break;default:parse(Us,Gs,Gs,Gs,[""],Vs,0,Es,Vs)}}Ts=Bs=Rs=0,$s=Ls=1,Fs=Us="",Is=Ms;break;case 58:Is=1+strlen(Us),Rs=ks;default:if($s<1){if(Ds==123)--$s;else if(Ds==125&&$s++==0&&prev()==125)continue}switch(Us+=from(Ds),Ds*$s){case 38:Ls=Bs>0?1:(Us+="\f",-1);break;case 44:Es[Ts++]=(strlen(Us)-1)*Ls,Ls=1;break;case 64:peek()===45&&(Us+=delimit(next())),Ps=peek(),Bs=Is=strlen(Fs=Us+=identifier(caret())),Ds++;break;case 45:ks===45&&strlen(Us)==2&&($s=0)}}return Ss}function ruleset(ca,ga,ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs){for(var Is=_s-1,Ps=_s===0?Ss:[""],Rs=sizeof(Ps),ks=0,$s=0,Os=0;ks<_a;++ks)for(var Ls=0,Ds=substr(ca,Is+1,Is=abs($s=Ms[ks])),Fs=ca;Ls<Rs;++Ls)(Fs=trim($s>0?Ps[Ls]+" "+Ds:replace(Ds,/&\f/g,Ps[Ls])))&&(Cs[Os++]=Fs);return node(ca,ga,ya,_s===0?RULESET:Es,Cs,Ts,Bs)}function comment(ca,ga,ya){return node(ca,ga,ya,COMMENT,from(char()),substr(ca,2,-2),0)}function declaration(ca,ga,ya,_a){return node(ca,ga,ya,DECLARATION,substr(ca,0,_a),substr(ca,_a+1,-1),_a)}function prefix(ca,ga){switch(hash(ca,ga)){case 5103:return WEBKIT+"print-"+ca+ca;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+ca+ca;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+ca+MOZ+ca+MS+ca+ca;case 6828:case 4268:return WEBKIT+ca+MS+ca+ca;case 6165:return WEBKIT+ca+MS+"flex-"+ca+ca;case 5187:return WEBKIT+ca+replace(ca,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+ca;case 5443:return WEBKIT+ca+MS+"flex-item-"+replace(ca,/flex-|-self/,"")+ca;case 4675:return WEBKIT+ca+MS+"flex-line-pack"+replace(ca,/align-content|flex-|-self/,"")+ca;case 5548:return WEBKIT+ca+MS+replace(ca,"shrink","negative")+ca;case 5292:return WEBKIT+ca+MS+replace(ca,"basis","preferred-size")+ca;case 6060:return WEBKIT+"box-"+replace(ca,"-grow","")+WEBKIT+ca+MS+replace(ca,"grow","positive")+ca;case 4554:return WEBKIT+replace(ca,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+ca;case 6187:return replace(replace(replace(ca,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),ca,"")+ca;case 5495:case 3959:return replace(ca,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(ca,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+ca+ca;case 4095:case 3583:case 4068:case 2532:return replace(ca,/(.+)-inline(.+)/,WEBKIT+"$1$2")+ca;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(ca)-1-ga>6)switch(charat(ca,ga+1)){case 109:if(charat(ca,ga+4)!==45)break;case 102:return replace(ca,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(ca,ga+3)==108?"$3":"$2-$3"))+ca;case 115:return~indexof(ca,"stretch")?prefix(replace(ca,"stretch","fill-available"),ga)+ca:ca}break;case 4949:if(charat(ca,ga+1)!==115)break;case 6444:switch(charat(ca,strlen(ca)-3-(~indexof(ca,"!important")&&10))){case 107:return replace(ca,":",":"+WEBKIT)+ca;case 101:return replace(ca,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(ca,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+ca}break;case 5936:switch(charat(ca,ga+11)){case 114:return WEBKIT+ca+MS+replace(ca,/[svh]\w+-[tblr]{2}/,"tb")+ca;case 108:return WEBKIT+ca+MS+replace(ca,/[svh]\w+-[tblr]{2}/,"tb-rl")+ca;case 45:return WEBKIT+ca+MS+replace(ca,/[svh]\w+-[tblr]{2}/,"lr")+ca}return WEBKIT+ca+MS+ca+ca}return ca}function serialize(ca,ga){for(var ya="",_a=sizeof(ca),_s=0;_s<_a;_s++)ya+=ga(ca[_s],_s,ca,ga)||"";return ya}function stringify(ca,ga,ya,_a){switch(ca.type){case IMPORT:case DECLARATION:return ca.return=ca.return||ca.value;case COMMENT:return"";case KEYFRAMES:return ca.return=ca.value+"{"+serialize(ca.children,_a)+"}";case RULESET:ca.value=ca.props.join(",")}return strlen(ya=serialize(ca.children,_a))?ca.return=ca.value+"{"+ya+"}":""}function middleware(ca){var ga=sizeof(ca);return function(ya,_a,_s,Ss){for(var Ms="",Es=0;Es<ga;Es++)Ms+=ca[Es](ya,_a,_s,Ss)||"";return Ms}}function rulesheet(ca){return function(ga){ga.root||(ga=ga.return)&&ca(ga)}}function prefixer(ca,ga,ya,_a){if(ca.length>-1&&!ca.return)switch(ca.type){case DECLARATION:ca.return=prefix(ca.value,ca.length);break;case KEYFRAMES:return serialize([copy(ca,{value:replace(ca.value,"@","@"+WEBKIT)})],_a);case RULESET:if(ca.length)return combine(ca.props,function(_s){switch(match(_s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(ca,{props:[replace(_s,/:(read-\w+)/,":"+MOZ+"$1")]})],_a);case"::placeholder":return serialize([copy(ca,{props:[replace(_s,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(ca,{props:[replace(_s,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(ca,{props:[replace(_s,/:(plac\w+)/,MS+"input-$1")]})],_a)}return""})}}var identifierWithPointTracking=function ca(ga,ya,_a){for(var _s=0,Ss=0;_s=Ss,Ss=peek(),_s===38&&Ss===12&&(ya[_a]=1),!token(Ss);)next();return slice(ga,position$1)},toRules=function ca(ga,ya){var _a=-1,_s=44;do switch(token(_s)){case 0:_s===38&&peek()===12&&(ya[_a]=1),ga[_a]+=identifierWithPointTracking(position$1-1,ya,_a);break;case 2:ga[_a]+=delimit(_s);break;case 4:if(_s===44){ga[++_a]=peek()===58?"&\f":"",ya[_a]=ga[_a].length;break}default:ga[_a]+=from(_s)}while(_s=next());return ga},getRules=function ca(ga,ya){return dealloc(toRules(alloc(ga),ya))},fixedElements=new WeakMap,compat=function ca(ga){if(!(ga.type!=="rule"||!ga.parent||ga.length<1)){for(var ya=ga.value,_a=ga.parent,_s=ga.column===_a.column&&ga.line===_a.line;_a.type!=="rule";)if(_a=_a.parent,!_a)return;if(!(ga.props.length===1&&ya.charCodeAt(0)!==58&&!fixedElements.get(_a))&&!_s){fixedElements.set(ga,!0);for(var Ss=[],Ms=getRules(ya,Ss),Es=_a.props,Cs=0,Ts=0;Cs<Ms.length;Cs++)for(var Bs=0;Bs<Es.length;Bs++,Ts++)ga.props[Ts]=Ss[Cs]?Ms[Cs].replace(/&\f/g,Es[Bs]):Es[Bs]+" "+Ms[Cs]}}},removeLabel=function ca(ga){if(ga.type==="decl"){var ya=ga.value;ya.charCodeAt(0)===108&&ya.charCodeAt(2)===98&&(ga.return="",ga.value="")}},defaultStylisPlugins=[prefixer],createCache=function ca(ga){var ya=ga.key;if(ya==="css"){var _a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(_a,function($s){var Os=$s.getAttribute("data-emotion");Os.indexOf(" ")!==-1&&(document.head.appendChild($s),$s.setAttribute("data-s",""))})}var _s=ga.stylisPlugins||defaultStylisPlugins,Ss={},Ms,Es=[];Ms=ga.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+ya+' "]'),function($s){for(var Os=$s.getAttribute("data-emotion").split(" "),Ls=1;Ls<Os.length;Ls++)Ss[Os[Ls]]=!0;Es.push($s)});var Cs,Ts=[compat,removeLabel];{var Bs,Is=[stringify,rulesheet(function($s){Bs.insert($s)})],Ps=middleware(Ts.concat(_s,Is)),Rs=function(Os){return serialize(compile(Os),Ps)};Cs=function(Os,Ls,Ds,Fs){Bs=Ds,Rs(Os?Os+"{"+Ls.styles+"}":Ls.styles),Fs&&(ks.inserted[Ls.name]=!0)}}var ks={key:ya,sheet:new StyleSheet({key:ya,container:Ms,nonce:ga.nonce,speedy:ga.speedy,prepend:ga.prepend,insertionPoint:ga.insertionPoint}),nonce:ga.nonce,inserted:Ss,registered:{},insert:Cs};return ks.sheet.hydrate(Es),ks},isBrowser=!0;function getRegisteredStyles(ca,ga,ya){var _a="";return ya.split(" ").forEach(function(_s){ca[_s]!==void 0?ga.push(ca[_s]+";"):_a+=_s+" "}),_a}var registerStyles=function ca(ga,ya,_a){var _s=ga.key+"-"+ya.name;(_a===!1||isBrowser===!1)&&ga.registered[_s]===void 0&&(ga.registered[_s]=ya.styles)},insertStyles=function ca(ga,ya,_a){registerStyles(ga,ya,_a);var _s=ga.key+"-"+ya.name;if(ga.inserted[ya.name]===void 0){var Ss=ya;do ga.insert(ya===Ss?"."+_s:"",Ss,ga.sheet,!0),Ss=Ss.next;while(Ss!==void 0)}};function murmur2(ca){for(var ga=0,ya,_a=0,_s=ca.length;_s>=4;++_a,_s-=4)ya=ca.charCodeAt(_a)&255|(ca.charCodeAt(++_a)&255)<<8|(ca.charCodeAt(++_a)&255)<<16|(ca.charCodeAt(++_a)&255)<<24,ya=(ya&65535)*1540483477+((ya>>>16)*59797<<16),ya^=ya>>>24,ga=(ya&65535)*1540483477+((ya>>>16)*59797<<16)^(ga&65535)*1540483477+((ga>>>16)*59797<<16);switch(_s){case 3:ga^=(ca.charCodeAt(_a+2)&255)<<16;case 2:ga^=(ca.charCodeAt(_a+1)&255)<<8;case 1:ga^=ca.charCodeAt(_a)&255,ga=(ga&65535)*1540483477+((ga>>>16)*59797<<16)}return ga^=ga>>>13,ga=(ga&65535)*1540483477+((ga>>>16)*59797<<16),((ga^ga>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function ca(ga){return ga.charCodeAt(1)===45},isProcessableValue=function ca(ga){return ga!=null&&typeof ga!="boolean"},processStyleName=memoize$1(function(ca){return isCustomProperty(ca)?ca:ca.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function ca(ga,ya){switch(ga){case"animation":case"animationName":if(typeof ya=="string")return ya.replace(animationRegex,function(_a,_s,Ss){return cursor={name:_s,styles:Ss,next:cursor},_s})}return unitlessKeys[ga]!==1&&!isCustomProperty(ga)&&typeof ya=="number"&&ya!==0?ya+"px":ya};function handleInterpolation(ca,ga,ya){if(ya==null)return"";if(ya.__emotion_styles!==void 0)return ya;switch(typeof ya){case"boolean":return"";case"object":{if(ya.anim===1)return cursor={name:ya.name,styles:ya.styles,next:cursor},ya.name;if(ya.styles!==void 0){var _a=ya.next;if(_a!==void 0)for(;_a!==void 0;)cursor={name:_a.name,styles:_a.styles,next:cursor},_a=_a.next;var _s=ya.styles+";";return _s}return createStringFromObject(ca,ga,ya)}case"function":{if(ca!==void 0){var Ss=cursor,Ms=ya(ca);return cursor=Ss,handleInterpolation(ca,ga,Ms)}break}}if(ga==null)return ya;var Es=ga[ya];return Es!==void 0?Es:ya}function createStringFromObject(ca,ga,ya){var _a="";if(Array.isArray(ya))for(var _s=0;_s<ya.length;_s++)_a+=handleInterpolation(ca,ga,ya[_s])+";";else for(var Ss in ya){var Ms=ya[Ss];if(typeof Ms!="object")ga!=null&&ga[Ms]!==void 0?_a+=Ss+"{"+ga[Ms]+"}":isProcessableValue(Ms)&&(_a+=processStyleName(Ss)+":"+processStyleValue(Ss,Ms)+";");else if(Array.isArray(Ms)&&typeof Ms[0]=="string"&&(ga==null||ga[Ms[0]]===void 0))for(var Es=0;Es<Ms.length;Es++)isProcessableValue(Ms[Es])&&(_a+=processStyleName(Ss)+":"+processStyleValue(Ss,Ms[Es])+";");else{var Cs=handleInterpolation(ca,ga,Ms);switch(Ss){case"animation":case"animationName":{_a+=processStyleName(Ss)+":"+Cs+";";break}default:_a+=Ss+"{"+Cs+"}"}}}return _a}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function ca(ga,ya,_a){if(ga.length===1&&typeof ga[0]=="object"&&ga[0]!==null&&ga[0].styles!==void 0)return ga[0];var _s=!0,Ss="";cursor=void 0;var Ms=ga[0];Ms==null||Ms.raw===void 0?(_s=!1,Ss+=handleInterpolation(_a,ya,Ms)):Ss+=Ms[0];for(var Es=1;Es<ga.length;Es++)Ss+=handleInterpolation(_a,ya,ga[Es]),_s&&(Ss+=Ms[Es]);labelPattern.lastIndex=0;for(var Cs="",Ts;(Ts=labelPattern.exec(Ss))!==null;)Cs+="-"+Ts[1];var Bs=murmur2(Ss)+Cs;return{name:Bs,styles:Ss,next:cursor}},EmotionCacheContext=react$1.exports.createContext(typeof HTMLElement!="undefined"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function ca(ga){return react$1.exports.forwardRef(function(ya,_a){var _s=react$1.exports.useContext(EmotionCacheContext);return ga(ya,_s,_a)})},ThemeContext$2=react$1.exports.createContext({});React$1["useInsertionEffect"]&&React$1["useInsertionEffect"];var testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function ca(ga){return ga!=="theme"},getDefaultShouldForwardProp=function ca(ga){return typeof ga=="string"&&ga.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function ca(ga,ya,_a){var _s;if(ya){var Ss=ya.shouldForwardProp;_s=ga.__emotion_forwardProp&&Ss?function(Ms){return ga.__emotion_forwardProp(Ms)&&Ss(Ms)}:Ss}return typeof _s!="function"&&_a&&(_s=ga.__emotion_forwardProp),_s},useInsertionEffect=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:function ca(ga){ga()};function useInsertionEffectMaybe(ca){useInsertionEffect(ca)}var Insertion=function ca(ga){var ya=ga.cache,_a=ga.serialized,_s=ga.isStringTag;return registerStyles(ya,_a,_s),useInsertionEffectMaybe(function(){return insertStyles(ya,_a,_s)}),null},createStyled$1=function ca(ga,ya){var _a=ga.__emotion_real===ga,_s=_a&&ga.__emotion_base||ga,Ss,Ms;ya!==void 0&&(Ss=ya.label,Ms=ya.target);var Es=composeShouldForwardProps(ga,ya,_a),Cs=Es||getDefaultShouldForwardProp(_s),Ts=!Cs("as");return function(){var Bs=arguments,Is=_a&&ga.__emotion_styles!==void 0?ga.__emotion_styles.slice(0):[];if(Ss!==void 0&&Is.push("label:"+Ss+";"),Bs[0]==null||Bs[0].raw===void 0)Is.push.apply(Is,Bs);else{Is.push(Bs[0][0]);for(var Ps=Bs.length,Rs=1;Rs<Ps;Rs++)Is.push(Bs[Rs],Bs[0][Rs])}var ks=withEmotionCache(function($s,Os,Ls){var Ds=Ts&&$s.as||_s,Fs="",Ns=[],Vs=$s;if($s.theme==null){Vs={};for(var Gs in $s)Vs[Gs]=$s[Gs];Vs.theme=react$1.exports.useContext(ThemeContext$2)}typeof $s.className=="string"?Fs=getRegisteredStyles(Os.registered,Ns,$s.className):$s.className!=null&&(Fs=$s.className+" ");var Us=serializeStyles(Is.concat(Ns),Os.registered,Vs);Fs+=Os.key+"-"+Us.name,Ms!==void 0&&(Fs+=" "+Ms);var zs=Ts&&Es===void 0?getDefaultShouldForwardProp(Ds):Cs,Hs={};for(var Qs in $s)Ts&&Qs==="as"||zs(Qs)&&(Hs[Qs]=$s[Qs]);return Hs.className=Fs,Hs.ref=Ls,react$1.exports.createElement(react$1.exports.Fragment,null,react$1.exports.createElement(Insertion,{cache:Os,serialized:Us,isStringTag:typeof Ds=="string"}),react$1.exports.createElement(Ds,Hs))});return ks.displayName=Ss!==void 0?Ss:"Styled("+(typeof _s=="string"?_s:_s.displayName||_s.name||"Component")+")",ks.defaultProps=ga.defaultProps,ks.__emotion_real=ks,ks.__emotion_base=_s,ks.__emotion_styles=Is,ks.__emotion_forwardProp=Es,Object.defineProperty(ks,"toString",{value:function(){return"."+Ms}}),ks.withComponent=function($s,Os){return ca($s,_extends({},ya,Os,{shouldForwardProp:composeShouldForwardProps(ks,Os,!0)})).apply(void 0,Is)},ks}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(ca){newStyled[ca]=newStyled(ca)});var emStyled=newStyled;/** @license MUI v5.6.1
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(ca,ga){return emStyled(ca,ga)}function merge(ca,ga){return ga?deepmerge(ca,ga,{clone:!1}):ca}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:ca=>`@media (min-width:${values[ca]}px)`};function handleBreakpoints(ca,ga,ya){const _a=ca.theme||{};if(Array.isArray(ga)){const Ss=_a.breakpoints||defaultBreakpoints;return ga.reduce((Ms,Es,Cs)=>(Ms[Ss.up(Ss.keys[Cs])]=ya(ga[Cs]),Ms),{})}if(typeof ga=="object"){const Ss=_a.breakpoints||defaultBreakpoints;return Object.keys(ga).reduce((Ms,Es)=>{if(Object.keys(Ss.values||values).indexOf(Es)!==-1){const Cs=Ss.up(Es);Ms[Cs]=ya(ga[Es],Es)}else{const Cs=Es;Ms[Cs]=ga[Cs]}return Ms},{})}return ya(ga)}function createEmptyBreakpointObject(ca={}){var ga;return(ca==null||(ga=ca.keys)==null?void 0:ga.reduce((_a,_s)=>{const Ss=ca.up(_s);return _a[Ss]={},_a},{}))||{}}function removeUnusedBreakpoints(ca,ga){return ca.reduce((ya,_a)=>{const _s=ya[_a];return(!_s||Object.keys(_s).length===0)&&delete ya[_a],ya},ga)}function getPath(ca,ga){if(!ga||typeof ga!="string")return null;if(ca&&ca.vars){const ya=`vars.${ga}`.split(".").reduce((_a,_s)=>_a&&_a[_s]?_a[_s]:null,ca);if(ya!=null)return ya}return ga.split(".").reduce((ya,_a)=>ya&&ya[_a]!=null?ya[_a]:null,ca)}function getValue$1(ca,ga,ya,_a=ya){let _s;return typeof ca=="function"?_s=ca(ya):Array.isArray(ca)?_s=ca[ya]||_a:_s=getPath(ca,ya)||_a,ga&&(_s=ga(_s)),_s}function style$1(ca){const{prop:ga,cssProperty:ya=ca.prop,themeKey:_a,transform:_s}=ca,Ss=Ms=>{if(Ms[ga]==null)return null;const Es=Ms[ga],Cs=Ms.theme,Ts=getPath(Cs,_a)||{};return handleBreakpoints(Ms,Es,Is=>{let Ps=getValue$1(Ts,_s,Is);return Is===Ps&&typeof Is=="string"&&(Ps=getValue$1(Ts,_s,`${ga}${Is==="default"?"":capitalize(Is)}`,Is)),ya===!1?Ps:{[ya]:Ps}})};return Ss.propTypes={},Ss.filterProps=[ga],Ss}function compose(...ca){const ga=ca.reduce((_a,_s)=>(_s.filterProps.forEach(Ss=>{_a[Ss]=_s}),_a),{}),ya=_a=>Object.keys(_a).reduce((_s,Ss)=>ga[Ss]?merge(_s,ga[Ss](_a)):_s,{});return ya.propTypes={},ya.filterProps=ca.reduce((_a,_s)=>_a.concat(_s.filterProps),[]),ya}function memoize(ca){const ga={};return ya=>(ga[ya]===void 0&&(ga[ya]=ca(ya)),ga[ya])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(ca=>{if(ca.length>2)if(aliases[ca])ca=aliases[ca];else return[ca];const[ga,ya]=ca.split(""),_a=properties[ga],_s=directions[ya]||"";return Array.isArray(_s)?_s.map(Ss=>_a+Ss):[_a+_s]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],spacingKeys=[...marginKeys,...paddingKeys];function createUnaryUnit(ca,ga,ya,_a){var _s;const Ss=(_s=getPath(ca,ga))!=null?_s:ya;return typeof Ss=="number"?Ms=>typeof Ms=="string"?Ms:Ss*Ms:Array.isArray(Ss)?Ms=>typeof Ms=="string"?Ms:Ss[Ms]:typeof Ss=="function"?Ss:()=>{}}function createUnarySpacing(ca){return createUnaryUnit(ca,"spacing",8)}function getValue(ca,ga){if(typeof ga=="string"||ga==null)return ga;const ya=Math.abs(ga),_a=ca(ya);return ga>=0?_a:typeof _a=="number"?-_a:`-${_a}`}function getStyleFromPropValue(ca,ga){return ya=>ca.reduce((_a,_s)=>(_a[_s]=getValue(ga,ya),_a),{})}function resolveCssProperty(ca,ga,ya,_a){if(ga.indexOf(ya)===-1)return null;const _s=getCssProperties(ya),Ss=getStyleFromPropValue(_s,_a),Ms=ca[ya];return handleBreakpoints(ca,Ms,Ss)}function style(ca,ga){const ya=createUnarySpacing(ca.theme);return Object.keys(ca).map(_a=>resolveCssProperty(ca,ga,_a,ya)).reduce(merge,{})}function spacing(ca){return style(ca,spacingKeys)}spacing.propTypes={};spacing.filterProps=spacingKeys;function getBorder(ca){return typeof ca!="number"?ca:`${ca}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:getBorder}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:getBorder}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:getBorder}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:getBorder}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:getBorder}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=ca=>{if(ca.borderRadius!==void 0&&ca.borderRadius!==null){const ga=createUnaryUnit(ca.theme,"shape.borderRadius",4),ya=_a=>({borderRadius:getValue(ga,_a)});return handleBreakpoints(ca,ca.borderRadius,ya)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];const borders=compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);var borders$1=borders;const displayPrint=style$1({prop:"displayPrint",cssProperty:!1,transform:ca=>({"@media print":{display:ca}})}),displayRaw=style$1({prop:"display"}),overflow=style$1({prop:"overflow"}),textOverflow=style$1({prop:"textOverflow"}),visibility=style$1({prop:"visibility"}),whiteSpace=style$1({prop:"whiteSpace"});var display=compose(displayPrint,displayRaw,overflow,textOverflow,visibility,whiteSpace);const flexBasis=style$1({prop:"flexBasis"}),flexDirection=style$1({prop:"flexDirection"}),flexWrap=style$1({prop:"flexWrap"}),justifyContent=style$1({prop:"justifyContent"}),alignItems=style$1({prop:"alignItems"}),alignContent=style$1({prop:"alignContent"}),order=style$1({prop:"order"}),flex=style$1({prop:"flex"}),flexGrow=style$1({prop:"flexGrow"}),flexShrink=style$1({prop:"flexShrink"}),alignSelf=style$1({prop:"alignSelf"}),justifyItems=style$1({prop:"justifyItems"}),justifySelf=style$1({prop:"justifySelf"}),flexbox=compose(flexBasis,flexDirection,flexWrap,justifyContent,alignItems,alignContent,order,flex,flexGrow,flexShrink,alignSelf,justifyItems,justifySelf);var flexbox$1=flexbox;const gap=ca=>{if(ca.gap!==void 0&&ca.gap!==null){const ga=createUnaryUnit(ca.theme,"spacing",8),ya=_a=>({gap:getValue(ga,_a)});return handleBreakpoints(ca,ca.gap,ya)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=ca=>{if(ca.columnGap!==void 0&&ca.columnGap!==null){const ga=createUnaryUnit(ca.theme,"spacing",8),ya=_a=>({columnGap:getValue(ga,_a)});return handleBreakpoints(ca,ca.columnGap,ya)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=ca=>{if(ca.rowGap!==void 0&&ca.rowGap!==null){const ga=createUnaryUnit(ca.theme,"spacing",8),ya=_a=>({rowGap:getValue(ga,_a)});return handleBreakpoints(ca,ca.rowGap,ya)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"}),grid=compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);var grid$1=grid;const color=style$1({prop:"color",themeKey:"palette"}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette"}),palette=compose(color,bgcolor,backgroundColor);var palette$1=palette;const position=style$1({prop:"position"}),zIndex$2=style$1({prop:"zIndex",themeKey:"zIndex"}),top=style$1({prop:"top"}),right=style$1({prop:"right"}),bottom=style$1({prop:"bottom"}),left=style$1({prop:"left"});var positions=compose(position,zIndex$2,top,right,bottom,left);const boxShadow=style$1({prop:"boxShadow",themeKey:"shadows"});var shadows$2=boxShadow;function transform(ca){return ca<=1&&ca!==0?`${ca*100}%`:ca}const width=style$1({prop:"width",transform}),maxWidth=ca=>{if(ca.maxWidth!==void 0&&ca.maxWidth!==null){const ga=ya=>{var _a,_s,Ss;return{maxWidth:((_a=ca.theme)==null||(_s=_a.breakpoints)==null||(Ss=_s.values)==null?void 0:Ss[ya])||values[ya]||transform(ya)}};return handleBreakpoints(ca,ca.maxWidth,ga)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform}),height=style$1({prop:"height",transform}),maxHeight=style$1({prop:"maxHeight",transform}),minHeight=style$1({prop:"minHeight",transform});style$1({prop:"size",cssProperty:"width",transform});style$1({prop:"size",cssProperty:"height",transform});const boxSizing=style$1({prop:"boxSizing"}),sizing=compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);var sizing$1=sizing;const fontFamily=style$1({prop:"fontFamily",themeKey:"typography"}),fontSize=style$1({prop:"fontSize",themeKey:"typography"}),fontStyle=style$1({prop:"fontStyle",themeKey:"typography"}),fontWeight=style$1({prop:"fontWeight",themeKey:"typography"}),letterSpacing=style$1({prop:"letterSpacing"}),textTransform=style$1({prop:"textTransform"}),lineHeight=style$1({prop:"lineHeight"}),textAlign=style$1({prop:"textAlign"}),typographyVariant=style$1({prop:"typography",cssProperty:!1,themeKey:"typography"}),typography=compose(typographyVariant,fontFamily,fontSize,fontStyle,fontWeight,letterSpacing,lineHeight,textAlign,textTransform);var typography$1=typography;const filterPropsMapping={borders:borders$1.filterProps,display:display.filterProps,flexbox:flexbox$1.filterProps,grid:grid$1.filterProps,positions:positions.filterProps,palette:palette$1.filterProps,shadows:shadows$2.filterProps,sizing:sizing$1.filterProps,spacing:spacing.filterProps,typography:typography$1.filterProps},styleFunctionMapping={borders:borders$1,display,flexbox:flexbox$1,grid:grid$1,positions,palette:palette$1,shadows:shadows$2,sizing:sizing$1,spacing,typography:typography$1};Object.keys(filterPropsMapping).reduce((ca,ga)=>(filterPropsMapping[ga].forEach(ya=>{ca[ya]=styleFunctionMapping[ga]}),ca),{});function objectsHaveSameKeys(...ca){const ga=ca.reduce((_a,_s)=>_a.concat(Object.keys(_s)),[]),ya=new Set(ga);return ca.every(_a=>ya.size===Object.keys(_a).length)}function callIfFn(ca,ga){return typeof ca=="function"?ca(ga):ca}function unstable_createStyleFunctionSx(ca=styleFunctionMapping){const ga=Object.keys(ca).reduce((_s,Ss)=>(ca[Ss].filterProps.forEach(Ms=>{_s[Ms]=ca[Ss]}),_s),{});function ya(_s,Ss,Ms){const Es={[_s]:Ss,theme:Ms},Cs=ga[_s];return Cs?Cs(Es):{[_s]:Ss}}function _a(_s){const{sx:Ss,theme:Ms={}}=_s||{};if(!Ss)return null;function Es(Cs){let Ts=Cs;if(typeof Cs=="function")Ts=Cs(Ms);else if(typeof Cs!="object")return Cs;if(!Ts)return null;const Bs=createEmptyBreakpointObject(Ms.breakpoints),Is=Object.keys(Bs);let Ps=Bs;return Object.keys(Ts).forEach(Rs=>{const ks=callIfFn(Ts[Rs],Ms);if(ks!=null)if(typeof ks=="object")if(ga[Rs])Ps=merge(Ps,ya(Rs,ks,Ms));else{const $s=handleBreakpoints({theme:Ms},ks,Os=>({[Rs]:Os}));objectsHaveSameKeys($s,ks)?Ps[Rs]=_a({sx:ks,theme:Ms}):Ps=merge(Ps,$s)}else Ps=merge(Ps,ya(Rs,ks,Ms))}),removeUnusedBreakpoints(Is,Ps)}return Array.isArray(Ss)?Ss.map(Es):Es(Ss)}return _a}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];var defaultStyleFunctionSx=styleFunctionSx;const _excluded$8=["values","unit","step"],sortBreakpointsValues=ca=>{const ga=Object.keys(ca).map(ya=>({key:ya,val:ca[ya]}))||[];return ga.sort((ya,_a)=>ya.val-_a.val),ga.reduce((ya,_a)=>_extends({},ya,{[_a.key]:_a.val}),{})};function createBreakpoints(ca){const{values:ga={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:ya="px",step:_a=5}=ca,_s=_objectWithoutPropertiesLoose(ca,_excluded$8),Ss=sortBreakpointsValues(ga),Ms=Object.keys(Ss);function Es(Ps){return`@media (min-width:${typeof ga[Ps]=="number"?ga[Ps]:Ps}${ya})`}function Cs(Ps){return`@media (max-width:${(typeof ga[Ps]=="number"?ga[Ps]:Ps)-_a/100}${ya})`}function Ts(Ps,Rs){const ks=Ms.indexOf(Rs);return`@media (min-width:${typeof ga[Ps]=="number"?ga[Ps]:Ps}${ya}) and (max-width:${(ks!==-1&&typeof ga[Ms[ks]]=="number"?ga[Ms[ks]]:Rs)-_a/100}${ya})`}function Bs(Ps){return Ms.indexOf(Ps)+1<Ms.length?Ts(Ps,Ms[Ms.indexOf(Ps)+1]):Es(Ps)}function Is(Ps){const Rs=Ms.indexOf(Ps);return Rs===0?Es(Ms[1]):Rs===Ms.length-1?Cs(Ms[Rs]):Ts(Ps,Ms[Ms.indexOf(Ps)+1]).replace("@media","@media not all and")}return _extends({keys:Ms,values:Ss,up:Es,down:Cs,between:Ts,only:Bs,not:Is,unit:ya},_s)}const shape={borderRadius:4};var shape$1=shape;function createSpacing(ca=8){if(ca.mui)return ca;const ga=createUnarySpacing({spacing:ca}),ya=(..._a)=>(_a.length===0?[1]:_a).map(Ss=>{const Ms=ga(Ss);return typeof Ms=="number"?`${Ms}px`:Ms}).join(" ");return ya.mui=!0,ya}const _excluded$7=["breakpoints","palette","spacing","shape"];function createTheme$1(ca={},...ga){const{breakpoints:ya={},palette:_a={},spacing:_s,shape:Ss={}}=ca,Ms=_objectWithoutPropertiesLoose(ca,_excluded$7),Es=createBreakpoints(ya),Cs=createSpacing(_s);let Ts=deepmerge({breakpoints:Es,direction:"ltr",components:{},palette:_extends({mode:"light"},_a),spacing:Cs,shape:_extends({},shape$1,Ss)},Ms);return Ts=ga.reduce((Bs,Is)=>deepmerge(Bs,Is),Ts),Ts}const ThemeContext=react$1.exports.createContext(null);var ThemeContext$1=ThemeContext;function useTheme$2(){return react$1.exports.useContext(ThemeContext$1)}function isObjectEmpty(ca){return Object.keys(ca).length===0}function useTheme$1(ca=null){const ga=useTheme$2();return!ga||isObjectEmpty(ga)?ca:ga}const systemDefaultTheme$1=createTheme$1();function useTheme(ca=systemDefaultTheme$1){return useTheme$1(ca)}const _excluded$6=["variant"];function isEmpty$1(ca){return ca.length===0}function propsToClassKey(ca){const{variant:ga}=ca,ya=_objectWithoutPropertiesLoose(ca,_excluded$6);let _a=ga||"";return Object.keys(ya).sort().forEach(_s=>{_s==="color"?_a+=isEmpty$1(_a)?ca[_s]:capitalize(ca[_s]):_a+=`${isEmpty$1(_a)?_s:capitalize(_s)}${capitalize(ca[_s].toString())}`}),_a}const _excluded$5=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(ca){return Object.keys(ca).length===0}const getStyleOverrides=(ca,ga)=>ga.components&&ga.components[ca]&&ga.components[ca].styleOverrides?ga.components[ca].styleOverrides:null,getVariantStyles=(ca,ga)=>{let ya=[];ga&&ga.components&&ga.components[ca]&&ga.components[ca].variants&&(ya=ga.components[ca].variants);const _a={};return ya.forEach(_s=>{const Ss=propsToClassKey(_s.props);_a[Ss]=_s.style}),_a},variantsResolver=(ca,ga,ya,_a)=>{var _s,Ss;const{ownerState:Ms={}}=ca,Es=[],Cs=ya==null||(_s=ya.components)==null||(Ss=_s[_a])==null?void 0:Ss.variants;return Cs&&Cs.forEach(Ts=>{let Bs=!0;Object.keys(Ts.props).forEach(Is=>{Ms[Is]!==Ts.props[Is]&&ca[Is]!==Ts.props[Is]&&(Bs=!1)}),Bs&&Es.push(ga[propsToClassKey(Ts.props)])}),Es};function shouldForwardProp(ca){return ca!=="ownerState"&&ca!=="theme"&&ca!=="sx"&&ca!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(ca={}){const{defaultTheme:ga=systemDefaultTheme,rootShouldForwardProp:ya=shouldForwardProp,slotShouldForwardProp:_a=shouldForwardProp,styleFunctionSx:_s=defaultStyleFunctionSx}=ca;return(Ss,Ms={})=>{const{name:Es,slot:Cs,skipVariantsResolver:Ts,skipSx:Bs,overridesResolver:Is}=Ms,Ps=_objectWithoutPropertiesLoose(Ms,_excluded$5),Rs=Ts!==void 0?Ts:Cs&&Cs!=="Root"||!1,ks=Bs||!1;let $s,Os=shouldForwardProp;Cs==="Root"?Os=ya:Cs&&(Os=_a);const Ls=styled$2(Ss,_extends({shouldForwardProp:Os,label:$s},Ps)),Ds=(Fs,...Ns)=>{const Vs=Ns?Ns.map(Hs=>typeof Hs=="function"&&Hs.__emotion_real!==Hs?Qs=>{let{theme:js}=Qs,Zs=_objectWithoutPropertiesLoose(Qs,_excluded2);return Hs(_extends({theme:isEmpty(js)?ga:js},Zs))}:Hs):[];let Gs=Fs;Es&&Is&&Vs.push(Hs=>{const Qs=isEmpty(Hs.theme)?ga:Hs.theme,js=getStyleOverrides(Es,Qs);if(js){const Zs={};return Object.entries(js).forEach(([Ks,Ys])=>{Zs[Ks]=typeof Ys=="function"?Ys(Hs):Ys}),Is(Hs,Zs)}return null}),Es&&!Rs&&Vs.push(Hs=>{const Qs=isEmpty(Hs.theme)?ga:Hs.theme;return variantsResolver(Hs,getVariantStyles(Es,Qs),Qs,Es)}),ks||Vs.push(Hs=>{const Qs=isEmpty(Hs.theme)?ga:Hs.theme;return _s(_extends({},Hs,{theme:Qs}))});const Us=Vs.length-Ns.length;if(Array.isArray(Fs)&&Us>0){const Hs=new Array(Us).fill("");Gs=[...Fs,...Hs],Gs.raw=[...Fs.raw,...Hs]}else typeof Fs=="function"&&Fs.__emotion_real!==Fs&&(Gs=Hs=>{let{theme:Qs}=Hs,js=_objectWithoutPropertiesLoose(Hs,_excluded3);return Fs(_extends({theme:isEmpty(Qs)?ga:Qs},js))});return Ls(Gs,...Vs)};return Ls.withConfig&&(Ds.withConfig=Ls.withConfig),Ds}}function getThemeProps(ca){const{theme:ga,name:ya,props:_a}=ca;return!ga||!ga.components||!ga.components[ya]||!ga.components[ya].defaultProps?_a:resolveProps(ga.components[ya].defaultProps,_a)}function useThemeProps$1({props:ca,name:ga,defaultTheme:ya}){const _a=useTheme(ya);return getThemeProps({theme:_a,name:ga,props:ca})}function clamp(ca,ga=0,ya=1){return Math.min(Math.max(ga,ca),ya)}function hexToRgb(ca){ca=ca.slice(1);const ga=new RegExp(`.{1,${ca.length>=6?2:1}}`,"g");let ya=ca.match(ga);return ya&&ya[0].length===1&&(ya=ya.map(_a=>_a+_a)),ya?`rgb${ya.length===4?"a":""}(${ya.map((_a,_s)=>_s<3?parseInt(_a,16):Math.round(parseInt(_a,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(ca){if(ca.type)return ca;if(ca.charAt(0)==="#")return decomposeColor(hexToRgb(ca));const ga=ca.indexOf("("),ya=ca.substring(0,ga);if(["rgb","rgba","hsl","hsla","color"].indexOf(ya)===-1)throw new Error(formatMuiErrorMessage(9,ca));let _a=ca.substring(ga+1,ca.length-1),_s;if(ya==="color"){if(_a=_a.split(" "),_s=_a.shift(),_a.length===4&&_a[3].charAt(0)==="/"&&(_a[3]=_a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(_s)===-1)throw new Error(formatMuiErrorMessage(10,_s))}else _a=_a.split(",");return _a=_a.map(Ss=>parseFloat(Ss)),{type:ya,values:_a,colorSpace:_s}}function recomposeColor(ca){const{type:ga,colorSpace:ya}=ca;let{values:_a}=ca;return ga.indexOf("rgb")!==-1?_a=_a.map((_s,Ss)=>Ss<3?parseInt(_s,10):_s):ga.indexOf("hsl")!==-1&&(_a[1]=`${_a[1]}%`,_a[2]=`${_a[2]}%`),ga.indexOf("color")!==-1?_a=`${ya} ${_a.join(" ")}`:_a=`${_a.join(", ")}`,`${ga}(${_a})`}function hslToRgb(ca){ca=decomposeColor(ca);const{values:ga}=ca,ya=ga[0],_a=ga[1]/100,_s=ga[2]/100,Ss=_a*Math.min(_s,1-_s),Ms=(Ts,Bs=(Ts+ya/30)%12)=>_s-Ss*Math.max(Math.min(Bs-3,9-Bs,1),-1);let Es="rgb";const Cs=[Math.round(Ms(0)*255),Math.round(Ms(8)*255),Math.round(Ms(4)*255)];return ca.type==="hsla"&&(Es+="a",Cs.push(ga[3])),recomposeColor({type:Es,values:Cs})}function getLuminance(ca){ca=decomposeColor(ca);let ga=ca.type==="hsl"?decomposeColor(hslToRgb(ca)).values:ca.values;return ga=ga.map(ya=>(ca.type!=="color"&&(ya/=255),ya<=.03928?ya/12.92:((ya+.055)/1.055)**2.4)),Number((.2126*ga[0]+.7152*ga[1]+.0722*ga[2]).toFixed(3))}function getContrastRatio(ca,ga){const ya=getLuminance(ca),_a=getLuminance(ga);return(Math.max(ya,_a)+.05)/(Math.min(ya,_a)+.05)}function darken(ca,ga){if(ca=decomposeColor(ca),ga=clamp(ga),ca.type.indexOf("hsl")!==-1)ca.values[2]*=1-ga;else if(ca.type.indexOf("rgb")!==-1||ca.type.indexOf("color")!==-1)for(let ya=0;ya<3;ya+=1)ca.values[ya]*=1-ga;return recomposeColor(ca)}function lighten(ca,ga){if(ca=decomposeColor(ca),ga=clamp(ga),ca.type.indexOf("hsl")!==-1)ca.values[2]+=(100-ca.values[2])*ga;else if(ca.type.indexOf("rgb")!==-1)for(let ya=0;ya<3;ya+=1)ca.values[ya]+=(255-ca.values[ya])*ga;else if(ca.type.indexOf("color")!==-1)for(let ya=0;ya<3;ya+=1)ca.values[ya]+=(1-ca.values[ya])*ga;return recomposeColor(ca)}function createMixins(ca,ga,ya){return _extends({toolbar:{minHeight:56,[`${ca.up("xs")} and (orientation: landscape)`]:{minHeight:48},[ca.up("sm")]:{minHeight:64}}},ya)}const common={black:"#000",white:"#fff"};var common$1=common;const grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var grey$1=grey;const purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var purple$1=purple;const red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var red$1=red;const orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var orange$1=orange;const blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var blue$1=blue;const lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var lightBlue$1=lightBlue;const green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var green$1=green;const _excluded$4=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(ca,ga,ya,_a){const _s=_a.light||_a,Ss=_a.dark||_a*1.5;ca[ga]||(ca.hasOwnProperty(ya)?ca[ga]=ca[ya]:ga==="light"?ca.light=lighten(ca.main,_s):ga==="dark"&&(ca.dark=darken(ca.main,Ss)))}function getDefaultPrimary(ca="light"){return ca==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(ca="light"){return ca==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(ca="light"){return ca==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(ca="light"){return ca==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(ca="light"){return ca==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(ca="light"){return ca==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(ca){const{mode:ga="light",contrastThreshold:ya=3,tonalOffset:_a=.2}=ca,_s=_objectWithoutPropertiesLoose(ca,_excluded$4),Ss=ca.primary||getDefaultPrimary(ga),Ms=ca.secondary||getDefaultSecondary(ga),Es=ca.error||getDefaultError(ga),Cs=ca.info||getDefaultInfo(ga),Ts=ca.success||getDefaultSuccess(ga),Bs=ca.warning||getDefaultWarning(ga);function Is($s){return getContrastRatio($s,dark.text.primary)>=ya?dark.text.primary:light.text.primary}const Ps=({color:$s,name:Os,mainShade:Ls=500,lightShade:Ds=300,darkShade:Fs=700})=>{if($s=_extends({},$s),!$s.main&&$s[Ls]&&($s.main=$s[Ls]),!$s.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Os?` (${Os})`:"",Ls));if(typeof $s.main!="string")throw new Error(formatMuiErrorMessage(12,Os?` (${Os})`:"",JSON.stringify($s.main)));return addLightOrDark($s,"light",Ds,_a),addLightOrDark($s,"dark",Fs,_a),$s.contrastText||($s.contrastText=Is($s.main)),$s},Rs={dark,light};return deepmerge(_extends({common:common$1,mode:ga,primary:Ps({color:Ss,name:"primary"}),secondary:Ps({color:Ms,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Ps({color:Es,name:"error"}),warning:Ps({color:Bs,name:"warning"}),info:Ps({color:Cs,name:"info"}),success:Ps({color:Ts,name:"success"}),grey:grey$1,contrastThreshold:ya,getContrastText:Is,augmentColor:Ps,tonalOffset:_a},Rs[ga]),_s)}const _excluded$3=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(ca){return Math.round(ca*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(ca,ga){const ya=typeof ga=="function"?ga(ca):ga,{fontFamily:_a=defaultFontFamily,fontSize:_s=14,fontWeightLight:Ss=300,fontWeightRegular:Ms=400,fontWeightMedium:Es=500,fontWeightBold:Cs=700,htmlFontSize:Ts=16,allVariants:Bs,pxToRem:Is}=ya,Ps=_objectWithoutPropertiesLoose(ya,_excluded$3),Rs=_s/14,ks=Is||(Ls=>`${Ls/Ts*Rs}rem`),$s=(Ls,Ds,Fs,Ns,Vs)=>_extends({fontFamily:_a,fontWeight:Ls,fontSize:ks(Ds),lineHeight:Fs},_a===defaultFontFamily?{letterSpacing:`${round(Ns/Ds)}em`}:{},Vs,Bs),Os={h1:$s(Ss,96,1.167,-1.5),h2:$s(Ss,60,1.2,-.5),h3:$s(Ms,48,1.167,0),h4:$s(Ms,34,1.235,.25),h5:$s(Ms,24,1.334,0),h6:$s(Es,20,1.6,.15),subtitle1:$s(Ms,16,1.75,.15),subtitle2:$s(Es,14,1.57,.1),body1:$s(Ms,16,1.5,.15),body2:$s(Ms,14,1.43,.15),button:$s(Es,14,1.75,.4,caseAllCaps),caption:$s(Ms,12,1.66,.4),overline:$s(Ms,12,2.66,1,caseAllCaps)};return deepmerge(_extends({htmlFontSize:Ts,pxToRem:ks,fontFamily:_a,fontSize:_s,fontWeightLight:Ss,fontWeightRegular:Ms,fontWeightMedium:Es,fontWeightBold:Cs},Os),Ps,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...ca){return[`${ca[0]}px ${ca[1]}px ${ca[2]}px ${ca[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${ca[4]}px ${ca[5]}px ${ca[6]}px ${ca[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${ca[8]}px ${ca[9]}px ${ca[10]}px ${ca[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)];var shadows$1=shadows;const _excluded$2=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(ca){return`${Math.round(ca)}ms`}function getAutoHeightDuration(ca){if(!ca)return 0;const ga=ca/36;return Math.round((4+15*ga**.25+ga/5)*10)}function createTransitions(ca){const ga=_extends({},easing,ca.easing),ya=_extends({},duration,ca.duration);return _extends({getAutoHeightDuration,create:(_s=["all"],Ss={})=>{const{duration:Ms=ya.standard,easing:Es=ga.easeInOut,delay:Cs=0}=Ss;return _objectWithoutPropertiesLoose(Ss,_excluded$2),(Array.isArray(_s)?_s:[_s]).map(Ts=>`${Ts} ${typeof Ms=="string"?Ms:formatMs(Ms)} ${Es} ${typeof Cs=="string"?Cs:formatMs(Cs)}`).join(",")}},ca,{easing:ga,duration:ya})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var zIndex$1=zIndex;const _excluded$1=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(ca={},...ga){const{mixins:ya={},palette:_a={},transitions:_s={},typography:Ss={}}=ca,Ms=_objectWithoutPropertiesLoose(ca,_excluded$1),Es=createPalette(_a),Cs=createTheme$1(ca);let Ts=deepmerge(Cs,{mixins:createMixins(Cs.breakpoints,Cs.spacing,ya),palette:Es,shadows:shadows$1.slice(),typography:createTypography(Es,Ss),transitions:createTransitions(_s),zIndex:_extends({},zIndex$1)});return Ts=deepmerge(Ts,Ms),Ts=ga.reduce((Bs,Is)=>deepmerge(Bs,Is),Ts),Ts}const defaultTheme=createTheme();var defaultTheme$1=defaultTheme;function useThemeProps({props:ca,name:ga}){return useThemeProps$1({props:ca,name:ga,defaultTheme:defaultTheme$1})}const rootShouldForwardProp=ca=>shouldForwardProp(ca)&&ca!=="classes",styled=createStyled({defaultTheme:defaultTheme$1,rootShouldForwardProp});var styled$1=styled;function getSvgIconUtilityClass(ca){return generateUtilityClass("MuiSvgIcon",ca)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=ca=>{const{color:ga,fontSize:ya,classes:_a}=ca,_s={root:["root",ga!=="inherit"&&`color${capitalize(ga)}`,`fontSize${capitalize(ya)}`]};return composeClasses(_s,getSvgIconUtilityClass,_a)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(ca,ga)=>{const{ownerState:ya}=ca;return[ga.root,ya.color!=="inherit"&&ga[`color${capitalize(ya.color)}`],ga[`fontSize${capitalize(ya.fontSize)}`]]}})(({theme:ca,ownerState:ga})=>{var ya,_a,_s,Ss,Ms,Es,Cs,Ts,Bs,Is,Ps,Rs,ks,$s,Os,Ls,Ds;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(ya=ca.transitions)==null||(_a=ya.create)==null?void 0:_a.call(ya,"fill",{duration:(_s=ca.transitions)==null||(Ss=_s.duration)==null?void 0:Ss.shorter}),fontSize:{inherit:"inherit",small:((Ms=ca.typography)==null||(Es=Ms.pxToRem)==null?void 0:Es.call(Ms,20))||"1.25rem",medium:((Cs=ca.typography)==null||(Ts=Cs.pxToRem)==null?void 0:Ts.call(Cs,24))||"1.5rem",large:((Bs=ca.typography)==null||(Is=Bs.pxToRem)==null?void 0:Is.call(Bs,35))||"2.1875"}[ga.fontSize],color:(Ps=(Rs=ca.palette)==null||(ks=Rs[ga.color])==null?void 0:ks.main)!=null?Ps:{action:($s=ca.palette)==null||(Os=$s.action)==null?void 0:Os.active,disabled:(Ls=ca.palette)==null||(Ds=Ls.action)==null?void 0:Ds.disabled,inherit:void 0}[ga.color]}}),SvgIcon=react$1.exports.forwardRef(function ca(ga,ya){const _a=useThemeProps({props:ga,name:"MuiSvgIcon"}),{children:_s,className:Ss,color:Ms="inherit",component:Es="svg",fontSize:Cs="medium",htmlColor:Ts,inheritViewBox:Bs=!1,titleAccess:Is,viewBox:Ps="0 0 24 24"}=_a,Rs=_objectWithoutPropertiesLoose(_a,_excluded),ks=_extends({},_a,{color:Ms,component:Es,fontSize:Cs,instanceFontSize:ga.fontSize,inheritViewBox:Bs,viewBox:Ps}),$s={};Bs||($s.viewBox=Ps);const Os=useUtilityClasses(ks);return jsxs(SvgIconRoot,_extends({as:Es,className:clsx(Os.root,Ss),ownerState:ks,focusable:"false",color:Ts,"aria-hidden":Is?void 0:!0,role:Is?"img":void 0,ref:ya},$s,Rs,{children:[_s,Is?jsx("title",{children:Is}):null]}))});SvgIcon.muiName="SvgIcon";var SvgIcon$1=SvgIcon;function createSvgIcon(ca,ga){const ya=(_a,_s)=>jsx(SvgIcon$1,_extends({"data-testid":`${ga}Icon`,ref:_s},_a,{children:ca}));return ya.muiName=SvgIcon$1.muiName,react$1.exports.memo(react$1.exports.forwardRef(ya))}const unstable_ClassNameGenerator={configure:ca=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),ClassNameGenerator$1.configure(ca)}};var utils=Object.freeze(Object.defineProperty({__proto__:null,unstable_ClassNameGenerator,capitalize,createChainedFunction,createSvgIcon,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(utils);(function(ca){Object.defineProperty(ca,"__esModule",{value:!0}),Object.defineProperty(ca,"default",{enumerable:!0,get:function(){return ga.createSvgIcon}});var ga=require$$0})(createSvgIcon$1);var require$$2=getAugmentedNamespace(jsxRuntime),_interopRequireDefault$4=interopRequireDefault.exports;Object.defineProperty(GridOn,"__esModule",{value:!0});var default_1$4=GridOn.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(createSvgIcon$1),_jsxRuntime$4=require$$2,_default$4=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}),"GridOn");default_1$4=GridOn.default=_default$4;var Grid4x4={},_interopRequireDefault$3=interopRequireDefault.exports;Object.defineProperty(Grid4x4,"__esModule",{value:!0});var default_1$3=Grid4x4.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(createSvgIcon$1),_jsxRuntime$3=require$$2,_default$3=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M22 7V5h-3V2h-2v3h-4V2h-2v3H7V2H5v3H2v2h3v4H2v2h3v4H2v2h3v3h2v-3h4v3h2v-3h4v3h2v-3h3v-2h-3v-4h3v-2h-3V7h3zM7 7h4v4H7V7zm0 10v-4h4v4H7zm10 0h-4v-4h4v4zm0-6h-4V7h4v4z"}),"Grid4x4");default_1$3=Grid4x4.default=_default$3;var ViewInAr={},_interopRequireDefault$2=interopRequireDefault.exports;Object.defineProperty(ViewInAr,"__esModule",{value:!0});var default_1$2=ViewInAr.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(createSvgIcon$1),_jsxRuntime$2=require$$2,_default$2=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"}),"ViewInAr");default_1$2=ViewInAr.default=_default$2;var DirectionsRun={},_interopRequireDefault$1=interopRequireDefault.exports;Object.defineProperty(DirectionsRun,"__esModule",{value:!0});var default_1$1=DirectionsRun.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(createSvgIcon$1),_jsxRuntime$1=require$$2,_default$1=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"}),"DirectionsRun");default_1$1=DirectionsRun.default=_default$1;var DirectionsWalk={},_interopRequireDefault=interopRequireDefault.exports;Object.defineProperty(DirectionsWalk,"__esModule",{value:!0});var default_1=DirectionsWalk.default=void 0,_createSvgIcon=_interopRequireDefault(createSvgIcon$1),_jsxRuntime=require$$2,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"}),"DirectionsWalk");default_1=DirectionsWalk.default=_default;var index="";const enableModelWireframe=(ca,ga=!0)=>{if(!ca.model.loaded)return!1;const ya=_a=>{!_a||_a.forEach(_s=>{_s.children&&ya(_s.children),_s.material&&(_s.material.forEach(Ss=>{Ss.wireframe=ga}),_s.needsRender=!0)})};return ya(ca.model.children),ca.needsRender=!0,!0};function Toolbar(){const[ca,ga]=useFiveState(),[ya,_a]=react$1.exports.useState(!1),_s=unsafe__useFiveInstance();return jsx("div",{className:"toolbar",children:jsxs("ul",{className:"toolbar-items",children:[jsxs("li",{className:"toolbar-item",onClick:()=>{ga({mode:Five.Mode.Floorplan}),enableModelWireframe(_s,!ya),_a(!ya)},children:[ya?jsx(default_1$4,{}):jsx(default_1$3,{}),jsx("span",{className:"toolbar-txt",children:"\u4E09\u7EF4\u7F51\u683C"})]}),jsxs("li",{className:"toolbar-item",onClick:()=>ga({mode:Five.Mode.Floorplan}),children:[jsx(default_1$2,{}),jsx("span",{className:"toolbar-txt",children:"\u7A7A\u95F4\u603B\u89C8"})]}),jsxs("li",{className:"toolbar-item",onClick:()=>ga({mode:Five.Mode.Panorama}),children:[jsx(default_1,{}),jsx("span",{className:"toolbar-txt",children:"\u5168\u666F\u6F2B\u6E38"})]}),jsxs("li",{className:"toolbar-item",onClick:()=>ga({mode:Five.Mode.Model}),children:[jsx(default_1$1,{}),jsx("span",{className:"toolbar-txt",children:"\u6A21\u578B\u6E38\u8D70"})]})]})})}function App(){return jsxs(Fragment,{children:[jsx(CubePos,{}),jsx(Toolbar,{})]})}const FiveProvider=createFiveProvider({backgroundColor:16056318,imageOptions:{size:512},textureOptions:{size:512}}),Main=()=>jsxs(FiveProvider,{initialWork:parseWork(work),ref:ca=>Object.assign(window,{$five:ca==null?void 0:ca.five}),children:[jsx(ResponsiveFiveCanvas,{}),jsx(App,{})]}),container=document.getElementById("root"),root=createRoot(container);root.render(jsx(Main,{}));
